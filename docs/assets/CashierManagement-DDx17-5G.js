import{r,j as e,F as J}from"./index-DX6JokvH.js";function V({title:d,titleId:c,...o},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":c},o),d?r.createElement("title",{id:c},d):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Z=r.forwardRef(V),B=[{value:1e3,label:"$1000"},{value:500,label:"$500"},{value:100,label:"$100"},{value:50,label:"$50"},{value:10,label:"$10"},{value:5,label:"$5"},{value:1,label:"$1"}];function H({title:d,onTotalChange:c,savedKey:o}){const[i,x]=r.useState(()=>{const t=localStorage.getItem(o);return t?JSON.parse(t):{}}),[u,f]=r.useState(0);r.useEffect(()=>{const t=Object.entries(i).reduce((a,[m,N])=>a+parseInt(m)*(parseInt(N)||0),0);f(t),c(t)},[i,c]),r.useEffect(()=>{localStorage.setItem(o,JSON.stringify(i))},[i,o]);const j=(t,a)=>{a<0&&(a=0),x(m=>({...m,[t]:a}))},b=()=>{x({}),localStorage.removeItem(o)};return e.jsxs("div",{className:"bg-surface rounded-xl p-6 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:d}),e.jsx("div",{className:"space-y-4",children:B.map(({value:t,label:a})=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"w-20 text-text-secondary",children:a}),e.jsx("input",{type:"number",min:"0",value:i[t]||"",onChange:m=>j(t,parseInt(m.target.value)),className:"input-field flex-1",placeholder:"0",inputMode:"decimal"}),e.jsxs("span",{className:"w-28 text-right text-text-secondary",children:["$",((i[t]||0)*t).toLocaleString()]})]},t))}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 text-center",children:[e.jsx("span",{className:"text-text-secondary",children:"總計："}),e.jsxs("span",{className:"text-xl font-bold ml-2",children:["$",u.toLocaleString()]})]}),e.jsx("button",{onClick:b,className:`w-full px-4 py-2 bg-white/5 hover:bg-white/10 
                     text-text-secondary rounded-lg transition-colors`,children:"清除"})]})]})}function U({title:d,titleId:c,...o},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":c},o),d?r.createElement("title",{id:c},d):null,r.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const z=r.forwardRef(U);function K({title:d,titleId:c,...o},i){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":c},o),d?r.createElement("title",{id:c},d):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const D=r.forwardRef(K),Y=[{code:"USD",name:"美元"},{code:"EUR",name:"歐元"},{code:"JPY",name:"日圓"},{code:"CNY",name:"人民幣"},{code:"HKD",name:"港幣"}];function X({onTotalChange:d,savedKey:c}){const[o,i]=r.useState(()=>{const t=localStorage.getItem(c);return t?JSON.parse(t):[]}),[x,u]=r.useState({currency:"USD",amount:"",rate:""});r.useEffect(()=>{localStorage.setItem(c,JSON.stringify(o))},[o,c]),r.useEffect(()=>{const t=o.reduce((a,m)=>a+m.localValue,0);d(t)},[o,d]);const f=t=>{if(t.preventDefault(),!x.amount||!x.rate)return;const a=Math.floor(x.amount*x.rate),m={...x,localValue:a,id:Date.now()};i(N=>[...N,m]),u(N=>({...N,amount:"",rate:""}))},j=t=>{i(a=>a.filter(m=>m.id!==t))},b=()=>{i([]),localStorage.removeItem(c)};return e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"card-header",children:"外幣計算"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("select",{value:x.currency,onChange:t=>u(a=>({...a,currency:t.target.value})),className:"input-field w-full",children:Y.map(t=>e.jsxs("option",{value:t.code,children:[t.code," (",t.name,")"]},t.code))}),e.jsx("input",{type:"number",value:x.amount,onChange:t=>u(a=>({...a,amount:parseFloat(t.target.value)})),className:"input-field w-full",placeholder:"金額",step:"0.01",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"}),e.jsx("input",{type:"number",value:x.rate,onChange:t=>u(a=>({...a,rate:parseFloat(t.target.value)})),className:"input-field w-full",placeholder:"匯率",step:"0.01",inputMode:"decimal",pattern:"[0-9]*[.,]?[0-9]*"}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"新增"})]}),e.jsx("div",{className:"mt-6 space-y-2 max-h-48 overflow-y-auto",children:o.map(t=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 flex justify-between items-center group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[t.currency," ",t.amount.toFixed(2)," @ ",t.rate]}),e.jsx("button",{onClick:()=>j(t.id),className:"text-text-secondary hover:text-red-400 transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(D,{className:"w-5 h-5"})})]}),e.jsxs("span",{className:"text-text-secondary",children:["$",t.localValue.toLocaleString()]})]},t.id))}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"bg-primary/10 rounded-lg p-4 text-center",children:[e.jsx("span",{className:"text-text-secondary",children:"總計："}),e.jsxs("span",{className:"text-xl font-bold ml-2",children:["$",o.reduce((t,a)=>t+a.localValue,0).toLocaleString()]})]}),e.jsx("button",{onClick:b,className:`w-full px-4 py-2 bg-white/5 hover:bg-white/10 
                    text-text-secondary rounded-lg transition-colors`,children:"清除全部"})]})]})}function q({cashierTotal:d,drawerTotal:c,foreignTotal:o,posAmount:i,onPosAmountChange:x,foreignTransactions:u}){const[f,j]=r.useState(!1),[b,t]=r.useState(!1),a=d+c+o-2e4,m=a-i,N=d+c-2e4-o,w=()=>m===0?{containerClass:"bg-gradient-to-r from-green-500/10 to-emerald-500/10 border-green-500/20",textClass:"text-green-400",icon:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"w-6 h-6 text-green-400 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-green-400/20 rounded-full blur-lg animate-pulse"})]}),message:"金額正確"}:m>0?{containerClass:"bg-yellow-500/10 border border-yellow-500/20",textClass:"text-yellow-400",icon:e.jsx(D,{className:"w-6 h-6 text-yellow-400"}),message:"金額過多"}:{containerClass:"bg-red-500/10 border border-red-500/20",textClass:"text-red-400",icon:e.jsx(D,{className:"w-6 h-6 text-red-400"}),message:"金額不足"},S=()=>{j(!0)},y=w();return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"card-header mb-0",children:"日結匯總"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"晚班模式"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:b,onChange:v=>t(v.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-background/50 rounded-lg p-4 backdrop-blur-sm",children:[e.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:"POS機金額"}),e.jsx("input",{type:"number",value:i||"",onChange:v=>{x(parseFloat(v.target.value)||0),j(!1)},className:"input-field w-full mb-3",placeholder:"請輸入POS機金額",inputMode:"decimal"}),e.jsx("button",{onClick:S,className:"btn-primary w-full",children:"計算"})]}),e.jsxs("div",{className:"bg-background/50 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"summary-label",children:"收銀機現金"}),e.jsxs("span",{className:"summary-value",children:["$",d.toLocaleString()]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"summary-label",children:"抽屜現金"}),e.jsxs("span",{className:"summary-value",children:["$",c.toLocaleString()]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"summary-label",children:"外幣總額"}),e.jsxs("span",{className:"summary-value",children:["$",o.toLocaleString()]})]}),e.jsxs("div",{className:"summary-row",children:[e.jsx("span",{className:"summary-label text-red-400",children:"基本金額"}),e.jsx("span",{className:"summary-value text-red-400",children:"-$20,000"})]}),e.jsx("div",{className:"bg-surface/50 p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-semibold",children:"實際現金收入"}),e.jsxs("span",{className:"text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["$",a.toLocaleString()]})]})})]}),f&&e.jsx("div",{className:`rounded-lg p-4 backdrop-blur-sm ${y.containerClass}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"差額"}),y.icon,e.jsx("span",{className:`text-sm ${y.textClass}`,children:y.message})]}),e.jsxs("span",{className:`text-xl font-bold ${y.textClass}`,children:["$",m.toLocaleString()]})]})}),b&&e.jsxs("div",{className:"bg-background/50 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-surface/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-semibold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"需上繳金額"}),e.jsx("div",{className:"h-4 w-4 rounded-full bg-gradient-to-r from-primary to-secondary animate-pulse opacity-75"})]}),e.jsx("div",{className:"text-xs px-2 py-1 rounded-full bg-primary/10 text-primary",children:"晚班結算"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"relative bg-surface/30 rounded-xl p-4 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-secondary/5"}),e.jsxs("div",{className:"relative flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary font-medium",children:"台幣"}),e.jsxs("span",{className:"text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["$",N.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-surface/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-text-secondary font-medium",children:"外幣"}),!(u!=null&&u.length)&&e.jsx("span",{className:"text-sm text-text-secondary",children:"無外幣紀錄"})]}),(u==null?void 0:u.length)>0&&e.jsx("div",{className:"bg-background/30 rounded-lg p-2 space-y-2",children:u.map((v,P)=>e.jsxs("div",{className:"flex justify-between items-center px-3 py-2 rounded-lg hover:bg-surface/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-primary/50"}),e.jsx("span",{className:"font-medium text-text-secondary",children:v.currency})]}),e.jsxs("span",{className:"text-lg font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:["$",v.amount.toLocaleString()]})]},P))})]})]})]})]})]})}function ee(){const[d,c]=r.useState(()=>{const s=localStorage.getItem("cashierTotal");return s?parseFloat(s):0}),[o,i]=r.useState(()=>{const s=localStorage.getItem("drawerTotal");return s?parseFloat(s):0}),[x,u]=r.useState(()=>{const s=localStorage.getItem("foreignTotal");return s?parseFloat(s):0}),[f,j]=r.useState(()=>{const s=localStorage.getItem("posAmount");return s?parseFloat(s):0}),[b,t]=r.useState(!1),a=()=>{try{return JSON.parse(localStorage.getItem("rateHistory")||"[]")}catch{return[]}},m=s=>{if(!s||parseFloat(s)<=0)return;const n=a(),p=s.toString(),g=n.filter($=>$!==p),k=[p,...g].slice(0,10);localStorage.setItem("rateHistory",JSON.stringify(k))},[N,w]=r.useState(0),[S,y]=r.useState(!1),v=s=>{const p=a().filter(g=>g!==s);localStorage.setItem("rateHistory",JSON.stringify(p)),w(g=>g+1)},P=()=>{localStorage.removeItem("rateHistory"),w(s=>s+1)},[h,C]=r.useState({rate:localStorage.getItem("lastExchangeRate")||"",foreignAmount:"",productPrice:""});r.useEffect(()=>{localStorage.setItem("cashierTotal",d),localStorage.setItem("drawerTotal",o),localStorage.setItem("foreignTotal",x),localStorage.setItem("posAmount",f)},[d,o,x,f]);const O=()=>{c(0),i(0),u(0),j(0),localStorage.removeItem("cashierTotal"),localStorage.removeItem("drawerTotal"),localStorage.removeItem("foreignTotal"),localStorage.removeItem("posAmount"),localStorage.removeItem("cashierDenominations"),localStorage.removeItem("drawerDenominations"),localStorage.removeItem("foreignTransactions"),window.location.reload()},l=(()=>{const{rate:s,foreignAmount:n,productPrice:p}=h;if(!s||!n||!p)return null;const g=parseFloat(s),k=parseFloat(n),$=parseFloat(p),A=$/g,T=Math.ceil(A),L=Math.ceil(T*g),M=Math.floor(k*g),W=M-L;return{changeInForeign:W/g,changeInTWD:W,foreignAmount:k,rate:g,productPrice:$,productPriceInForeign:A,roundedProductPriceInForeign:T,roundedProductPriceInTWD:L,foreignAmountInTWD:M}})(),I=l&&l.foreignAmount===l.roundedProductPriceInForeign,F=l&&l.changeInTWD<0&&!I,E=l&&l.changeInTWD>0,R=l&&l.rate>0&&l.foreignAmount>0&&l.productPrice>0;return r.useEffect(()=>{const s=n=>{n.key==="Escape"&&b&&t(!1),n.key};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[b,R]),e.jsxs("div",{className:"container-custom py-8",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:O,className:"btn-primary bg-red-500 hover:bg-red-600",children:"重置所有數據"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(H,{title:"收銀機現金",onTotalChange:c,savedKey:"cashierDenominations"}),e.jsx(H,{title:"抽屜現金",onTotalChange:i,savedKey:"drawerDenominations"}),e.jsx(X,{onTotalChange:u,savedKey:"foreignTransactions"}),e.jsx(q,{cashierTotal:d,drawerTotal:o,foreignTotal:x,posAmount:f,onPosAmountChange:j,foreignTransactions:JSON.parse(localStorage.getItem("foreignTransactions")||"[]")})]}),e.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 p-4 bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-400/30 text-green-400 hover:from-green-500/30 hover:to-emerald-500/30 hover:border-green-500/50 transition-all duration-200 rounded-full shadow-lg hover:shadow-xl z-50 hover:scale-110 transform touch-manipulation active:scale-95",style:{minWidth:"64px",minHeight:"64px"},"aria-label":"開啟外幣找零計算器",children:e.jsx(Z,{className:"w-7 h-7"})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center p-4 touch-manipulation overflow-y-auto",onClick:()=>t(!1),children:e.jsxs("div",{className:"bg-surface/95 backdrop-blur-md border border-white/20 rounded-2xl w-full max-w-md shadow-2xl touch-manipulation my-8",onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"sticky top-0 bg-surface/95 backdrop-blur-md border-b border-white/10 rounded-t-2xl p-6 pb-4 z-10",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-green-400 mb-1",children:"外幣找零計算器"}),e.jsx("p",{className:"text-sm text-text-secondary",children:"計算外幣找零金額 • 按 ESC 關閉"})]}),e.jsx("button",{onClick:()=>t(!1),className:"p-4 rounded-xl hover:bg-red-500/20 text-red-400 transition-all duration-200 touch-manipulation active:scale-95",style:{minWidth:"56px",minHeight:"56px"},"aria-label":"關閉外幣找零計算器",children:e.jsx(J,{className:"w-7 h-7"})})]})}),e.jsxs("div",{className:"p-6 pt-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-xl p-4 border border-white/10",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 text-blue-400 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"匯率 (1 外幣 = ? TWD)"]}),e.jsx("input",{type:"number",value:h.rate,onChange:s=>{const n=s.target.value;C(p=>({...p,rate:n})),n&&parseFloat(n)>0&&localStorage.setItem("lastExchangeRate",n)},onBlur:s=>{const n=s.target.value;n&&parseFloat(n)>0&&(m(n),w(p=>p+1))},onKeyDown:s=>{if(s.key==="Enter"){const n=s.target.value;n&&parseFloat(n)>0&&(m(n),w(p=>p+1))}},className:`input-field w-full text-sm py-4 px-4 rounded-lg bg-white/5 border transition-all touch-manipulation min-h-[52px] ${h.rate&&parseFloat(h.rate)<=0?"border-red-400/50 focus:border-red-400/70":"border-white/10 focus:border-blue-400/50 hover:border-blue-400/30"} focus:bg-white/10`,placeholder:"輸入匯率",step:"0.01",inputMode:"decimal",min:"0.01"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("button",{onClick:()=>y(!S),className:"inline-flex items-center gap-2 px-3 py-2 text-sm text-text-secondary hover:text-blue-400 transition-colors rounded-lg hover:bg-blue-500/10",children:[e.jsx("span",{children:"歷史匯率"}),a().length>0&&e.jsx("span",{className:"text-xs bg-blue-500/20 text-blue-400 px-2 py-0.5 rounded-full",children:a().length}),e.jsx("span",{className:`text-xs transition-transform duration-200 ${S?"rotate-180":""}`,children:"▼"})]}),S&&e.jsxs("div",{className:"mt-2 p-4 bg-gradient-to-br from-blue-500/5 to-cyan-500/5 rounded-xl border border-blue-400/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-blue-400",children:"已儲存的匯率"}),a().length>0&&e.jsx("button",{onClick:P,className:"text-xs text-red-400/60 hover:text-red-400 transition-colors px-2 py-1 rounded hover:bg-red-500/10",title:"清除所有歷史記錄",children:"清除全部"})]}),a().length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a().map((s,n)=>e.jsxs("div",{className:"flex items-center gap-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 hover:bg-white/10 transition-colors",children:[e.jsx("button",{onClick:()=>{C(p=>({...p,rate:s})),localStorage.setItem("lastExchangeRate",s)},className:"text-sm text-white hover:text-blue-400 transition-colors font-medium",children:s}),e.jsx("button",{onClick:()=>v(s),className:"text-xs text-text-secondary hover:text-red-400 transition-colors ml-1 w-4 h-4 flex items-center justify-center rounded hover:bg-red-500/10",title:"刪除此匯率",children:"×"})]},`${s}-${n}`))}):e.jsx("div",{className:"text-sm text-text-secondary/60 text-center py-2",children:"尚無歷史記錄"})]},N)]}),h.rate&&parseFloat(h.rate)<=0&&e.jsxs("div",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{children:"匯率必須大於 0"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-xl p-4 border border-white/10",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 text-orange-400 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-400"}),"商品價格 (TWD)"]}),e.jsx("input",{type:"number",value:h.productPrice,onChange:s=>C(n=>({...n,productPrice:s.target.value})),className:`input-field w-full text-sm py-4 px-4 rounded-lg bg-white/5 border transition-all touch-manipulation min-h-[52px] ${h.productPrice&&parseFloat(h.productPrice)<0?"border-red-400/50 focus:border-red-400/70":"border-white/10 focus:border-orange-400/50 hover:border-orange-400/30"} focus:bg-white/10`,placeholder:"輸入商品價格",step:"0.01",inputMode:"decimal",min:"0"}),h.productPrice&&parseFloat(h.productPrice)<0&&e.jsxs("div",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{children:"商品價格不能為負數"})]})]}),e.jsxs("div",{className:"sm:col-span-2 bg-gradient-to-br from-surface/40 to-surface/20 rounded-xl p-4 border border-white/10",children:[e.jsxs("label",{className:"block text-sm font-semibold mb-3 text-purple-400 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-purple-400"}),"客人付的外幣金額"]}),e.jsx("input",{type:"number",value:h.foreignAmount,onChange:s=>C(n=>({...n,foreignAmount:s.target.value})),className:`input-field w-full text-sm py-4 px-4 rounded-lg bg-white/5 border transition-all touch-manipulation min-h-[52px] ${h.foreignAmount&&parseFloat(h.foreignAmount)<0?"border-red-400/50 focus:border-red-400/70":"border-white/10 focus:border-purple-400/50 hover:border-purple-400/30"} focus:bg-white/10`,placeholder:"輸入外幣金額",step:"0.01",inputMode:"decimal",min:"0"}),h.foreignAmount&&parseFloat(h.foreignAmount)<0&&e.jsxs("div",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[e.jsx("span",{children:"⚠️"}),e.jsx("span",{children:"外幣金額不能為負數"})]})]})]}),l&&e.jsxs("div",{className:`rounded-xl p-6 border shadow-lg animate-fadeIn ${I?"bg-gradient-to-br from-green-500/20 to-emerald-500/20 border-green-400/40 shadow-green-500/20":F?"bg-gradient-to-br from-red-500/20 to-pink-500/20 border-red-400/40 shadow-red-500/20":E?"bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border-blue-400/40 shadow-blue-500/20":"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-400/20 shadow-green-500/10"}`,children:[I&&e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-green-500/20 rounded-xl border border-green-400/30",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400 animate-pulse"}),e.jsx("span",{className:"text-base font-semibold text-green-400",children:"金額剛好，無需找零"})]}),F&&e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-red-500/20 rounded-xl border border-red-400/30",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),e.jsx("span",{className:"text-base font-semibold text-red-400",children:"金額不足，需補差額"})]}),E&&e.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-blue-500/20 rounded-xl border border-blue-400/30",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400"}),e.jsx("span",{className:"text-base font-semibold text-blue-400",children:"需要找零"})]}),!I&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"最終找零金額"}),e.jsxs("div",{className:`text-4xl font-bold mb-2 ${F?"text-red-400":"text-blue-400"}`,children:["$",l.changeInTWD.toFixed(0)]}),e.jsxs("div",{className:"text-base text-text-secondary mb-4",children:["外幣等值：",l.changeInForeign.toFixed(2)]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"付款金額"}),e.jsxs("span",{className:"text-sm font-semibold text-purple-400",children:["$",l.foreignAmountInTWD.toFixed(0)]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${F?"bg-red-400":"bg-blue-400"}`,style:{width:`${Math.min(100,Math.max(0,l.foreignAmountInTWD/l.roundedProductPriceInTWD*100))}%`}})}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"商品價格"}),e.jsxs("span",{className:"text-sm font-semibold text-orange-400",children:["$",l.roundedProductPriceInTWD.toFixed(0)]})]})]})]}),e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"text-sm font-semibold text-text-secondary cursor-pointer hover:text-white transition-colors flex items-center gap-2 min-h-[44px]",children:"查看詳細計算步驟"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"原始商品價格："}),e.jsxs("span",{className:"font-semibold text-orange-400",children:["$",l.productPrice.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"商品價格（外幣等值）："}),e.jsx("span",{className:"font-semibold text-yellow-400",children:l.productPriceInForeign.toFixed(4)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"進位後商品價格（外幣）："}),e.jsx("span",{className:"font-semibold text-cyan-400",children:l.roundedProductPriceInForeign.toFixed(0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"進位後商品價格（台幣）："}),e.jsxs("span",{className:"font-semibold text-cyan-400",children:["$",l.roundedProductPriceInTWD.toFixed(0)]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-2 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"客人付的外幣："}),e.jsx("span",{className:"font-semibold text-purple-400",children:l.foreignAmount.toFixed(0)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"客人付的台幣等值："}),e.jsxs("span",{className:"font-semibold text-purple-400",children:["$",l.foreignAmountInTWD.toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"減去商品價格（台幣）："}),e.jsxs("span",{className:"font-semibold text-red-400",children:["-$",l.roundedProductPriceInTWD.toFixed(0)]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>C({rate:"",foreignAmount:"",productPrice:""}),className:`px-6 py-4 bg-white/5 hover:bg-white/10 
                            text-text-secondary rounded-xl transition-all duration-200 touch-manipulation active:scale-95
                            min-h-[56px] text-base font-medium`,children:"清除輸入"}),l&&e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`找零金額：$${l.changeInTWD.toFixed(0)}`)},className:`px-6 py-4 bg-blue-500/20 hover:bg-blue-500/30 
                              text-blue-400 rounded-xl transition-all duration-200 touch-manipulation active:scale-95 
                              border border-blue-400/30 min-h-[56px] text-base font-medium`,children:"複製結果"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-xl p-4 border border-blue-400/20",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-400 mb-3",children:"計算公式"}),e.jsxs("div",{className:"text-sm text-text-secondary space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-blue-400/20 text-blue-400 text-xs flex items-center justify-center font-bold",children:"1"}),e.jsx("span",{children:"商品價格 ÷ 匯率 = 外幣等值（進位）"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-blue-400/20 text-blue-400 text-xs flex items-center justify-center font-bold",children:"2"}),e.jsx("span",{children:"外幣等值 × 匯率 = 台幣價格（進位）"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-blue-400/20 text-blue-400 text-xs flex items-center justify-center font-bold",children:"3"}),e.jsx("span",{children:"客人外幣 × 匯率 = 台幣等值（捨去）"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-blue-400/20 text-blue-400 text-xs flex items-center justify-center font-bold",children:"4"}),e.jsx("span",{children:"台幣等值 - 台幣價格 = 找零金額"})]})]})]})]})]})})]})}export{ee as default};
