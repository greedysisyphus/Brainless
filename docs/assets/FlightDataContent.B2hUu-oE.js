import{r as d,j as e}from"./index.CLk6znxG.js";function v(){const[x,m]=d.useState(()=>new Date().toISOString().split("T")[0]),[t,p]=d.useState(null),[n,o]=d.useState({message:"",type:""}),[i,h]=d.useState(!1);d.useEffect(()=>{c(x)},[]);const b=s=>new Date(s+"T00:00:00").toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),c=async s=>{if(!s){o({message:"請選擇日期",type:"error"});return}h(!0),o({message:"正在載入資料...",type:"loading"});const l=`/Brainless/data/flight-data-${s}.json`;console.log("Loading data from:",l);try{const a=await fetch(l);if(!a.ok)throw a.status===404?new Error(`找不到 ${s} 的航班資料`):new Error(`HTTP 錯誤: ${a.status}`);const f=await a.json();p(f),o({message:`✅ 成功載入 ${b(s)} 的資料`,type:"success"})}catch(a){o({message:`❌ 錯誤: ${a.message}`,type:"error"}),p(null)}finally{h(!1)}},g=()=>{c(x)},u=()=>{const s=new Date().toISOString().split("T")[0];m(s),c(s)},y=()=>{const s=new Date;s.setDate(s.getDate()-1);const r=s.toISOString().split("T")[0];m(r),c(r)},j=({flight:s})=>{const r=s.codeshare_flights?s.codeshare_flights.length:0;return e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-lg p-4 hover:border-purple-500/30 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-400",children:s.time}),r>0&&e.jsxs("span",{className:"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 px-2 py-1 rounded-full text-xs font-semibold",children:["共同航班 ",r," 個"]})]}),e.jsx("span",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:s.gate})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"航班："}),e.jsx("span",{children:s.flight_code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"航空公司："}),e.jsx("span",{children:s.airline_name||s.airline_code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"目的地："}),e.jsx("span",{children:s.destination})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"狀態："}),e.jsx("span",{children:s.status})]}),s.aircraft&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"機型："}),e.jsx("span",{children:s.aircraft})]})]}),r>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[e.jsx("strong",{className:"text-purple-400 text-sm block mb-2",children:"共同航班："}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.codeshare_flights.map((l,a)=>e.jsxs("span",{className:"bg-white/10 px-2 py-1 rounded text-xs",children:[l.flight_code," (",l.airline_name,")"]},a))})]})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl p-6 border border-purple-500/30 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"✈️ 桃園機場 D11-D18 航班資料"}),e.jsx("p",{className:"text-text-secondary",children:"離境航班即時資訊"})]}),e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsx("label",{className:"font-semibold text-primary",children:"選擇日期："}),e.jsx("input",{type:"date",value:x,onChange:s=>m(s.target.value),className:"px-4 py-2 border border-white/20 rounded-lg bg-surface/50 text-primary focus:outline-none focus:border-purple-500/50"}),e.jsx("button",{onClick:g,disabled:i,className:"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"載入資料"}),e.jsx("button",{onClick:u,disabled:i,className:"px-6 py-2 bg-purple-500/50 hover:bg-purple-500/70 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"今天"}),e.jsx("button",{onClick:y,disabled:i,className:"px-6 py-2 bg-purple-500/50 hover:bg-purple-500/70 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"昨天"})]}),n.message&&e.jsx("div",{className:`p-3 rounded-lg text-sm ${n.type==="loading"?"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 border border-yellow-500/30":n.type==="error"?"bg-red-500/20 text-red-600 dark:text-red-400 border border-red-500/30":"bg-green-500/20 text-green-600 dark:text-green-400 border border-green-500/30"}`,children:n.message})]}),t&&t.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"總航班數"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:t.summary.total_flights??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-red-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"17:00 前"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:t.summary["before_17:00"]??t.summary.before_17_00??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"17:00 後"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:t.summary["after_17:00"]??t.summary.after_17_00??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]})]}),t&&t.flights&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary border-b-2 border-purple-500/30 pb-2",children:"航班列表"}),t.flights.length===0?e.jsx("div",{className:"text-center py-12 text-text-secondary",children:e.jsx("p",{children:"當天沒有航班資料"})}):e.jsx("div",{className:"space-y-3",children:t.flights.map((s,r)=>e.jsx(j,{flight:s},r))})]}),!t&&!i&&e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 opacity-50",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"請選擇日期載入航班資料"}),e.jsx("p",{children:"選擇上方日期並點擊「載入資料」按鈕"})]})]})}export{v as default};
