var Cee=Object.defineProperty;var FL=n=>{throw TypeError(n)};var _ee=(n,e,t)=>e in n?Cee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ce=(n,e,t)=>_ee(n,typeof e!="symbol"?e+"":e,t),xT=(n,e,t)=>e.has(n)||FL("Cannot "+t);var d=(n,e,t)=>(xT(n,e,"read from private field"),t?t.call(n):e.get(n)),N=(n,e,t)=>e.has(n)?FL("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),S=(n,e,t,r)=>(xT(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),D=(n,e,t)=>(xT(n,e,"access private method"),t);var Vn=(n,e,t,r)=>({set _(i){S(n,e,i,t)},get _(){return d(n,e,r)}});function See(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Yo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var XV={exports:{}},tS={},YV={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rx=Symbol.for("react.element"),Iee=Symbol.for("react.portal"),Tee=Symbol.for("react.fragment"),Pee=Symbol.for("react.strict_mode"),Fee=Symbol.for("react.profiler"),kee=Symbol.for("react.provider"),Nee=Symbol.for("react.context"),Dee=Symbol.for("react.forward_ref"),Oee=Symbol.for("react.suspense"),Uee=Symbol.for("react.memo"),Ree=Symbol.for("react.lazy"),kL=Symbol.iterator;function Mee(n){return n===null||typeof n!="object"?null:(n=kL&&n[kL]||n["@@iterator"],typeof n=="function"?n:null)}var qV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JV=Object.assign,ZV={};function a0(n,e,t){this.props=n,this.context=e,this.refs=ZV,this.updater=t||qV}a0.prototype.isReactComponent={};a0.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};a0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function eK(){}eK.prototype=a0.prototype;function yD(n,e,t){this.props=n,this.context=e,this.refs=ZV,this.updater=t||qV}var vD=yD.prototype=new eK;vD.constructor=yD;JV(vD,a0.prototype);vD.isPureReactComponent=!0;var NL=Array.isArray,tK=Object.prototype.hasOwnProperty,wD={current:null},nK={key:!0,ref:!0,__self:!0,__source:!0};function rK(n,e,t){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)tK.call(e,r)&&!nK.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),A=0;A<o;A++)l[A]=arguments[A+2];i.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:rx,type:n,key:s,ref:a,props:i,_owner:wD.current}}function Lee(n,e){return{$$typeof:rx,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function bD(n){return typeof n=="object"&&n!==null&&n.$$typeof===rx}function Qee(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var DL=/\/+/g;function BT(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Qee(""+n.key):e.toString(36)}function IE(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case rx:case Iee:a=!0}}if(a)return a=n,i=i(a),n=r===""?"."+BT(a,0):r,NL(i)?(t="",n!=null&&(t=n.replace(DL,"$&/")+"/"),IE(i,e,t,"",function(A){return A})):i!=null&&(bD(i)&&(i=Lee(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(DL,"$&/")+"/")+n)),e.push(i)),1;if(a=0,r=r===""?".":r+":",NL(n))for(var o=0;o<n.length;o++){s=n[o];var l=r+BT(s,o);a+=IE(s,e,t,l,i)}else if(l=Mee(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=r+BT(s,o++),a+=IE(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function cB(n,e,t){if(n==null)return n;var r=[],i=0;return IE(n,r,"","",function(s){return e.call(t,s,i++)}),r}function jee(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pi={current:null},TE={transition:null},Hee={ReactCurrentDispatcher:Pi,ReactCurrentBatchConfig:TE,ReactCurrentOwner:wD};function iK(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:cB,forEach:function(n,e,t){cB(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return cB(n,function(){e++}),e},toArray:function(n){return cB(n,function(e){return e})||[]},only:function(n){if(!bD(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};tt.Component=a0;tt.Fragment=Tee;tt.Profiler=Fee;tt.PureComponent=yD;tt.StrictMode=Pee;tt.Suspense=Oee;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hee;tt.act=iK;tt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=JV({},n.props),i=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=wD.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)tK.call(e,l)&&!nK.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var A=0;A<l;A++)o[A]=arguments[A+2];r.children=o}return{$$typeof:rx,type:n.type,key:i,ref:s,props:r,_owner:a}};tt.createContext=function(n){return n={$$typeof:Nee,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:kee,_context:n},n.Consumer=n};tt.createElement=rK;tt.createFactory=function(n){var e=rK.bind(null,n);return e.type=n,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(n){return{$$typeof:Dee,render:n}};tt.isValidElement=bD;tt.lazy=function(n){return{$$typeof:Ree,_payload:{_status:-1,_result:n},_init:jee}};tt.memo=function(n,e){return{$$typeof:Uee,type:n,compare:e===void 0?null:e}};tt.startTransition=function(n){var e=TE.transition;TE.transition={};try{n()}finally{TE.transition=e}};tt.unstable_act=iK;tt.useCallback=function(n,e){return Pi.current.useCallback(n,e)};tt.useContext=function(n){return Pi.current.useContext(n)};tt.useDebugValue=function(){};tt.useDeferredValue=function(n){return Pi.current.useDeferredValue(n)};tt.useEffect=function(n,e){return Pi.current.useEffect(n,e)};tt.useId=function(){return Pi.current.useId()};tt.useImperativeHandle=function(n,e,t){return Pi.current.useImperativeHandle(n,e,t)};tt.useInsertionEffect=function(n,e){return Pi.current.useInsertionEffect(n,e)};tt.useLayoutEffect=function(n,e){return Pi.current.useLayoutEffect(n,e)};tt.useMemo=function(n,e){return Pi.current.useMemo(n,e)};tt.useReducer=function(n,e,t){return Pi.current.useReducer(n,e,t)};tt.useRef=function(n){return Pi.current.useRef(n)};tt.useState=function(n){return Pi.current.useState(n)};tt.useSyncExternalStore=function(n,e,t){return Pi.current.useSyncExternalStore(n,e,t)};tt.useTransition=function(){return Pi.current.useTransition()};tt.version="18.3.1";YV.exports=tt;var B=YV.exports;const nS=Yo(B),sK=See({__proto__:null,default:nS},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vee=B,Kee=Symbol.for("react.element"),$ee=Symbol.for("react.fragment"),Gee=Object.prototype.hasOwnProperty,zee=Vee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wee={key:!0,ref:!0,__self:!0,__source:!0};function aK(n,e,t){var r,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Gee.call(e,r)&&!Wee.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Kee,type:n,key:s,ref:a,props:i,_owner:zee.current}}tS.Fragment=$ee;tS.jsx=aK;tS.jsxs=aK;XV.exports=tS;var f=XV.exports,A2={},oK={exports:{}},Ms={},lK={exports:{}},AK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(Z,ae){var fe=Z.length;Z.push(ae);e:for(;0<fe;){var Ue=fe-1>>>1,ie=Z[Ue];if(0<i(ie,ae))Z[Ue]=ae,Z[fe]=ie,fe=Ue;else break e}}function t(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ae=Z[0],fe=Z.pop();if(fe!==ae){Z[0]=fe;e:for(var Ue=0,ie=Z.length,we=ie>>>1;Ue<we;){var Ye=2*(Ue+1)-1,j=Z[Ye],G=Ye+1,Q=Z[G];if(0>i(j,fe))G<ie&&0>i(Q,j)?(Z[Ue]=Q,Z[G]=fe,Ue=G):(Z[Ue]=j,Z[Ye]=fe,Ue=Ye);else if(G<ie&&0>i(Q,fe))Z[Ue]=Q,Z[G]=fe,Ue=G;else break e}}return ae}function i(Z,ae){var fe=Z.sortIndex-ae.sortIndex;return fe!==0?fe:Z.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],A=[],c=1,u=null,h=3,g=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Z){for(var ae=t(A);ae!==null;){if(ae.callback===null)r(A);else if(ae.startTime<=Z)r(A),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=t(A)}}function E(Z){if(m=!1,x(Z),!p)if(t(l)!==null)p=!0,te(I);else{var ae=t(A);ae!==null&&ee(E,ae.startTime-Z)}}function I(Z,ae){p=!1,m&&(m=!1,v(T),T=-1),g=!0;var fe=h;try{for(x(ae),u=t(l);u!==null&&(!(u.expirationTime>ae)||Z&&!U());){var Ue=u.callback;if(typeof Ue=="function"){u.callback=null,h=u.priorityLevel;var ie=Ue(u.expirationTime<=ae);ae=n.unstable_now(),typeof ie=="function"?u.callback=ie:u===t(l)&&r(l),x(ae)}else r(l);u=t(l)}if(u!==null)var we=!0;else{var Ye=t(A);Ye!==null&&ee(E,Ye.startTime-ae),we=!1}return we}finally{u=null,h=fe,g=!1}}var P=!1,_=null,T=-1,k=5,O=-1;function U(){return!(n.unstable_now()-O<k)}function L(){if(_!==null){var Z=n.unstable_now();O=Z;var ae=!0;try{ae=_(!0,Z)}finally{ae?R():(P=!1,_=null)}}else P=!1}var R;if(typeof b=="function")R=function(){b(L)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,he=re.port2;re.port1.onmessage=L,R=function(){he.postMessage(null)}}else R=function(){w(L,0)};function te(Z){_=Z,P||(P=!0,R())}function ee(Z,ae){T=w(function(){Z(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_continueExecution=function(){p||g||(p=!0,te(I))},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Z){switch(h){case 1:case 2:case 3:var ae=3;break;default:ae=h}var fe=h;h=ae;try{return Z()}finally{h=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Z,ae){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var fe=h;h=Z;try{return ae()}finally{h=fe}},n.unstable_scheduleCallback=function(Z,ae,fe){var Ue=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ue+fe:Ue):fe=Ue,Z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=fe+ie,Z={id:c++,callback:ae,priorityLevel:Z,startTime:fe,expirationTime:ie,sortIndex:-1},fe>Ue?(Z.sortIndex=fe,e(A,Z),t(l)===null&&Z===t(A)&&(m?(v(T),T=-1):m=!0,ee(E,fe-Ue))):(Z.sortIndex=ie,e(l,Z),p||g||(p=!0,te(I))),Z},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Z){var ae=h;return function(){var fe=h;h=ae;try{return Z.apply(this,arguments)}finally{h=fe}}}})(AK);lK.exports=AK;var Xee=lK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yee=B,ks=Xee;function de(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cK=new Set,Fv={};function Uf(n,e){Im(n,e),Im(n+"Capture",e)}function Im(n,e){for(Fv[n]=e,n=0;n<e.length;n++)cK.add(e[n])}var wA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c2=Object.prototype.hasOwnProperty,qee=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OL={},UL={};function Jee(n){return c2.call(UL,n)?!0:c2.call(OL,n)?!1:qee.test(n)?UL[n]=!0:(OL[n]=!0,!1)}function Zee(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ete(n,e,t,r){if(e===null||typeof e>"u"||Zee(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(n,e,t,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Kr[n]=new Fi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Kr[e]=new Fi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Kr[n]=new Fi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Kr[n]=new Fi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Kr[n]=new Fi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Kr[n]=new Fi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Kr[n]=new Fi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Kr[n]=new Fi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Kr[n]=new Fi(n,5,!1,n.toLowerCase(),null,!1,!1)});var xD=/[\-:]([a-z])/g;function BD(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(xD,BD);Kr[e]=new Fi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(xD,BD);Kr[e]=new Fi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(xD,BD);Kr[e]=new Fi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Kr[n]=new Fi(n,1,!1,n.toLowerCase(),null,!1,!1)});Kr.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Kr[n]=new Fi(n,1,!1,n.toLowerCase(),null,!0,!0)});function ED(n,e,t,r){var i=Kr.hasOwnProperty(e)?Kr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ete(e,t,i,r)&&(t=null),r||i===null?Jee(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var OA=Yee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uB=Symbol.for("react.element"),kg=Symbol.for("react.portal"),Ng=Symbol.for("react.fragment"),CD=Symbol.for("react.strict_mode"),u2=Symbol.for("react.profiler"),uK=Symbol.for("react.provider"),dK=Symbol.for("react.context"),_D=Symbol.for("react.forward_ref"),d2=Symbol.for("react.suspense"),h2=Symbol.for("react.suspense_list"),SD=Symbol.for("react.memo"),sc=Symbol.for("react.lazy"),hK=Symbol.for("react.offscreen"),RL=Symbol.iterator;function K0(n){return n===null||typeof n!="object"?null:(n=RL&&n[RL]||n["@@iterator"],typeof n=="function"?n:null)}var pn=Object.assign,ET;function vy(n){if(ET===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ET=e&&e[1]||""}return`
`+ET+n}var CT=!1;function _T(n,e){if(!n||CT)return"";CT=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var r=A}Reflect.construct(n,[],e)}else{try{e.call()}catch(A){r=A}n.call(e.prototype)}else{try{throw Error()}catch(A){r=A}n()}}catch(A){if(A&&r&&typeof A.stack=="string"){for(var i=A.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{CT=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?vy(n):""}function tte(n){switch(n.tag){case 5:return vy(n.type);case 16:return vy("Lazy");case 13:return vy("Suspense");case 19:return vy("SuspenseList");case 0:case 2:case 15:return n=_T(n.type,!1),n;case 11:return n=_T(n.type.render,!1),n;case 1:return n=_T(n.type,!0),n;default:return""}}function f2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ng:return"Fragment";case kg:return"Portal";case u2:return"Profiler";case CD:return"StrictMode";case d2:return"Suspense";case h2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dK:return(n.displayName||"Context")+".Consumer";case uK:return(n._context.displayName||"Context")+".Provider";case _D:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case SD:return e=n.displayName||null,e!==null?e:f2(n.type)||"Memo";case sc:e=n._payload,n=n._init;try{return f2(n(e))}catch{}}return null}function nte(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f2(e);case 8:return e===CD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mu(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fK(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rte(n){var e=fK(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function dB(n){n._valueTracker||(n._valueTracker=rte(n))}function gK(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=fK(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function UC(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function g2(n,e){var t=e.checked;return pn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ML(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Mu(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pK(n,e){e=e.checked,e!=null&&ED(n,"checked",e,!1)}function p2(n,e){pK(n,e);var t=Mu(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?m2(n,e.type,t):e.hasOwnProperty("defaultValue")&&m2(n,e.type,Mu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function LL(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function m2(n,e,t){(e!=="number"||UC(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var wy=Array.isArray;function Zg(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Mu(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function y2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return pn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function QL(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(de(92));if(wy(t)){if(1<t.length)throw Error(de(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Mu(t)}}function mK(n,e){var t=Mu(e.value),r=Mu(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function jL(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yK(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yK(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hB,vK=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hB=hB||document.createElement("div"),hB.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hB.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function kv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var sv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ite=["Webkit","ms","Moz","O"];Object.keys(sv).forEach(function(n){ite.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),sv[e]=sv[n]})});function wK(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||sv.hasOwnProperty(n)&&sv[n]?(""+e).trim():e+"px"}function bK(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=wK(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var ste=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w2(n,e){if(e){if(ste[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function b2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x2=null;function ID(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var B2=null,ep=null,tp=null;function HL(n){if(n=ax(n)){if(typeof B2!="function")throw Error(de(280));var e=n.stateNode;e&&(e=oS(e),B2(n.stateNode,n.type,e))}}function xK(n){ep?tp?tp.push(n):tp=[n]:ep=n}function BK(){if(ep){var n=ep,e=tp;if(tp=ep=null,HL(n),e)for(n=0;n<e.length;n++)HL(e[n])}}function EK(n,e){return n(e)}function CK(){}var ST=!1;function _K(n,e,t){if(ST)return n(e,t);ST=!0;try{return EK(n,e,t)}finally{ST=!1,(ep!==null||tp!==null)&&(CK(),BK())}}function Nv(n,e){var t=n.stateNode;if(t===null)return null;var r=oS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(de(231,e,typeof t));return t}var E2=!1;if(wA)try{var $0={};Object.defineProperty($0,"passive",{get:function(){E2=!0}}),window.addEventListener("test",$0,$0),window.removeEventListener("test",$0,$0)}catch{E2=!1}function ate(n,e,t,r,i,s,a,o,l){var A=Array.prototype.slice.call(arguments,3);try{e.apply(t,A)}catch(c){this.onError(c)}}var av=!1,RC=null,MC=!1,C2=null,ote={onError:function(n){av=!0,RC=n}};function lte(n,e,t,r,i,s,a,o,l){av=!1,RC=null,ate.apply(ote,arguments)}function Ate(n,e,t,r,i,s,a,o,l){if(lte.apply(this,arguments),av){if(av){var A=RC;av=!1,RC=null}else throw Error(de(198));MC||(MC=!0,C2=A)}}function Rf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function SK(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function VL(n){if(Rf(n)!==n)throw Error(de(188))}function cte(n){var e=n.alternate;if(!e){if(e=Rf(n),e===null)throw Error(de(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return VL(i),n;if(s===r)return VL(i),e;s=s.sibling}throw Error(de(188))}if(t.return!==r.return)t=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a)throw Error(de(189))}}if(t.alternate!==r)throw Error(de(190))}if(t.tag!==3)throw Error(de(188));return t.stateNode.current===t?n:e}function IK(n){return n=cte(n),n!==null?TK(n):null}function TK(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=TK(n);if(e!==null)return e;n=n.sibling}return null}var PK=ks.unstable_scheduleCallback,KL=ks.unstable_cancelCallback,ute=ks.unstable_shouldYield,dte=ks.unstable_requestPaint,In=ks.unstable_now,hte=ks.unstable_getCurrentPriorityLevel,TD=ks.unstable_ImmediatePriority,FK=ks.unstable_UserBlockingPriority,LC=ks.unstable_NormalPriority,fte=ks.unstable_LowPriority,kK=ks.unstable_IdlePriority,rS=null,Lo=null;function gte(n){if(Lo&&typeof Lo.onCommitFiberRoot=="function")try{Lo.onCommitFiberRoot(rS,n,void 0,(n.current.flags&128)===128)}catch{}}var Ya=Math.clz32?Math.clz32:yte,pte=Math.log,mte=Math.LN2;function yte(n){return n>>>=0,n===0?32:31-(pte(n)/mte|0)|0}var fB=64,gB=4194304;function by(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function QC(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?r=by(o):(s&=a,s!==0&&(r=by(s)))}else a=t&~i,a!==0?r=by(a):s!==0&&(r=by(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ya(e),i=1<<t,r|=n[t],e&=~i;return r}function vte(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wte(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Ya(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&r)&&(i[a]=vte(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function _2(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function NK(){var n=fB;return fB<<=1,!(fB&4194240)&&(fB=64),n}function IT(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ix(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ya(e),n[e]=t}function bte(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ya(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function PD(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ya(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ct=0;function DK(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var OK,FD,UK,RK,MK,S2=!1,pB=[],yu=null,vu=null,wu=null,Dv=new Map,Ov=new Map,Ac=[],xte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $L(n,e){switch(n){case"focusin":case"focusout":yu=null;break;case"dragenter":case"dragleave":vu=null;break;case"mouseover":case"mouseout":wu=null;break;case"pointerover":case"pointerout":Dv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ov.delete(e.pointerId)}}function G0(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ax(e),e!==null&&FD(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Bte(n,e,t,r,i){switch(e){case"focusin":return yu=G0(yu,n,e,t,r,i),!0;case"dragenter":return vu=G0(vu,n,e,t,r,i),!0;case"mouseover":return wu=G0(wu,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Dv.set(s,G0(Dv.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ov.set(s,G0(Ov.get(s)||null,n,e,t,r,i)),!0}return!1}function LK(n){var e=jd(n.target);if(e!==null){var t=Rf(e);if(t!==null){if(e=t.tag,e===13){if(e=SK(t),e!==null){n.blockedOn=e,MK(n.priority,function(){UK(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function PE(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=I2(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);x2=r,t.target.dispatchEvent(r),x2=null}else return e=ax(t),e!==null&&FD(e),n.blockedOn=t,!1;e.shift()}return!0}function GL(n,e,t){PE(n)&&t.delete(e)}function Ete(){S2=!1,yu!==null&&PE(yu)&&(yu=null),vu!==null&&PE(vu)&&(vu=null),wu!==null&&PE(wu)&&(wu=null),Dv.forEach(GL),Ov.forEach(GL)}function z0(n,e){n.blockedOn===e&&(n.blockedOn=null,S2||(S2=!0,ks.unstable_scheduleCallback(ks.unstable_NormalPriority,Ete)))}function Uv(n){function e(i){return z0(i,n)}if(0<pB.length){z0(pB[0],n);for(var t=1;t<pB.length;t++){var r=pB[t];r.blockedOn===n&&(r.blockedOn=null)}}for(yu!==null&&z0(yu,n),vu!==null&&z0(vu,n),wu!==null&&z0(wu,n),Dv.forEach(e),Ov.forEach(e),t=0;t<Ac.length;t++)r=Ac[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ac.length&&(t=Ac[0],t.blockedOn===null);)LK(t),t.blockedOn===null&&Ac.shift()}var np=OA.ReactCurrentBatchConfig,jC=!0;function Cte(n,e,t,r){var i=Ct,s=np.transition;np.transition=null;try{Ct=1,kD(n,e,t,r)}finally{Ct=i,np.transition=s}}function _te(n,e,t,r){var i=Ct,s=np.transition;np.transition=null;try{Ct=4,kD(n,e,t,r)}finally{Ct=i,np.transition=s}}function kD(n,e,t,r){if(jC){var i=I2(n,e,t,r);if(i===null)MT(n,e,r,HC,t),$L(n,r);else if(Bte(i,n,e,t,r))r.stopPropagation();else if($L(n,r),e&4&&-1<xte.indexOf(n)){for(;i!==null;){var s=ax(i);if(s!==null&&OK(s),s=I2(n,e,t,r),s===null&&MT(n,e,r,HC,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else MT(n,e,r,null,t)}}var HC=null;function I2(n,e,t,r){if(HC=null,n=ID(r),n=jd(n),n!==null)if(e=Rf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=SK(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return HC=n,null}function QK(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hte()){case TD:return 1;case FK:return 4;case LC:case fte:return 16;case kK:return 536870912;default:return 16}default:return 16}}var ou=null,ND=null,FE=null;function jK(){if(FE)return FE;var n,e=ND,t=e.length,r,i="value"in ou?ou.value:ou.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===i[s-r];r++);return FE=i.slice(n,1<r?1-r:void 0)}function kE(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function mB(){return!0}function zL(){return!1}function Ls(n){function e(t,r,i,s,a){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mB:zL,this.isPropagationStopped=zL,this}return pn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=mB)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=mB)},persist:function(){},isPersistent:mB}),e}var o0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DD=Ls(o0),sx=pn({},o0,{view:0,detail:0}),Ste=Ls(sx),TT,PT,W0,iS=pn({},sx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OD,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==W0&&(W0&&n.type==="mousemove"?(TT=n.screenX-W0.screenX,PT=n.screenY-W0.screenY):PT=TT=0,W0=n),TT)},movementY:function(n){return"movementY"in n?n.movementY:PT}}),WL=Ls(iS),Ite=pn({},iS,{dataTransfer:0}),Tte=Ls(Ite),Pte=pn({},sx,{relatedTarget:0}),FT=Ls(Pte),Fte=pn({},o0,{animationName:0,elapsedTime:0,pseudoElement:0}),kte=Ls(Fte),Nte=pn({},o0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dte=Ls(Nte),Ote=pn({},o0,{data:0}),XL=Ls(Ote),Ute={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rte={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mte={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lte(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Mte[n])?!!e[n]:!1}function OD(){return Lte}var Qte=pn({},sx,{key:function(n){if(n.key){var e=Ute[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=kE(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rte[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OD,charCode:function(n){return n.type==="keypress"?kE(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kE(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jte=Ls(Qte),Hte=pn({},iS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YL=Ls(Hte),Vte=pn({},sx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OD}),Kte=Ls(Vte),$te=pn({},o0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gte=Ls($te),zte=pn({},iS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wte=Ls(zte),Xte=[9,13,27,32],UD=wA&&"CompositionEvent"in window,ov=null;wA&&"documentMode"in document&&(ov=document.documentMode);var Yte=wA&&"TextEvent"in window&&!ov,HK=wA&&(!UD||ov&&8<ov&&11>=ov),qL=" ",JL=!1;function VK(n,e){switch(n){case"keyup":return Xte.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KK(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Dg=!1;function qte(n,e){switch(n){case"compositionend":return KK(e);case"keypress":return e.which!==32?null:(JL=!0,qL);case"textInput":return n=e.data,n===qL&&JL?null:n;default:return null}}function Jte(n,e){if(Dg)return n==="compositionend"||!UD&&VK(n,e)?(n=jK(),FE=ND=ou=null,Dg=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HK&&e.locale!=="ko"?null:e.data;default:return null}}var Zte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZL(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Zte[n.type]:e==="textarea"}function $K(n,e,t,r){xK(r),e=VC(e,"onChange"),0<e.length&&(t=new DD("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var lv=null,Rv=null;function ene(n){n$(n,0)}function sS(n){var e=Rg(n);if(gK(e))return n}function tne(n,e){if(n==="change")return e}var GK=!1;if(wA){var kT;if(wA){var NT="oninput"in document;if(!NT){var eQ=document.createElement("div");eQ.setAttribute("oninput","return;"),NT=typeof eQ.oninput=="function"}kT=NT}else kT=!1;GK=kT&&(!document.documentMode||9<document.documentMode)}function tQ(){lv&&(lv.detachEvent("onpropertychange",zK),Rv=lv=null)}function zK(n){if(n.propertyName==="value"&&sS(Rv)){var e=[];$K(e,Rv,n,ID(n)),_K(ene,e)}}function nne(n,e,t){n==="focusin"?(tQ(),lv=e,Rv=t,lv.attachEvent("onpropertychange",zK)):n==="focusout"&&tQ()}function rne(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sS(Rv)}function ine(n,e){if(n==="click")return sS(e)}function sne(n,e){if(n==="input"||n==="change")return sS(e)}function ane(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ja=typeof Object.is=="function"?Object.is:ane;function Mv(n,e){if(Ja(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!c2.call(e,i)||!Ja(n[i],e[i]))return!1}return!0}function nQ(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rQ(n,e){var t=nQ(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nQ(t)}}function WK(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?WK(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function XK(){for(var n=window,e=UC();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=UC(n.document)}return e}function RD(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function one(n){var e=XK(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&WK(t.ownerDocument.documentElement,t)){if(r!==null&&RD(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=rQ(t,s);var a=rQ(t,r);i&&a&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var lne=wA&&"documentMode"in document&&11>=document.documentMode,Og=null,T2=null,Av=null,P2=!1;function iQ(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;P2||Og==null||Og!==UC(r)||(r=Og,"selectionStart"in r&&RD(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Av&&Mv(Av,r)||(Av=r,r=VC(T2,"onSelect"),0<r.length&&(e=new DD("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Og)))}function yB(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ug={animationend:yB("Animation","AnimationEnd"),animationiteration:yB("Animation","AnimationIteration"),animationstart:yB("Animation","AnimationStart"),transitionend:yB("Transition","TransitionEnd")},DT={},YK={};wA&&(YK=document.createElement("div").style,"AnimationEvent"in window||(delete Ug.animationend.animation,delete Ug.animationiteration.animation,delete Ug.animationstart.animation),"TransitionEvent"in window||delete Ug.transitionend.transition);function aS(n){if(DT[n])return DT[n];if(!Ug[n])return n;var e=Ug[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in YK)return DT[n]=e[t];return n}var qK=aS("animationend"),JK=aS("animationiteration"),ZK=aS("animationstart"),e$=aS("transitionend"),t$=new Map,sQ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nd(n,e){t$.set(n,e),Uf(e,[n])}for(var OT=0;OT<sQ.length;OT++){var UT=sQ[OT],Ane=UT.toLowerCase(),cne=UT[0].toUpperCase()+UT.slice(1);nd(Ane,"on"+cne)}nd(qK,"onAnimationEnd");nd(JK,"onAnimationIteration");nd(ZK,"onAnimationStart");nd("dblclick","onDoubleClick");nd("focusin","onFocus");nd("focusout","onBlur");nd(e$,"onTransitionEnd");Im("onMouseEnter",["mouseout","mouseover"]);Im("onMouseLeave",["mouseout","mouseover"]);Im("onPointerEnter",["pointerout","pointerover"]);Im("onPointerLeave",["pointerout","pointerover"]);Uf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),une=new Set("cancel close invalid load scroll toggle".split(" ").concat(xy));function aQ(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Ate(r,e,void 0,n),n.currentTarget=null}function n$(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,A=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;aQ(i,o,A),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,A=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;aQ(i,o,A),s=l}}}if(MC)throw n=C2,MC=!1,C2=null,n}function $t(n,e){var t=e[O2];t===void 0&&(t=e[O2]=new Set);var r=n+"__bubble";t.has(r)||(r$(e,n,2,!1),t.add(r))}function RT(n,e,t){var r=0;e&&(r|=4),r$(t,n,r,e)}var vB="_reactListening"+Math.random().toString(36).slice(2);function Lv(n){if(!n[vB]){n[vB]=!0,cK.forEach(function(t){t!=="selectionchange"&&(une.has(t)||RT(t,!1,n),RT(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[vB]||(e[vB]=!0,RT("selectionchange",!1,e))}}function r$(n,e,t,r){switch(QK(e)){case 1:var i=Cte;break;case 4:i=_te;break;default:i=kD}t=i.bind(null,e,t,n),i=void 0,!E2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function MT(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=jd(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}_K(function(){var A=s,c=ID(t),u=[];e:{var h=t$.get(n);if(h!==void 0){var g=DD,p=n;switch(n){case"keypress":if(kE(t)===0)break e;case"keydown":case"keyup":g=jte;break;case"focusin":p="focus",g=FT;break;case"focusout":p="blur",g=FT;break;case"beforeblur":case"afterblur":g=FT;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=WL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Tte;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Kte;break;case qK:case JK:case ZK:g=kte;break;case e$:g=Gte;break;case"scroll":g=Ste;break;case"wheel":g=Wte;break;case"copy":case"cut":case"paste":g=Dte;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=YL}var m=(e&4)!==0,w=!m&&n==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var b=A,x;b!==null;){x=b;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,v!==null&&(E=Nv(b,v),E!=null&&m.push(Qv(b,E,x)))),w)break;b=b.return}0<m.length&&(h=new g(h,p,null,t,c),u.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",h&&t!==x2&&(p=t.relatedTarget||t.fromElement)&&(jd(p)||p[bA]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=t.relatedTarget||t.toElement,g=A,p=p?jd(p):null,p!==null&&(w=Rf(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=A),g!==p)){if(m=WL,E="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(m=YL,E="onPointerLeave",v="onPointerEnter",b="pointer"),w=g==null?h:Rg(g),x=p==null?h:Rg(p),h=new m(E,b+"leave",g,t,c),h.target=w,h.relatedTarget=x,E=null,jd(c)===A&&(m=new m(v,b+"enter",p,t,c),m.target=x,m.relatedTarget=w,E=m),w=E,g&&p)t:{for(m=g,v=p,b=0,x=m;x;x=ng(x))b++;for(x=0,E=v;E;E=ng(E))x++;for(;0<b-x;)m=ng(m),b--;for(;0<x-b;)v=ng(v),x--;for(;b--;){if(m===v||v!==null&&m===v.alternate)break t;m=ng(m),v=ng(v)}m=null}else m=null;g!==null&&oQ(u,h,g,m,!1),p!==null&&w!==null&&oQ(u,w,p,m,!0)}}e:{if(h=A?Rg(A):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var I=tne;else if(ZL(h))if(GK)I=sne;else{I=rne;var P=nne}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=ine);if(I&&(I=I(n,A))){$K(u,I,t,c);break e}P&&P(n,h,A),n==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&m2(h,"number",h.value)}switch(P=A?Rg(A):window,n){case"focusin":(ZL(P)||P.contentEditable==="true")&&(Og=P,T2=A,Av=null);break;case"focusout":Av=T2=Og=null;break;case"mousedown":P2=!0;break;case"contextmenu":case"mouseup":case"dragend":P2=!1,iQ(u,t,c);break;case"selectionchange":if(lne)break;case"keydown":case"keyup":iQ(u,t,c)}var _;if(UD)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Dg?VK(n,t)&&(T="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(T="onCompositionStart");T&&(HK&&t.locale!=="ko"&&(Dg||T!=="onCompositionStart"?T==="onCompositionEnd"&&Dg&&(_=jK()):(ou=c,ND="value"in ou?ou.value:ou.textContent,Dg=!0)),P=VC(A,T),0<P.length&&(T=new XL(T,n,null,t,c),u.push({event:T,listeners:P}),_?T.data=_:(_=KK(t),_!==null&&(T.data=_)))),(_=Yte?qte(n,t):Jte(n,t))&&(A=VC(A,"onBeforeInput"),0<A.length&&(c=new XL("onBeforeInput","beforeinput",null,t,c),u.push({event:c,listeners:A}),c.data=_))}n$(u,e)})}function Qv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function VC(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Nv(n,t),s!=null&&r.unshift(Qv(n,s,i)),s=Nv(n,e),s!=null&&r.push(Qv(n,s,i))),n=n.return}return r}function ng(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oQ(n,e,t,r,i){for(var s=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,A=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&A!==null&&(o=A,i?(l=Nv(t,s),l!=null&&a.unshift(Qv(t,l,o))):i||(l=Nv(t,s),l!=null&&a.push(Qv(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var dne=/\r\n?/g,hne=/\u0000|\uFFFD/g;function lQ(n){return(typeof n=="string"?n:""+n).replace(dne,`
`).replace(hne,"")}function wB(n,e,t){if(e=lQ(e),lQ(n)!==e&&t)throw Error(de(425))}function KC(){}var F2=null,k2=null;function N2(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var D2=typeof setTimeout=="function"?setTimeout:void 0,fne=typeof clearTimeout=="function"?clearTimeout:void 0,AQ=typeof Promise=="function"?Promise:void 0,gne=typeof queueMicrotask=="function"?queueMicrotask:typeof AQ<"u"?function(n){return AQ.resolve(null).then(n).catch(pne)}:D2;function pne(n){setTimeout(function(){throw n})}function LT(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),Uv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);Uv(e)}function bu(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function cQ(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var l0=Math.random().toString(36).slice(2),Do="__reactFiber$"+l0,jv="__reactProps$"+l0,bA="__reactContainer$"+l0,O2="__reactEvents$"+l0,mne="__reactListeners$"+l0,yne="__reactHandles$"+l0;function jd(n){var e=n[Do];if(e)return e;for(var t=n.parentNode;t;){if(e=t[bA]||t[Do]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=cQ(n);n!==null;){if(t=n[Do])return t;n=cQ(n)}return e}n=t,t=n.parentNode}return null}function ax(n){return n=n[Do]||n[bA],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Rg(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(de(33))}function oS(n){return n[jv]||null}var U2=[],Mg=-1;function rd(n){return{current:n}}function Wt(n){0>Mg||(n.current=U2[Mg],U2[Mg]=null,Mg--)}function Ht(n,e){Mg++,U2[Mg]=n.current,n.current=e}var Lu={},oi=rd(Lu),$i=rd(!1),ff=Lu;function Tm(n,e){var t=n.type.contextTypes;if(!t)return Lu;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Gi(n){return n=n.childContextTypes,n!=null}function $C(){Wt($i),Wt(oi)}function uQ(n,e,t){if(oi.current!==Lu)throw Error(de(168));Ht(oi,e),Ht($i,t)}function i$(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(de(108,nte(n)||"Unknown",i));return pn({},t,r)}function GC(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Lu,ff=oi.current,Ht(oi,n),Ht($i,$i.current),!0}function dQ(n,e,t){var r=n.stateNode;if(!r)throw Error(de(169));t?(n=i$(n,e,ff),r.__reactInternalMemoizedMergedChildContext=n,Wt($i),Wt(oi),Ht(oi,n)):Wt($i),Ht($i,t)}var dl=null,lS=!1,QT=!1;function s$(n){dl===null?dl=[n]:dl.push(n)}function vne(n){lS=!0,s$(n)}function id(){if(!QT&&dl!==null){QT=!0;var n=0,e=Ct;try{var t=dl;for(Ct=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}dl=null,lS=!1}catch(i){throw dl!==null&&(dl=dl.slice(n+1)),PK(TD,id),i}finally{Ct=e,QT=!1}}return null}var Lg=[],Qg=0,zC=null,WC=0,ia=[],sa=0,gf=null,iA=1,sA="";function Bd(n,e){Lg[Qg++]=WC,Lg[Qg++]=zC,zC=n,WC=e}function a$(n,e,t){ia[sa++]=iA,ia[sa++]=sA,ia[sa++]=gf,gf=n;var r=iA;n=sA;var i=32-Ya(r)-1;r&=~(1<<i),t+=1;var s=32-Ya(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,iA=1<<32-Ya(e)+i|t<<i|r,sA=s+n}else iA=1<<s|t<<i|r,sA=n}function MD(n){n.return!==null&&(Bd(n,1),a$(n,1,0))}function LD(n){for(;n===zC;)zC=Lg[--Qg],Lg[Qg]=null,WC=Lg[--Qg],Lg[Qg]=null;for(;n===gf;)gf=ia[--sa],ia[sa]=null,sA=ia[--sa],ia[sa]=null,iA=ia[--sa],ia[sa]=null}var Ts=null,_s=null,nn=!1,Ka=null;function o$(n,e){var t=Aa(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function hQ(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ts=n,_s=bu(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ts=n,_s=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=gf!==null?{id:iA,overflow:sA}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Aa(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ts=n,_s=null,!0):!1;default:return!1}}function R2(n){return(n.mode&1)!==0&&(n.flags&128)===0}function M2(n){if(nn){var e=_s;if(e){var t=e;if(!hQ(n,e)){if(R2(n))throw Error(de(418));e=bu(t.nextSibling);var r=Ts;e&&hQ(n,e)?o$(r,t):(n.flags=n.flags&-4097|2,nn=!1,Ts=n)}}else{if(R2(n))throw Error(de(418));n.flags=n.flags&-4097|2,nn=!1,Ts=n}}}function fQ(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ts=n}function bB(n){if(n!==Ts)return!1;if(!nn)return fQ(n),nn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!N2(n.type,n.memoizedProps)),e&&(e=_s)){if(R2(n))throw l$(),Error(de(418));for(;e;)o$(n,e),e=bu(e.nextSibling)}if(fQ(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(de(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){_s=bu(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}_s=null}}else _s=Ts?bu(n.stateNode.nextSibling):null;return!0}function l$(){for(var n=_s;n;)n=bu(n.nextSibling)}function Pm(){_s=Ts=null,nn=!1}function QD(n){Ka===null?Ka=[n]:Ka.push(n)}var wne=OA.ReactCurrentBatchConfig;function X0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(de(309));var r=t.stateNode}if(!r)throw Error(de(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(de(284));if(!t._owner)throw Error(de(290,n))}return n}function xB(n,e){throw n=Object.prototype.toString.call(e),Error(de(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function gQ(n){var e=n._init;return e(n._payload)}function A$(n){function e(v,b){if(n){var x=v.deletions;x===null?(v.deletions=[b],v.flags|=16):x.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function r(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function i(v,b){return v=Cu(v,b),v.index=0,v.sibling=null,v}function s(v,b,x){return v.index=x,n?(x=v.alternate,x!==null?(x=x.index,x<b?(v.flags|=2,b):x):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,b,x,E){return b===null||b.tag!==6?(b=zT(x,v.mode,E),b.return=v,b):(b=i(b,x),b.return=v,b)}function l(v,b,x,E){var I=x.type;return I===Ng?c(v,b,x.props.children,E,x.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===sc&&gQ(I)===b.type)?(E=i(b,x.props),E.ref=X0(v,b,x),E.return=v,E):(E=LE(x.type,x.key,x.props,null,v.mode,E),E.ref=X0(v,b,x),E.return=v,E)}function A(v,b,x,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=WT(x,v.mode,E),b.return=v,b):(b=i(b,x.children||[]),b.return=v,b)}function c(v,b,x,E,I){return b===null||b.tag!==7?(b=rf(x,v.mode,E,I),b.return=v,b):(b=i(b,x),b.return=v,b)}function u(v,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=zT(""+b,v.mode,x),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case uB:return x=LE(b.type,b.key,b.props,null,v.mode,x),x.ref=X0(v,null,b),x.return=v,x;case kg:return b=WT(b,v.mode,x),b.return=v,b;case sc:var E=b._init;return u(v,E(b._payload),x)}if(wy(b)||K0(b))return b=rf(b,v.mode,x,null),b.return=v,b;xB(v,b)}return null}function h(v,b,x,E){var I=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return I!==null?null:o(v,b,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uB:return x.key===I?l(v,b,x,E):null;case kg:return x.key===I?A(v,b,x,E):null;case sc:return I=x._init,h(v,b,I(x._payload),E)}if(wy(x)||K0(x))return I!==null?null:c(v,b,x,E,null);xB(v,x)}return null}function g(v,b,x,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(x)||null,o(b,v,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uB:return v=v.get(E.key===null?x:E.key)||null,l(b,v,E,I);case kg:return v=v.get(E.key===null?x:E.key)||null,A(b,v,E,I);case sc:var P=E._init;return g(v,b,x,P(E._payload),I)}if(wy(E)||K0(E))return v=v.get(x)||null,c(b,v,E,I,null);xB(b,E)}return null}function p(v,b,x,E){for(var I=null,P=null,_=b,T=b=0,k=null;_!==null&&T<x.length;T++){_.index>T?(k=_,_=null):k=_.sibling;var O=h(v,_,x[T],E);if(O===null){_===null&&(_=k);break}n&&_&&O.alternate===null&&e(v,_),b=s(O,b,T),P===null?I=O:P.sibling=O,P=O,_=k}if(T===x.length)return t(v,_),nn&&Bd(v,T),I;if(_===null){for(;T<x.length;T++)_=u(v,x[T],E),_!==null&&(b=s(_,b,T),P===null?I=_:P.sibling=_,P=_);return nn&&Bd(v,T),I}for(_=r(v,_);T<x.length;T++)k=g(_,v,T,x[T],E),k!==null&&(n&&k.alternate!==null&&_.delete(k.key===null?T:k.key),b=s(k,b,T),P===null?I=k:P.sibling=k,P=k);return n&&_.forEach(function(U){return e(v,U)}),nn&&Bd(v,T),I}function m(v,b,x,E){var I=K0(x);if(typeof I!="function")throw Error(de(150));if(x=I.call(x),x==null)throw Error(de(151));for(var P=I=null,_=b,T=b=0,k=null,O=x.next();_!==null&&!O.done;T++,O=x.next()){_.index>T?(k=_,_=null):k=_.sibling;var U=h(v,_,O.value,E);if(U===null){_===null&&(_=k);break}n&&_&&U.alternate===null&&e(v,_),b=s(U,b,T),P===null?I=U:P.sibling=U,P=U,_=k}if(O.done)return t(v,_),nn&&Bd(v,T),I;if(_===null){for(;!O.done;T++,O=x.next())O=u(v,O.value,E),O!==null&&(b=s(O,b,T),P===null?I=O:P.sibling=O,P=O);return nn&&Bd(v,T),I}for(_=r(v,_);!O.done;T++,O=x.next())O=g(_,v,T,O.value,E),O!==null&&(n&&O.alternate!==null&&_.delete(O.key===null?T:O.key),b=s(O,b,T),P===null?I=O:P.sibling=O,P=O);return n&&_.forEach(function(L){return e(v,L)}),nn&&Bd(v,T),I}function w(v,b,x,E){if(typeof x=="object"&&x!==null&&x.type===Ng&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case uB:e:{for(var I=x.key,P=b;P!==null;){if(P.key===I){if(I=x.type,I===Ng){if(P.tag===7){t(v,P.sibling),b=i(P,x.props.children),b.return=v,v=b;break e}}else if(P.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===sc&&gQ(I)===P.type){t(v,P.sibling),b=i(P,x.props),b.ref=X0(v,P,x),b.return=v,v=b;break e}t(v,P);break}else e(v,P);P=P.sibling}x.type===Ng?(b=rf(x.props.children,v.mode,E,x.key),b.return=v,v=b):(E=LE(x.type,x.key,x.props,null,v.mode,E),E.ref=X0(v,b,x),E.return=v,v=E)}return a(v);case kg:e:{for(P=x.key;b!==null;){if(b.key===P)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){t(v,b.sibling),b=i(b,x.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=WT(x,v.mode,E),b.return=v,v=b}return a(v);case sc:return P=x._init,w(v,b,P(x._payload),E)}if(wy(x))return p(v,b,x,E);if(K0(x))return m(v,b,x,E);xB(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(t(v,b.sibling),b=i(b,x),b.return=v,v=b):(t(v,b),b=zT(x,v.mode,E),b.return=v,v=b),a(v)):t(v,b)}return w}var Fm=A$(!0),c$=A$(!1),XC=rd(null),YC=null,jg=null,jD=null;function HD(){jD=jg=YC=null}function VD(n){var e=XC.current;Wt(XC),n._currentValue=e}function L2(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function rp(n,e){YC=n,jD=jg=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Vi=!0),n.firstContext=null)}function wa(n){var e=n._currentValue;if(jD!==n)if(n={context:n,memoizedValue:e,next:null},jg===null){if(YC===null)throw Error(de(308));jg=n,YC.dependencies={lanes:0,firstContext:n}}else jg=jg.next=n;return e}var Hd=null;function KD(n){Hd===null?Hd=[n]:Hd.push(n)}function u$(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,KD(e)):(t.next=i.next,i.next=t),e.interleaved=t,xA(n,r)}function xA(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ac=!1;function $D(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d$(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function hA(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function xu(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xA(n,t)}return i=r.interleaved,i===null?(e.next=e,KD(r)):(e.next=i.next,i.next=e),r.interleaved=e,xA(n,t)}function NE(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,PD(n,t)}}function pQ(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function qC(n,e,t,r){var i=n.updateQueue;ac=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,A=l.next;l.next=null,a===null?s=A:a.next=A,a=l;var c=n.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=A:o.next=A,c.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;a=0,c=A=l=null,o=s;do{var h=o.lane,g=o.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=n,m=o;switch(h=e,g=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(g,u,h):p,h==null)break e;u=pn({},u,h);break e;case 2:ac=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else g={eventTime:g,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(A=c=g,l=u):c=c.next=g,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=u),i.baseState=l,i.firstBaseUpdate=A,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);mf|=a,n.lanes=a,n.memoizedState=u}}function mQ(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(de(191,i));i.call(r)}}}var ox={},Qo=rd(ox),Hv=rd(ox),Vv=rd(ox);function Vd(n){if(n===ox)throw Error(de(174));return n}function GD(n,e){switch(Ht(Vv,e),Ht(Hv,n),Ht(Qo,ox),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=v2(e,n)}Wt(Qo),Ht(Qo,e)}function km(){Wt(Qo),Wt(Hv),Wt(Vv)}function h$(n){Vd(Vv.current);var e=Vd(Qo.current),t=v2(e,n.type);e!==t&&(Ht(Hv,n),Ht(Qo,t))}function zD(n){Hv.current===n&&(Wt(Qo),Wt(Hv))}var hn=rd(0);function JC(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jT=[];function WD(){for(var n=0;n<jT.length;n++)jT[n]._workInProgressVersionPrimary=null;jT.length=0}var DE=OA.ReactCurrentDispatcher,HT=OA.ReactCurrentBatchConfig,pf=0,fn=null,Yn=null,mr=null,ZC=!1,cv=!1,Kv=0,bne=0;function zr(){throw Error(de(321))}function XD(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ja(n[t],e[t]))return!1;return!0}function YD(n,e,t,r,i,s){if(pf=s,fn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,DE.current=n===null||n.memoizedState===null?Cne:_ne,n=t(r,i),cv){s=0;do{if(cv=!1,Kv=0,25<=s)throw Error(de(301));s+=1,mr=Yn=null,e.updateQueue=null,DE.current=Sne,n=t(r,i)}while(cv)}if(DE.current=e1,e=Yn!==null&&Yn.next!==null,pf=0,mr=Yn=fn=null,ZC=!1,e)throw Error(de(300));return n}function qD(){var n=Kv!==0;return Kv=0,n}function Ao(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?fn.memoizedState=mr=n:mr=mr.next=n,mr}function ba(){if(Yn===null){var n=fn.alternate;n=n!==null?n.memoizedState:null}else n=Yn.next;var e=mr===null?fn.memoizedState:mr.next;if(e!==null)mr=e,Yn=n;else{if(n===null)throw Error(de(310));Yn=n,n={memoizedState:Yn.memoizedState,baseState:Yn.baseState,baseQueue:Yn.baseQueue,queue:Yn.queue,next:null},mr===null?fn.memoizedState=mr=n:mr=mr.next=n}return mr}function $v(n,e){return typeof e=="function"?e(n):e}function VT(n){var e=ba(),t=e.queue;if(t===null)throw Error(de(311));t.lastRenderedReducer=n;var r=Yn,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,A=s;do{var c=A.lane;if((pf&c)===c)l!==null&&(l=l.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),r=A.hasEagerState?A.eagerState:n(r,A.action);else{var u={lane:c,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};l===null?(o=l=u,a=r):l=l.next=u,fn.lanes|=c,mf|=c}A=A.next}while(A!==null&&A!==s);l===null?a=r:l.next=o,Ja(r,e.memoizedState)||(Vi=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,fn.lanes|=s,mf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function KT(n){var e=ba(),t=e.queue;if(t===null)throw Error(de(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=n(s,a.action),a=a.next;while(a!==i);Ja(s,e.memoizedState)||(Vi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function f$(){}function g$(n,e){var t=fn,r=ba(),i=e(),s=!Ja(r.memoizedState,i);if(s&&(r.memoizedState=i,Vi=!0),r=r.queue,JD(y$.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||mr!==null&&mr.memoizedState.tag&1){if(t.flags|=2048,Gv(9,m$.bind(null,t,r,i,e),void 0,null),vr===null)throw Error(de(349));pf&30||p$(t,e,i)}return i}function p$(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function m$(n,e,t,r){e.value=t,e.getSnapshot=r,v$(e)&&w$(n)}function y$(n,e,t){return t(function(){v$(e)&&w$(n)})}function v$(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ja(n,t)}catch{return!0}}function w$(n){var e=xA(n,1);e!==null&&qa(e,n,1,-1)}function yQ(n){var e=Ao();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$v,lastRenderedState:n},e.queue=n,n=n.dispatch=Ene.bind(null,fn,n),[e.memoizedState,n]}function Gv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=fn.updateQueue,e===null?(e={lastEffect:null,stores:null},fn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function b$(){return ba().memoizedState}function OE(n,e,t,r){var i=Ao();fn.flags|=n,i.memoizedState=Gv(1|e,t,void 0,r===void 0?null:r)}function AS(n,e,t,r){var i=ba();r=r===void 0?null:r;var s=void 0;if(Yn!==null){var a=Yn.memoizedState;if(s=a.destroy,r!==null&&XD(r,a.deps)){i.memoizedState=Gv(e,t,s,r);return}}fn.flags|=n,i.memoizedState=Gv(1|e,t,s,r)}function vQ(n,e){return OE(8390656,8,n,e)}function JD(n,e){return AS(2048,8,n,e)}function x$(n,e){return AS(4,2,n,e)}function B$(n,e){return AS(4,4,n,e)}function E$(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function C$(n,e,t){return t=t!=null?t.concat([n]):null,AS(4,4,E$.bind(null,e,n),t)}function ZD(){}function _$(n,e){var t=ba();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&XD(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function S$(n,e){var t=ba();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&XD(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function I$(n,e,t){return pf&21?(Ja(t,e)||(t=NK(),fn.lanes|=t,mf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Vi=!0),n.memoizedState=t)}function xne(n,e){var t=Ct;Ct=t!==0&&4>t?t:4,n(!0);var r=HT.transition;HT.transition={};try{n(!1),e()}finally{Ct=t,HT.transition=r}}function T$(){return ba().memoizedState}function Bne(n,e,t){var r=Eu(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},P$(n))F$(e,t);else if(t=u$(n,e,t,r),t!==null){var i=Ei();qa(t,n,r,i),k$(t,e,r)}}function Ene(n,e,t){var r=Eu(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(P$(n))F$(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Ja(o,a)){var l=e.interleaved;l===null?(i.next=i,KD(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=u$(n,e,i,r),t!==null&&(i=Ei(),qa(t,n,r,i),k$(t,e,r))}}function P$(n){var e=n.alternate;return n===fn||e!==null&&e===fn}function F$(n,e){cv=ZC=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function k$(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,PD(n,t)}}var e1={readContext:wa,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},Cne={readContext:wa,useCallback:function(n,e){return Ao().memoizedState=[n,e===void 0?null:e],n},useContext:wa,useEffect:vQ,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,OE(4194308,4,E$.bind(null,e,n),t)},useLayoutEffect:function(n,e){return OE(4194308,4,n,e)},useInsertionEffect:function(n,e){return OE(4,2,n,e)},useMemo:function(n,e){var t=Ao();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ao();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Bne.bind(null,fn,n),[r.memoizedState,n]},useRef:function(n){var e=Ao();return n={current:n},e.memoizedState=n},useState:yQ,useDebugValue:ZD,useDeferredValue:function(n){return Ao().memoizedState=n},useTransition:function(){var n=yQ(!1),e=n[0];return n=xne.bind(null,n[1]),Ao().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=fn,i=Ao();if(nn){if(t===void 0)throw Error(de(407));t=t()}else{if(t=e(),vr===null)throw Error(de(349));pf&30||p$(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,vQ(y$.bind(null,r,s,n),[n]),r.flags|=2048,Gv(9,m$.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Ao(),e=vr.identifierPrefix;if(nn){var t=sA,r=iA;t=(r&~(1<<32-Ya(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Kv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=bne++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},_ne={readContext:wa,useCallback:_$,useContext:wa,useEffect:JD,useImperativeHandle:C$,useInsertionEffect:x$,useLayoutEffect:B$,useMemo:S$,useReducer:VT,useRef:b$,useState:function(){return VT($v)},useDebugValue:ZD,useDeferredValue:function(n){var e=ba();return I$(e,Yn.memoizedState,n)},useTransition:function(){var n=VT($v)[0],e=ba().memoizedState;return[n,e]},useMutableSource:f$,useSyncExternalStore:g$,useId:T$,unstable_isNewReconciler:!1},Sne={readContext:wa,useCallback:_$,useContext:wa,useEffect:JD,useImperativeHandle:C$,useInsertionEffect:x$,useLayoutEffect:B$,useMemo:S$,useReducer:KT,useRef:b$,useState:function(){return KT($v)},useDebugValue:ZD,useDeferredValue:function(n){var e=ba();return Yn===null?e.memoizedState=n:I$(e,Yn.memoizedState,n)},useTransition:function(){var n=KT($v)[0],e=ba().memoizedState;return[n,e]},useMutableSource:f$,useSyncExternalStore:g$,useId:T$,unstable_isNewReconciler:!1};function ka(n,e){if(n&&n.defaultProps){e=pn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Q2(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:pn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var cS={isMounted:function(n){return(n=n._reactInternals)?Rf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ei(),i=Eu(n),s=hA(r,i);s.payload=e,t!=null&&(s.callback=t),e=xu(n,s,i),e!==null&&(qa(e,n,i,r),NE(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ei(),i=Eu(n),s=hA(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=xu(n,s,i),e!==null&&(qa(e,n,i,r),NE(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ei(),r=Eu(n),i=hA(t,r);i.tag=2,e!=null&&(i.callback=e),e=xu(n,i,r),e!==null&&(qa(e,n,r,t),NE(e,n,r))}};function wQ(n,e,t,r,i,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Mv(t,r)||!Mv(i,s):!0}function N$(n,e,t){var r=!1,i=Lu,s=e.contextType;return typeof s=="object"&&s!==null?s=wa(s):(i=Gi(e)?ff:oi.current,r=e.contextTypes,s=(r=r!=null)?Tm(n,i):Lu),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function bQ(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&cS.enqueueReplaceState(e,e.state,null)}function j2(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},$D(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=wa(s):(s=Gi(e)?ff:oi.current,i.context=Tm(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Q2(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cS.enqueueReplaceState(i,i.state,null),qC(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Nm(n,e){try{var t="",r=e;do t+=tte(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function $T(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function H2(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Ine=typeof WeakMap=="function"?WeakMap:Map;function D$(n,e,t){t=hA(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){n1||(n1=!0,J2=r),H2(n,e)},t}function O$(n,e,t){t=hA(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){H2(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){H2(n,e),typeof r!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function xQ(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Ine;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Hne.bind(null,n,e,t),e.then(n,n))}function BQ(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function EQ(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=hA(-1,1),e.tag=2,xu(t,e,1))),t.lanes|=1),n)}var Tne=OA.ReactCurrentOwner,Vi=!1;function wi(n,e,t,r){e.child=n===null?c$(e,null,t,r):Fm(e,n.child,t,r)}function CQ(n,e,t,r,i){t=t.render;var s=e.ref;return rp(e,i),r=YD(n,e,t,r,s,i),t=qD(),n!==null&&!Vi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,BA(n,e,i)):(nn&&t&&MD(e),e.flags|=1,wi(n,e,r,i),e.child)}function _Q(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!oO(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,U$(n,e,s,r,i)):(n=LE(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Mv,t(a,r)&&n.ref===e.ref)return BA(n,e,i)}return e.flags|=1,n=Cu(s,r),n.ref=e.ref,n.return=e,e.child=n}function U$(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(Mv(s,r)&&n.ref===e.ref)if(Vi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Vi=!0);else return e.lanes=n.lanes,BA(n,e,i)}return V2(n,e,t,r,i)}function R$(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Vg,ws),ws|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ht(Vg,ws),ws|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ht(Vg,ws),ws|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ht(Vg,ws),ws|=r;return wi(n,e,i,t),e.child}function M$(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function V2(n,e,t,r,i){var s=Gi(t)?ff:oi.current;return s=Tm(e,s),rp(e,i),t=YD(n,e,t,r,s,i),r=qD(),n!==null&&!Vi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,BA(n,e,i)):(nn&&r&&MD(e),e.flags|=1,wi(n,e,t,i),e.child)}function SQ(n,e,t,r,i){if(Gi(t)){var s=!0;GC(e)}else s=!1;if(rp(e,i),e.stateNode===null)UE(n,e),N$(e,t,r),j2(e,t,r,i),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,A=t.contextType;typeof A=="object"&&A!==null?A=wa(A):(A=Gi(t)?ff:oi.current,A=Tm(e,A));var c=t.getDerivedStateFromProps,u=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==A)&&bQ(e,a,r,A),ac=!1;var h=e.memoizedState;a.state=h,qC(e,r,a,i),l=e.memoizedState,o!==r||h!==l||$i.current||ac?(typeof c=="function"&&(Q2(e,t,c,r),l=e.memoizedState),(o=ac||wQ(e,t,o,r,h,l,A))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=A,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,d$(n,e),o=e.memoizedProps,A=e.type===e.elementType?o:ka(e.type,o),a.props=A,u=e.pendingProps,h=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=wa(l):(l=Gi(t)?ff:oi.current,l=Tm(e,l));var g=t.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||h!==l)&&bQ(e,a,r,l),ac=!1,h=e.memoizedState,a.state=h,qC(e,r,a,i);var p=e.memoizedState;o!==u||h!==p||$i.current||ac?(typeof g=="function"&&(Q2(e,t,g,r),p=e.memoizedState),(A=ac||wQ(e,t,A,r,h,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=l,r=A):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return K2(n,e,t,r,s,i)}function K2(n,e,t,r,i,s){M$(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&dQ(e,t,!1),BA(n,e,s);r=e.stateNode,Tne.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=Fm(e,n.child,null,s),e.child=Fm(e,null,o,s)):wi(n,e,o,s),e.memoizedState=r.state,i&&dQ(e,t,!0),e.child}function L$(n){var e=n.stateNode;e.pendingContext?uQ(n,e.pendingContext,e.pendingContext!==e.context):e.context&&uQ(n,e.context,!1),GD(n,e.containerInfo)}function IQ(n,e,t,r,i){return Pm(),QD(i),e.flags|=256,wi(n,e,t,r),e.child}var $2={dehydrated:null,treeContext:null,retryLane:0};function G2(n){return{baseLanes:n,cachePool:null,transitions:null}}function Q$(n,e,t){var r=e.pendingProps,i=hn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ht(hn,i&1),n===null)return M2(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=hS(a,r,0,null),n=rf(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=G2(t),e.memoizedState=$2,n):eO(e,a));if(i=n.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Pne(n,e,a,r,o,i,t);if(s){s=r.fallback,a=e.mode,i=n.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Cu(o,s):(s=rf(s,a,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=n.child.memoizedState,a=a===null?G2(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=$2,r}return s=n.child,n=s.sibling,r=Cu(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function eO(n,e){return e=hS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function BB(n,e,t,r){return r!==null&&QD(r),Fm(e,n.child,null,t),n=eO(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Pne(n,e,t,r,i,s,a){if(t)return e.flags&256?(e.flags&=-257,r=$T(Error(de(422))),BB(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hS({mode:"visible",children:r.children},i,0,null),s=rf(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Fm(e,n.child,null,a),e.child.memoizedState=G2(a),e.memoizedState=$2,s);if(!(e.mode&1))return BB(n,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(de(419)),r=$T(s,r,void 0),BB(n,e,a,r)}if(o=(a&n.childLanes)!==0,Vi||o){if(r=vr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xA(n,i),qa(r,n,i,-1))}return aO(),r=$T(Error(de(421))),BB(n,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Vne.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,_s=bu(i.nextSibling),Ts=e,nn=!0,Ka=null,n!==null&&(ia[sa++]=iA,ia[sa++]=sA,ia[sa++]=gf,iA=n.id,sA=n.overflow,gf=e),e=eO(e,r.children),e.flags|=4096,e)}function TQ(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),L2(n.return,e,t)}function GT(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function j$(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wi(n,e,r.children,t),r=hn.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TQ(n,t,e);else if(n.tag===19)TQ(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ht(hn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&JC(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),GT(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&JC(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}GT(e,!0,t,null,s);break;case"together":GT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function UE(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function BA(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),mf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(de(153));if(e.child!==null){for(n=e.child,t=Cu(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cu(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function Fne(n,e,t){switch(e.tag){case 3:L$(e),Pm();break;case 5:h$(e);break;case 1:Gi(e.type)&&GC(e);break;case 4:GD(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ht(XC,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ht(hn,hn.current&1),e.flags|=128,null):t&e.child.childLanes?Q$(n,e,t):(Ht(hn,hn.current&1),n=BA(n,e,t),n!==null?n.sibling:null);Ht(hn,hn.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return j$(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ht(hn,hn.current),r)break;return null;case 22:case 23:return e.lanes=0,R$(n,e,t)}return BA(n,e,t)}var H$,z2,V$,K$;H$=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};z2=function(){};V$=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Vd(Qo.current);var s=null;switch(t){case"input":i=g2(n,i),r=g2(n,r),s=[];break;case"select":i=pn({},i,{value:void 0}),r=pn({},r,{value:void 0}),s=[];break;case"textarea":i=y2(n,i),r=y2(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=KC)}w2(t,r);var a;t=null;for(A in i)if(!r.hasOwnProperty(A)&&i.hasOwnProperty(A)&&i[A]!=null)if(A==="style"){var o=i[A];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(Fv.hasOwnProperty(A)?s||(s=[]):(s=s||[]).push(A,null));for(A in r){var l=r[A];if(o=i!=null?i[A]:void 0,r.hasOwnProperty(A)&&l!==o&&(l!=null||o!=null))if(A==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(A,t)),t=l;else A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(A,l)):A==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(A,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(Fv.hasOwnProperty(A)?(l!=null&&A==="onScroll"&&$t("scroll",n),s||o===l||(s=[])):(s=s||[]).push(A,l))}t&&(s=s||[]).push("style",t);var A=s;(e.updateQueue=A)&&(e.flags|=4)}};K$=function(n,e,t,r){t!==r&&(e.flags|=4)};function Y0(n,e){if(!nn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Wr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function kne(n,e,t){var r=e.pendingProps;switch(LD(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(e),null;case 1:return Gi(e.type)&&$C(),Wr(e),null;case 3:return r=e.stateNode,km(),Wt($i),Wt(oi),WD(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(bB(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ka!==null&&(tF(Ka),Ka=null))),z2(n,e),Wr(e),null;case 5:zD(e);var i=Vd(Vv.current);if(t=e.type,n!==null&&e.stateNode!=null)V$(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return Wr(e),null}if(n=Vd(Qo.current),bB(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Do]=e,r[jv]=s,n=(e.mode&1)!==0,t){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(i=0;i<xy.length;i++)$t(xy[i],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":ML(r,s),$t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$t("invalid",r);break;case"textarea":QL(r,s),$t("invalid",r)}w2(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&wB(r.textContent,o,n),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&wB(r.textContent,o,n),i=["children",""+o]):Fv.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&$t("scroll",r)}switch(t){case"input":dB(r),LL(r,s,!0);break;case"textarea":dB(r),jL(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=KC)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yK(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[Do]=e,n[jv]=r,H$(n,e,!1,!1),e.stateNode=n;e:{switch(a=b2(t,r),t){case"dialog":$t("cancel",n),$t("close",n),i=r;break;case"iframe":case"object":case"embed":$t("load",n),i=r;break;case"video":case"audio":for(i=0;i<xy.length;i++)$t(xy[i],n);i=r;break;case"source":$t("error",n),i=r;break;case"img":case"image":case"link":$t("error",n),$t("load",n),i=r;break;case"details":$t("toggle",n),i=r;break;case"input":ML(n,r),i=g2(n,r),$t("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=pn({},r,{value:void 0}),$t("invalid",n);break;case"textarea":QL(n,r),i=y2(n,r),$t("invalid",n);break;default:i=r}w2(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?bK(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vK(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&kv(n,l):typeof l=="number"&&kv(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fv.hasOwnProperty(s)?l!=null&&s==="onScroll"&&$t("scroll",n):l!=null&&ED(n,s,l,a))}switch(t){case"input":dB(n),LL(n,r,!1);break;case"textarea":dB(n),jL(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Mu(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Zg(n,!!r.multiple,s,!1):r.defaultValue!=null&&Zg(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=KC)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wr(e),null;case 6:if(n&&e.stateNode!=null)K$(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(t=Vd(Vv.current),Vd(Qo.current),bB(e)){if(r=e.stateNode,t=e.memoizedProps,r[Do]=e,(s=r.nodeValue!==t)&&(n=Ts,n!==null))switch(n.tag){case 3:wB(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wB(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Do]=e,e.stateNode=r}return Wr(e),null;case 13:if(Wt(hn),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nn&&_s!==null&&e.mode&1&&!(e.flags&128))l$(),Pm(),e.flags|=98560,s=!1;else if(s=bB(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(de(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[Do]=e}else Pm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wr(e),s=!1}else Ka!==null&&(tF(Ka),Ka=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||hn.current&1?Jn===0&&(Jn=3):aO())),e.updateQueue!==null&&(e.flags|=4),Wr(e),null);case 4:return km(),z2(n,e),n===null&&Lv(e.stateNode.containerInfo),Wr(e),null;case 10:return VD(e.type._context),Wr(e),null;case 17:return Gi(e.type)&&$C(),Wr(e),null;case 19:if(Wt(hn),s=e.memoizedState,s===null)return Wr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Y0(s,!1);else{if(Jn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=JC(n),a!==null){for(e.flags|=128,Y0(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ht(hn,hn.current&1|2),e.child}n=n.sibling}s.tail!==null&&In()>Dm&&(e.flags|=128,r=!0,Y0(s,!1),e.lanes=4194304)}else{if(!r)if(n=JC(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Y0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!nn)return Wr(e),null}else 2*In()-s.renderingStartTime>Dm&&t!==1073741824&&(e.flags|=128,r=!0,Y0(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=In(),e.sibling=null,t=hn.current,Ht(hn,r?t&1|2:t&1),e):(Wr(e),null);case 22:case 23:return sO(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ws&1073741824&&(Wr(e),e.subtreeFlags&6&&(e.flags|=8192)):Wr(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function Nne(n,e){switch(LD(e),e.tag){case 1:return Gi(e.type)&&$C(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return km(),Wt($i),Wt(oi),WD(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return zD(e),null;case 13:if(Wt(hn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(de(340));Pm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Wt(hn),null;case 4:return km(),null;case 10:return VD(e.type._context),null;case 22:case 23:return sO(),null;case 24:return null;default:return null}}var EB=!1,ii=!1,Dne=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Hg(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){bn(n,e,r)}else t.current=null}function W2(n,e,t){try{t()}catch(r){bn(n,e,r)}}var PQ=!1;function One(n,e){if(F2=jC,n=XK(),RD(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,A=0,c=0,u=n,h=null;t:for(;;){for(var g;u!==t||i!==0&&u.nodeType!==3||(o=a+i),u!==s||r!==0&&u.nodeType!==3||(l=a+r),u.nodeType===3&&(a+=u.nodeValue.length),(g=u.firstChild)!==null;)h=u,u=g;for(;;){if(u===n)break t;if(h===t&&++A===i&&(o=a),h===s&&++c===r&&(l=a),(g=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=g}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(k2={focusedElem:n,selectionRange:t},jC=!1,_e=e;_e!==null;)if(e=_e,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,_e=n;else for(;_e!==null;){e=_e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ka(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(E){bn(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}return p=PQ,PQ=!1,p}function uv(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&W2(e,t,s)}i=i.next}while(i!==r)}}function uS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function X2(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function $$(n){var e=n.alternate;e!==null&&(n.alternate=null,$$(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Do],delete e[jv],delete e[O2],delete e[mne],delete e[yne])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function G$(n){return n.tag===5||n.tag===3||n.tag===4}function FQ(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||G$(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=KC));else if(r!==4&&(n=n.child,n!==null))for(Y2(n,e,t),n=n.sibling;n!==null;)Y2(n,e,t),n=n.sibling}function q2(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(q2(n,e,t),n=n.sibling;n!==null;)q2(n,e,t),n=n.sibling}var kr=null,Va=!1;function YA(n,e,t){for(t=t.child;t!==null;)z$(n,e,t),t=t.sibling}function z$(n,e,t){if(Lo&&typeof Lo.onCommitFiberUnmount=="function")try{Lo.onCommitFiberUnmount(rS,t)}catch{}switch(t.tag){case 5:ii||Hg(t,e);case 6:var r=kr,i=Va;kr=null,YA(n,e,t),kr=r,Va=i,kr!==null&&(Va?(n=kr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):kr.removeChild(t.stateNode));break;case 18:kr!==null&&(Va?(n=kr,t=t.stateNode,n.nodeType===8?LT(n.parentNode,t):n.nodeType===1&&LT(n,t),Uv(n)):LT(kr,t.stateNode));break;case 4:r=kr,i=Va,kr=t.stateNode.containerInfo,Va=!0,YA(n,e,t),kr=r,Va=i;break;case 0:case 11:case 14:case 15:if(!ii&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&W2(t,e,a),i=i.next}while(i!==r)}YA(n,e,t);break;case 1:if(!ii&&(Hg(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){bn(t,e,o)}YA(n,e,t);break;case 21:YA(n,e,t);break;case 22:t.mode&1?(ii=(r=ii)||t.memoizedState!==null,YA(n,e,t),ii=r):YA(n,e,t);break;default:YA(n,e,t)}}function kQ(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Dne),e.forEach(function(r){var i=Kne.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ia(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:kr=o.stateNode,Va=!1;break e;case 3:kr=o.stateNode.containerInfo,Va=!0;break e;case 4:kr=o.stateNode.containerInfo,Va=!0;break e}o=o.return}if(kr===null)throw Error(de(160));z$(s,a,i),kr=null,Va=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(A){bn(i,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W$(e,n),e=e.sibling}function W$(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ia(e,n),ro(n),r&4){try{uv(3,n,n.return),uS(3,n)}catch(m){bn(n,n.return,m)}try{uv(5,n,n.return)}catch(m){bn(n,n.return,m)}}break;case 1:Ia(e,n),ro(n),r&512&&t!==null&&Hg(t,t.return);break;case 5:if(Ia(e,n),ro(n),r&512&&t!==null&&Hg(t,t.return),n.flags&32){var i=n.stateNode;try{kv(i,"")}catch(m){bn(n,n.return,m)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&pK(i,s),b2(o,a);var A=b2(o,s);for(a=0;a<l.length;a+=2){var c=l[a],u=l[a+1];c==="style"?bK(i,u):c==="dangerouslySetInnerHTML"?vK(i,u):c==="children"?kv(i,u):ED(i,c,u,A)}switch(o){case"input":p2(i,s);break;case"textarea":mK(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Zg(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?Zg(i,!!s.multiple,s.defaultValue,!0):Zg(i,!!s.multiple,s.multiple?[]:"",!1))}i[jv]=s}catch(m){bn(n,n.return,m)}}break;case 6:if(Ia(e,n),ro(n),r&4){if(n.stateNode===null)throw Error(de(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(m){bn(n,n.return,m)}}break;case 3:if(Ia(e,n),ro(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Uv(e.containerInfo)}catch(m){bn(n,n.return,m)}break;case 4:Ia(e,n),ro(n);break;case 13:Ia(e,n),ro(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rO=In())),r&4&&kQ(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ii=(A=ii)||c,Ia(e,n),ii=A):Ia(e,n),ro(n),r&8192){if(A=n.memoizedState!==null,(n.stateNode.isHidden=A)&&!c&&n.mode&1)for(_e=n,c=n.child;c!==null;){for(u=_e=c;_e!==null;){switch(h=_e,g=h.child,h.tag){case 0:case 11:case 14:case 15:uv(4,h,h.return);break;case 1:Hg(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){bn(r,t,m)}}break;case 5:Hg(h,h.return);break;case 22:if(h.memoizedState!==null){DQ(u);continue}}g!==null?(g.return=h,_e=g):DQ(u)}c=c.sibling}e:for(c=null,u=n;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,A?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=wK("display",a))}catch(m){bn(n,n.return,m)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=A?"":u.memoizedProps}catch(m){bn(n,n.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===n)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ia(e,n),ro(n),r&4&&kQ(n);break;case 21:break;default:Ia(e,n),ro(n)}}function ro(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(G$(t)){var r=t;break e}t=t.return}throw Error(de(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(kv(i,""),r.flags&=-33);var s=FQ(n);q2(n,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=FQ(n);Y2(n,o,a);break;default:throw Error(de(161))}}catch(l){bn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Une(n,e,t){_e=n,X$(n)}function X$(n,e,t){for(var r=(n.mode&1)!==0;_e!==null;){var i=_e,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||EB;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ii;o=EB;var A=ii;if(EB=a,(ii=l)&&!A)for(_e=i;_e!==null;)a=_e,l=a.child,a.tag===22&&a.memoizedState!==null?OQ(i):l!==null?(l.return=a,_e=l):OQ(i);for(;s!==null;)_e=s,X$(s),s=s.sibling;_e=i,EB=o,ii=A}NQ(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,_e=s):NQ(n)}}function NQ(n){for(;_e!==null;){var e=_e;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ii||uS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ii)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ka(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&mQ(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mQ(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var c=A.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&Uv(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}ii||e.flags&512&&X2(e)}catch(h){bn(e,e.return,h)}}if(e===n){_e=null;break}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}}function DQ(n){for(;_e!==null;){var e=_e;if(e===n){_e=null;break}var t=e.sibling;if(t!==null){t.return=e.return,_e=t;break}_e=e.return}}function OQ(n){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{uS(4,e)}catch(l){bn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){bn(e,i,l)}}var s=e.return;try{X2(e)}catch(l){bn(e,s,l)}break;case 5:var a=e.return;try{X2(e)}catch(l){bn(e,a,l)}}}catch(l){bn(e,e.return,l)}if(e===n){_e=null;break}var o=e.sibling;if(o!==null){o.return=e.return,_e=o;break}_e=e.return}}var Rne=Math.ceil,t1=OA.ReactCurrentDispatcher,tO=OA.ReactCurrentOwner,pa=OA.ReactCurrentBatchConfig,ut=0,vr=null,Mn=null,Hr=0,ws=0,Vg=rd(0),Jn=0,zv=null,mf=0,dS=0,nO=0,dv=null,ji=null,rO=0,Dm=1/0,ol=null,n1=!1,J2=null,Bu=null,CB=!1,lu=null,r1=0,hv=0,Z2=null,RE=-1,ME=0;function Ei(){return ut&6?In():RE!==-1?RE:RE=In()}function Eu(n){return n.mode&1?ut&2&&Hr!==0?Hr&-Hr:wne.transition!==null?(ME===0&&(ME=NK()),ME):(n=Ct,n!==0||(n=window.event,n=n===void 0?16:QK(n.type)),n):1}function qa(n,e,t,r){if(50<hv)throw hv=0,Z2=null,Error(de(185));ix(n,t,r),(!(ut&2)||n!==vr)&&(n===vr&&(!(ut&2)&&(dS|=t),Jn===4&&cc(n,Hr)),zi(n,r),t===1&&ut===0&&!(e.mode&1)&&(Dm=In()+500,lS&&id()))}function zi(n,e){var t=n.callbackNode;wte(n,e);var r=QC(n,n===vr?Hr:0);if(r===0)t!==null&&KL(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&KL(t),e===1)n.tag===0?vne(UQ.bind(null,n)):s$(UQ.bind(null,n)),gne(function(){!(ut&6)&&id()}),t=null;else{switch(DK(r)){case 1:t=TD;break;case 4:t=FK;break;case 16:t=LC;break;case 536870912:t=kK;break;default:t=LC}t=r6(t,Y$.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Y$(n,e){if(RE=-1,ME=0,ut&6)throw Error(de(327));var t=n.callbackNode;if(ip()&&n.callbackNode!==t)return null;var r=QC(n,n===vr?Hr:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=i1(n,r);else{e=r;var i=ut;ut|=2;var s=J$();(vr!==n||Hr!==e)&&(ol=null,Dm=In()+500,nf(n,e));do try{Qne();break}catch(o){q$(n,o)}while(!0);HD(),t1.current=s,ut=i,Mn!==null?e=0:(vr=null,Hr=0,e=Jn)}if(e!==0){if(e===2&&(i=_2(n),i!==0&&(r=i,e=eF(n,i))),e===1)throw t=zv,nf(n,0),cc(n,r),zi(n,In()),t;if(e===6)cc(n,r);else{if(i=n.current.alternate,!(r&30)&&!Mne(i)&&(e=i1(n,r),e===2&&(s=_2(n),s!==0&&(r=s,e=eF(n,s))),e===1))throw t=zv,nf(n,0),cc(n,r),zi(n,In()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:Ed(n,ji,ol);break;case 3:if(cc(n,r),(r&130023424)===r&&(e=rO+500-In(),10<e)){if(QC(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ei(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=D2(Ed.bind(null,n,ji,ol),e);break}Ed(n,ji,ol);break;case 4:if(cc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var a=31-Ya(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=In()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rne(r/1960))-r,10<r){n.timeoutHandle=D2(Ed.bind(null,n,ji,ol),r);break}Ed(n,ji,ol);break;case 5:Ed(n,ji,ol);break;default:throw Error(de(329))}}}return zi(n,In()),n.callbackNode===t?Y$.bind(null,n):null}function eF(n,e){var t=dv;return n.current.memoizedState.isDehydrated&&(nf(n,e).flags|=256),n=i1(n,e),n!==2&&(e=ji,ji=t,e!==null&&tF(e)),n}function tF(n){ji===null?ji=n:ji.push.apply(ji,n)}function Mne(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Ja(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cc(n,e){for(e&=~nO,e&=~dS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ya(e),r=1<<t;n[t]=-1,e&=~r}}function UQ(n){if(ut&6)throw Error(de(327));ip();var e=QC(n,0);if(!(e&1))return zi(n,In()),null;var t=i1(n,e);if(n.tag!==0&&t===2){var r=_2(n);r!==0&&(e=r,t=eF(n,r))}if(t===1)throw t=zv,nf(n,0),cc(n,e),zi(n,In()),t;if(t===6)throw Error(de(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ed(n,ji,ol),zi(n,In()),null}function iO(n,e){var t=ut;ut|=1;try{return n(e)}finally{ut=t,ut===0&&(Dm=In()+500,lS&&id())}}function yf(n){lu!==null&&lu.tag===0&&!(ut&6)&&ip();var e=ut;ut|=1;var t=pa.transition,r=Ct;try{if(pa.transition=null,Ct=1,n)return n()}finally{Ct=r,pa.transition=t,ut=e,!(ut&6)&&id()}}function sO(){ws=Vg.current,Wt(Vg)}function nf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,fne(t)),Mn!==null)for(t=Mn.return;t!==null;){var r=t;switch(LD(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$C();break;case 3:km(),Wt($i),Wt(oi),WD();break;case 5:zD(r);break;case 4:km();break;case 13:Wt(hn);break;case 19:Wt(hn);break;case 10:VD(r.type._context);break;case 22:case 23:sO()}t=t.return}if(vr=n,Mn=n=Cu(n.current,null),Hr=ws=e,Jn=0,zv=null,nO=dS=mf=0,ji=dv=null,Hd!==null){for(e=0;e<Hd.length;e++)if(t=Hd[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}t.pending=r}Hd=null}return n}function q$(n,e){do{var t=Mn;try{if(HD(),DE.current=e1,ZC){for(var r=fn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ZC=!1}if(pf=0,mr=Yn=fn=null,cv=!1,Kv=0,tO.current=null,t===null||t.return===null){Jn=1,zv=e,Mn=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Hr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var A=l,c=o,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=BQ(a);if(g!==null){g.flags&=-257,EQ(g,a,o,s,e),g.mode&1&&xQ(s,A,e),e=g,l=A;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){xQ(s,A,e),aO();break e}l=Error(de(426))}}else if(nn&&o.mode&1){var w=BQ(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),EQ(w,a,o,s,e),QD(Nm(l,o));break e}}s=l=Nm(l,o),Jn!==4&&(Jn=2),dv===null?dv=[s]:dv.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=D$(s,l,e);pQ(s,v);break e;case 1:o=l;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Bu===null||!Bu.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=O$(s,o,e);pQ(s,E);break e}}s=s.return}while(s!==null)}e6(t)}catch(I){e=I,Mn===t&&t!==null&&(Mn=t=t.return);continue}break}while(!0)}function J$(){var n=t1.current;return t1.current=e1,n===null?e1:n}function aO(){(Jn===0||Jn===3||Jn===2)&&(Jn=4),vr===null||!(mf&268435455)&&!(dS&268435455)||cc(vr,Hr)}function i1(n,e){var t=ut;ut|=2;var r=J$();(vr!==n||Hr!==e)&&(ol=null,nf(n,e));do try{Lne();break}catch(i){q$(n,i)}while(!0);if(HD(),ut=t,t1.current=r,Mn!==null)throw Error(de(261));return vr=null,Hr=0,Jn}function Lne(){for(;Mn!==null;)Z$(Mn)}function Qne(){for(;Mn!==null&&!ute();)Z$(Mn)}function Z$(n){var e=n6(n.alternate,n,ws);n.memoizedProps=n.pendingProps,e===null?e6(n):Mn=e,tO.current=null}function e6(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Nne(t,e),t!==null){t.flags&=32767,Mn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jn=6,Mn=null;return}}else if(t=kne(t,e,ws),t!==null){Mn=t;return}if(e=e.sibling,e!==null){Mn=e;return}Mn=e=n}while(e!==null);Jn===0&&(Jn=5)}function Ed(n,e,t){var r=Ct,i=pa.transition;try{pa.transition=null,Ct=1,jne(n,e,t,r)}finally{pa.transition=i,Ct=r}return null}function jne(n,e,t,r){do ip();while(lu!==null);if(ut&6)throw Error(de(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(de(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(bte(n,s),n===vr&&(Mn=vr=null,Hr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||CB||(CB=!0,r6(LC,function(){return ip(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=pa.transition,pa.transition=null;var a=Ct;Ct=1;var o=ut;ut|=4,tO.current=null,One(n,t),W$(t,n),one(k2),jC=!!F2,k2=F2=null,n.current=t,Une(t),dte(),ut=o,Ct=a,pa.transition=s}else n.current=t;if(CB&&(CB=!1,lu=n,r1=i),s=n.pendingLanes,s===0&&(Bu=null),gte(t.stateNode),zi(n,In()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(n1)throw n1=!1,n=J2,J2=null,n;return r1&1&&n.tag!==0&&ip(),s=n.pendingLanes,s&1?n===Z2?hv++:(hv=0,Z2=n):hv=0,id(),null}function ip(){if(lu!==null){var n=DK(r1),e=pa.transition,t=Ct;try{if(pa.transition=null,Ct=16>n?16:n,lu===null)var r=!1;else{if(n=lu,lu=null,r1=0,ut&6)throw Error(de(331));var i=ut;for(ut|=4,_e=n.current;_e!==null;){var s=_e,a=s.child;if(_e.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var A=o[l];for(_e=A;_e!==null;){var c=_e;switch(c.tag){case 0:case 11:case 15:uv(8,c,s)}var u=c.child;if(u!==null)u.return=c,_e=u;else for(;_e!==null;){c=_e;var h=c.sibling,g=c.return;if($$(c),c===A){_e=null;break}if(h!==null){h.return=g,_e=h;break}_e=g}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}_e=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,_e=a;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uv(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,_e=v;break e}_e=s.return}}var b=n.current;for(_e=b;_e!==null;){a=_e;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,_e=x;else e:for(a=b;_e!==null;){if(o=_e,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:uS(9,o)}}catch(I){bn(o,o.return,I)}if(o===a){_e=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,_e=E;break e}_e=o.return}}if(ut=i,id(),Lo&&typeof Lo.onPostCommitFiberRoot=="function")try{Lo.onPostCommitFiberRoot(rS,n)}catch{}r=!0}return r}finally{Ct=t,pa.transition=e}}return!1}function RQ(n,e,t){e=Nm(t,e),e=D$(n,e,1),n=xu(n,e,1),e=Ei(),n!==null&&(ix(n,1,e),zi(n,e))}function bn(n,e,t){if(n.tag===3)RQ(n,n,t);else for(;e!==null;){if(e.tag===3){RQ(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bu===null||!Bu.has(r))){n=Nm(t,n),n=O$(e,n,1),e=xu(e,n,1),n=Ei(),e!==null&&(ix(e,1,n),zi(e,n));break}}e=e.return}}function Hne(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ei(),n.pingedLanes|=n.suspendedLanes&t,vr===n&&(Hr&t)===t&&(Jn===4||Jn===3&&(Hr&130023424)===Hr&&500>In()-rO?nf(n,0):nO|=t),zi(n,e)}function t6(n,e){e===0&&(n.mode&1?(e=gB,gB<<=1,!(gB&130023424)&&(gB=4194304)):e=1);var t=Ei();n=xA(n,e),n!==null&&(ix(n,e,t),zi(n,t))}function Vne(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),t6(n,t)}function Kne(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),t6(n,t)}var n6;n6=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||$i.current)Vi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Vi=!1,Fne(n,e,t);Vi=!!(n.flags&131072)}else Vi=!1,nn&&e.flags&1048576&&a$(e,WC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;UE(n,e),n=e.pendingProps;var i=Tm(e,oi.current);rp(e,t),i=YD(null,e,r,n,i,t);var s=qD();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gi(r)?(s=!0,GC(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$D(e),i.updater=cS,e.stateNode=i,i._reactInternals=e,j2(e,r,n,t),e=K2(null,e,r,!0,s,t)):(e.tag=0,nn&&s&&MD(e),wi(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(UE(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Gne(r),n=ka(r,n),i){case 0:e=V2(null,e,r,n,t);break e;case 1:e=SQ(null,e,r,n,t);break e;case 11:e=CQ(null,e,r,n,t);break e;case 14:e=_Q(null,e,r,ka(r.type,n),t);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ka(r,i),V2(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ka(r,i),SQ(n,e,r,i,t);case 3:e:{if(L$(e),n===null)throw Error(de(387));r=e.pendingProps,s=e.memoizedState,i=s.element,d$(n,e),qC(e,r,null,t);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nm(Error(de(423)),e),e=IQ(n,e,r,t,i);break e}else if(r!==i){i=Nm(Error(de(424)),e),e=IQ(n,e,r,t,i);break e}else for(_s=bu(e.stateNode.containerInfo.firstChild),Ts=e,nn=!0,Ka=null,t=c$(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Pm(),r===i){e=BA(n,e,t);break e}wi(n,e,r,t)}e=e.child}return e;case 5:return h$(e),n===null&&M2(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,a=i.children,N2(r,i)?a=null:s!==null&&N2(r,s)&&(e.flags|=32),M$(n,e),wi(n,e,a,t),e.child;case 6:return n===null&&M2(e),null;case 13:return Q$(n,e,t);case 4:return GD(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Fm(e,null,r,t):wi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ka(r,i),CQ(n,e,r,i,t);case 7:return wi(n,e,e.pendingProps,t),e.child;case 8:return wi(n,e,e.pendingProps.children,t),e.child;case 12:return wi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ht(XC,r._currentValue),r._currentValue=a,s!==null)if(Ja(s.value,a)){if(s.children===i.children&&!$i.current){e=BA(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=hA(-1,t&-t),l.tag=2;var A=s.updateQueue;if(A!==null){A=A.shared;var c=A.pending;c===null?l.next=l:(l.next=c.next,c.next=l),A.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),L2(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(de(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),L2(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}wi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,rp(e,t),i=wa(i),r=r(i),e.flags|=1,wi(n,e,r,t),e.child;case 14:return r=e.type,i=ka(r,e.pendingProps),i=ka(r.type,i),_Q(n,e,r,i,t);case 15:return U$(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ka(r,i),UE(n,e),e.tag=1,Gi(r)?(n=!0,GC(e)):n=!1,rp(e,t),N$(e,r,i),j2(e,r,i,t),K2(null,e,r,!0,n,t);case 19:return j$(n,e,t);case 22:return R$(n,e,t)}throw Error(de(156,e.tag))};function r6(n,e){return PK(n,e)}function $ne(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(n,e,t,r){return new $ne(n,e,t,r)}function oO(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gne(n){if(typeof n=="function")return oO(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_D)return 11;if(n===SD)return 14}return 2}function Cu(n,e){var t=n.alternate;return t===null?(t=Aa(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function LE(n,e,t,r,i,s){var a=2;if(r=n,typeof n=="function")oO(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Ng:return rf(t.children,i,s,e);case CD:a=8,i|=8;break;case u2:return n=Aa(12,t,e,i|2),n.elementType=u2,n.lanes=s,n;case d2:return n=Aa(13,t,e,i),n.elementType=d2,n.lanes=s,n;case h2:return n=Aa(19,t,e,i),n.elementType=h2,n.lanes=s,n;case hK:return hS(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uK:a=10;break e;case dK:a=9;break e;case _D:a=11;break e;case SD:a=14;break e;case sc:a=16,r=null;break e}throw Error(de(130,n==null?n:typeof n,""))}return e=Aa(a,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function rf(n,e,t,r){return n=Aa(7,n,r,e),n.lanes=t,n}function hS(n,e,t,r){return n=Aa(22,n,r,e),n.elementType=hK,n.lanes=t,n.stateNode={isHidden:!1},n}function zT(n,e,t){return n=Aa(6,n,null,e),n.lanes=t,n}function WT(n,e,t){return e=Aa(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function zne(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=IT(0),this.expirationTimes=IT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lO(n,e,t,r,i,s,a,o,l){return n=new zne(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Aa(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$D(s),n}function Wne(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kg,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function i6(n){if(!n)return Lu;n=n._reactInternals;e:{if(Rf(n)!==n||n.tag!==1)throw Error(de(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(n.tag===1){var t=n.type;if(Gi(t))return i$(n,t,e)}return e}function s6(n,e,t,r,i,s,a,o,l){return n=lO(t,r,!0,n,i,s,a,o,l),n.context=i6(null),t=n.current,r=Ei(),i=Eu(t),s=hA(r,i),s.callback=e??null,xu(t,s,i),n.current.lanes=i,ix(n,i,r),zi(n,r),n}function fS(n,e,t,r){var i=e.current,s=Ei(),a=Eu(i);return t=i6(t),e.context===null?e.context=t:e.pendingContext=t,e=hA(s,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=xu(i,e,a),n!==null&&(qa(n,i,a,s),NE(n,i,a)),a}function s1(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function MQ(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function AO(n,e){MQ(n,e),(n=n.alternate)&&MQ(n,e)}var a6=typeof reportError=="function"?reportError:function(n){console.error(n)};function cO(n){this._internalRoot=n}gS.prototype.render=cO.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(de(409));fS(n,e,null,null)};gS.prototype.unmount=cO.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;yf(function(){fS(null,n,null,null)}),e[bA]=null}};function gS(n){this._internalRoot=n}gS.prototype.unstable_scheduleHydration=function(n){if(n){var e=RK();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ac.length&&e!==0&&e<Ac[t].priority;t++);Ac.splice(t,0,n),t===0&&LK(n)}};function uO(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function LQ(){}function Xne(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var A=s1(a);s.call(A)}}var a=s6(e,r,n,0,null,!1,!1,"",LQ);return n._reactRootContainer=a,n[bA]=a.current,Lv(n.nodeType===8?n.parentNode:n),yf(),a}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var A=s1(l);o.call(A)}}var l=lO(n,0,!1,null,null,!1,!1,"",LQ);return n._reactRootContainer=l,n[bA]=l.current,Lv(n.nodeType===8?n.parentNode:n),yf(function(){fS(e,l,t,r)}),l}function mS(n,e,t,r,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=s1(a);o.call(l)}}fS(e,a,n,i)}else a=Xne(t,e,n,i,r);return s1(a)}OK=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=by(e.pendingLanes);t!==0&&(PD(e,t|1),zi(e,In()),!(ut&6)&&(Dm=In()+500,id()))}break;case 13:yf(function(){var r=xA(n,1);if(r!==null){var i=Ei();qa(r,n,1,i)}}),AO(n,1)}};FD=function(n){if(n.tag===13){var e=xA(n,134217728);if(e!==null){var t=Ei();qa(e,n,134217728,t)}AO(n,134217728)}};UK=function(n){if(n.tag===13){var e=Eu(n),t=xA(n,e);if(t!==null){var r=Ei();qa(t,n,e,r)}AO(n,e)}};RK=function(){return Ct};MK=function(n,e){var t=Ct;try{return Ct=n,e()}finally{Ct=t}};B2=function(n,e,t){switch(e){case"input":if(p2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=oS(r);if(!i)throw Error(de(90));gK(r),p2(r,i)}}}break;case"textarea":mK(n,t);break;case"select":e=t.value,e!=null&&Zg(n,!!t.multiple,e,!1)}};EK=iO;CK=yf;var Yne={usingClientEntryPoint:!1,Events:[ax,Rg,oS,xK,BK,iO]},q0={findFiberByHostInstance:jd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qne={bundleType:q0.bundleType,version:q0.version,rendererPackageName:q0.rendererPackageName,rendererConfig:q0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:OA.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=IK(n),n===null?null:n.stateNode},findFiberByHostInstance:q0.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _B=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_B.isDisabled&&_B.supportsFiber)try{rS=_B.inject(qne),Lo=_B}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yne;Ms.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uO(e))throw Error(de(200));return Wne(n,e,null,t)};Ms.createRoot=function(n,e){if(!uO(n))throw Error(de(299));var t=!1,r="",i=a6;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lO(n,1,!1,null,null,t,!1,r,i),n[bA]=e.current,Lv(n.nodeType===8?n.parentNode:n),new cO(e)};Ms.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(de(188)):(n=Object.keys(n).join(","),Error(de(268,n)));return n=IK(e),n=n===null?null:n.stateNode,n};Ms.flushSync=function(n){return yf(n)};Ms.hydrate=function(n,e,t){if(!pS(e))throw Error(de(200));return mS(null,n,e,!0,t)};Ms.hydrateRoot=function(n,e,t){if(!uO(n))throw Error(de(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",a=a6;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=s6(e,null,n,1,t??null,i,!1,s,a),n[bA]=e.current,Lv(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new gS(e)};Ms.render=function(n,e,t){if(!pS(e))throw Error(de(200));return mS(null,n,e,!1,t)};Ms.unmountComponentAtNode=function(n){if(!pS(n))throw Error(de(40));return n._reactRootContainer?(yf(function(){mS(null,null,n,!1,function(){n._reactRootContainer=null,n[bA]=null})}),!0):!1};Ms.unstable_batchedUpdates=iO;Ms.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!pS(t))throw Error(de(200));if(n==null||n._reactInternals===void 0)throw Error(de(38));return mS(n,e,t,!1,r)};Ms.version="18.3.1-next-f1338f8080-20240426";function o6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o6)}catch(n){console.error(n)}}o6(),oK.exports=Ms;var dO=oK.exports,QQ=dO;A2.createRoot=QQ.createRoot,A2.hydrateRoot=QQ.hydrateRoot;const Jne="modulepreload",Zne=function(n){return"/Brainless/"+n},jQ={},Au=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=Zne(l),l in jQ)return;jQ[l]=!0;const A=l.endsWith(".css"),c=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=A?"stylesheet":Jne,A||(u.as="script"),u.crossOrigin="",u.href=l,o&&u.setAttribute("nonce",o),document.head.appendChild(u),A)return new Promise((h,g)=>{u.addEventListener("load",h),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wv(){return Wv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wv.apply(this,arguments)}var cu;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(cu||(cu={}));const HQ="popstate";function ere(n){n===void 0&&(n={});function e(i,s){let{pathname:a="/",search:o="",hash:l=""}=Mf(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),nF("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=i.location.href,A=l.indexOf("#");o=A===-1?l:l.slice(0,A)}return o+"#"+(typeof s=="string"?s:a1(s))}function r(i,s){hO(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return nre(e,t,r,n)}function gn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hO(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tre(){return Math.random().toString(36).substr(2,8)}function VQ(n,e){return{usr:n.state,key:n.key,idx:e}}function nF(n,e,t,r){return t===void 0&&(t=null),Wv({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Mf(e):e,{state:t,key:e&&e.key||r||tre()})}function a1(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function nre(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=cu.Pop,l=null,A=c();A==null&&(A=0,a.replaceState(Wv({},a.state,{idx:A}),""));function c(){return(a.state||{idx:null}).idx}function u(){o=cu.Pop;let w=c(),v=w==null?null:w-A;A=w,l&&l({action:o,location:m.location,delta:v})}function h(w,v){o=cu.Push;let b=nF(m.location,w,v);t(b,w),A=c()+1;let x=VQ(b,A),E=m.createHref(b);try{a.pushState(x,"",E)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(E)}s&&l&&l({action:o,location:m.location,delta:1})}function g(w,v){o=cu.Replace;let b=nF(m.location,w,v);t(b,w),A=c();let x=VQ(b,A),E=m.createHref(b);a.replaceState(x,"",E),s&&l&&l({action:o,location:m.location,delta:0})}function p(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof w=="string"?w:a1(w);return b=b.replace(/ $/,"%20"),gn(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let m={get action(){return o},get location(){return n(i,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(HQ,u),l=w,()=>{i.removeEventListener(HQ,u),l=null}},createHref(w){return e(i,w)},createURL:p,encodeLocation(w){let v=p(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:g,go(w){return a.go(w)}};return m}var KQ;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(KQ||(KQ={}));function rre(n,e,t){return t===void 0&&(t="/"),ire(n,e,t)}function ire(n,e,t,r){let i=typeof e=="string"?Mf(e):e,s=Om(i.pathname||"/",t);if(s==null)return null;let a=l6(n);sre(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let A=pre(s);o=fre(a[l],A)}return o}function l6(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(gn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let A=_u([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(gn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+A+'".')),l6(s.children,e,c,A)),!(s.path==null&&!s.index)&&e.push({path:A,score:dre(A,s.index),routesMeta:c})};return n.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of A6(s.path))i(s,a,l)}),e}function A6(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=A6(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function sre(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:hre(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const are=/^:[\w-]+$/,ore=3,lre=2,Are=1,cre=10,ure=-2,$Q=n=>n==="*";function dre(n,e){let t=n.split("/"),r=t.length;return t.some($Q)&&(r+=ure),e&&(r+=lre),t.filter(i=>!$Q(i)).reduce((i,s)=>i+(are.test(s)?ore:s===""?Are:cre),r)}function hre(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function fre(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],A=o===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=rF({path:l.relativePath,caseSensitive:l.caseSensitive,end:A},c),h=l.route;if(!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:_u([s,u.pathname]),pathnameBase:wre(_u([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=_u([s,u.pathnameBase]))}return a}function rF(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=gre(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((A,c,u)=>{let{paramName:h,isOptional:g}=c;if(h==="*"){let m=o[u]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=o[u];return g&&!p?A[h]=void 0:A[h]=(p||"").replace(/%2F/g,"/"),A},{}),pathname:s,pathnameBase:a,pattern:n}}function gre(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),hO(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pre(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hO(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Om(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mre(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Mf(n):n;return{pathname:t?t.startsWith("/")?t:yre(t,e):e,search:bre(r),hash:xre(i)}}function yre(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function XT(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vre(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fO(n,e){let t=vre(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function gO(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Mf(n):(i=Wv({},n),gn(!i.pathname||!i.pathname.includes("?"),XT("?","pathname","search",i)),gn(!i.pathname||!i.pathname.includes("#"),XT("#","pathname","hash",i)),gn(!i.search||!i.search.includes("#"),XT("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let u=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),u-=1;i.pathname=h.join("/")}o=u>=0?e[u]:"/"}let l=mre(i,o),A=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(A||c)&&(l.pathname+="/"),l}const _u=n=>n.join("/").replace(/\/\/+/g,"/"),wre=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bre=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xre=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Bre(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const c6=["post","put","patch","delete"];new Set(c6);const Ere=["get",...c6];new Set(Ere);/**
 * React Router v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xv(){return Xv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xv.apply(this,arguments)}const yS=B.createContext(null),u6=B.createContext(null),UA=B.createContext(null),vS=B.createContext(null),sd=B.createContext({outlet:null,matches:[],isDataRoute:!1}),d6=B.createContext(null);function Cre(n,e){let{relative:t}=e===void 0?{}:e;A0()||gn(!1);let{basename:r,navigator:i}=B.useContext(UA),{hash:s,pathname:a,search:o}=wS(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:_u([r,a])),i.createHref({pathname:l,search:o,hash:s})}function A0(){return B.useContext(vS)!=null}function c0(){return A0()||gn(!1),B.useContext(vS).location}function h6(n){B.useContext(UA).static||B.useLayoutEffect(n)}function f6(){let{isDataRoute:n}=B.useContext(sd);return n?Mre():_re()}function _re(){A0()||gn(!1);let n=B.useContext(yS),{basename:e,future:t,navigator:r}=B.useContext(UA),{matches:i}=B.useContext(sd),{pathname:s}=c0(),a=JSON.stringify(fO(i,t.v7_relativeSplatPath)),o=B.useRef(!1);return h6(()=>{o.current=!0}),B.useCallback(function(A,c){if(c===void 0&&(c={}),!o.current)return;if(typeof A=="number"){r.go(A);return}let u=gO(A,JSON.parse(a),s,c.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:_u([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,a,s,n])}function wS(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=B.useContext(UA),{matches:i}=B.useContext(sd),{pathname:s}=c0(),a=JSON.stringify(fO(i,r.v7_relativeSplatPath));return B.useMemo(()=>gO(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function Sre(n,e){return Ire(n,e)}function Ire(n,e,t,r){A0()||gn(!1);let{navigator:i}=B.useContext(UA),{matches:s}=B.useContext(sd),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let A=c0(),c;if(e){var u;let w=typeof e=="string"?Mf(e):e;l==="/"||(u=w.pathname)!=null&&u.startsWith(l)||gn(!1),c=w}else c=A;let h=c.pathname||"/",g=h;if(l!=="/"){let w=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=rre(n,{pathname:g}),m=Nre(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:_u([l,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:_u([l,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,t,r);return e&&m?B.createElement(vS.Provider,{value:{location:Xv({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:cu.Pop}},m):m}function Tre(){let n=Rre(),e=Bre(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:i},t):null,null)}const Pre=B.createElement(Tre,null);class Fre extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(sd.Provider,{value:this.props.routeContext},B.createElement(d6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kre(n){let{routeContext:e,match:t,children:r}=n,i=B.useContext(yS);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(sd.Provider,{value:e},r)}function Nre(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);c>=0||gn(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,A=-1;if(t&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let u=a[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(A=c),u.route.id){let{loaderData:h,errors:g}=t,p=u.route.loader&&h[u.route.id]===void 0&&(!g||g[u.route.id]===void 0);if(u.route.lazy||p){l=!0,A>=0?a=a.slice(0,A+1):a=[a[0]];break}}}return a.reduceRight((c,u,h)=>{let g,p=!1,m=null,w=null;t&&(g=o&&u.route.id?o[u.route.id]:void 0,m=u.route.errorElement||Pre,l&&(A<0&&h===0?(p=!0,w=null):A===h&&(p=!0,w=u.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,h+1)),b=()=>{let x;return g?x=m:p?x=w:u.route.Component?x=B.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,B.createElement(kre,{match:u,routeContext:{outlet:c,matches:v,isDataRoute:t!=null},children:x})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?B.createElement(Fre,{location:t.location,revalidation:t.revalidation,component:m,error:g,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var g6=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(g6||{}),o1=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(o1||{});function Dre(n){let e=B.useContext(yS);return e||gn(!1),e}function Ore(n){let e=B.useContext(u6);return e||gn(!1),e}function Ure(n){let e=B.useContext(sd);return e||gn(!1),e}function p6(n){let e=Ure(),t=e.matches[e.matches.length-1];return t.route.id||gn(!1),t.route.id}function Rre(){var n;let e=B.useContext(d6),t=Ore(o1.UseRouteError),r=p6(o1.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Mre(){let{router:n}=Dre(g6.UseNavigateStable),e=p6(o1.UseNavigateStable),t=B.useRef(!1);return h6(()=>{t.current=!0}),B.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Xv({fromRouteId:e},s)))},[n,e])}const GQ={};function Lre(n,e){GQ[e]||(GQ[e]=!0,console.warn(e))}const zQ=(n,e,t)=>Lre(n,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function Qre(n,e){(n==null?void 0:n.v7_startTransition)===void 0&&zQ("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),(n==null?void 0:n.v7_relativeSplatPath)===void 0&&zQ("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function jre(n){let{to:e,replace:t,state:r,relative:i}=n;A0()||gn(!1);let{future:s,static:a}=B.useContext(UA),{matches:o}=B.useContext(sd),{pathname:l}=c0(),A=f6(),c=gO(e,fO(o,s.v7_relativeSplatPath),l,i==="path"),u=JSON.stringify(c);return B.useEffect(()=>A(JSON.parse(u),{replace:t,state:r,relative:i}),[A,u,i,t,r]),null}function qi(n){gn(!1)}function Hre(n){let{basename:e="/",children:t=null,location:r,navigationType:i=cu.Pop,navigator:s,static:a=!1,future:o}=n;A0()&&gn(!1);let l=e.replace(/^\/*/,"/"),A=B.useMemo(()=>({basename:l,navigator:s,static:a,future:Xv({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Mf(r));let{pathname:c="/",search:u="",hash:h="",state:g=null,key:p="default"}=r,m=B.useMemo(()=>{let w=Om(c,l);return w==null?null:{location:{pathname:w,search:u,hash:h,state:g,key:p},navigationType:i}},[l,c,u,h,g,p,i]);return m==null?null:B.createElement(UA.Provider,{value:A},B.createElement(vS.Provider,{children:t,value:m}))}function Vre(n){let{children:e,location:t}=n;return Sre(iF(e),t)}new Promise(()=>{});function iF(n,e){e===void 0&&(e=[]);let t=[];return B.Children.forEach(n,(r,i)=>{if(!B.isValidElement(r))return;let s=[...e,i];if(r.type===B.Fragment){t.push.apply(t,iF(r.props.children,s));return}r.type!==qi&&gn(!1),!r.props.index||!r.props.children||gn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=iF(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.28.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function l1(){return l1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},l1.apply(this,arguments)}function m6(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Kre(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $re(n,e){return n.button===0&&(!e||e==="_self")&&!Kre(n)}const Gre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zre=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Wre="6";try{window.__reactRouterVersion=Wre}catch{}const Xre=B.createContext({isTransitioning:!1}),Yre="startTransition",WQ=sK[Yre];function qre(n){let{basename:e,children:t,future:r,window:i}=n,s=B.useRef();s.current==null&&(s.current=ere({window:i,v5Compat:!0}));let a=s.current,[o,l]=B.useState({action:a.action,location:a.location}),{v7_startTransition:A}=r||{},c=B.useCallback(u=>{A&&WQ?WQ(()=>l(u)):l(u)},[l,A]);return B.useLayoutEffect(()=>a.listen(c),[a,c]),B.useEffect(()=>Qre(r),[r]),B.createElement(Hre,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const Jre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eie=B.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:A,preventScrollReset:c,viewTransition:u}=e,h=m6(e,Gre),{basename:g}=B.useContext(UA),p,m=!1;if(typeof A=="string"&&Zre.test(A)&&(p=A,Jre))try{let x=new URL(window.location.href),E=A.startsWith("//")?new URL(x.protocol+A):new URL(A),I=Om(E.pathname,g);E.origin===x.origin&&I!=null?A=I+E.search+E.hash:m=!0}catch{}let w=Cre(A,{relative:i}),v=rie(A,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:u});function b(x){r&&r(x),x.defaultPrevented||v(x)}return B.createElement("a",l1({},h,{href:p||w,onClick:m||s?r:b,ref:t,target:l}))}),tie=B.forwardRef(function(e,t){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:o,to:l,viewTransition:A,children:c}=e,u=m6(e,zre),h=wS(l,{relative:u.relative}),g=c0(),p=B.useContext(u6),{navigator:m,basename:w}=B.useContext(UA),v=p!=null&&iie(h)&&A===!0,b=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,x=g.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(x=x.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&w&&(E=Om(E,w)||E);const I=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let P=x===b||!a&&x.startsWith(b)&&x.charAt(I)==="/",_=E!=null&&(E===b||!a&&E.startsWith(b)&&E.charAt(b.length)==="/"),T={isActive:P,isPending:_,isTransitioning:v},k=P?r:void 0,O;typeof s=="function"?O=s(T):O=[s,P?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(T):o;return B.createElement(eie,l1({},u,{"aria-current":k,className:O,ref:t,style:U,to:l,viewTransition:A}),typeof c=="function"?c(T):c)});var sF;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(sF||(sF={}));var XQ;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(XQ||(XQ={}));function nie(n){let e=B.useContext(yS);return e||gn(!1),e}function rie(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=f6(),A=c0(),c=wS(n,{relative:a});return B.useCallback(u=>{if($re(u,t)){u.preventDefault();let h=r!==void 0?r:a1(A)===a1(c);l(n,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[A,l,c,r,i,t,n,s,a,o])}function iie(n,e){e===void 0&&(e={});let t=B.useContext(Xre);t==null&&gn(!1);let{basename:r}=nie(sF.useViewTransitionState),i=wS(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Om(t.currentLocation.pathname,r)||t.currentLocation.pathname,a=Om(t.nextLocation.pathname,r)||t.nextLocation.pathname;return rF(i.pathname,a)!=null||rF(i.pathname,s)!=null}function sie(){const[n,e]=B.useState(null),[t,r]=B.useState(null),[i,s]=B.useState(null);B.useEffect(()=>{const l=setInterval(()=>{const A=new Date,c=A.getHours(),u=A.getMinutes(),h=c*60+u,g=4*60+30,p=13*60,m=21*60+30;let w=null;h>=g&&h<p?(w=p-h,r("workEnd"),s("morning")):h>=p&&h<m?(w=m-h,r("workEnd"),s("afternoon")):(h<g?w=g-h:w=1440-h+g,r("workStart"),s("morning")),e(w)},1e3);return()=>clearInterval(l)},[]);const a=l=>l===null?"text-text-secondary":l<=30?"text-red-400 bg-red-400/10 ring-1 ring-red-400":l<=120?"text-orange-400 bg-orange-400/10 ring-1 ring-orange-400":"text-primary bg-primary/10 ring-1 ring-primary",o=l=>{if(l===null)return"";const A=Math.floor(l/60),c=l%60;return`${A}小時 ${c}分鐘`};return f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-text-secondary",children:t==="workEnd"?`${i==="morning"?"早班":"晚班"}離下班還有 `:"早班離上班還有 "}),f.jsx("span",{className:`
        font-medium px-3 py-1 rounded-full
        ${a(n)}
        transition-all duration-300
      `,children:o(n)})]})}var YQ={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},aie=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},v6={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,A=l?n[i+2]:0,c=s>>2,u=(s&3)<<4|o>>4;let h=(o&15)<<2|A>>6,g=A&63;l||(g=64,a||(h=64)),r.push(t[c],t[u],t[h],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(y6(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):aie(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const A=i<n.length?t[n.charAt(i)]:64;++i;const u=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||A==null||u==null)throw new oie;const h=s<<2|o>>4;if(r.push(h),A!==64){const g=o<<4&240|A>>2;if(r.push(g),u!==64){const p=A<<6&192|u;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class oie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lie=function(n){const e=y6(n);return v6.encodeByteArray(e,!0)},A1=function(n){return lie(n).replace(/\./g,"")},w6=function(n){try{return v6.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cie=()=>Aie().__FIREBASE_DEFAULTS__,uie=()=>{if(typeof process>"u"||typeof YQ>"u")return;const n=YQ.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},die=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&w6(n[1]);return e&&JSON.parse(e)},bS=()=>{try{return cie()||uie()||die()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b6=n=>{var e,t;return(t=(e=bS())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hie=n=>{const e=b6(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},x6=()=>{var n;return(n=bS())===null||n===void 0?void 0:n.config},B6=n=>{var e;return(e=bS())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gie(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[A1(JSON.stringify(t)),A1(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function mie(){var n;const e=(n=bS())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yie(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vie(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function wie(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bie(){const n=er();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function E6(){return!mie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C6(){try{return typeof indexedDB=="object"}catch{return!1}}function xie(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bie="FirebaseError";class RA extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Bie,Object.setPrototypeOf(this,RA.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lx.prototype.create)}}class lx{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Eie(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new RA(i,o,r)}}function Eie(n,e){return n.replace(Cie,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Cie=/\{\$([^}]+)}/g;function _ie(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function c1(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(qQ(s)&&qQ(a)){if(!c1(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function qQ(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function By(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ey(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Sie(n,e){const t=new Iie(n,e);return t.subscribe.bind(t)}class Iie{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Tie(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=YT),i.error===void 0&&(i.error=YT),i.complete===void 0&&(i.complete=YT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tie(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function YT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(n){return n&&n._delegate?n._delegate:n}class vf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pie=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new fie;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kie(e))try{this.getOrInitializeService({instanceIdentifier:Cd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Cd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cd){return this.instances.has(e)}getOptions(e=Cd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fie(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cd){return this.component?this.component.multipleInstances?e:Cd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Fie(n){return n===Cd?void 0:n}function kie(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Pie(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const Die={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},Oie=rt.INFO,Uie={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},Rie=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Uie[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let pO=class{constructor(e){this.name=e,this._logLevel=Oie,this._logHandler=Rie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Die[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}};const Mie=(n,e)=>e.some(t=>n instanceof t);let JQ,ZQ;function Lie(){return JQ||(JQ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qie(){return ZQ||(ZQ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _6=new WeakMap,aF=new WeakMap,S6=new WeakMap,qT=new WeakMap,mO=new WeakMap;function jie(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Su(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&_6.set(t,n)}).catch(()=>{}),mO.set(e,n),e}function Hie(n){if(aF.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});aF.set(n,e)}let oF={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return aF.get(n);if(e==="objectStoreNames")return n.objectStoreNames||S6.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Su(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Vie(n){oF=n(oF)}function Kie(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(JT(this),e,...t);return S6.set(r,e.sort?e.sort():[e]),Su(r)}:Qie().includes(n)?function(...e){return n.apply(JT(this),e),Su(_6.get(this))}:function(...e){return Su(n.apply(JT(this),e))}}function $ie(n){return typeof n=="function"?Kie(n):(n instanceof IDBTransaction&&Hie(n),Mie(n,Lie())?new Proxy(n,oF):n)}function Su(n){if(n instanceof IDBRequest)return jie(n);if(qT.has(n))return qT.get(n);const e=$ie(n);return e!==n&&(qT.set(n,e),mO.set(e,n)),e}const JT=n=>mO.get(n);function Gie(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Su(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Su(a.result),l.oldVersion,l.newVersion,Su(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",A=>i(A.oldVersion,A.newVersion,A))}).catch(()=>{}),o}const zie=["get","getKey","getAll","getAllKeys","count"],Wie=["put","add","delete","clear"],ZT=new Map;function e4(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ZT.get(e))return ZT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Wie.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zie.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let A=l.store;return r&&(A=A.index(o.shift())),(await Promise.all([A[t](...o),i&&l.done]))[0]};return ZT.set(e,s),s}Vie(n=>({...n,get:(e,t,r)=>e4(e,t)||n.get(e,t,r),has:(e,t)=>!!e4(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yie(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Yie(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lF="@firebase/app",t4="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new pO("@firebase/app"),qie="@firebase/app-compat",Jie="@firebase/analytics-compat",Zie="@firebase/analytics",ese="@firebase/app-check-compat",tse="@firebase/app-check",nse="@firebase/auth",rse="@firebase/auth-compat",ise="@firebase/database",sse="@firebase/data-connect",ase="@firebase/database-compat",ose="@firebase/functions",lse="@firebase/functions-compat",Ase="@firebase/installations",cse="@firebase/installations-compat",use="@firebase/messaging",dse="@firebase/messaging-compat",hse="@firebase/performance",fse="@firebase/performance-compat",gse="@firebase/remote-config",pse="@firebase/remote-config-compat",mse="@firebase/storage",yse="@firebase/storage-compat",vse="@firebase/firestore",wse="@firebase/vertexai-preview",bse="@firebase/firestore-compat",xse="firebase",Bse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="[DEFAULT]",Ese={[lF]:"fire-core",[qie]:"fire-core-compat",[Zie]:"fire-analytics",[Jie]:"fire-analytics-compat",[tse]:"fire-app-check",[ese]:"fire-app-check-compat",[nse]:"fire-auth",[rse]:"fire-auth-compat",[ise]:"fire-rtdb",[sse]:"fire-data-connect",[ase]:"fire-rtdb-compat",[ose]:"fire-fn",[lse]:"fire-fn-compat",[Ase]:"fire-iid",[cse]:"fire-iid-compat",[use]:"fire-fcm",[dse]:"fire-fcm-compat",[hse]:"fire-perf",[fse]:"fire-perf-compat",[gse]:"fire-rc",[pse]:"fire-rc-compat",[mse]:"fire-gcs",[yse]:"fire-gcs-compat",[vse]:"fire-fst",[bse]:"fire-fst-compat",[wse]:"fire-vertex","fire-js":"fire-js",[xse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new Map,Cse=new Map,cF=new Map;function n4(n,e){try{n.container.addComponent(e)}catch(t){EA.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Um(n){const e=n.name;if(cF.has(e))return EA.debug(`There were multiple attempts to register component ${e}.`),!1;cF.set(e,n);for(const t of Yv.values())n4(t,n);for(const t of Cse.values())n4(t,n);return!0}function yO(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function aA(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _se={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Iu=new lx("app","Firebase",_se);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sse{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Iu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=Bse;function I6(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:AF,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Iu.create("bad-app-name",{appName:String(i)});if(t||(t=x6()),!t)throw Iu.create("no-options");const s=Yv.get(i);if(s){if(c1(t,s.options)&&c1(r,s.config))return s;throw Iu.create("duplicate-app",{appName:i})}const a=new Nie(i);for(const l of cF.values())a.addComponent(l);const o=new Sse(t,r,a);return Yv.set(i,o),o}function T6(n=AF){const e=Yv.get(n);if(!e&&n===AF&&x6())return I6();if(!e)throw Iu.create("no-app",{appName:n});return e}function r4(){return Array.from(Yv.values())}function Tu(n,e,t){var r;let i=(r=Ese[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),EA.warn(o.join(" "));return}Um(new vf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ise="firebase-heartbeat-database",Tse=1,qv="firebase-heartbeat-store";let eP=null;function P6(){return eP||(eP=Gie(Ise,Tse,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qv)}catch(t){console.warn(t)}}}}).catch(n=>{throw Iu.create("idb-open",{originalErrorMessage:n.message})})),eP}async function Pse(n){try{const t=(await P6()).transaction(qv),r=await t.objectStore(qv).get(F6(n));return await t.done,r}catch(e){if(e instanceof RA)EA.warn(e.message);else{const t=Iu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});EA.warn(t.message)}}}async function i4(n,e){try{const r=(await P6()).transaction(qv,"readwrite");await r.objectStore(qv).put(e,F6(n)),await r.done}catch(t){if(t instanceof RA)EA.warn(t.message);else{const r=Iu.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});EA.warn(r.message)}}}function F6(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fse=1024,kse=30*24*60*60*1e3;class Nse{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ose(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s4();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=kse}),this._storage.overwrite(this._heartbeatsCache))}catch(r){EA.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=s4(),{heartbeatsToSend:r,unsentEntries:i}=Dse(this._heartbeatsCache.heartbeats),s=A1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return EA.warn(t),""}}}function s4(){return new Date().toISOString().substring(0,10)}function Dse(n,e=Fse){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),a4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),a4(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ose{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C6()?xie().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Pse(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return i4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return i4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function a4(n){return A1(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Use(n){Um(new vf("platform-logger",e=>new Xie(e),"PRIVATE")),Um(new vf("heartbeat",e=>new Nse(e),"PRIVATE")),Tu(lF,t4,n),Tu(lF,t4,"esm2017"),Tu("fire-js","")}Use("");var o4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sf,k6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,T){function k(){}k.prototype=T.prototype,_.D=T.prototype,_.prototype=new k,_.prototype.constructor=_,_.C=function(O,U,L){for(var R=Array(arguments.length-2),re=2;re<arguments.length;re++)R[re-2]=arguments[re];return T.prototype[U].apply(O,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,T,k){k||(k=0);var O=Array(16);if(typeof T=="string")for(var U=0;16>U;++U)O[U]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(U=0;16>U;++U)O[U]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=_.g[0],k=_.g[1],U=_.g[2];var L=_.g[3],R=T+(L^k&(U^L))+O[0]+3614090360&4294967295;T=k+(R<<7&4294967295|R>>>25),R=L+(U^T&(k^U))+O[1]+3905402710&4294967295,L=T+(R<<12&4294967295|R>>>20),R=U+(k^L&(T^k))+O[2]+606105819&4294967295,U=L+(R<<17&4294967295|R>>>15),R=k+(T^U&(L^T))+O[3]+3250441966&4294967295,k=U+(R<<22&4294967295|R>>>10),R=T+(L^k&(U^L))+O[4]+4118548399&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(U^T&(k^U))+O[5]+1200080426&4294967295,L=T+(R<<12&4294967295|R>>>20),R=U+(k^L&(T^k))+O[6]+2821735955&4294967295,U=L+(R<<17&4294967295|R>>>15),R=k+(T^U&(L^T))+O[7]+4249261313&4294967295,k=U+(R<<22&4294967295|R>>>10),R=T+(L^k&(U^L))+O[8]+1770035416&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(U^T&(k^U))+O[9]+2336552879&4294967295,L=T+(R<<12&4294967295|R>>>20),R=U+(k^L&(T^k))+O[10]+4294925233&4294967295,U=L+(R<<17&4294967295|R>>>15),R=k+(T^U&(L^T))+O[11]+2304563134&4294967295,k=U+(R<<22&4294967295|R>>>10),R=T+(L^k&(U^L))+O[12]+1804603682&4294967295,T=k+(R<<7&4294967295|R>>>25),R=L+(U^T&(k^U))+O[13]+4254626195&4294967295,L=T+(R<<12&4294967295|R>>>20),R=U+(k^L&(T^k))+O[14]+2792965006&4294967295,U=L+(R<<17&4294967295|R>>>15),R=k+(T^U&(L^T))+O[15]+1236535329&4294967295,k=U+(R<<22&4294967295|R>>>10),R=T+(U^L&(k^U))+O[1]+4129170786&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^U&(T^k))+O[6]+3225465664&4294967295,L=T+(R<<9&4294967295|R>>>23),R=U+(T^k&(L^T))+O[11]+643717713&4294967295,U=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(U^L))+O[0]+3921069994&4294967295,k=U+(R<<20&4294967295|R>>>12),R=T+(U^L&(k^U))+O[5]+3593408605&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^U&(T^k))+O[10]+38016083&4294967295,L=T+(R<<9&4294967295|R>>>23),R=U+(T^k&(L^T))+O[15]+3634488961&4294967295,U=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(U^L))+O[4]+3889429448&4294967295,k=U+(R<<20&4294967295|R>>>12),R=T+(U^L&(k^U))+O[9]+568446438&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^U&(T^k))+O[14]+3275163606&4294967295,L=T+(R<<9&4294967295|R>>>23),R=U+(T^k&(L^T))+O[3]+4107603335&4294967295,U=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(U^L))+O[8]+1163531501&4294967295,k=U+(R<<20&4294967295|R>>>12),R=T+(U^L&(k^U))+O[13]+2850285829&4294967295,T=k+(R<<5&4294967295|R>>>27),R=L+(k^U&(T^k))+O[2]+4243563512&4294967295,L=T+(R<<9&4294967295|R>>>23),R=U+(T^k&(L^T))+O[7]+1735328473&4294967295,U=L+(R<<14&4294967295|R>>>18),R=k+(L^T&(U^L))+O[12]+2368359562&4294967295,k=U+(R<<20&4294967295|R>>>12),R=T+(k^U^L)+O[5]+4294588738&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^U)+O[8]+2272392833&4294967295,L=T+(R<<11&4294967295|R>>>21),R=U+(L^T^k)+O[11]+1839030562&4294967295,U=L+(R<<16&4294967295|R>>>16),R=k+(U^L^T)+O[14]+4259657740&4294967295,k=U+(R<<23&4294967295|R>>>9),R=T+(k^U^L)+O[1]+2763975236&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^U)+O[4]+1272893353&4294967295,L=T+(R<<11&4294967295|R>>>21),R=U+(L^T^k)+O[7]+4139469664&4294967295,U=L+(R<<16&4294967295|R>>>16),R=k+(U^L^T)+O[10]+3200236656&4294967295,k=U+(R<<23&4294967295|R>>>9),R=T+(k^U^L)+O[13]+681279174&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^U)+O[0]+3936430074&4294967295,L=T+(R<<11&4294967295|R>>>21),R=U+(L^T^k)+O[3]+3572445317&4294967295,U=L+(R<<16&4294967295|R>>>16),R=k+(U^L^T)+O[6]+76029189&4294967295,k=U+(R<<23&4294967295|R>>>9),R=T+(k^U^L)+O[9]+3654602809&4294967295,T=k+(R<<4&4294967295|R>>>28),R=L+(T^k^U)+O[12]+3873151461&4294967295,L=T+(R<<11&4294967295|R>>>21),R=U+(L^T^k)+O[15]+530742520&4294967295,U=L+(R<<16&4294967295|R>>>16),R=k+(U^L^T)+O[2]+3299628645&4294967295,k=U+(R<<23&4294967295|R>>>9),R=T+(U^(k|~L))+O[0]+4096336452&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~U))+O[7]+1126891415&4294967295,L=T+(R<<10&4294967295|R>>>22),R=U+(T^(L|~k))+O[14]+2878612391&4294967295,U=L+(R<<15&4294967295|R>>>17),R=k+(L^(U|~T))+O[5]+4237533241&4294967295,k=U+(R<<21&4294967295|R>>>11),R=T+(U^(k|~L))+O[12]+1700485571&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~U))+O[3]+2399980690&4294967295,L=T+(R<<10&4294967295|R>>>22),R=U+(T^(L|~k))+O[10]+4293915773&4294967295,U=L+(R<<15&4294967295|R>>>17),R=k+(L^(U|~T))+O[1]+2240044497&4294967295,k=U+(R<<21&4294967295|R>>>11),R=T+(U^(k|~L))+O[8]+1873313359&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~U))+O[15]+4264355552&4294967295,L=T+(R<<10&4294967295|R>>>22),R=U+(T^(L|~k))+O[6]+2734768916&4294967295,U=L+(R<<15&4294967295|R>>>17),R=k+(L^(U|~T))+O[13]+1309151649&4294967295,k=U+(R<<21&4294967295|R>>>11),R=T+(U^(k|~L))+O[4]+4149444226&4294967295,T=k+(R<<6&4294967295|R>>>26),R=L+(k^(T|~U))+O[11]+3174756917&4294967295,L=T+(R<<10&4294967295|R>>>22),R=U+(T^(L|~k))+O[2]+718787259&4294967295,U=L+(R<<15&4294967295|R>>>17),R=k+(L^(U|~T))+O[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(U+(R<<21&4294967295|R>>>11))&4294967295,_.g[2]=_.g[2]+U&4294967295,_.g[3]=_.g[3]+L&4294967295}r.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var k=T-this.blockSize,O=this.B,U=this.h,L=0;L<T;){if(U==0)for(;L<=k;)i(this,_,L),L+=this.blockSize;if(typeof _=="string"){for(;L<T;)if(O[U++]=_.charCodeAt(L++),U==this.blockSize){i(this,O),U=0;break}}else for(;L<T;)if(O[U++]=_[L++],U==this.blockSize){i(this,O),U=0;break}}this.h=U,this.o+=T},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var k=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=k&255,k/=256;for(this.u(_),_=Array(16),T=k=0;4>T;++T)for(var O=0;32>O;O+=8)_[k++]=this.g[T]>>>O&255;return _};function s(_,T){var k=o;return Object.prototype.hasOwnProperty.call(k,_)?k[_]:k[_]=T(_)}function a(_,T){this.h=T;for(var k=[],O=!0,U=_.length-1;0<=U;U--){var L=_[U]|0;O&&L==T||(k[U]=L,O=!1)}this.g=k}var o={};function l(_){return-128<=_&&128>_?s(_,function(T){return new a([T|0],0>T?-1:0)}):new a([_|0],0>_?-1:0)}function A(_){if(isNaN(_)||!isFinite(_))return u;if(0>_)return w(A(-_));for(var T=[],k=1,O=0;_>=k;O++)T[O]=_/k|0,k*=4294967296;return new a(T,0)}function c(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return w(c(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=A(Math.pow(T,8)),O=u,U=0;U<_.length;U+=8){var L=Math.min(8,_.length-U),R=parseInt(_.substring(U,U+L),T);8>L?(L=A(Math.pow(T,L)),O=O.j(L).add(A(R))):(O=O.j(k),O=O.add(A(R)))}return O}var u=l(0),h=l(1),g=l(16777216);n=a.prototype,n.m=function(){if(m(this))return-w(this).m();for(var _=0,T=1,k=0;k<this.g.length;k++){var O=this.i(k);_+=(0<=O?O:4294967296+O)*T,T*=4294967296}return _},n.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(p(this))return"0";if(m(this))return"-"+w(this).toString(_);for(var T=A(Math.pow(_,6)),k=this,O="";;){var U=E(k,T).g;k=v(k,U.j(T));var L=((0<k.g.length?k.g[0]:k.h)>>>0).toString(_);if(k=U,p(k))return L+O;for(;6>L.length;)L="0"+L;O=L+O}},n.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function p(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function m(_){return _.h==-1}n.l=function(_){return _=v(this,_),m(_)?-1:p(_)?0:1};function w(_){for(var T=_.g.length,k=[],O=0;O<T;O++)k[O]=~_.g[O];return new a(k,~_.h).add(h)}n.abs=function(){return m(this)?w(this):this},n.add=function(_){for(var T=Math.max(this.g.length,_.g.length),k=[],O=0,U=0;U<=T;U++){var L=O+(this.i(U)&65535)+(_.i(U)&65535),R=(L>>>16)+(this.i(U)>>>16)+(_.i(U)>>>16);O=R>>>16,L&=65535,R&=65535,k[U]=R<<16|L}return new a(k,k[k.length-1]&-2147483648?-1:0)};function v(_,T){return _.add(w(T))}n.j=function(_){if(p(this)||p(_))return u;if(m(this))return m(_)?w(this).j(w(_)):w(w(this).j(_));if(m(_))return w(this.j(w(_)));if(0>this.l(g)&&0>_.l(g))return A(this.m()*_.m());for(var T=this.g.length+_.g.length,k=[],O=0;O<2*T;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var U=0;U<_.g.length;U++){var L=this.i(O)>>>16,R=this.i(O)&65535,re=_.i(U)>>>16,he=_.i(U)&65535;k[2*O+2*U]+=R*he,b(k,2*O+2*U),k[2*O+2*U+1]+=L*he,b(k,2*O+2*U+1),k[2*O+2*U+1]+=R*re,b(k,2*O+2*U+1),k[2*O+2*U+2]+=L*re,b(k,2*O+2*U+2)}for(O=0;O<T;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=T;O<2*T;O++)k[O]=0;return new a(k,0)};function b(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function x(_,T){this.g=_,this.h=T}function E(_,T){if(p(T))throw Error("division by zero");if(p(_))return new x(u,u);if(m(_))return T=E(w(_),T),new x(w(T.g),w(T.h));if(m(T))return T=E(_,w(T)),new x(w(T.g),T.h);if(30<_.g.length){if(m(_)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var k=h,O=T;0>=O.l(_);)k=I(k),O=I(O);var U=P(k,1),L=P(O,1);for(O=P(O,2),k=P(k,2);!p(O);){var R=L.add(O);0>=R.l(_)&&(U=U.add(k),L=R),O=P(O,1),k=P(k,1)}return T=v(_,U.j(T)),new x(U,T)}for(U=u;0<=_.l(T);){for(k=Math.max(1,Math.floor(_.m()/T.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),L=A(k),R=L.j(T);m(R)||0<R.l(_);)k-=O,L=A(k),R=L.j(T);p(L)&&(L=h),U=U.add(L),_=v(_,R)}return new x(U,_)}n.A=function(_){return E(this,_).h},n.and=function(_){for(var T=Math.max(this.g.length,_.g.length),k=[],O=0;O<T;O++)k[O]=this.i(O)&_.i(O);return new a(k,this.h&_.h)},n.or=function(_){for(var T=Math.max(this.g.length,_.g.length),k=[],O=0;O<T;O++)k[O]=this.i(O)|_.i(O);return new a(k,this.h|_.h)},n.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),k=[],O=0;O<T;O++)k[O]=this.i(O)^_.i(O);return new a(k,this.h^_.h)};function I(_){for(var T=_.g.length+1,k=[],O=0;O<T;O++)k[O]=_.i(O)<<1|_.i(O-1)>>>31;return new a(k,_.h)}function P(_,T){var k=T>>5;T%=32;for(var O=_.g.length-k,U=[],L=0;L<O;L++)U[L]=0<T?_.i(L+k)>>>T|_.i(L+k+1)<<32-T:_.i(L+k);return new a(U,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,k6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=A,a.fromString=c,sf=a}).apply(typeof o4<"u"?o4:typeof self<"u"?self:typeof window<"u"?window:{});var SB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var N6,Cy,D6,QE,uF,O6,U6,R6;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,C,F){return y==Array.prototype||y==Object.prototype||(y[C]=F.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof SB=="object"&&SB];for(var C=0;C<y.length;++C){var F=y[C];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=t(this);function i(y,C){if(C)e:{var F=r;y=y.split(".");for(var M=0;M<y.length-1;M++){var z=y[M];if(!(z in F))break e;F=F[z]}y=y[y.length-1],M=F[y],C=C(M),C!=M&&C!=null&&e(F,y,{configurable:!0,writable:!0,value:C})}}function s(y,C){y instanceof String&&(y+="");var F=0,M=!1,z={next:function(){if(!M&&F<y.length){var q=F++;return{value:C(q,y[q]),done:!1}}return M=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(y){return y||function(){return s(this,function(C,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(y){var C=typeof y;return C=C!="object"?C:y?Array.isArray(y)?"array":C:"null",C=="array"||C=="object"&&typeof y.length=="number"}function A(y){var C=typeof y;return C=="object"&&y!=null||C=="function"}function c(y,C,F){return y.call.apply(y.bind,arguments)}function u(y,C,F){if(!y)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,M),y.apply(C,z)}}return function(){return y.apply(C,arguments)}}function h(y,C,F){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:u,h.apply(null,arguments)}function g(y,C){var F=Array.prototype.slice.call(arguments,1);return function(){var M=F.slice();return M.push.apply(M,arguments),y.apply(this,M)}}function p(y,C){function F(){}F.prototype=C.prototype,y.aa=C.prototype,y.prototype=new F,y.prototype.constructor=y,y.Qb=function(M,z,q){for(var ge=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ge[Dt-2]=arguments[Dt];return C.prototype[z].apply(M,ge)}}function m(y){const C=y.length;if(0<C){const F=Array(C);for(let M=0;M<C;M++)F[M]=y[M];return F}return[]}function w(y,C){for(let F=1;F<arguments.length;F++){const M=arguments[F];if(l(M)){const z=y.length||0,q=M.length||0;y.length=z+q;for(let ge=0;ge<q;ge++)y[z+ge]=M[ge]}else y.push(M)}}class v{constructor(C,F){this.i=C,this.j=F,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function b(y){return/^[\s\xa0]*$/.test(y)}function x(){var y=o.navigator;return y&&(y=y.userAgent)?y:""}function E(y){return E[" "](y),y}E[" "]=function(){};var I=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function P(y,C,F){for(const M in y)C.call(F,y[M],M,y)}function _(y,C){for(const F in y)C.call(void 0,y[F],F,y)}function T(y){const C={};for(const F in y)C[F]=y[F];return C}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(y,C){let F,M;for(let z=1;z<arguments.length;z++){M=arguments[z];for(F in M)y[F]=M[F];for(let q=0;q<k.length;q++)F=k[q],Object.prototype.hasOwnProperty.call(M,F)&&(y[F]=M[F])}}function U(y){var C=1;y=y.split(":");const F=[];for(;0<C&&y.length;)F.push(y.shift()),C--;return y.length&&F.push(y.join(":")),F}function L(y){o.setTimeout(()=>{throw y},0)}function R(){var y=ae;let C=null;return y.g&&(C=y.g,y.g=y.g.next,y.g||(y.h=null),C.next=null),C}class re{constructor(){this.h=this.g=null}add(C,F){const M=he.get();M.set(C,F),this.h?this.h.next=M:this.g=M,this.h=M}}var he=new v(()=>new te,y=>y.reset());class te{constructor(){this.next=this.g=this.h=null}set(C,F){this.h=C,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Z=!1,ae=new re,fe=()=>{const y=o.Promise.resolve(void 0);ee=()=>{y.then(Ue)}};var Ue=()=>{for(var y;y=R();){try{y.h.call(y.g)}catch(F){L(F)}var C=he;C.j(y),100>C.h&&(C.h++,y.next=C.g,C.g=y)}Z=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(y,C){this.type=y,this.g=this.target=C,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var y=!1,C=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const F=()=>{};o.addEventListener("test",F,C),o.removeEventListener("test",F,C)}catch{}return y}();function j(y,C){if(we.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var F=this.type=y.type,M=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=C,C=y.relatedTarget){if(I){e:{try{E(C.nodeName);var z=!0;break e}catch{}z=!1}z||(C=null)}}else F=="mouseover"?C=y.fromElement:F=="mouseout"&&(C=y.toElement);this.relatedTarget=C,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:G[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&j.aa.h.call(this)}}p(j,we);var G={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),ne=0;function V(y,C,F,M,z){this.listener=y,this.proxy=null,this.src=C,this.type=F,this.capture=!!M,this.ha=z,this.key=++ne,this.da=this.fa=!1}function X(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function J(y){this.src=y,this.g={},this.h=0}J.prototype.add=function(y,C,F,M,z){var q=y.toString();y=this.g[q],y||(y=this.g[q]=[],this.h++);var ge=De(y,C,M,z);return-1<ge?(C=y[ge],F||(C.fa=!1)):(C=new V(C,this.src,q,!!M,z),C.fa=F,y.push(C)),C};function $(y,C){var F=C.type;if(F in y.g){var M=y.g[F],z=Array.prototype.indexOf.call(M,C,void 0),q;(q=0<=z)&&Array.prototype.splice.call(M,z,1),q&&(X(C),y.g[F].length==0&&(delete y.g[F],y.h--))}}function De(y,C,F,M){for(var z=0;z<y.length;++z){var q=y[z];if(!q.da&&q.listener==C&&q.capture==!!F&&q.ha==M)return z}return-1}var ke="closure_lm_"+(1e6*Math.random()|0),Je={};function At(y,C,F,M,z){if(Array.isArray(C)){for(var q=0;q<C.length;q++)At(y,C[q],F,M,z);return null}return F=zx(F),y&&y[Q]?y.K(C,F,A(M)?!!M.capture:!1,z):kn(y,C,F,!1,M,z)}function kn(y,C,F,M,z,q){if(!C)throw Error("Invalid event type");var ge=A(z)?!!z.capture:!!z,Dt=F0(y);if(Dt||(y[ke]=Dt=new J(y)),F=Dt.add(C,F,M,ge,q),F.proxy)return F;if(M=KA(),F.proxy=M,M.src=y,M.listener=F,y.addEventListener)Ye||(z=ge),z===void 0&&(z=!1),y.addEventListener(C.toString(),M,z);else if(y.attachEvent)y.attachEvent(Gx(C.toString()),M);else if(y.addListener&&y.removeListener)y.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return F}function KA(){function y(F){return C.call(y.src,y.listener,F)}const C=aT;return y}function T0(y,C,F,M,z){if(Array.isArray(C))for(var q=0;q<C.length;q++)T0(y,C[q],F,M,z);else M=A(M)?!!M.capture:!!M,F=zx(F),y&&y[Q]?(y=y.i,C=String(C).toString(),C in y.g&&(q=y.g[C],F=De(q,F,M,z),-1<F&&(X(q[F]),Array.prototype.splice.call(q,F,1),q.length==0&&(delete y.g[C],y.h--)))):y&&(y=F0(y))&&(C=y.g[C.toString()],y=-1,C&&(y=De(C,F,M,z)),(F=-1<y?C[y]:null)&&P0(F))}function P0(y){if(typeof y!="number"&&y&&!y.da){var C=y.src;if(C&&C[Q])$(C.i,y);else{var F=y.type,M=y.proxy;C.removeEventListener?C.removeEventListener(F,M,y.capture):C.detachEvent?C.detachEvent(Gx(F),M):C.addListener&&C.removeListener&&C.removeListener(M),(F=F0(C))?($(F,y),F.h==0&&(F.src=null,C[ke]=null)):X(y)}}}function Gx(y){return y in Je?Je[y]:Je[y]="on"+y}function aT(y,C){if(y.da)y=!0;else{C=new j(C,this);var F=y.listener,M=y.ha||y.src;y.fa&&P0(y),y=F.call(M,C)}return y}function F0(y){return y=y[ke],y instanceof J?y:null}var k0="__closure_events_fn_"+(1e9*Math.random()>>>0);function zx(y){return typeof y=="function"?y:(y[k0]||(y[k0]=function(C){return y.handleEvent(C)}),y[k0])}function ar(){ie.call(this),this.i=new J(this),this.M=this,this.F=null}p(ar,ie),ar.prototype[Q]=!0,ar.prototype.removeEventListener=function(y,C,F,M){T0(this,y,C,F,M)};function br(y,C){var F,M=y.F;if(M)for(F=[];M;M=M.F)F.push(M);if(y=y.M,M=C.type||C,typeof C=="string")C=new we(C,y);else if(C instanceof we)C.target=C.target||y;else{var z=C;C=new we(M,y),O(C,z)}if(z=!0,F)for(var q=F.length-1;0<=q;q--){var ge=C.g=F[q];z=$A(ge,M,!0,C)&&z}if(ge=C.g=y,z=$A(ge,M,!0,C)&&z,z=$A(ge,M,!1,C)&&z,F)for(q=0;q<F.length;q++)ge=C.g=F[q],z=$A(ge,M,!1,C)&&z}ar.prototype.N=function(){if(ar.aa.N.call(this),this.i){var y=this.i,C;for(C in y.g){for(var F=y.g[C],M=0;M<F.length;M++)X(F[M]);delete y.g[C],y.h--}}this.F=null},ar.prototype.K=function(y,C,F,M){return this.i.add(String(y),C,!1,F,M)},ar.prototype.L=function(y,C,F,M){return this.i.add(String(y),C,!0,F,M)};function $A(y,C,F,M){if(C=y.i.g[String(C)],!C)return!0;C=C.concat();for(var z=!0,q=0;q<C.length;++q){var ge=C[q];if(ge&&!ge.da&&ge.capture==F){var Dt=ge.listener,Br=ge.ha||ge.src;ge.fa&&$(y.i,ge),z=Dt.call(Br,M)!==!1&&z}}return z&&!M.defaultPrevented}function Mt(y,C,F){if(typeof y=="function")F&&(y=h(y,F));else if(y&&typeof y.handleEvent=="function")y=h(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:o.setTimeout(y,C||0)}function Wx(y){y.g=Mt(()=>{y.g=null,y.i&&(y.i=!1,Wx(y))},y.l);const C=y.h;y.h=null,y.m.apply(null,C)}class oT extends ie{constructor(C,F){super(),this.m=C,this.l=F,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Wx(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function GA(y){ie.call(this),this.h=y,this.g={}}p(GA,ie);var pd=[];function Xx(y){P(y.g,function(C,F){this.g.hasOwnProperty(F)&&P0(C)},y),y.g={}}GA.prototype.N=function(){GA.aa.N.call(this),Xx(this)},GA.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var N0=o.JSON.stringify,lT=o.JSON.parse,AT=class{stringify(y){return o.JSON.stringify(y,void 0)}parse(y){return o.JSON.parse(y,void 0)}};function D0(){}D0.prototype.h=null;function Yx(y){return y.h||(y.h=y.i())}function qx(){}var H={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function K(){we.call(this,"d")}p(K,we);function oe(){we.call(this,"c")}p(oe,we);var le={},Ae=null;function me(){return Ae=Ae||new ar}le.La="serverreachability";function je(y){we.call(this,le.La,y)}p(je,we);function ct(y){const C=me();br(C,new je(C))}le.STAT_EVENT="statevent";function $e(y,C){we.call(this,le.STAT_EVENT,y),this.stat=C}p($e,we);function Me(y){const C=me();br(C,new $e(C,y))}le.Ma="timingevent";function Nt(y,C){we.call(this,le.Ma,y),this.size=C}p(Nt,we);function Ai(y,C){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){y()},C)}function Lt(){this.g=!0}Lt.prototype.xa=function(){this.g=!1};function Hs(y,C,F,M,z,q){y.info(function(){if(y.g)if(q)for(var ge="",Dt=q.split("&"),Br=0;Br<Dt.length;Br++){var ft=Dt[Br].split("=");if(1<ft.length){var $r=ft[0];ft=ft[1];var Gr=$r.split("_");ge=2<=Gr.length&&Gr[1]=="type"?ge+($r+"="+ft+"&"):ge+($r+"=redacted&")}}else ge=null;else ge=q;return"XMLHTTP REQ ("+M+") [attempt "+z+"]: "+C+`
`+F+`
`+ge})}function Yf(y,C,F,M,z,q,ge){y.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+z+"]: "+C+`
`+F+`
`+q+" "+ge})}function xr(y,C,F,M){y.info(function(){return"XMLHTTP TEXT ("+C+"): "+md(y,F)+(M?" "+M:"")})}function cT(y,C){y.info(function(){return"TIMEOUT: "+C})}Lt.prototype.info=function(){};function md(y,C){if(!y.g)return C;if(!C)return null;try{var F=JSON.parse(C);if(F){for(y=0;y<F.length;y++)if(Array.isArray(F[y])){var M=F[y];if(!(2>M.length)){var z=M[1];if(Array.isArray(z)&&!(1>z.length)){var q=z[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ge=1;ge<z.length;ge++)z[ge]=""}}}}return N0(F)}catch{return C}}var ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},O0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qf;function Jf(){}p(Jf,D0),Jf.prototype.g=function(){return new XMLHttpRequest},Jf.prototype.i=function(){return{}},qf=new Jf;function zA(y,C,F,M){this.j=y,this.i=C,this.l=F,this.R=M||1,this.U=new GA(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zM}function zM(){this.i=null,this.g="",this.h=!1}var WM={},uT={};function dT(y,C,F){y.L=1,y.v=tB(Zo(C)),y.m=F,y.P=!0,XM(y,null)}function XM(y,C){y.F=Date.now(),Jx(y),y.A=Zo(y.v);var F=y.A,M=y.R;Array.isArray(M)||(M=[String(M)]),AL(F.i,"t",M),y.C=0,F=y.j.J,y.h=new zM,y.g=SL(y.j,F?C:null,!y.m),0<y.O&&(y.M=new oT(h(y.Y,y,y.g),y.O)),C=y.U,F=y.g,M=y.ca;var z="readystatechange";Array.isArray(z)||(z&&(pd[0]=z.toString()),z=pd);for(var q=0;q<z.length;q++){var ge=At(F,z[q],M||C.handleEvent,!1,C.h||C);if(!ge)break;C.g[ge.key]=ge}C=y.H?T(y.H):{},y.m?(y.u||(y.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,C)):(y.u="GET",y.g.ea(y.A,y.u,null,C)),ct(),Hs(y.i,y.u,y.A,y.l,y.R,y.m)}zA.prototype.ca=function(y){y=y.target;const C=this.M;C&&el(y)==3?C.j():this.Y(y)},zA.prototype.Y=function(y){try{if(y==this.g)e:{const Gr=el(this.g);var C=this.g.Ba();const tg=this.g.Z();if(!(3>Gr)&&(Gr!=3||this.g&&(this.h.h||this.g.oa()||pL(this.g)))){this.J||Gr!=4||C==7||(C==8||0>=tg?ct(3):ct(2)),hT(this);var F=this.g.Z();this.X=F;t:if(YM(this)){var M=pL(this.g);y="";var z=M.length,q=el(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yd(this),U0(this);var ge="";break t}this.h.i=new o.TextDecoder}for(C=0;C<z;C++)this.h.h=!0,y+=this.h.i.decode(M[C],{stream:!(q&&C==z-1)});M.length=0,this.h.g+=y,this.C=0,ge=this.h.g}else ge=this.g.oa();if(this.o=F==200,Yf(this.i,this.u,this.A,this.l,this.R,Gr,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Dt,Br=this.g;if((Dt=Br.g?Br.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Dt)){var ft=Dt;break t}}ft=null}if(F=ft)xr(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fT(this,F);else{this.o=!1,this.s=3,Me(12),yd(this),U0(this);break e}}if(this.P){F=!0;let Sa;for(;!this.J&&this.C<ge.length;)if(Sa=aee(this,ge),Sa==uT){Gr==4&&(this.s=4,Me(14),F=!1),xr(this.i,this.l,null,"[Incomplete Response]");break}else if(Sa==WM){this.s=4,Me(15),xr(this.i,this.l,ge,"[Invalid Chunk]"),F=!1;break}else xr(this.i,this.l,Sa,null),fT(this,Sa);if(YM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gr!=4||ge.length!=0||this.h.h||(this.s=1,Me(16),F=!1),this.o=this.o&&F,!F)xr(this.i,this.l,ge,"[Invalid Chunked Response]"),yd(this),U0(this);else if(0<ge.length&&!this.W){this.W=!0;var $r=this.j;$r.g==this&&$r.ba&&!$r.M&&($r.j.info("Great, no buffering proxy detected. Bytes received: "+ge.length),wT($r),$r.M=!0,Me(11))}}else xr(this.i,this.l,ge,null),fT(this,ge);Gr==4&&yd(this),this.o&&!this.J&&(Gr==4?BL(this.j,this):(this.o=!1,Jx(this)))}else Bee(this.g),F==400&&0<ge.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),yd(this),U0(this)}}}catch{}finally{}};function YM(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function aee(y,C){var F=y.C,M=C.indexOf(`
`,F);return M==-1?uT:(F=Number(C.substring(F,M)),isNaN(F)?WM:(M+=1,M+F>C.length?uT:(C=C.slice(M,M+F),y.C=M+F,C)))}zA.prototype.cancel=function(){this.J=!0,yd(this)};function Jx(y){y.S=Date.now()+y.I,qM(y,y.I)}function qM(y,C){if(y.B!=null)throw Error("WatchDog timer not null");y.B=Ai(h(y.ba,y),C)}function hT(y){y.B&&(o.clearTimeout(y.B),y.B=null)}zA.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(cT(this.i,this.A),this.L!=2&&(ct(),Me(17)),yd(this),this.s=2,U0(this)):qM(this,this.S-y)};function U0(y){y.j.G==0||y.J||BL(y.j,y)}function yd(y){hT(y);var C=y.M;C&&typeof C.ma=="function"&&C.ma(),y.M=null,Xx(y.U),y.g&&(C=y.g,y.g=null,C.abort(),C.ma())}function fT(y,C){try{var F=y.j;if(F.G!=0&&(F.g==y||gT(F.h,y))){if(!y.K&&gT(F.h,y)&&F.G==3){try{var M=F.Da.g.parse(C)}catch{M=null}if(Array.isArray(M)&&M.length==3){var z=M;if(z[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<y.F)oB(F),sB(F);else break e;vT(F),Me(18)}}else F.za=z[1],0<F.za-F.T&&37500>z[2]&&F.F&&F.v==0&&!F.C&&(F.C=Ai(h(F.Za,F),6e3));if(1>=eL(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else wd(F,11)}else if((y.K||F.g==y)&&oB(F),!b(C))for(z=F.Da.g.parse(C),C=0;C<z.length;C++){let ft=z[C];if(F.T=ft[0],ft=ft[1],F.G==2)if(ft[0]=="c"){F.K=ft[1],F.ia=ft[2];const $r=ft[3];$r!=null&&(F.la=$r,F.j.info("VER="+F.la));const Gr=ft[4];Gr!=null&&(F.Aa=Gr,F.j.info("SVER="+F.Aa));const tg=ft[5];tg!=null&&typeof tg=="number"&&0<tg&&(M=1.5*tg,F.L=M,F.j.info("backChannelRequestTimeoutMs_="+M)),M=F;const Sa=y.g;if(Sa){const AB=Sa.g?Sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(AB){var q=M.h;q.g||AB.indexOf("spdy")==-1&&AB.indexOf("quic")==-1&&AB.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(pT(q,q.h),q.h=null))}if(M.D){const bT=Sa.g?Sa.g.getResponseHeader("X-HTTP-Session-Id"):null;bT&&(M.ya=bT,Kt(M.I,M.D,bT))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-y.F,F.j.info("Handshake RTT: "+F.R+"ms")),M=F;var ge=y;if(M.qa=_L(M,M.J?M.ia:null,M.W),ge.K){tL(M.h,ge);var Dt=ge,Br=M.L;Br&&(Dt.I=Br),Dt.B&&(hT(Dt),Jx(Dt)),M.g=ge}else bL(M);0<F.i.length&&aB(F)}else ft[0]!="stop"&&ft[0]!="close"||wd(F,7);else F.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?wd(F,7):yT(F):ft[0]!="noop"&&F.l&&F.l.ta(ft),F.v=0)}}ct(4)}catch{}}var oee=class{constructor(y,C){this.g=y,this.map=C}};function JM(y){this.l=y||10,o.PerformanceNavigationTiming?(y=o.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ZM(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function eL(y){return y.h?1:y.g?y.g.size:0}function gT(y,C){return y.h?y.h==C:y.g?y.g.has(C):!1}function pT(y,C){y.g?y.g.add(C):y.h=C}function tL(y,C){y.h&&y.h==C?y.h=null:y.g&&y.g.has(C)&&y.g.delete(C)}JM.prototype.cancel=function(){if(this.i=nL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function nL(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let C=y.i;for(const F of y.g.values())C=C.concat(F.D);return C}return m(y.i)}function lee(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var C=[],F=y.length,M=0;M<F;M++)C.push(y[M]);return C}C=[],F=0;for(M in y)C[F++]=y[M];return C}function Aee(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var C=[];y=y.length;for(var F=0;F<y;F++)C.push(F);return C}C=[],F=0;for(const M in y)C[F++]=M;return C}}}function rL(y,C){if(y.forEach&&typeof y.forEach=="function")y.forEach(C,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,C,void 0);else for(var F=Aee(y),M=lee(y),z=M.length,q=0;q<z;q++)C.call(void 0,M[q],F&&F[q],y)}var iL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cee(y,C){if(y){y=y.split("&");for(var F=0;F<y.length;F++){var M=y[F].indexOf("="),z=null;if(0<=M){var q=y[F].substring(0,M);z=y[F].substring(M+1)}else q=y[F];C(q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function vd(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof vd){this.h=y.h,Zx(this,y.j),this.o=y.o,this.g=y.g,eB(this,y.s),this.l=y.l;var C=y.i,F=new L0;F.i=C.i,C.g&&(F.g=new Map(C.g),F.h=C.h),sL(this,F),this.m=y.m}else y&&(C=String(y).match(iL))?(this.h=!1,Zx(this,C[1]||"",!0),this.o=R0(C[2]||""),this.g=R0(C[3]||"",!0),eB(this,C[4]),this.l=R0(C[5]||"",!0),sL(this,C[6]||"",!0),this.m=R0(C[7]||"")):(this.h=!1,this.i=new L0(null,this.h))}vd.prototype.toString=function(){var y=[],C=this.j;C&&y.push(M0(C,aL,!0),":");var F=this.g;return(F||C=="file")&&(y.push("//"),(C=this.o)&&y.push(M0(C,aL,!0),"@"),y.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&y.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&y.push("/"),y.push(M0(F,F.charAt(0)=="/"?hee:dee,!0))),(F=this.i.toString())&&y.push("?",F),(F=this.m)&&y.push("#",M0(F,gee)),y.join("")};function Zo(y){return new vd(y)}function Zx(y,C,F){y.j=F?R0(C,!0):C,y.j&&(y.j=y.j.replace(/:$/,""))}function eB(y,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);y.s=C}else y.s=null}function sL(y,C,F){C instanceof L0?(y.i=C,pee(y.i,y.h)):(F||(C=M0(C,fee)),y.i=new L0(C,y.h))}function Kt(y,C,F){y.i.set(C,F)}function tB(y){return Kt(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function R0(y,C){return y?C?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function M0(y,C,F){return typeof y=="string"?(y=encodeURI(y).replace(C,uee),F&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function uee(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var aL=/[#\/\?@]/g,dee=/[#\?:]/g,hee=/[#\?]/g,fee=/[#\?@]/g,gee=/#/g;function L0(y,C){this.h=this.g=null,this.i=y||null,this.j=!!C}function WA(y){y.g||(y.g=new Map,y.h=0,y.i&&cee(y.i,function(C,F){y.add(decodeURIComponent(C.replace(/\+/g," ")),F)}))}n=L0.prototype,n.add=function(y,C){WA(this),this.i=null,y=Zf(this,y);var F=this.g.get(y);return F||this.g.set(y,F=[]),F.push(C),this.h+=1,this};function oL(y,C){WA(y),C=Zf(y,C),y.g.has(C)&&(y.i=null,y.h-=y.g.get(C).length,y.g.delete(C))}function lL(y,C){return WA(y),C=Zf(y,C),y.g.has(C)}n.forEach=function(y,C){WA(this),this.g.forEach(function(F,M){F.forEach(function(z){y.call(C,z,M,this)},this)},this)},n.na=function(){WA(this);const y=Array.from(this.g.values()),C=Array.from(this.g.keys()),F=[];for(let M=0;M<C.length;M++){const z=y[M];for(let q=0;q<z.length;q++)F.push(C[M])}return F},n.V=function(y){WA(this);let C=[];if(typeof y=="string")lL(this,y)&&(C=C.concat(this.g.get(Zf(this,y))));else{y=Array.from(this.g.values());for(let F=0;F<y.length;F++)C=C.concat(y[F])}return C},n.set=function(y,C){return WA(this),this.i=null,y=Zf(this,y),lL(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[C]),this.h+=1,this},n.get=function(y,C){return y?(y=this.V(y),0<y.length?String(y[0]):C):C};function AL(y,C,F){oL(y,C),0<F.length&&(y.i=null,y.g.set(Zf(y,C),m(F)),y.h+=F.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],C=Array.from(this.g.keys());for(var F=0;F<C.length;F++){var M=C[F];const q=encodeURIComponent(String(M)),ge=this.V(M);for(M=0;M<ge.length;M++){var z=q;ge[M]!==""&&(z+="="+encodeURIComponent(String(ge[M]))),y.push(z)}}return this.i=y.join("&")};function Zf(y,C){return C=String(C),y.j&&(C=C.toLowerCase()),C}function pee(y,C){C&&!y.j&&(WA(y),y.i=null,y.g.forEach(function(F,M){var z=M.toLowerCase();M!=z&&(oL(this,M),AL(this,z,F))},y)),y.j=C}function mee(y,C){const F=new Lt;if(o.Image){const M=new Image;M.onload=g(XA,F,"TestLoadImage: loaded",!0,C,M),M.onerror=g(XA,F,"TestLoadImage: error",!1,C,M),M.onabort=g(XA,F,"TestLoadImage: abort",!1,C,M),M.ontimeout=g(XA,F,"TestLoadImage: timeout",!1,C,M),o.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=y}else C(!1)}function yee(y,C){const F=new Lt,M=new AbortController,z=setTimeout(()=>{M.abort(),XA(F,"TestPingServer: timeout",!1,C)},1e4);fetch(y,{signal:M.signal}).then(q=>{clearTimeout(z),q.ok?XA(F,"TestPingServer: ok",!0,C):XA(F,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(z),XA(F,"TestPingServer: error",!1,C)})}function XA(y,C,F,M,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),M(F)}catch{}}function vee(){this.g=new AT}function wee(y,C,F){const M=F||"";try{rL(y,function(z,q){let ge=z;A(z)&&(ge=N0(z)),C.push(M+q+"="+encodeURIComponent(ge))})}catch(z){throw C.push(M+"type="+encodeURIComponent("_badmap")),z}}function nB(y){this.l=y.Ub||null,this.j=y.eb||!1}p(nB,D0),nB.prototype.g=function(){return new rB(this.l,this.j)},nB.prototype.i=function(y){return function(){return y}}({});function rB(y,C){ar.call(this),this.D=y,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(rB,ar),n=rB.prototype,n.open=function(y,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=C,this.readyState=1,j0(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(C.body=y),(this.D||o).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Q0(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,j0(this)),this.g&&(this.readyState=3,j0(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cL(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function cL(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var C=y.value?y.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!y.done}))&&(this.response=this.responseText+=C)}y.done?Q0(this):j0(this),this.readyState==3&&cL(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,Q0(this))},n.Qa=function(y){this.g&&(this.response=y,Q0(this))},n.ga=function(){this.g&&Q0(this)};function Q0(y){y.readyState=4,y.l=null,y.j=null,y.v=null,j0(y)}n.setRequestHeader=function(y,C){this.u.append(y,C)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],C=this.h.entries();for(var F=C.next();!F.done;)F=F.value,y.push(F[0]+": "+F[1]),F=C.next();return y.join(`\r
`)};function j0(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(rB.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function uL(y){let C="";return P(y,function(F,M){C+=M,C+=":",C+=F,C+=`\r
`}),C}function mT(y,C,F){e:{for(M in F){var M=!1;break e}M=!0}M||(F=uL(F),typeof y=="string"?F!=null&&encodeURIComponent(String(F)):Kt(y,C,F))}function yn(y){ar.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(yn,ar);var bee=/^https?$/i,xee=["POST","PUT"];n=yn.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,C,F,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);C=C?C.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qf.g(),this.v=this.o?Yx(this.o):Yx(qf),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(C,String(y),!0),this.B=!1}catch(q){dL(this,q);return}if(y=F||"",F=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var z in M)F.set(z,M[z]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const q of M.keys())F.set(q,M.get(q));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(F.keys()).find(q=>q.toLowerCase()=="content-type"),z=o.FormData&&y instanceof o.FormData,!(0<=Array.prototype.indexOf.call(xee,C,void 0))||M||z||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ge]of F)this.g.setRequestHeader(q,ge);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gL(this),this.u=!0,this.g.send(y),this.u=!1}catch(q){dL(this,q)}};function dL(y,C){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=C,y.m=5,hL(y),iB(y)}function hL(y){y.A||(y.A=!0,br(y,"complete"),br(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,br(this,"complete"),br(this,"abort"),iB(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iB(this,!0)),yn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fL(this):this.bb())},n.bb=function(){fL(this)};function fL(y){if(y.h&&typeof a<"u"&&(!y.v[1]||el(y)!=4||y.Z()!=2)){if(y.u&&el(y)==4)Mt(y.Ea,0,y);else if(br(y,"readystatechange"),el(y)==4){y.h=!1;try{const ge=y.Z();e:switch(ge){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var F;if(!(F=C)){var M;if(M=ge===0){var z=String(y.D).match(iL)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),M=!bee.test(z?z.toLowerCase():"")}F=M}if(F)br(y,"complete"),br(y,"success");else{y.m=6;try{var q=2<el(y)?y.g.statusText:""}catch{q=""}y.l=q+" ["+y.Z()+"]",hL(y)}}finally{iB(y)}}}}function iB(y,C){if(y.g){gL(y);const F=y.g,M=y.v[0]?()=>{}:null;y.g=null,y.v=null,C||br(y,"ready");try{F.onreadystatechange=M}catch{}}}function gL(y){y.I&&(o.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function el(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<el(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var C=this.g.responseText;return y&&C.indexOf(y)==0&&(C=C.substring(y.length)),lT(C)}};function pL(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Bee(y){const C={};y=(y.g&&2<=el(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<y.length;M++){if(b(y[M]))continue;var F=U(y[M]);const z=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const q=C[z]||[];C[z]=q,q.push(F)}_(C,function(M){return M.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function H0(y,C,F){return F&&F.internalChannelParams&&F.internalChannelParams[y]||C}function mL(y){this.Aa=0,this.i=[],this.j=new Lt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=H0("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=H0("baseRetryDelayMs",5e3,y),this.cb=H0("retryDelaySeedMs",1e4,y),this.Wa=H0("forwardChannelMaxRetries",2,y),this.wa=H0("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new JM(y&&y.concurrentRequestLimit),this.Da=new vee,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=mL.prototype,n.la=8,n.G=1,n.connect=function(y,C,F,M){Me(0),this.W=y,this.H=C||{},F&&M!==void 0&&(this.H.OSID=F,this.H.OAID=M),this.F=this.X,this.I=_L(this,null,this.W),aB(this)};function yT(y){if(yL(y),y.G==3){var C=y.U++,F=Zo(y.I);if(Kt(F,"SID",y.K),Kt(F,"RID",C),Kt(F,"TYPE","terminate"),V0(y,F),C=new zA(y,y.j,C),C.L=2,C.v=tB(Zo(F)),F=!1,o.navigator&&o.navigator.sendBeacon)try{F=o.navigator.sendBeacon(C.v.toString(),"")}catch{}!F&&o.Image&&(new Image().src=C.v,F=!0),F||(C.g=SL(C.j,null),C.g.ea(C.v)),C.F=Date.now(),Jx(C)}CL(y)}function sB(y){y.g&&(wT(y),y.g.cancel(),y.g=null)}function yL(y){sB(y),y.u&&(o.clearTimeout(y.u),y.u=null),oB(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&o.clearTimeout(y.s),y.s=null)}function aB(y){if(!ZM(y.h)&&!y.s){y.s=!0;var C=y.Ga;ee||fe(),Z||(ee(),Z=!0),ae.add(C,y),y.B=0}}function Eee(y,C){return eL(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=C.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=Ai(h(y.Ga,y,C),EL(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const z=new zA(this,this.j,y);let q=this.o;if(this.S&&(q?(q=T(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(z.H=q,q=null),this.P)e:{for(var C=0,F=0;F<this.i.length;F++){t:{var M=this.i[F];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(C+=M,4096<C){C=F;break e}if(C===4096||F===this.i.length-1){C=F+1;break e}}C=1e3}else C=1e3;C=wL(this,z,C),F=Zo(this.I),Kt(F,"RID",y),Kt(F,"CVER",22),this.D&&Kt(F,"X-HTTP-Session-Id",this.D),V0(this,F),q&&(this.O?C="headers="+encodeURIComponent(String(uL(q)))+"&"+C:this.m&&mT(F,this.m,q)),pT(this.h,z),this.Ua&&Kt(F,"TYPE","init"),this.P?(Kt(F,"$req",C),Kt(F,"SID","null"),z.T=!0,dT(z,F,null)):dT(z,F,C),this.G=2}}else this.G==3&&(y?vL(this,y):this.i.length==0||ZM(this.h)||vL(this))};function vL(y,C){var F;C?F=C.l:F=y.U++;const M=Zo(y.I);Kt(M,"SID",y.K),Kt(M,"RID",F),Kt(M,"AID",y.T),V0(y,M),y.m&&y.o&&mT(M,y.m,y.o),F=new zA(y,y.j,F,y.B+1),y.m===null&&(F.H=y.o),C&&(y.i=C.D.concat(y.i)),C=wL(y,F,1e3),F.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),pT(y.h,F),dT(F,M,C)}function V0(y,C){y.H&&P(y.H,function(F,M){Kt(C,M,F)}),y.l&&rL({},function(F,M){Kt(C,M,F)})}function wL(y,C,F){F=Math.min(y.i.length,F);var M=y.l?h(y.l.Na,y.l,y):null;e:{var z=y.i;let q=-1;for(;;){const ge=["count="+F];q==-1?0<F?(q=z[0].g,ge.push("ofs="+q)):q=0:ge.push("ofs="+q);let Dt=!0;for(let Br=0;Br<F;Br++){let ft=z[Br].g;const $r=z[Br].map;if(ft-=q,0>ft)q=Math.max(0,z[Br].g-100),Dt=!1;else try{wee($r,ge,"req"+ft+"_")}catch{M&&M($r)}}if(Dt){M=ge.join("&");break e}}}return y=y.i.splice(0,F),C.D=y,M}function bL(y){if(!y.g&&!y.u){y.Y=1;var C=y.Fa;ee||fe(),Z||(ee(),Z=!0),ae.add(C,y),y.v=0}}function vT(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=Ai(h(y.Fa,y),EL(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,xL(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=Ai(h(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),sB(this),xL(this))};function wT(y){y.A!=null&&(o.clearTimeout(y.A),y.A=null)}function xL(y){y.g=new zA(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var C=Zo(y.qa);Kt(C,"RID","rpc"),Kt(C,"SID",y.K),Kt(C,"AID",y.T),Kt(C,"CI",y.F?"0":"1"),!y.F&&y.ja&&Kt(C,"TO",y.ja),Kt(C,"TYPE","xmlhttp"),V0(y,C),y.m&&y.o&&mT(C,y.m,y.o),y.L&&(y.g.I=y.L);var F=y.g;y=y.ia,F.L=1,F.v=tB(Zo(C)),F.m=null,F.P=!0,XM(F,y)}n.Za=function(){this.C!=null&&(this.C=null,sB(this),vT(this),Me(19))};function oB(y){y.C!=null&&(o.clearTimeout(y.C),y.C=null)}function BL(y,C){var F=null;if(y.g==C){oB(y),wT(y),y.g=null;var M=2}else if(gT(y.h,C))F=C.D,tL(y.h,C),M=1;else return;if(y.G!=0){if(C.o)if(M==1){F=C.m?C.m.length:0,C=Date.now()-C.F;var z=y.B;M=me(),br(M,new Nt(M,F)),aB(y)}else bL(y);else if(z=C.s,z==3||z==0&&0<C.X||!(M==1&&Eee(y,C)||M==2&&vT(y)))switch(F&&0<F.length&&(C=y.h,C.i=C.i.concat(F)),z){case 1:wd(y,5);break;case 4:wd(y,10);break;case 3:wd(y,6);break;default:wd(y,2)}}}function EL(y,C){let F=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(F*=2),F*C}function wd(y,C){if(y.j.info("Error code "+C),C==2){var F=h(y.fb,y),M=y.Xa;const z=!M;M=new vd(M||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zx(M,"https"),tB(M),z?mee(M.toString(),F):yee(M.toString(),F)}else Me(2);y.G=0,y.l&&y.l.sa(C),CL(y),yL(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function CL(y){if(y.G=0,y.ka=[],y.l){const C=nL(y.h);(C.length!=0||y.i.length!=0)&&(w(y.ka,C),w(y.ka,y.i),y.h.i.length=0,m(y.i),y.i.length=0),y.l.ra()}}function _L(y,C,F){var M=F instanceof vd?Zo(F):new vd(F);if(M.g!="")C&&(M.g=C+"."+M.g),eB(M,M.s);else{var z=o.location;M=z.protocol,C=C?C+"."+z.hostname:z.hostname,z=+z.port;var q=new vd(null);M&&Zx(q,M),C&&(q.g=C),z&&eB(q,z),F&&(q.l=F),M=q}return F=y.D,C=y.ya,F&&C&&Kt(M,F,C),Kt(M,"VER",y.la),V0(y,M),M}function SL(y,C,F){if(C&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=y.Ca&&!y.pa?new yn(new nB({eb:F})):new yn(y.pa),C.Ha(y.J),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function IL(){}n=IL.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lB(){}lB.prototype.g=function(y,C){return new Yi(y,C)};function Yi(y,C){ar.call(this),this.g=new mL(C),this.l=y,this.h=C&&C.messageUrlParams||null,y=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(y?y["X-WebChannel-Content-Type"]=C.messageContentType:y={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(y?y["X-WebChannel-Client-Profile"]=C.va:y={"X-WebChannel-Client-Profile":C.va}),this.g.S=y,(y=C&&C.Sb)&&!b(y)&&(this.g.m=y),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!b(C)&&(this.g.D=C,y=this.h,y!==null&&C in y&&(y=this.h,C in y&&delete y[C])),this.j=new eg(this)}p(Yi,ar),Yi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yi.prototype.close=function(){yT(this.g)},Yi.prototype.o=function(y){var C=this.g;if(typeof y=="string"){var F={};F.__data__=y,y=F}else this.u&&(F={},F.__data__=N0(y),y=F);C.i.push(new oee(C.Ya++,y)),C.G==3&&aB(C)},Yi.prototype.N=function(){this.g.l=null,delete this.j,yT(this.g),delete this.g,Yi.aa.N.call(this)};function TL(y){K.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var C=y.__sm__;if(C){e:{for(const F in C){y=F;break e}y=void 0}(this.i=y)&&(y=this.i,C=C!==null&&y in C?C[y]:void 0),this.data=C}else this.data=y}p(TL,K);function PL(){oe.call(this),this.status=1}p(PL,oe);function eg(y){this.g=y}p(eg,IL),eg.prototype.ua=function(){br(this.g,"a")},eg.prototype.ta=function(y){br(this.g,new TL(y))},eg.prototype.sa=function(y){br(this.g,new PL)},eg.prototype.ra=function(){br(this.g,"b")},lB.prototype.createWebChannel=lB.prototype.g,Yi.prototype.send=Yi.prototype.o,Yi.prototype.open=Yi.prototype.m,Yi.prototype.close=Yi.prototype.close,R6=function(){return new lB},U6=function(){return me()},O6=le,uF={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,QE=ci,O0.COMPLETE="complete",D6=O0,qx.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",ar.prototype.listen=ar.prototype.K,Cy=qx,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,N6=yn}).apply(typeof SB<"u"?SB:typeof self<"u"?self:typeof window<"u"?window:{});const l4="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dr.UNAUTHENTICATED=new Dr(null),Dr.GOOGLE_CREDENTIALS=new Dr("google-credentials-uid"),Dr.FIRST_PARTY=new Dr("first-party-uid"),Dr.MOCK_USER=new Dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new pO("@firebase/firestore");function mg(){return wf.logLevel}function ue(n,...e){if(wf.logLevel<=rt.DEBUG){const t=e.map(vO);wf.debug(`Firestore (${d0}): ${n}`,...t)}}function bi(n,...e){if(wf.logLevel<=rt.ERROR){const t=e.map(vO);wf.error(`Firestore (${d0}): ${n}`,...t)}}function Qu(n,...e){if(wf.logLevel<=rt.WARN){const t=e.map(vO);wf.warn(`Firestore (${d0}): ${n}`,...t)}}function vO(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n="Unexpected state"){const e=`FIRESTORE (${d0}) INTERNAL ASSERTION FAILED: `+n;throw bi(e),new Error(e)}function Oe(n,e){n||Pe()}function Ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends RA{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dr.UNAUTHENTICATED))}shutdown(){}}class Rse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mse{constructor(e){this.t=e,this.currentUser=Dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new jo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jo,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jo)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new M6(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Dr(e)}}class Lse{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Dr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Qse{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Lse(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jse{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hse{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Oe(this.o===void 0);const r=s=>{s.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new jse(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vse(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Vse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function ze(n,e){return n<e?-1:n>e?1:0}function Rm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Q6(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new on(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new on(0,0))}static max(){return new Re(new on(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(),r===void 0?r=e.length-t:r>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Jv.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends Jv{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const Kse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Jv{construct(e,t,r){return new rn(e,t,r)}static isValidIdentifier(e){return Kse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Et.fromString(e))}static fromName(e){return new ye(Et.fromString(e).popFirst(5))}static empty(){return new ye(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function dF(n){return n.fields.find(e=>e.kind===2)}function _d(n){return n.fields.filter(e=>e.kind!==2)}u1.UNKNOWN_ID=-1;class jE{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zv(0,Ns.min())}}function $se(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Re.fromTimestamp(r===1e9?new on(t+1,0):new on(t,r));return new Ns(i,ye.empty(),e)}function j6(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(Re.min(),ye.empty(),-1)}static max(){return new Ns(Re.max(),ye.empty(),-1)}}function bO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==H6)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,r)=>{t(e)})}static reject(e){return new W((t,r)=>{r(e)})}static waitFor(e){return new W((t,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next(i=>i?W.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new W((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const A=l;t(e[A]).next(c=>{a[A]=c,++o,o===s&&r(a)},c=>i(c))}})}static doWhile(e,t){return new W((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new jo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fv(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=xO(r.target.error);this.V.reject(new fv(e,i))}}static open(e,t,r,i){try{return new xS(t,e.transaction(i,r))}catch(s){throw new fv(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zse(t)}}class Pu{constructor(e,t,r){this.name=e,this.version=t,this.p=r,Pu.S(er())===12.2&&bi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),Nd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!C6())return!1;if(Pu.v())return!0;const e=er(),t=Pu.S(e),r=0<t&&t<10,i=K6(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(ue("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new fv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Ee(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Ee(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new fv(e,a))},i.onupgradeneeded=s=>{ue("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{ue("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=xS.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next(A=>(o.g(),A)).catch(A=>(o.abort(A),W.reject(A))).toPromise();return l.catch(()=>{}),await o.m,l}catch(o){const l=o,A=l.name!=="FirebaseError"&&a<3;if(ue("SimpleDb","Transaction failed with error:",l.message,"Retrying:",A),this.close(),!A)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function K6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Gse{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Nd(this.B.delete())}}class fv extends Ee{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ad(n){return n.name==="IndexedDbTransactionError"}class zse{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nd(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),Nd(this.store.add(e))}get(e){return Nd(this.store.get(e)).next(t=>(t===void 0&&(t=null),ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),Nd(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),Nd(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new W((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(o,l)=>{a.push(l)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new W((r,i)=>{t.onerror=s=>{const a=xO(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,t){const r=[];return new W((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new Gse(o),A=t(o.primaryKey,o.value,l);if(A instanceof W){const c=A.catch(u=>(l.done(),W.reject(u)));r.push(c)}l.isDone?i():l.K===null?o.continue():o.continue(l.K)}}).next(()=>W.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nd(n){return new W((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=xO(r.target.error);t(i)}})}let A4=!1;function xO(n){const e=Pu.S(er());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return A4||(A4=!0,setTimeout(()=>{throw r},0)),r}}return n}class Wse{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ue("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){ad(t)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Lf(t)}await this.X(6e4)})}}class Xse{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return W.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return ue("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(ue("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=j6(s);bO(a,r)>0&&(r=a)}),new Ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ca.oe=-1;function BS(n){return n==null}function ew(n){return n===0&&1/n==-1/0}function Yse(n){return typeof n=="number"&&Number.isInteger(n)&&!ew(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=c4(e)),e=qse(n.get(t),e);return c4(e)}function qse(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function c4(n){return n+""}function Uo(n){const e=n.length;if(Oe(e>=2),e===2)return Oe(n.charAt(0)===""&&n.charAt(1)===""),Et.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&Pe(),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:Pe()}s=a+2}return new Et(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n,e){return[n,Ci(e)]}function $6(n,e,t){return[n,Ci(e),t]}const Jse={},Zse=["prefixPath","collectionGroup","readTime","documentId"],eae=["prefixPath","collectionGroup","documentId"],tae=["collectionGroup","readTime","prefixPath","documentId"],nae=["canonicalId","targetId"],rae=["targetId","path"],iae=["path","targetId"],sae=["collectionId","parent"],aae=["indexId","uid"],oae=["uid","sequenceNumber"],lae=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Aae=["indexId","uid","orderedDocumentKey"],cae=["userId","collectionPath","documentId"],uae=["userId","collectionPath","largestBatchId"],dae=["userId","collectionGroup","largestBatchId"],G6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hae=[...G6,"documentOverlays"],z6=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],W6=z6,BO=[...W6,"indexConfiguration","indexState","indexEntries"],fae=BO,gae=[...BO,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF extends V6{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function tr(n,e){const t=Ke(n);return Pu.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function h0(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X6(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t){this.comparator=e,this.root=t||Or.EMPTY}insert(e,t){return new ln(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Or.BLACK,null,null))}remove(e){return new ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new IB(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new IB(this.root,e,this.comparator,!1)}getReverseIterator(){return new IB(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new IB(this.root,e,this.comparator,!0)}}class IB{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Or{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Or.RED,this.left=i??Or.EMPTY,this.right=s??Or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Or(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Or.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Or.EMPTY=null,Or.RED=!0,Or.BLACK=!1;Or.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h4(this.data.getIterator())}getIteratorFrom(e){return new h4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class h4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rg(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new ua([])}unionWith(e){let t=new kt(rn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ua(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Y6("Invalid base64 string: "+s):s}}(e);return new Tn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const pae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function CA(n){if(Oe(!!n),typeof n=="string"){let e=0;const t=pae.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tn(n.seconds),nanos:tn(n.nanos)}}function tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ju(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function CO(n){const e=n.mapValue.fields.__previous_value__;return EO(e)?CO(e):e}function tw(n){const e=CA(n.mapValue.fields.__local_write_time__.timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mae{constructor(e,t,r,i,s,a,o,l,A){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=A}}class Hu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VE={nullValue:"NULL_VALUE"};function bf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?EO(n)?4:q6(n)?9007199254740991:ES(n)?10:11:Pe()}function $o(n,e){if(n===e)return!0;const t=bf(n);if(t!==bf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tw(n).isEqual(tw(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=CA(i.timestampValue),o=CA(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ju(i.bytesValue).isEqual(ju(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return tn(i.geoPointValue.latitude)===tn(s.geoPointValue.latitude)&&tn(i.geoPointValue.longitude)===tn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tn(i.integerValue)===tn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=tn(i.doubleValue),o=tn(s.doubleValue);return a===o?ew(a)===ew(o):isNaN(a)&&isNaN(o)}return!1}(n,e);case 9:return Rm(n.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(d4(a)!==d4(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!$o(a[l],o[l])))return!1;return!0}(n,e);default:return Pe()}}function nw(n,e){return(n.values||[]).find(t=>$o(t,e))!==void 0}function Vu(n,e){if(n===e)return 0;const t=bf(n),r=bf(e);if(t!==r)return ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return function(s,a){const o=tn(s.integerValue||s.doubleValue),l=tn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(n,e);case 3:return f4(n.timestampValue,e.timestampValue);case 4:return f4(tw(n),tw(e));case 5:return ze(n.stringValue,e.stringValue);case 6:return function(s,a){const o=ju(s),l=ju(a);return o.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let A=0;A<o.length&&A<l.length;A++){const c=ze(o[A],l[A]);if(c!==0)return c}return ze(o.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const o=ze(tn(s.latitude),tn(a.latitude));return o!==0?o:ze(tn(s.longitude),tn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return g4(n.arrayValue,e.arrayValue);case 10:return function(s,a){var o,l,A,c;const u=s.fields||{},h=a.fields||{},g=(o=u.value)===null||o===void 0?void 0:o.arrayValue,p=(l=h.value)===null||l===void 0?void 0:l.arrayValue,m=ze(((A=g==null?void 0:g.values)===null||A===void 0?void 0:A.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:g4(g,p)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===uu.mapValue&&a===uu.mapValue)return 0;if(s===uu.mapValue)return 1;if(a===uu.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),A=a.fields||{},c=Object.keys(A);l.sort(),c.sort();for(let u=0;u<l.length&&u<c.length;++u){const h=ze(l[u],c[u]);if(h!==0)return h;const g=Vu(o[l[u]],A[c[u]]);if(g!==0)return g}return ze(l.length,c.length)}(n.mapValue,e.mapValue);default:throw Pe()}}function f4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=CA(n),r=CA(e),i=ze(t.seconds,r.seconds);return i!==0?i:ze(t.nanos,r.nanos)}function g4(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Vu(t[i],r[i]);if(s)return s}return ze(t.length,r.length)}function Mm(n){return fF(n)}function fF(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=CA(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ju(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=fF(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${fF(t.fields[a])}`;return i+"}"}(n.mapValue):Pe()}function _O(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function gF(n){return!!n&&"integerValue"in n}function rw(n){return!!n&&"arrayValue"in n}function p4(n){return!!n&&"nullValue"in n}function m4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function KE(n){return!!n&&"mapValue"in n}function ES(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return h0(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gv(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gv(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const J6={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function yae(n){return"nullValue"in n?VE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_O(Hu.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ES(n)?J6:{mapValue:{}}:Pe()}function vae(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_O(Hu.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?J6:"mapValue"in n?ES(n)?{mapValue:{}}:uu:Pe()}function y4(n,e){const t=Vu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function v4(n,e){const t=Vu(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!KE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gv(t)}setAll(e){let t=rn.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=gv(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());KE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];KE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){h0(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hi(gv(this.value))}}function Z6(n){const e=[];return h0(n.fields,(t,r)=>{const i=new rn([t]);if(KE(r)){const s=Z6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new ua(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Bn(e,0,Re.min(),Re.min(),Re.min(),Hi.empty(),0)}static newFoundDocument(e,t,r,i){return new Bn(e,1,t,Re.min(),r,i,0)}static newNoDocument(e,t){return new Bn(e,2,t,Re.min(),Re.min(),Hi.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Re.min(),Re.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t){this.position=e,this.inclusive=t}}function w4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),t.key):r=Vu(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function b4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$o(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t="asc"){this.field=e,this.dir=t}}function wae(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{}class at extends eG{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bae(e,t,r):t==="array-contains"?new Eae(e,r):t==="in"?new aG(e,r):t==="not-in"?new Cae(e,r):t==="array-contains-any"?new _ae(e,r):new at(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xae(e,r):new Bae(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Vu(t,this.value)):t!==null&&bf(this.value)===bf(t)&&this.matchesComparison(Vu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pt extends eG{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Pt(e,t)}matches(e){return Qm(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qm(n){return n.op==="and"}function pF(n){return n.op==="or"}function SO(n){return tG(n)&&Qm(n)}function tG(n){for(const e of n.filters)if(e instanceof Pt)return!1;return!0}function mF(n){if(n instanceof at)return n.field.canonicalString()+n.op.toString()+Mm(n.value);if(SO(n))return n.filters.map(e=>mF(e)).join(",");{const e=n.filters.map(t=>mF(t)).join(",");return`${n.op}(${e})`}}function nG(n,e){return n instanceof at?function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&$o(r.value,i.value)}(n,e):n instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&nG(a,i.filters[o]),!0):!1}(n,e):void Pe()}function rG(n,e){const t=n.filters.concat(e);return Pt.create(t,n.op)}function iG(n){return n instanceof at?function(t){return`${t.field.canonicalString()} ${t.op} ${Mm(t.value)}`}(n):n instanceof Pt?function(t){return t.op.toString()+" {"+t.getFilters().map(iG).join(" ,")+"}"}(n):"Filter"}class bae extends at{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class xae extends at{constructor(e,t){super(e,"in",t),this.keys=sG("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bae extends at{constructor(e,t){super(e,"not-in",t),this.keys=sG("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sG(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class Eae extends at{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rw(t)&&nw(t.arrayValue,this.value)}}class aG extends at{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nw(this.value.arrayValue,t)}}class Cae extends at{constructor(e,t){super(e,"not-in",t)}matches(e){if(nw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!nw(this.value.arrayValue,t)}}class _ae extends at{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>nw(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function yF(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Sae(n,e,t,r,i,s,a)}function xf(n){const e=Ke(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mF(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),BS(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Mm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Mm(r)).join(",")),e.ue=t}return e.ue}function cx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wae(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nG(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b4(n.startAt,e.startAt)&&b4(n.endAt,e.endAt)}function h1(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function f1(n,e){return n.filters.filter(t=>t instanceof at&&t.field.isEqual(e))}function x4(n,e,t){let r=VE,i=!0;for(const s of f1(n,e)){let a=VE,o=!0;switch(s.op){case"<":case"<=":a=yae(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=VE}y4({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];y4({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function B4(n,e,t){let r=uu,i=!0;for(const s of f1(n,e)){let a=uu,o=!0;switch(s.op){case">=":case">":a=vae(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=uu}v4({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];v4({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Iae(n,e,t,r,i,s,a,o){return new CS(n,e,t,r,i,s,a,o)}function ux(n){return new CS(n)}function E4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tae(n){return n.collectionGroup!==null}function pv(n){const e=Ke(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new kt(rn.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(A=>{A.isInequality()&&(o=o.add(A.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new d1(s,r))}),t.has(rn.keyField().canonicalString())||e.ce.push(new d1(rn.keyField(),r))}return e.ce}function ma(n){const e=Ke(n);return e.le||(e.le=Pae(e,pv(n))),e.le}function Pae(n,e){if(n.limitType==="F")return yF(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new d1(i.field,s)});const t=n.endAt?new Lm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lm(n.startAt.position,n.startAt.inclusive):null;return yF(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function g1(n,e,t){return new CS(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _S(n,e){return cx(ma(n),ma(e))&&n.limitType===e.limitType}function oG(n){return`${xf(ma(n))}|lt:${n.limitType}`}function yg(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>iG(i)).join(", ")}]`),BS(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Mm(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Mm(i)).join(",")),`Target(${r})`}(ma(n))}; limitType=${n.limitType})`}function dx(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of pv(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const A=w4(a,o,l);return a.inclusive?A<=0:A<0}(r.startAt,pv(r),i)||r.endAt&&!function(a,o,l){const A=w4(a,o,l);return a.inclusive?A>=0:A>0}(r.endAt,pv(r),i))}(n,e)}function Fae(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lG(n){return(e,t)=>{let r=!1;for(const i of pv(n)){const s=kae(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function kae(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),A=o.data.field(s);return l!==null&&A!==null?Vu(l,A):Pe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){h0(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return X6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nae=new ln(ye.comparator);function Ss(){return Nae}const AG=new ln(ye.comparator);function _y(...n){let e=AG;for(const t of n)e=e.insert(t.key,t);return e}function cG(n){let e=AG;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ro(){return mv()}function uG(){return mv()}function mv(){return new od(n=>n.toString(),(n,e)=>n.isEqual(e))}const Dae=new ln(ye.comparator),Oae=new kt(ye.comparator);function qe(...n){let e=Oae;for(const t of n)e=e.add(t);return e}const Uae=new kt(ze);function Rae(){return Uae}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ew(e)?"-0":e}}function dG(n){return{integerValue:""+n}}function Mae(n,e){return Yse(e)?dG(e):IO(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this._=void 0}}function Lae(n,e,t){return n instanceof jm?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&EO(s)&&(s=CO(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Hm?fG(n,e):n instanceof Vm?gG(n,e):function(i,s){const a=hG(i,s),o=C4(a)+C4(i.Pe);return gF(a)&&gF(i.Pe)?dG(o):IO(i.serializer,o)}(n,e)}function Qae(n,e,t){return n instanceof Hm?fG(n,e):n instanceof Vm?gG(n,e):t}function hG(n,e){return n instanceof iw?function(r){return gF(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class jm extends SS{}class Hm extends SS{constructor(e){super(),this.elements=e}}function fG(n,e){const t=pG(e);for(const r of n.elements)t.some(i=>$o(i,r))||t.push(r);return{arrayValue:{values:t}}}class Vm extends SS{constructor(e){super(),this.elements=e}}function gG(n,e){let t=pG(e);for(const r of n.elements)t=t.filter(i=>!$o(i,r));return{arrayValue:{values:t}}}class iw extends SS{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function C4(n){return tn(n.integerValue||n.doubleValue)}function pG(n){return rw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e,t){this.field=e,this.transform=t}}function jae(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Hm&&i instanceof Hm||r instanceof Vm&&i instanceof Vm?Rm(r.elements,i.elements,$o):r instanceof iw&&i instanceof iw?$o(r.Pe,i.Pe):r instanceof jm&&i instanceof jm}(n.transform,e.transform)}class Hae{constructor(e,t){this.version=e,this.transformResults=t}}class Is{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Is}static exists(e){return new Is(void 0,e)}static updateTime(e){return new Is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $E(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class IS{}function yG(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new TO(n.key,Is.none()):new f0(n.key,n.data,Is.none());{const t=n.data,r=Hi.empty();let i=new kt(rn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ld(n.key,r,new ua(i.toArray()),Is.none())}}function Vae(n,e,t){n instanceof f0?function(i,s,a){const o=i.value.clone(),l=S4(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,e,t):n instanceof ld?function(i,s,a){if(!$E(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=S4(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(vG(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function yv(n,e,t,r){return n instanceof f0?function(s,a,o,l){if(!$E(s.precondition,a))return o;const A=s.value.clone(),c=I4(s.fieldTransforms,l,a);return A.setAll(c),a.convertToFoundDocument(a.version,A).setHasLocalMutations(),null}(n,e,t,r):n instanceof ld?function(s,a,o,l){if(!$E(s.precondition,a))return o;const A=I4(s.fieldTransforms,l,a),c=a.data;return c.setAll(vG(s)),c.setAll(A),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(n,e,t,r):function(s,a,o){return $E(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,e,t)}function Kae(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=hG(r.transform,i||null);s!=null&&(t===null&&(t=Hi.empty()),t.set(r.field,s))}return t||null}function _4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rm(r,i,(s,a)=>jae(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class f0 extends IS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ld extends IS{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function S4(n,e,t){const r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,Qae(a,o,t[i]))}return r}function I4(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,Lae(s,a,e))}return r}class TO extends IS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wG extends IS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Vae(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yv(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yv(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uG();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=yG(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&Rm(this.mutations,e.mutations,(t,r)=>_4(t,r))&&Rm(this.baseMutations,e.baseMutations,(t,r)=>_4(t,r))}}class FO{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return Dae}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new FO(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var On,ot;function Gae(n){switch(n){default:return Pe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function bG(n){if(n===void 0)return bi("GRPC error has no .code"),se.UNKNOWN;switch(n){case On.OK:return se.OK;case On.CANCELLED:return se.CANCELLED;case On.UNKNOWN:return se.UNKNOWN;case On.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case On.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case On.INTERNAL:return se.INTERNAL;case On.UNAVAILABLE:return se.UNAVAILABLE;case On.UNAUTHENTICATED:return se.UNAUTHENTICATED;case On.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case On.NOT_FOUND:return se.NOT_FOUND;case On.ALREADY_EXISTS:return se.ALREADY_EXISTS;case On.PERMISSION_DENIED:return se.PERMISSION_DENIED;case On.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case On.ABORTED:return se.ABORTED;case On.OUT_OF_RANGE:return se.OUT_OF_RANGE;case On.UNIMPLEMENTED:return se.UNIMPLEMENTED;case On.DATA_LOSS:return se.DATA_LOSS;default:return Pe()}}(ot=On||(On={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zae(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wae=new sf([4294967295,4294967295],0);function T4(n){const e=zae().encode(n),t=new k6;return t.update(e),new Uint8Array(t.digest())}function P4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sf([t,r],0),new sf([i,s],0)]}class NO{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Sy(`Invalid padding: ${t}`);if(r<0)throw new Sy(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sy(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Sy(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=sf.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(sf.fromNumber(r)));return i.compare(Wae)===1&&(i=new sf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=T4(e),[r,i]=P4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new NO(s,i,t);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=T4(e),[r,i]=P4(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Sy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,hx.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new TS(Re.min(),i,new ln(ze),Ss(),qe())}}class hx{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hx(r,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class xG{constructor(e,t){this.targetId=e,this.me=t}}class BG{constructor(e,t,r=Tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class F4{constructor(){this.fe=0,this.ge=N4(),this.pe=Tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=qe(),t=qe(),r=qe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new hx(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=N4()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xae{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ss(),this.qe=k4(),this.Qe=new ln(ze)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(h1(s))if(r===0){const a=new ye(s.path);this.Ue(t,a,Bn.newNoDocument(a,Re.min()))}else Oe(r===1);else{const a=this.Ye(t);if(a!==r){const o=this.Ze(e),l=o?this.Xe(o,e,a):1;if(l!==0){this.je(t);const A=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,A)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=ju(r).toUint8Array()}catch(l){if(l instanceof Y6)return Qu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new NO(a,i,s)}catch(l){return Qu(l instanceof Sy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.Ie===0?null:o}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&h1(o.target)){const l=new ye(o.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,Bn.newNoDocument(l,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=qe();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const A=this.Je(l);return!A||A.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new TS(e,t,this.Qe,this.ke,r);return this.ke=Ss(),this.qe=k4(),this.Qe=new ln(ze),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new F4,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new kt(ze),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new F4),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function k4(){return new ln(ye.comparator)}function N4(){return new ln(ye.comparator)}const Yae={asc:"ASCENDING",desc:"DESCENDING"},qae={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jae={and:"AND",or:"OR"};class Zae{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vF(n,e){return n.useProto3Json||BS(e)?e:{value:e}}function Km(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EG(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eoe(n,e){return Km(n,e.toTimestamp())}function _i(n){return Oe(!!n),Re.fromTimestamp(function(t){const r=CA(t);return new on(r.seconds,r.nanos)}(n))}function DO(n,e){return wF(n,e).canonicalString()}function wF(n,e){const t=function(i){return new Et(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CG(n){const e=Et.fromString(n);return Oe(DG(e)),e}function p1(n,e){return DO(n.databaseId,e.path)}function af(n,e){const t=CG(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(IG(t))}function _G(n,e){return DO(n.databaseId,e)}function SG(n){const e=CG(n);return e.length===4?Et.emptyPath():IG(e)}function bF(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IG(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function D4(n,e,t){return{name:p1(n,e),fields:t.value.mapValue.fields}}function toe(n,e,t){const r=af(n,e.name),i=_i(e.updateTime),s=e.createTime?_i(e.createTime):Re.min(),a=new Hi({mapValue:{fields:e.fields}}),o=Bn.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function noe(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(A,c){return A.useProto3Json?(Oe(c===void 0||typeof c=="string"),Tn.fromBase64String(c||"")):(Oe(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Tn.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(A){const c=A.code===void 0?se.UNKNOWN:bG(A.code);return new Ee(c,A.message||"")}(a);t=new BG(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=af(n,r.document.name),s=_i(r.document.updateTime),a=r.document.createTime?_i(r.document.createTime):Re.min(),o=new Hi({mapValue:{fields:r.document.fields}}),l=Bn.newFoundDocument(i,s,a,o),A=r.targetIds||[],c=r.removedTargetIds||[];t=new GE(A,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=af(n,r.document),s=r.readTime?_i(r.readTime):Re.min(),a=Bn.newNoDocument(i,s),o=r.removedTargetIds||[];t=new GE([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=af(n,r.document),s=r.removedTargetIds||[];t=new GE([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new $ae(i,s),o=r.targetId;t=new xG(o,a)}}return t}function m1(n,e){let t;if(e instanceof f0)t={update:D4(n,e.key,e.value)};else if(e instanceof TO)t={delete:p1(n,e.key)};else if(e instanceof ld)t={update:D4(n,e.key,e.data),updateMask:loe(e.fieldMask)};else{if(!(e instanceof wG))return Pe();t={verify:p1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof jm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Hm)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Vm)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof iw)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw Pe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eoe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(n,e.precondition)),t}function xF(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Is.updateTime(_i(s.updateTime)):s.exists!==void 0?Is.exists(s.exists):Is.none()}(e.currentDocument):Is.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let l=null;if("setToServerValue"in o)Oe(o.setToServerValue==="REQUEST_TIME"),l=new jm;else if("appendMissingElements"in o){const c=o.appendMissingElements.values||[];l=new Hm(c)}else if("removeAllFromArray"in o){const c=o.removeAllFromArray.values||[];l=new Vm(c)}else"increment"in o?l=new iw(a,o.increment):Pe();const A=rn.fromServerFormat(o.fieldPath);return new mG(A,l)}(n,i)):[];if(e.update){e.update.name;const i=af(n,e.update.name),s=new Hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(l){const A=l.fieldPaths||[];return new ua(A.map(c=>rn.fromServerFormat(c)))}(e.updateMask);return new ld(i,s,a,t,r)}return new f0(i,s,t,r)}if(e.delete){const i=af(n,e.delete);return new TO(i,t)}if(e.verify){const i=af(n,e.verify);return new wG(i,t)}return Pe()}function roe(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?_i(i.updateTime):_i(s);return a.isEqual(Re.min())&&(a=_i(s)),new Hae(a,i.transformResults||[])}(t,e))):[]}function TG(n,e){return{documents:[_G(n,e.path)]}}function PG(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_G(n,i);const s=function(A){if(A.length!==0)return NG(Pt.create(A,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(A){if(A.length!==0)return A.map(c=>function(h){return{field:vg(h.field),direction:soe(h.dir)}}(c))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=vF(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{_t:t,parent:i}}function FG(n){let e=SG(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Oe(r===1);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(u){const h=kG(u);return h instanceof Pt&&SO(h)?h.getFilters():[h]}(t.where));let a=[];t.orderBy&&(a=function(u){return u.map(h=>function(p){return new d1(wg(p.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(t.orderBy));let o=null;t.limit&&(o=function(u){let h;return h=typeof u=="object"?u.value:u,BS(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(u){const h=!!u.before,g=u.values||[];return new Lm(g,h)}(t.startAt));let A=null;return t.endAt&&(A=function(u){const h=!u.before,g=u.values||[];return new Lm(g,h)}(t.endAt)),Iae(e,i,a,s,o,"F",l,A)}function ioe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kG(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wg(t.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wg(t.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wg(t.unaryFilter.field);return at.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wg(t.unaryFilter.field);return at.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(n):n.fieldFilter!==void 0?function(t){return at.create(wg(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Pt.create(t.compositeFilter.filters.map(r=>kG(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(n):Pe()}function soe(n){return Yae[n]}function aoe(n){return qae[n]}function ooe(n){return Jae[n]}function vg(n){return{fieldPath:n.canonicalString()}}function wg(n){return rn.fromServerFormat(n.fieldPath)}function NG(n){return n instanceof at?function(t){if(t.op==="=="){if(m4(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NAN"}};if(p4(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(m4(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NOT_NAN"}};if(p4(t.value))return{unaryFilter:{field:vg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vg(t.field),op:aoe(t.op),value:t.value}}}(n):n instanceof Pt?function(t){const r=t.getFilters().map(i=>NG(i));return r.length===1?r[0]:{compositeFilter:{op:ooe(t.op),filters:r}}}(n):Pe()}function loe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function DG(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,t,r,i,s=Re.min(),a=Re.min(),o=Tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new oA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oA(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e){this.ct=e}}function Aoe(n,e){let t;if(e.document)t=toe(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=Ef(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Pe();{const r=ye.fromSegments(e.unknownDocument.path),i=Ef(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new on(i[0],i[1]);return Re.fromTimestamp(s)}(e.readTime)),t}function O4(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:y1(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:p1(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Km(s,a.version.toTimestamp()),createTime:Km(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bf(e.version)};else{if(!e.isUnknownDocument())return Pe();r.unknownDocument={path:t.path.toArray(),version:Bf(e.version)}}return r}function y1(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ef(n){const e=new on(n.seconds,n.nanoseconds);return Re.fromTimestamp(e)}function Dd(n,e){const t=(e.baseMutations||[]).map(s=>xF(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>xF(n.ct,s)),i=on.fromMillis(e.localWriteTimeMs);return new PO(e.batchId,i,t,r)}function Iy(n){const e=Ef(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ef(n.lastLimboFreeSnapshotVersion):Re.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return Oe(s.documents.length===1),ma(ux(SG(s.documents[0])))}(n.query):function(s){return ma(FG(s))}(n.query),new oA(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tn.fromBase64String(n.resumeToken))}function UG(n,e){const t=Bf(e.snapshotVersion),r=Bf(e.lastLimboFreeSnapshotVersion);let i;i=h1(e.target)?TG(n.ct,e.target):PG(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function RG(n){const e=FG({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?g1(e,e.limit,"L"):e}function tP(n,e){return new kO(e.largestBatchId,xF(n.ct,e.overlayMutation))}function U4(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function R4(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bf(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{getBundleMetadata(e,t){return M4(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ef(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return M4(e).put(function(i){return{bundleId:i.id,createTime:Bf(_i(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return L4(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:RG(s.bundledQuery),readTime:Ef(s.readTime)}}(r)})}saveNamedQuery(e,t){return L4(e).put(function(i){return{name:i.name,readTime:Bf(_i(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function M4(n){return tr(n,"bundles")}function L4(n){return tr(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new PS(e,r)}getOverlay(e,t){return J0(e).get(U4(this.userId,t)).next(r=>r?tP(this.serializer,r):null)}getOverlays(e,t){const r=Ro();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const o=new kO(t,a);i.push(this.ht(e,o))}),W.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Ci(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(J0(e).j("collectionPathOverlayIndex",o))}),W.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ro(),s=Ci(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return J0(e).U("collectionPathOverlayIndex",a).next(o=>{for(const l of o){const A=tP(this.serializer,l);i.set(A.getKey(),A)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ro();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return J0(e).J({index:"collectionGroupOverlayIndex",range:o},(l,A,c)=>{const u=tP(this.serializer,A);s.size()<i||u.largestBatchId===a?(s.set(u.getKey(),u),a=u.largestBatchId):c.done()}).next(()=>s)}ht(e,t){return J0(e).put(function(i,s,a){const[o,l,A]=U4(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:A,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:m1(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function J0(n){return tr(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uoe{Pt(e){return tr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Tn.fromUint8Array(r):Tn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(tn(e.integerValue));else if("doubleValue"in e){const r=tn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ew(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=CA(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ju(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?q6(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ES(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Pe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(tn(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ye.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Od.vt=new Od;function doe(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Q4(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=doe(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class hoe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Q4(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Q4(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class foe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class goe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Z0{constructor(){this.jt=new hoe,this.Ht=new foe(this.jt),this.Jt=new goe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ud(this.indexId,this.documentKey,this.arrayValue,r)}}function qA(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=j4(n.arrayValue,e.arrayValue),t!==0?t:(t=j4(n.directionalValue,e.directionalValue),t!==0?t:ye.comparator(n.documentKey,e.documentKey)))}function j4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.Xt=new kt((t,r)=>rn.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Oe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=dF(e);if(t!==void 0&&!this.sn(t))return!1;const r=_d(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.on(o,l)||!this._n(this.en[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new kt(rn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new jE(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new jE(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new jE(r.field,r.dir==="asc"?0:1)));return new u1(u1.UNKNOWN_ID,this.collectionId,t,Zv.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(n){var e,t;if(Oe(n instanceof at||n instanceof Pt),n instanceof at){if(n instanceof aG){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>at.create(n.field,"==",s)))||[];return Pt.create(i,"or")}return n}const r=n.filters.map(i=>MG(i));return Pt.create(r,n.op)}function poe(n){if(n.getFilters().length===0)return[];const e=CF(MG(n));return Oe(LG(e)),BF(e)||EF(e)?[e]:e.getFilters()}function BF(n){return n instanceof at}function EF(n){return n instanceof Pt&&SO(n)}function LG(n){return BF(n)||EF(n)||function(t){if(t instanceof Pt&&pF(t)){for(const r of t.getFilters())if(!BF(r)&&!EF(r))return!1;return!0}return!1}(n)}function CF(n){if(Oe(n instanceof at||n instanceof Pt),n instanceof at)return n;if(n.filters.length===1)return CF(n.filters[0]);const e=n.filters.map(r=>CF(r));let t=Pt.create(e,n.op);return t=v1(t),LG(t)?t:(Oe(t instanceof Pt),Oe(Qm(t)),Oe(t.filters.length>1),t.filters.reduce((r,i)=>OO(r,i)))}function OO(n,e){let t;return Oe(n instanceof at||n instanceof Pt),Oe(e instanceof at||e instanceof Pt),t=n instanceof at?e instanceof at?function(i,s){return Pt.create([i,s],"and")}(n,e):V4(n,e):e instanceof at?V4(e,n):function(i,s){if(Oe(i.filters.length>0&&s.filters.length>0),Qm(i)&&Qm(s))return rG(i,s.getFilters());const a=pF(i)?i:s,o=pF(i)?s:i,l=a.filters.map(A=>OO(A,o));return Pt.create(l,"or")}(n,e),v1(t)}function V4(n,e){if(Qm(e))return rG(e,n.getFilters());{const t=e.filters.map(r=>OO(n,r));return Pt.create(t,"or")}}function v1(n){if(Oe(n instanceof at||n instanceof Pt),n instanceof at)return n;const e=n.getFilters();if(e.length===1)return v1(e[0]);if(tG(n))return n;const t=e.map(i=>v1(i)),r=[];return t.forEach(i=>{i instanceof at?r.push(i):i instanceof Pt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Pt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class moe{constructor(){this.un=new UO}addToCollectionParentIndex(e,t){return this.un.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Ns.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class UO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new kt(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=new Uint8Array(0);class yoe{constructor(e,t){this.databaseId=t,this.cn=new UO,this.ln=new od(r=>xf(r),(r,i)=>cx(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ci(i)};return K4(e).put(s)}return W.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Q6(t),""],!1,!0);return K4(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Uo(a.parent))}return r})}addFieldIndex(e,t){const r=ey(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=sg(e);return s.next(o=>{a.put(R4(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ey(e),i=sg(e),s=ig(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ey(e),r=ig(e),i=sg(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return W.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new H4(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=ig(e);let i=!0;const s=new Map;return W.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=qe();const o=[];return W.forEach(s,(l,A)=>{ue("IndexedDbIndexManager",`Using index ${function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(l)} to execute ${xf(t)}`);const c=function(x,E){const I=dF(E);if(I===void 0)return null;for(const P of f1(x,I.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null}(A,l),u=function(x,E){const I=new Map;for(const P of _d(E))for(const _ of f1(x,P.fieldPath))switch(_.op){case"==":case"in":I.set(P.fieldPath.canonicalString(),_.value);break;case"not-in":case"!=":return I.set(P.fieldPath.canonicalString(),_.value),Array.from(I.values())}return null}(A,l),h=function(x,E){const I=[];let P=!0;for(const _ of _d(E)){const T=_.kind===0?x4(x,_.fieldPath,x.startAt):B4(x,_.fieldPath,x.startAt);I.push(T.value),P&&(P=T.inclusive)}return new Lm(I,P)}(A,l),g=function(x,E){const I=[];let P=!0;for(const _ of _d(E)){const T=_.kind===0?B4(x,_.fieldPath,x.endAt):x4(x,_.fieldPath,x.endAt);I.push(T.value),P&&(P=T.inclusive)}return new Lm(I,P)}(A,l),p=this.In(l,A,h),m=this.In(l,A,g),w=this.Tn(l,A,u),v=this.En(l.indexId,c,p,h.inclusive,m,g.inclusive,w);return W.forEach(v,b=>r.G(b,t.limit).next(x=>{x.forEach(E=>{const I=ye.fromSegments(E.documentKey);a.has(I)||(a=a.add(I),o.push(I))})}))}).next(()=>o)}return W.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=poe(Pt.create(e.filters,"and")).map(r=>yF(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),A=l/(t!=null?t.length:1),c=[];for(let u=0;u<l;++u){const h=t?this.dn(t[u/A]):TB,g=this.An(e,h,r[u%A],i),p=this.Rn(e,h,s[u%A],a),m=o.map(w=>this.An(e,h,w,!0));c.push(...this.createRange(g,p,m))}return c}An(e,t,r,i){const s=new Ud(e,ye.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Ud(e,ye.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new H4(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return W.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(l){let A=new kt(rn.comparator),c=!1;for(const u of l.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:A=A.add(h.field));for(const u of l.orderBy)u.field.isKeyField()||(A=A.add(u.field));return A.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Z0;for(const i of _d(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Od.vt.It(s,a)}return r.zt()}dn(e){const t=new Z0;return Od.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Z0;return Od.vt.It(_O(this.databaseId,t),r.Yt(function(s){const a=_d(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Z0);let s=0;for(const a of _d(e)){const o=r[s++];for(const l of i)if(this.fn(t,a.fieldPath)&&rw(o))i=this.gn(i,a,o);else{const A=l.Yt(a.kind);Od.vt.It(o,A)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Z0;l.seed(o.zt()),Od.vt.It(a,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof at&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=ey(e),i=sg(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return W.forEach(s,o=>i.get([o.indexId,this.uid]).next(l=>{a.push(function(c,u){const h=u?new Zv(u.sequenceNumber,new Ns(Ef(u.readTime),new ye(Uo(u.documentKey)),u.largestBatchId)):Zv.empty(),g=c.fields.map(([p,m])=>new jE(rn.fromServerFormat(p),m));return new u1(c.indexId,c.collectionGroup,g,h)}(o,l))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ze(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ey(e),s=sg(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>W.forEach(o,l=>s.put(R4(l.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?W.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),W.forEach(o,l=>this.wn(e,i,l).next(A=>{const c=this.Sn(s,l);return A.isEqual(c)?W.resolve():this.bn(e,s,l,A,c)}))))})}Dn(e,t,r,i){return ig(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ig(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ig(e);let s=new kt(qA);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,o)=>{s=s.add(new Ud(r.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let r=new kt(qA);const i=this.Vn(t,e);if(i==null)return r;const s=dF(t);if(s!=null){const a=e.data.field(s.fieldPath);if(rw(a))for(const o of a.arrayValue.values||[])r=r.add(new Ud(t.indexId,e.key,this.dn(o),i))}else r=r.add(new Ud(t.indexId,e.key,TB,i));return r}bn(e,t,r,i,s){ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,A,c,u,h){const g=l.getIterator(),p=A.getIterator();let m=rg(g),w=rg(p);for(;m||w;){let v=!1,b=!1;if(m&&w){const x=c(m,w);x<0?b=!0:x>0&&(v=!0)}else m!=null?b=!0:v=!0;v?(u(w),w=rg(p)):b?(h(m),m=rg(g)):(m=rg(g),w=rg(p))}}(i,s,qA,o=>{a.push(this.Dn(e,t,r,o))},o=>{a.push(this.vn(e,t,r,o))}),W.waitFor(a)}yn(e){let t=1;return sg(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,o)=>qA(a,o)).filter((a,o,l)=>!o||qA(a,l[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=qA(a,e),l=qA(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&l<0)i.push(a),i.push(a.Zt());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,TB,[]],l=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,TB,[]];s.push(IDBKeyRange.bound(o,l))}return s}Cn(e,t){return qA(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($4)}getMinOffset(e,t){return W.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Pe())).next($4)}}function K4(n){return tr(n,"collectionParents")}function ig(n){return tr(n,"indexEntries")}function ey(n){return tr(n,"indexConfiguration")}function sg(n){return tr(n,"indexState")}function $4(n){Oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bO(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ns(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Li{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.J({range:a},(c,u,h)=>(o++,h.delete()));s.push(l.next(()=>{Oe(o===1)}));const A=[];for(const c of t.mutations){const u=$6(e,c.key.path,t.batchId);s.push(i.delete(u)),A.push(c.key)}return W.waitFor(s).next(()=>A)}function w1(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Pe();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(41943040,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class FS{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Oe(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new FS(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return JA(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=bg(e),a=JA(e);return a.add({}).next(o=>{Oe(typeof o=="number");const l=new PO(o,t,r,i),A=function(g,p,m){const w=m.baseMutations.map(b=>m1(g.ct,b)),v=m.mutations.map(b=>m1(g.ct,b));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:w,mutations:v}}(this.serializer,this.userId,l),c=[];let u=new kt((h,g)=>ze(h.canonicalString(),g.canonicalString()));for(const h of i){const g=$6(this.userId,h.key.path,o);u=u.add(h.key.path.popLast()),c.push(a.put(A)),c.push(s.put(g,Jse))}return u.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Fn[o]=l.keys()}),W.waitFor(c).next(()=>l)})}lookupMutationBatch(e,t){return JA(e).get(t).next(r=>r?(Oe(r.userId===this.userId),Dd(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?W.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return JA(e).J({index:"userMutationsIndex",range:i},(a,o,l)=>{o.userId===this.userId&&(Oe(o.batchId>=r),s=Dd(this.serializer,o)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return JA(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return JA(e).U("userMutationsIndex",t).next(r=>r.map(i=>Dd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=HE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return bg(e).J({range:i},(a,o,l)=>{const[A,c,u]=a,h=Uo(c);if(A===this.userId&&t.path.isEqual(h))return JA(e).get(u).next(g=>{if(!g)throw Pe();Oe(g.userId===this.userId),s.push(Dd(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(ze);const i=[];return t.forEach(s=>{const a=HE(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=bg(e).J({range:o},(A,c,u)=>{const[h,g,p]=A,m=Uo(g);h===this.userId&&s.path.isEqual(m)?r=r.add(p):u.done()});i.push(l)}),W.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=HE(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new kt(ze);return bg(e).J({range:a},(l,A,c)=>{const[u,h,g]=l,p=Uo(h);u===this.userId&&r.isPrefixOf(p)?p.length===i&&(o=o.add(g)):c.done()}).next(()=>this.xn(e,o))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(JA(e).get(s).next(a=>{if(a===null)throw Pe();Oe(a.userId===this.userId),r.push(Dd(this.serializer,a))}))}),W.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return QG(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),W.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return bg(e).J({range:r},(s,a,o)=>{if(s[0]===this.userId){const l=Uo(s[1]);i.push(l)}else o.done()}).next(()=>{Oe(i.length===0)})})}containsKey(e,t){return jG(e,this.userId,t)}Nn(e){return HG(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jG(n,e,t){const r=HE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return bg(n).J({range:s,H:!0},(o,l,A)=>{const[c,u,h]=o;c===e&&u===i&&(a=!0),A.done()}).next(()=>a)}function JA(n){return tr(n,"mutations")}function bg(n){return tr(n,"documentMutations")}function HG(n){return tr(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Cf(0)}static kn(){return new Cf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Cf(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Re.fromTimestamp(new on(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ag(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ag(e).J((a,o)=>{const l=Iy(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>W.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ag(e).J((r,i)=>{const s=Iy(i);t(s)})}qn(e){return z4(e).get("targetGlobalKey").next(t=>(Oe(t!==null),t))}Qn(e,t){return z4(e).put("targetGlobalKey",t)}Kn(e,t){return ag(e).put(UG(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ag(e).J({range:i,index:"queryTargetsIndex"},(a,o,l)=>{const A=Iy(o);cx(t,A.target)&&(s=A,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=uc(e);return t.forEach(a=>{const o=Ci(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),W.waitFor(i)}removeMatchingKeys(e,t,r){const i=uc(e);return W.forEach(t,s=>{const a=Ci(s.path);return W.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=uc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=uc(e);let s=qe();return i.J({range:r,H:!0},(a,o,l)=>{const A=Uo(a[1]),c=new ye(A);s=s.add(c)}).next(()=>s)}containsKey(e,t){const r=Ci(t.path),i=IDBKeyRange.bound([r],[Q6(r)],!1,!0);let s=0;return uc(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],l,A)=>{a!==0&&(s++,A.done())}).next(()=>s>0)}ot(e,t){return ag(e).get(t).next(r=>r?Iy(r):null)}}function ag(n){return tr(n,"targets")}function z4(n){return tr(n,"targetGlobal")}function uc(n){return tr(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4([n,e],[t,r]){const i=ze(n,t);return i===0?ze(e,r):i}class woe{constructor(e){this.Un=e,this.buffer=new kt(W4),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();W4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class boe{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ad(t)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Lf(t)}await this.Hn(3e5)})}}class xoe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return W.resolve(ca.oe);const r=new woe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(G4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G4):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,o,l,A;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,a=Date.now(),this.nthSequenceNumber(e,i))).next(u=>(r=u,o=Date.now(),this.removeTargets(e,r,t))).next(u=>(s=u,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(u=>(A=Date.now(),mg()<=rt.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${u} documents in `+(A-l)+`ms
Total Duration: ${A-c}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:u})))}}function Boe(n,e){return new xoe(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eoe{constructor(e,t){this.db=e,this.garbageCollector=Boe(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return PB(e,r)}removeReference(e,t,r){return PB(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return PB(e,t)}nr(e,t){return function(i,s){let a=!1;return HG(i).Y(o=>jG(i,o,s).next(l=>(l&&(a=!0),W.resolve(!l)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const l=this.nr(e,a).next(A=>{if(!A)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Re.min()),uc(e).delete(function(u){return[0,Ci(u.path)]}(a))))});i.push(l)}}).next(()=>W.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return PB(e,t)}tr(e,t){const r=uc(e);let i,s=ca.oe;return r.J({index:"documentTargetsIndex"},([a,o],{path:l,sequenceNumber:A})=>{a===0?(s!==ca.oe&&t(new ye(Uo(i)),s),s=A,i=l):s=ca.oe}).next(()=>{s!==ca.oe&&t(new ye(Uo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PB(n,e){return uc(n).put(function(r,i){return{targetId:0,path:Ci(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(){this.changes=new od(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bd(e).put(r)}removeEntry(e,t,r){return bd(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],y1(a),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ty(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return bd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ty(t))},(i,s)=>{r={document:this.ir(t,s),size:w1(s)}}).next(()=>r)}getEntries(e,t){let r=Ss();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=Ss(),i=new ln(ye.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);r=r.insert(s,o),i=i.insert(s,w1(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return W.resolve();let i=new kt(q4);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(ty(i.first()),ty(i.last())),a=i.getIterator();let o=a.getNext();return bd(e).J({index:"documentKeyIndex",range:s},(l,A,c)=>{const u=ye.fromSegments([...A.prefixPath,A.collectionGroup,A.documentId]);for(;o&&q4(o,u)<0;)r(o,null),o=a.getNext();o&&o.isEqual(u)&&(r(o,A),o=a.hasNext()?a.getNext():null),o?c.$(ty(o)):c.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),y1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bd(e).U(IDBKeyRange.bound(o,l,!0)).next(A=>{s==null||s.incrementDocumentReadCount(A.length);let c=Ss();for(const u of A){const h=this.ir(ye.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(dx(t,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,t,r,i){let s=Ss();const a=Y4(t,r),o=Y4(t,Ns.max());return bd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(l,A,c)=>{const u=this.ir(ye.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);s=s.insert(u.key,u),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new _oe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return X4(e).get("remoteDocumentGlobalKey").next(t=>(Oe(!!t),t))}rr(e,t){return X4(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=Aoe(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Re.min())))return r}return Bn.newInvalidDocument(e)}}function KG(n){return new Coe(n)}class _oe extends VG{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new od(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new kt((s,a)=>ze(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=O4(this.cr.serializer,a);i=i.add(s.path.popLast());const A=w1(l);r+=A-o.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=O4(this.cr.serializer,a.convertToNoDocument(Re.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function X4(n){return tr(n,"remoteDocumentGlobal")}function bd(n){return tr(n,"remoteDocumentsV14")}function ty(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y4(n,e){const t=e.documentKey.path.toArray();return[n,y1(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function q4(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ze(t[s],r[s]),i)return i;return i=ze(t.length,r.length),i||(i=ze(t[t.length-2],r[r.length-2]),i||ze(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yv(r.mutation,i,ua.empty(),on.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){const i=Ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=_y();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,i){let s=Ss();const a=mv(),o=function(){return mv()}();return t.forEach((l,A)=>{const c=r.get(A.key);i.has(A.key)&&(c===void 0||c.mutation instanceof ld)?s=s.insert(A.key,A):c!==void 0?(a.set(A.key,c.mutation.getFieldMask()),yv(c.mutation,A,c.mutation.getFieldMask(),on.now())):a.set(A.key,ua.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((A,c)=>a.set(A,c)),t.forEach((A,c)=>{var u;return o.set(A,new Soe(c,(u=a.get(A))!==null&&u!==void 0?u:null))}),o))}recalculateAndSaveOverlays(e,t){const r=mv();let i=new ln((a,o)=>a-o),s=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const A=t.get(l);if(A===null)return;let c=r.get(l)||ua.empty();c=o.applyToLocalView(A,c),r.set(l,c);const u=(i.get(o.batchId)||qe()).add(l);i=i.insert(o.batchId,u)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),A=l.key,c=l.value,u=uG();c.forEach(h=>{if(!s.has(h)){const g=yG(t.get(h),r.get(h));g!==null&&u.set(h,g),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,A,u))}return W.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tae(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):W.resolve(Ro());let o=-1,l=s;return a.next(A=>W.forEach(A,(c,u)=>(o<u.largestBatchId&&(o=u.largestBatchId),s.get(c)?W.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,A,s)).next(()=>this.computeViews(e,l,A,qe())).next(c=>({batchId:o,changes:cG(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=_y();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=_y();return this.indexManager.getCollectionParents(e,s).next(o=>W.forEach(o,l=>{const A=function(u,h){return new CS(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,A,r,i).next(c=>{c.forEach((u,h)=>{a=a.insert(u,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,A)=>{const c=A.getKey();a.get(c)===null&&(a=a.insert(c,Bn.newInvalidDocument(c)))});let o=_y();return a.forEach((l,A)=>{const c=s.get(l);c!==void 0&&yv(c.mutation,A,ua.empty(),on.now()),dx(t,A)&&(o=o.insert(l,A))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return W.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:_i(i.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:RG(i.bundledQuery),readTime:_i(i.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(){this.overlays=new ln(ye.comparator),this.Ir=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ro();return W.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),W.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const i=Ro(),s=t.length+1,a=new ye(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,A=l.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return W.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ln((A,c)=>A-c);const a=this.overlays.getIterator();for(;a.hasNext();){const A=a.getNext().value;if(A.getKey().getCollectionGroup()===t&&A.largestBatchId>r){let c=s.get(A.largestBatchId);c===null&&(c=Ro(),s=s.insert(A.largestBatchId,c)),c.set(A.getKey(),A)}}const o=Ro(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((A,c)=>o.set(A,c)),!(o.size()>=i)););return W.resolve(o)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new kO(t,r));let s=this.Ir.get(t);s===void 0&&(s=qe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.Tr=new kt(fr.Er),this.dr=new kt(fr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new fr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new fr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ye(new Et([])),r=new fr(t,e),i=new fr(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ye(new Et([])),r=new fr(t,e),i=new fr(t,e+1);let s=qe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new fr(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class fr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ye.comparator(e.key,t.key)||ze(e.wr,t.wr)}static Ar(e,t){return ze(e.wr,t.wr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Foe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new kt(fr.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new PO(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new fr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return W.resolve(a)}lookupMutationBatch(e,t){return W.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new fr(t,0),i=new fr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(ze);return t.forEach(i=>{const s=new fr(i,0),a=new fr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new fr(new ye(s),0);let o=new kt(ze);return this.br.forEachWhile(l=>{const A=l.key.path;return!!r.isPrefixOf(A)&&(A.length===i&&(o=o.add(l.wr)),!0)},a),W.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(t.mutations,i=>{const s=new fr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new fr(t,0),i=this.br.firstAfterOrEqual(r);return W.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(e){this.Mr=e,this.docs=function(){return new ln(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=Ss();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bn.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ss();const a=t.path,o=new ye(a.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:A,value:{document:c}}=l.getNext();if(!a.isPrefixOf(A.path))break;A.path.length>a.length+1||bO(j6(c),r)<=0||(i.has(c.key)||dx(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Pe()}Or(e,t){return W.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Noe(this)}getSize(e){return W.resolve(this.size)}}class Noe extends VG{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Doe{constructor(e){this.persistence=e,this.Nr=new od(t=>xf(t),cx),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new RO,this.targetCount=0,this.kr=Cf.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),W.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Cf(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Kn(t),W.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ca(0),this.Kr=!1,this.Kr=!0,this.$r=new Poe,this.referenceDelegate=e(this),this.Ur=new Doe(this),this.indexManager=new moe,this.remoteDocumentCache=function(i){return new koe(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new OG(t),this.Gr=new Ioe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Toe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Foe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new Ooe(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Ooe extends V6{constructor(e){super(),this.currentSequenceNumber=e}}class kS{constructor(e){this.persistence=e,this.Jr=new RO,this.Yr=null}static Zr(e){return new kS(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),W.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return W.or([()=>W.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uoe{constructor(e){this.serializer=e}O(e,t,r,i){const s=new xS("createOrUpgrade",t);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u4,{unique:!0}),l.createObjectStore("documentMutations")}(e),J4(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=W.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),J4(e)),a=a.next(()=>function(l){const A=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return A.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(l,A){return A.store("mutations").U().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",u4,{unique:!0});const u=A.store("mutations"),h=c.map(g=>u.put(g));return W.waitFor(h)})}(e,s))),a=a.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(l){const A=l.createObjectStore("documentOverlays",{keyPath:cae});A.createIndex("collectionPathOverlayIndex",uae,{unique:!1}),A.createIndex("collectionGroupOverlayIndex",dae,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(l){const A=l.createObjectStore("remoteDocumentsV14",{keyPath:Zse});A.createIndex("documentKeyIndex",eae),A.createIndex("collectionGroupIndex",tae)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:aae}).createIndex("sequenceNumberIndex",oae,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:lae}).createIndex("documentKeyIndex",Aae,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=w1(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>W.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(o=>W.forEach(o,l=>{Oe(l.userId===s.userId);const A=Dd(this.serializer,l);return QG(e,s.userId,A).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,o)=>{const l=new Et(a),A=function(u){return[0,Ci(u)]}(l);s.push(t.get(A).next(c=>c?W.resolve():(u=>t.put({targetId:0,path:Ci(u),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>W.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:sae});const r=t.store("collectionParents"),i=new UO,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Ci(l)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const l=new Et(a);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,l],A)=>{const c=Uo(o);return s(c.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Iy(i),a=UG(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const o=t.store("remoteDocumentsV14"),l=function(u){return u.document?new ye(Et.fromString(u.document.name).popFirst(5)):u.noDocument?ye.fromSegments(u.noDocument.path):u.unknownDocument?ye.fromSegments(u.unknownDocument.path):Pe()}(a).path.toArray(),A={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(A))}).next(()=>W.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=KG(this.serializer),s=new GG(kS.Zr,this.serializer.ct);return r.U().next(a=>{const o=new Map;return a.forEach(l=>{var A;let c=(A=o.get(l.userId))!==null&&A!==void 0?A:qe();Dd(this.serializer,l).keys().forEach(u=>c=c.add(u)),o.set(l.userId,c)}),W.forEach(o,(l,A)=>{const c=new Dr(A),u=PS.lt(this.serializer,c),h=s.getIndexManager(c),g=FS.lt(c,this.serializer,h,s.referenceDelegate);return new $G(i,g,u,h).recalculateAndSaveOverlaysForDocumentKeys(new hF(t,ca.oe),l).next()})})}}function J4(n){n.createObjectStore("targetDocuments",{keyPath:rae}).createIndex("documentTargetsIndex",iae,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nae,{unique:!0}),n.createObjectStore("targetGlobal")}const nP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MO{constructor(e,t,r,i,s,a,o,l,A,c,u=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=o,this.ci=A,this.li=c,this.hi=u,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!MO.D())throw new Ee(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eoe(this,i),this.Ai=t+"main",this.serializer=new OG(l),this.Ri=new Pu(this.Ai,this.hi,new Uoe(this.serializer)),this.$r=new uoe,this.Ur=new voe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=KG(this.serializer),this.Gr=new coe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,c===!1&&bi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,nP);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ca(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>FB(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ad(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ny(e).get("owner").next(t=>W.resolve(this.vi(t)))}Ci(e){return FB(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=tr(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return W.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?W.resolve(!0):ny(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,nP);return!1}}return!(!this.networkEnabled||!this.inForeground)||FB(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new hF(e,ca.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>FB(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return FS.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yoe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return PS.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ue("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(l){return l===17?gae:l===16?fae:l===15?BO:l===14?W6:l===13?z6:l===12?hae:l===11?G6:void Pe()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new hF(o,this.Qr?this.Qr.next():ca.oe),t==="readwrite-primary"?this.wi(a).next(l=>!!l||this.Si(a)).next(l=>{if(!l)throw bi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ee(se.FAILED_PRECONDITION,H6);return r(a)}).next(l=>this.Di(a).next(()=>l)):this.Ki(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return ny(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ee(se.FAILED_PRECONDITION,nP)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ny(e).put("owner",t)}static D(){return Pu.D()}bi(e){const t=ny(e);return t.get("owner").next(r=>this.vi(r)?(ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):W.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(bi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;E6()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return bi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){bi("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ny(n){return tr(n,"owner")}function FB(n){return tr(n,"clientMetadata")}function Roe(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=qe(),i=qe();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LO(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return E6()?8:K6(er())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Moe;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(mg()<=rt.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",yg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(mg()<=rt.DEBUG&&ue("QueryEngine","Query:",yg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(mg()<=rt.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",yg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(t))):W.resolve())}Yi(e,t){if(E4(t))return W.resolve(null);let r=ma(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=g1(t,null,"F"),r=ma(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=qe(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const A=this.ts(t,o);return this.ns(t,A,a,l.readTime)?this.Yi(e,g1(t,null,"F")):this.rs(e,A,t,l)}))})))}Zi(e,t,r,i){return E4(t)||i.isEqual(Re.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?W.resolve(null):(mg()<=rt.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yg(t)),this.rs(e,a,t,$se(i,-1)).next(o=>o))})}ts(e,t){let r=new kt(lG(e));return t.forEach((i,s)=>{dx(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return mg()<=rt.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",yg(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ns.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new ln(ze),this._s=new od(s=>xf(s),cx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $G(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function WG(n,e,t,r){return new Loe(n,e,t,r)}async function XG(n,e){const t=Ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=qe();for(const A of i){a.push(A.batchId);for(const c of A.mutations)l=l.add(c.key)}for(const A of s){o.push(A.batchId);for(const c of A.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(r,l).next(A=>({hs:A,removedBatchIds:a,addedBatchIds:o}))})})}function Qoe(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,l,A,c){const u=A.batch,h=u.keys();let g=W.resolve();return h.forEach(p=>{g=g.next(()=>c.getEntry(l,p)).next(m=>{const w=A.docVersions.get(p);Oe(w!==null),m.version.compareTo(w)<0&&(u.applyToRemoteDocument(m,A),m.isValidDocument()&&(m.setReadTime(A.commitVersion),c.addEntry(m)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,u))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=qe();for(let A=0;A<o.mutationResults.length;++A)o.mutationResults[A].transformResults.length>0&&(l=l.add(o.batch.mutations[A].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function YG(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function joe(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((c,u)=>{const h=i.get(u);if(!h)return;o.push(t.Ur.removeMatchingKeys(s,c.removedDocuments,u).next(()=>t.Ur.addMatchingKeys(s,c.addedDocuments,u)));let g=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(u)!==null?g=g.withResumeToken(Tn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(u,g),function(m,w,v){return m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,g,c)&&o.push(t.Ur.updateTargetData(s,g))});let l=Ss(),A=qe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),o.push(Hoe(s,a,e.documentUpdates).next(c=>{l=c.Ps,A=c.Is})),!r.isEqual(Re.min())){const c=t.Ur.getLastRemoteSnapshotVersion(s).next(u=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(c)}return W.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,A)).next(()=>l)}).then(s=>(t.os=i,s))}function Hoe(n,e,t){let r=qe(),i=qe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Ss();return t.forEach((o,l)=>{const A=s.get(o);l.isFoundDocument()!==A.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Re.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!A.isValidDocument()||l.version.compareTo(A.version)>0||l.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ue("LocalStore","Ignoring outdated watch update for ",o,". Current version:",A.version," Watch version:",l.version)}),{Ps:a,Is:i}})}function Voe(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Koe(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new oA(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function _F(n,e,t){const r=Ke(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ad(a))throw a;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Z4(n,e,t){const r=Ke(n);let i=Re.min(),s=qe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,A,c){const u=Ke(l),h=u._s.get(c);return h!==void 0?W.resolve(u.os.get(h)):u.Ur.getTargetData(A,c)}(r,a,ma(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Re.min(),t?s:qe())).next(o=>($oe(r,Fae(e),o),{documents:o,Ts:s})))}function $oe(n,e,t){let r=n.us.get(e)||Re.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}class ej{constructor(){this.activeTargetIds=Rae()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qG{constructor(){this.so=new ej,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ej,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Goe{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kB=null;function rP(){return kB===null?kB=function(){return 268435456+Math.round(2147483648*Math.random())}():kB++,"0x"+kB.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zoe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Woe{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="WebChannelConnection";class Xoe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const o=rP(),l=this.xo(t,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${t}' ${o}:`,l,i);const A={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(A,s,a),this.No(t,l,A,i).then(c=>(ue("RestConnection",`Received RPC '${t}' ${o}: `,c),c),c=>{throw Qu("RestConnection",`RPC '${t}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(t,r,i,s,a,o){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+d0}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=zoe[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=rP();return new Promise((a,o)=>{const l=new N6;l.setWithCredentials(!0),l.listenOnce(D6.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case QE.NO_ERROR:const c=l.getResponseJson();ue(Xr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),a(c);break;case QE.TIMEOUT:ue(Xr,`RPC '${e}' ${s} timed out`),o(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case QE.HTTP_ERROR:const u=l.getStatus();if(ue(Xr,`RPC '${e}' ${s} failed with status:`,u,"response text:",l.getResponseText()),u>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h==null?void 0:h.error;if(g&&g.status&&g.message){const p=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(v)>=0?v:se.UNKNOWN}(g.status);o(new Ee(p,g.message))}else o(new Ee(se.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{ue(Xr,`RPC '${e}' ${s} completed.`)}});const A=JSON.stringify(i);ue(Xr,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",A,r,15)})}Bo(e,t,r){const i=rP(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=R6(),o=U6(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(l.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const c=s.join("");ue(Xr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const u=a.createWebChannel(c,l);let h=!1,g=!1;const p=new Woe({Io:w=>{g?ue(Xr,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(ue(Xr,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),ue(Xr,`RPC '${e}' stream ${i} sending:`,w),u.send(w))},To:()=>u.close()}),m=(w,v,b)=>{w.listen(v,x=>{try{b(x)}catch(E){setTimeout(()=>{throw E},0)}})};return m(u,Cy.EventType.OPEN,()=>{g||(ue(Xr,`RPC '${e}' stream ${i} transport opened.`),p.yo())}),m(u,Cy.EventType.CLOSE,()=>{g||(g=!0,ue(Xr,`RPC '${e}' stream ${i} transport closed`),p.So())}),m(u,Cy.EventType.ERROR,w=>{g||(g=!0,Qu(Xr,`RPC '${e}' stream ${i} transport errored:`,w),p.So(new Ee(se.UNAVAILABLE,"The operation could not be completed")))}),m(u,Cy.EventType.MESSAGE,w=>{var v;if(!g){const b=w.data[0];Oe(!!b);const x=b,E=x.error||((v=x[0])===null||v===void 0?void 0:v.error);if(E){ue(Xr,`RPC '${e}' stream ${i} received error:`,E);const I=E.status;let P=function(k){const O=On[k];if(O!==void 0)return bG(O)}(I),_=E.message;P===void 0&&(P=se.INTERNAL,_="Unknown error status: "+I+" with message "+E.message),g=!0,p.So(new Ee(P,_)),u.close()}else ue(Xr,`RPC '${e}' stream ${i} received:`,b),p.bo(b)}}),m(o,O6.STAT_EVENT,w=>{w.stat===uF.PROXY?ue(Xr,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===uF.NOPROXY&&ue(Xr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yoe(){return typeof window<"u"?window:null}function zE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(n){return new Zae(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,t,r,i,s,a,o,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JG(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Ee(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qoe extends ZG{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=noe(this.serializer,e),r=function(s){if(!("targetChange"in s))return Re.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Re.min():a.readTime?_i(a.readTime):Re.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=bF(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=h1(l)?{documents:TG(s,l)}:{query:PG(s,l)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=EG(s,a.resumeToken);const A=vF(s,a.expectedCount);A!==null&&(o.expectedCount=A)}else if(a.snapshotVersion.compareTo(Re.min())>0){o.readTime=Km(s,a.snapshotVersion.toTimestamp());const A=vF(s,a.expectedCount);A!==null&&(o.expectedCount=A)}return o}(this.serializer,e);const r=ioe(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=bF(this.serializer),t.removeTarget=e,this.a_(t)}}class Joe extends ZG{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=roe(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=bF(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>m1(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zoe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,wF(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ee(se.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,wF(t,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(se.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ele{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(bi(t),this.D_=!1):ue("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tle{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Qf(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(l){const A=Ke(l);A.L_.add(4),await fx(A),A.q_.set("Unknown"),A.L_.delete(4),await DS(A)}(this))})}),this.q_=new ele(r,i)}}async function DS(n){if(Qf(n))for(const e of n.B_)await e(!0)}async function fx(n){for(const e of n.B_)await e(!1)}function e8(n,e){const t=Ke(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),VO(t)?HO(t):g0(t).r_()&&jO(t,e))}function QO(n,e){const t=Ke(n),r=g0(t);t.N_.delete(e),r.r_()&&t8(t,e),t.N_.size===0&&(r.r_()?r.o_():Qf(t)&&t.q_.set("Unknown"))}function jO(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}g0(n).A_(e)}function t8(n,e){n.Q_.xe(e),g0(n).R_(e)}function HO(n){n.Q_=new Xae({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),g0(n).start(),n.q_.v_()}function VO(n){return Qf(n)&&!g0(n).n_()&&n.N_.size>0}function Qf(n){return Ke(n).L_.size===0}function n8(n){n.Q_=void 0}async function nle(n){n.q_.set("Online")}async function rle(n){n.N_.forEach((e,t)=>{jO(n,e)})}async function ile(n,e){n8(n),VO(n)?(n.q_.M_(e),HO(n)):n.q_.set("Unknown")}async function sle(n,e,t){if(n.q_.set("Online"),e instanceof BG&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(n,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await b1(n,r)}else if(e instanceof GE?n.Q_.Ke(e):e instanceof xG?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Re.min()))try{const r=await YG(n.localStore);t.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((l,A)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(A);c&&s.N_.set(A,c.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,A)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Tn.EMPTY_BYTE_STRING,c.snapshotVersion)),t8(s,l);const u=new oA(c.target,l,A,c.sequenceNumber);jO(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await b1(n,r)}}async function b1(n,e,t){if(!ad(e))throw e;n.L_.add(1),await fx(n),n.q_.set("Offline"),t||(t=()=>YG(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await DS(n)})}function r8(n,e){return e().catch(t=>b1(n,t,e))}async function gx(n){const e=Ke(n),t=Ku(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ale(e);)try{const i=await Voe(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,ole(e,i)}catch(i){await b1(e,i)}i8(e)&&s8(e)}function ale(n){return Qf(n)&&n.O_.length<10}function ole(n,e){n.O_.push(e);const t=Ku(n);t.r_()&&t.V_&&t.m_(e.mutations)}function i8(n){return Qf(n)&&!Ku(n).n_()&&n.O_.length>0}function s8(n){Ku(n).start()}async function lle(n){Ku(n).p_()}async function Ale(n){const e=Ku(n);for(const t of n.O_)e.m_(t.mutations)}async function cle(n,e,t){const r=n.O_.shift(),i=FO.from(r,e,t);await r8(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await gx(n)}async function ule(n,e){e&&Ku(n).V_&&await async function(r,i){if(function(a){return Gae(a)&&a!==se.ABORTED}(i.code)){const s=r.O_.shift();Ku(r).s_(),await r8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gx(r)}}(n,e),i8(n)&&s8(n)}async function nj(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Qf(t);t.L_.add(3),await fx(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await DS(t)}async function dle(n,e){const t=Ke(n);e?(t.L_.delete(2),await DS(t)):e||(t.L_.add(2),await fx(t),t.q_.set("Unknown"))}function g0(n){return n.K_||(n.K_=function(t,r,i){const s=Ke(t);return s.w_(),new qoe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:nle.bind(null,n),Ro:rle.bind(null,n),mo:ile.bind(null,n),d_:sle.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),VO(n)?HO(n):n.q_.set("Unknown")):(await n.K_.stop(),n8(n))})),n.K_}function Ku(n){return n.U_||(n.U_=function(t,r,i){const s=Ke(t);return s.w_(),new Joe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:lle.bind(null,n),mo:ule.bind(null,n),f_:Ale.bind(null,n),g_:cle.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await gx(n)):(await n.U_.stop(),n.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new KO(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $O(n,e){if(bi("AsyncQueue",`${e}: ${n}`),ad(n))return new Ee(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=_y(),this.sortedSet=new ln(this.comparator)}static emptySet(e){return new sp(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new sp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.W_=new ln(ye.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class $m{constructor(e,t,r,i,s,a,o,l,A){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=A}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new $m(e,t,sp.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_S(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fle{constructor(){this.queries=ij(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Ke(t),s=i.queries;i.queries=ij(),s.forEach((a,o)=>{for(const l of o.j_)l.onError(r)})})(this,new Ee(se.ABORTED,"Firestore shutting down"))}}function ij(){return new od(n=>oG(n),_S)}async function GO(n,e){const t=Ke(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new hle,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=$O(a,`Initialization of query '${yg(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&WO(t)}async function zO(n,e){const t=Ke(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gle(n,e){const t=Ke(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&WO(t)}function ple(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function WO(n){n.Y_.forEach(e=>{e.next()})}var SF,sj;(sj=SF||(SF={})).ea="default",sj.Cache="cache";class XO{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $m(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=$m.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==SF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.key=e}}class o8{constructor(e){this.key=e}}class mle{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=qe(),this.mutatedKeys=qe(),this.Aa=lG(e),this.Ra=new sp(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new rj,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,A=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,u)=>{const h=i.get(c),g=dx(this.query,u)?u:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;h&&g?h.data.isEqual(g.data)?p!==m&&(r.track({type:3,doc:g}),w=!0):this.ga(h,g)||(r.track({type:2,doc:g}),w=!0,(l&&this.Aa(g,l)>0||A&&this.Aa(g,A)<0)&&(o=!0)):!h&&g?(r.track({type:0,doc:g}),w=!0):h&&!g&&(r.track({type:1,doc:h}),w=!0,(l||A)&&(o=!0)),w&&(g?(a=a.add(g),s=m?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((c,u)=>function(g,p){const m=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return m(g)-m(p)}(c.type,u.type)||this.Aa(c.doc,u.doc)),this.pa(r),i=i!=null&&i;const o=t&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,A=l!==this.Ea;return this.Ea=l,a.length!==0||A?{snapshot:new $m(this.query,e.Ra,s,a,e.mutatedKeys,l===0,A,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new rj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=qe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new o8(r))}),this.da.forEach(r=>{e.has(r)||t.push(new a8(r))}),t}ba(e){this.Ta=e.Ts,this.da=qe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return $m.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yle{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vle{constructor(e){this.key=e,this.va=!1}}class wle{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new od(o=>oG(o),_S),this.Ma=new Map,this.xa=new Set,this.Oa=new ln(ye.comparator),this.Na=new Map,this.La=new RO,this.Ba={},this.ka=new Map,this.qa=Cf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ble(n,e,t=!0){const r=h8(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await l8(r,e,t,!0),i}async function xle(n,e){const t=h8(n);await l8(t,e,!0,!1)}async function l8(n,e,t,r){const i=await Koe(n.localStore,ma(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await Ble(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&e8(n.remoteStore,i),o}async function Ble(n,e,t,r,i){n.Ka=(u,h,g)=>async function(m,w,v,b){let x=w.view.ma(v);x.ns&&(x=await Z4(m.localStore,w.query,!1).then(({documents:_})=>w.view.ma(_,x)));const E=b&&b.targetChanges.get(w.targetId),I=b&&b.targetMismatches.get(w.targetId)!=null,P=w.view.applyChanges(x,m.isPrimaryClient,E,I);return oj(m,w.targetId,P.wa),P.snapshot}(n,u,h,g);const s=await Z4(n.localStore,e,!0),a=new mle(e,s.Ts),o=a.ma(s.documents),l=hx.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),A=a.applyChanges(o,n.isPrimaryClient,l);oj(n,t,A.wa);const c=new yle(e,t,a);return n.Fa.set(e,c),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),A.snapshot}async function Ele(n,e,t){const r=Ke(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!_S(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await _F(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&QO(r.remoteStore,i.targetId),IF(r,i.targetId)}).catch(Lf)):(IF(r,i.targetId),await _F(r.localStore,i.targetId,!0))}async function Cle(n,e){const t=Ke(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),QO(t.remoteStore,r.targetId))}async function _le(n,e,t){const r=f8(n);try{const i=await function(a,o){const l=Ke(a),A=on.now(),c=o.reduce((g,p)=>g.add(p.key),qe());let u,h;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let p=Ss(),m=qe();return l.cs.getEntries(g,c).next(w=>{p=w,p.forEach((v,b)=>{b.isValidDocument()||(m=m.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,p)).next(w=>{u=w;const v=[];for(const b of o){const x=Kae(b,u.get(b.key).overlayedDocument);x!=null&&v.push(new ld(b.key,x,Z6(x.value.mapValue),Is.exists(!0)))}return l.mutationQueue.addMutationBatch(g,A,v,o)}).next(w=>{h=w;const v=w.applyToLocalDocumentSet(u,m);return l.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:h.batchId,changes:cG(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let A=a.Ba[a.currentUser.toKey()];A||(A=new ln(ze)),A=A.insert(o,l),a.Ba[a.currentUser.toKey()]=A}(r,i.batchId,t),await px(r,i.changes),await gx(r.remoteStore)}catch(i){const s=$O(i,"Failed to persist write");t.reject(s)}}async function A8(n,e){const t=Ke(n);try{const r=await joe(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Oe(a.va):i.removedDocuments.size>0&&(Oe(a.va),a.va=!1))}),await px(t,r,e)}catch(r){await Lf(r)}}function aj(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Ke(a);l.onlineState=o;let A=!1;l.queries.forEach((c,u)=>{for(const h of u.j_)h.Z_(o)&&(A=!0)}),A&&WO(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Sle(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new ln(ye.comparator);a=a.insert(s,Bn.newNoDocument(s,Re.min()));const o=qe().add(s),l=new TS(Re.min(),new Map,new ln(ze),a,o);await A8(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),YO(r)}else await _F(r.localStore,e,!1).then(()=>IF(r,e,t)).catch(Lf)}async function Ile(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=await Qoe(t.localStore,e);u8(t,r,null),c8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await px(t,i)}catch(i){await Lf(i)}}async function Tle(n,e,t){const r=Ke(n);try{const i=await function(a,o){const l=Ke(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let c;return l.mutationQueue.lookupMutationBatch(A,o).next(u=>(Oe(u!==null),c=u.keys(),l.mutationQueue.removeMutationBatch(A,u))).next(()=>l.mutationQueue.performConsistencyCheck(A)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(A,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,c)).next(()=>l.localDocuments.getDocuments(A,c))})}(r.localStore,e);u8(r,e,t),c8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await px(r,i)}catch(i){await Lf(i)}}function c8(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function u8(n,e,t){const r=Ke(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function IF(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||d8(n,r)})}function d8(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(QO(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),YO(n))}function oj(n,e,t){for(const r of t)r instanceof a8?(n.La.addReference(r.key,e),Ple(n,r)):r instanceof o8?(ue("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||d8(n,r.key)):Pe()}function Ple(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ue("SyncEngine","New document in limbo: "+t),n.xa.add(r),YO(n))}function YO(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ye(Et.fromString(e)),r=n.qa.next();n.Na.set(r,new vle(t)),n.Oa=n.Oa.insert(t,r),e8(n.remoteStore,new oA(ma(ux(t.path)),r,"TargetPurposeLimboResolution",ca.oe))}}async function px(n,e,t){const r=Ke(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,l)=>{a.push(r.Ka(l,e,t).then(A=>{var c;if((A||t)&&r.isPrimaryClient){const u=A?!A.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(A){i.push(A);const u=LO.Wi(l.targetId,A);s.push(u)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(l,A){const c=Ke(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>W.forEach(A,h=>W.forEach(h.$i,g=>c.persistence.referenceDelegate.addReference(u,h.targetId,g)).next(()=>W.forEach(h.Ui,g=>c.persistence.referenceDelegate.removeReference(u,h.targetId,g)))))}catch(u){if(!ad(u))throw u;ue("LocalStore","Failed to update sequence numbers: "+u)}for(const u of A){const h=u.targetId;if(!u.fromCache){const g=c.os.get(h),p=g.snapshotVersion,m=g.withLastLimboFreeSnapshotVersion(p);c.os=c.os.insert(h,m)}}}(r.localStore,s))}async function Fle(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await XG(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(l=>{l.reject(new Ee(se.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await px(t,r.hs)}}function kle(n,e){const t=Ke(n),r=t.Na.get(e);if(r&&r.va)return qe().add(r.key);{let i=qe();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function h8(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kle.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sle.bind(null,e),e.Ca.d_=gle.bind(null,e.eventManager),e.Ca.$a=ple.bind(null,e.eventManager),e}function f8(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ile.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tle.bind(null,e),e}class sw{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=NS(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return WG(this.persistence,new zG,e.initialUser,this.serializer)}Ga(e){return new GG(kS.Zr,this.serializer)}Wa(e){return new qG}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sw.provider={build:()=>new sw};class Nle extends sw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await f8(this.Ja.syncEngine),await gx(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return WG(this.persistence,new zG,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new boe(r,e.asyncQueue,t)}Ha(e,t){const r=new Xse(t,this.persistence);return new Wse(e.asyncQueue,r)}Ga(e){const t=Roe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new MO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Yoe(),zE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new qG}}class x1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fle.bind(null,this.syncEngine),await dle(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fle}()}createDatastore(e){const t=NS(e.databaseInfo.databaseId),r=function(s){return new Xoe(s)}(e.databaseInfo);return function(s,a,o,l){return new Zoe(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,o){return new tle(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>aj(this.syncEngine,t,0),function(){return tj.D()?new tj:new Goe}())}createSyncEngine(e,t){return function(i,s,a,o,l,A,c){const u=new wle(i,s,a,o,l,A);return c&&(u.Qa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ke(i);ue("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await fx(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}x1.provider={build:()=>new x1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dle{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dr.UNAUTHENTICATED,this.clientId=wO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ue("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ue("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=$O(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function iP(n,e){n.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XG(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function lj(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ole(n);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nj(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nj(e.remoteStore,i)),n._onlineComponents=e}async function Ole(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await iP(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===se.FAILED_PRECONDITION||i.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qu("Error using user provided cache. Falling back to memory cache: "+t),await iP(n,new sw)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await iP(n,new sw);return n._offlineComponents}async function g8(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await lj(n,n._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await lj(n,new x1))),n._onlineComponents}function Ule(n){return g8(n).then(e=>e.syncEngine)}async function B1(n){const e=await g8(n),t=e.eventManager;return t.onListen=ble.bind(null,e.syncEngine),t.onUnlisten=Ele.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xle.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Cle.bind(null,e.syncEngine),t}function Rle(n,e,t={}){const r=new jo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,A){const c=new qO({next:h=>{c.Za(),a.enqueueAndForget(()=>zO(s,u));const g=h.docs.has(o);!g&&h.fromCache?A.reject(new Ee(se.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&h.fromCache&&l&&l.source==="server"?A.reject(new Ee(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(h)},error:h=>A.reject(h)}),u=new XO(ux(o.path),c,{includeMetadataChanges:!0,_a:!0});return GO(s,u)}(await B1(n),n.asyncQueue,e,t,r)),r.promise}function Mle(n,e,t={}){const r=new jo;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,A){const c=new qO({next:h=>{c.Za(),a.enqueueAndForget(()=>zO(s,u)),h.fromCache&&l.source==="server"?A.reject(new Ee(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(h)},error:h=>A.reject(h)}),u=new XO(o,c,{includeMetadataChanges:!0,_a:!0});return GO(s,u)}(await B1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(n,e,t){if(!t)throw new Ee(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y8(n,e,t,r){if(e===!0&&r===!0)throw new Ee(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cj(n){if(!ye.isDocumentKey(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uj(n){if(ye.isDocumentKey(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JO(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe()}function ya(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=JO(n);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OS{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dj(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L6;switch(r.type){case"firstParty":return new Qse(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Aj.get(t);r&&(ue("ComponentProvider","Removing Datastore"),Aj.delete(t),r.terminate())}(this),Promise.resolve()}}function v8(n,e,t,r={}){var i;const s=(n=ya(n,OS))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Qu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=Dr.MOCK_USER;else{o=gie(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new Ee(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Dr(A)}n._authCredentials=new Rse(new M6(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jf(this.firestore,e,this._query)}}class Si{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Si(this.firestore,e,this._key)}}class fA extends jf{constructor(e,t,r){super(e,t,ux(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Si(this.firestore,null,new ye(e))}withConverter(e){return new fA(this.firestore,e,this._path)}}function vv(n,e,...t){if(n=Wi(n),m8("collection","path",e),n instanceof OS){const r=Et.fromString(e,...t);return uj(r),new fA(n,null,r)}{if(!(n instanceof Si||n instanceof fA))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return uj(r),new fA(n.firestore,null,r)}}function No(n,e,...t){if(n=Wi(n),arguments.length===1&&(e=wO.newId()),m8("doc","path",e),n instanceof OS){const r=Et.fromString(e,...t);return cj(r),new Si(n,null,new ye(r))}{if(!(n instanceof Si||n instanceof fA))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return cj(r),new Si(n.firestore,n instanceof fA?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JG(this,"async_queue_retry"),this.Vu=()=>{const r=zE();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=zE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=zE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new jo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ad(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw bi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=KO.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function fj(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8=-1;class $u extends OS{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hj(e),this._firestoreClient=void 0,await e}}}function b8(n,e){const t=typeof n=="object"?n:T6(),r=typeof n=="string"?n:"(default)",i=yO(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=hie("firestore");s&&v8(i,...s)}return i}function mx(n){if(n._terminated)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||x8(n),n._firestoreClient}function x8(n){var e,t,r;const i=n._freezeSettings(),s=function(o,l,A,c){return new mae(o,l,A,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,p8(c.experimentalLongPollingOptions),c.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Dle(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(n._componentsProvider))}function B8(n,e){Qu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Lle(n,x1.provider,{build:r=>new Nle(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function Lle(n,e,t){if((n=ya(n,$u))._firestoreClient||n._terminated)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Ee(se.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},x8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _f(Tn.fromBase64String(e))}catch(t){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _f(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qle=/^__.*__$/;class jle{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new f0(e,this.data,t,this.fieldTransforms)}}function E8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class ZO{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ZO(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return E1(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(E8(this.Cu)&&Qle.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Hle{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||NS(e)}Qu(e,t,r,i=!1){return new ZO({Cu:e,methodName:t,qu:r,path:rn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vle(n){const e=n._freezeSettings(),t=NS(n._databaseId);return new Hle(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Kle(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);I8("Data must be an object, but it was:",a,r);const o=_8(r,a);let l,A;if(s.merge)l=new ua(a.fieldMask),A=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const u of s.mergeFields){const h=$le(e,u,t);if(!a.contains(h))throw new Ee(se.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);zle(c,h)||c.push(h)}l=new ua(c),A=a.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,A=a.fieldTransforms;return new jle(new Hi(o),l,A)}class eU extends RS{_toFieldTransform(e){return new mG(e.path,new jm)}isEqual(e){return e instanceof eU}}function C8(n,e){if(S8(n=Wi(n)))return I8("Unsupported field value:",e,n),_8(n,e);if(n instanceof RS)return function(r,i){if(!E8(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=C8(o,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Wi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Mae(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=on.fromDate(r);return{timestampValue:Km(i.serializer,s)}}if(r instanceof on){const s=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Km(i.serializer,s)}}if(r instanceof MS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _f)return{bytesValue:EG(i.serializer,r._byteString)};if(r instanceof Si){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:DO(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof LS)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw o.Bu("VectorValues must only contain numeric values.");return IO(o.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${JO(r)}`)}(n,e)}function _8(n,e){const t={};return X6(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):h0(n,(r,i)=>{const s=C8(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function S8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof MS||n instanceof _f||n instanceof Si||n instanceof RS||n instanceof LS)}function I8(n,e,t){if(!S8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=JO(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function $le(n,e,t){if((e=Wi(e))instanceof US)return e._internalPath;if(typeof e=="string")return T8(n,e);throw E1("Field path arguments must be of type string or ",n,!1,void 0,t)}const Gle=new RegExp("[~\\*/\\[\\]]");function T8(n,e,t){if(e.search(Gle)>=0)throw E1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new US(...e.split("."))._internalPath}catch{throw E1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function E1(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Ee(se.INVALID_ARGUMENT,o+n+l)}function zle(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(F8("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Wle extends P8{data(){return super.data()}}function F8(n,e){return typeof e=="string"?T8(n,e):e instanceof US?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xle{}class N8 extends Xle{}class QS extends N8{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new QS(e,t,r)}_apply(e){return new jf(e.firestore,e.converter,g1(e._query,this._limit,this._limitType))}}function D8(n){return QS._create("limit",n,"F")}class O8{convertValue(e,t="none"){switch(bf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return h0(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>tn(a.doubleValue));return new LS(s)}convertGeoPoint(e){return new MS(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CO(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tw(e));default:return null}}convertTimestamp(e){const t=CA(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);Oe(DG(r));const i=new Hu(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||bi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yle(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tU extends P8{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(F8("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wv extends tU{data(e={}){return super.data(e)}}class nU{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Kg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wv(this._firestore,this._userDataWriter,r.key,r,new Kg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new wv(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Kg(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new wv(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Kg(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let A=-1,c=-1;return o.type!==0&&(A=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:qle(o.type),doc:l,oldIndex:A,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qle(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jle(n){n=ya(n,Si);const e=ya(n.firestore,$u);return Rle(mx(e),n._key).then(t=>R8(e,n,t))}class rU extends O8{constructor(e){super(),this.firestore=e}convertBytes(e){return new _f(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Si(this.firestore,null,t)}}function bv(n){n=ya(n,jf);const e=ya(n.firestore,$u),t=mx(e),r=new rU(e);return k8(n._query),Mle(t,n._query).then(i=>new nU(e,r,n,i))}function Kd(n,e,t){n=ya(n,Si);const r=ya(n.firestore,$u),i=Yle(n.converter,e);return U8(r,[Kle(Vle(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Is.none())])}function aw(n,...e){var t,r,i;n=Wi(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||fj(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fj(e[a])){const u=e[a];e[a]=(t=u.next)===null||t===void 0?void 0:t.bind(u),e[a+1]=(r=u.error)===null||r===void 0?void 0:r.bind(u),e[a+2]=(i=u.complete)===null||i===void 0?void 0:i.bind(u)}let l,A,c;if(n instanceof Si)A=ya(n.firestore,$u),c=ux(n._key.path),l={next:u=>{e[a]&&e[a](R8(A,n,u))},error:e[a+1],complete:e[a+2]};else{const u=ya(n,jf);A=ya(u.firestore,$u),c=u._query;const h=new rU(A);l={next:g=>{e[a]&&e[a](new nU(A,h,u,g))},error:e[a+1],complete:e[a+2]},k8(n._query)}return function(h,g,p,m){const w=new qO(m),v=new XO(g,w,p);return h.asyncQueue.enqueueAndForget(async()=>GO(await B1(h),v)),()=>{w.Za(),h.asyncQueue.enqueueAndForget(async()=>zO(await B1(h),v))}}(mx(A),c,o,l)}function U8(n,e){return function(r,i){const s=new jo;return r.asyncQueue.enqueueAndForget(async()=>_le(await Ule(r),i,s)),s.promise}(mx(n),e)}function R8(n,e,t){const r=t.docs.get(e._key),i=new rU(n);return new tU(n,i,e._key,r,new Kg(t.hasPendingWrites,t.fromCache),e.converter)}function Zle(){return new eU("serverTimestamp")}(function(e,t=!0){(function(i){d0=i})(u0),Um(new vf("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new $u(new Mse(r.getProvider("auth-internal")),new Hse(r.getProvider("app-check-internal")),function(A,c){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(A.options.projectId,c)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Tu(l4,"4.7.3",e),Tu(l4,"4.7.3","esm2017")})();const WE=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:O8,Bytes:_f,CACHE_SIZE_UNLIMITED:w8,CollectionReference:fA,DocumentReference:Si,DocumentSnapshot:tU,FieldPath:US,FieldValue:RS,Firestore:$u,FirestoreError:Ee,GeoPoint:MS,Query:jf,QueryConstraint:N8,QueryDocumentSnapshot:wv,QueryLimitConstraint:QS,QuerySnapshot:nU,SnapshotMetadata:Kg,Timestamp:on,VectorValue:LS,_AutoId:wO,_ByteString:Tn,_DatabaseId:Hu,_DocumentKey:ye,_EmptyAuthCredentialsProvider:L6,_FieldPath:rn,_cast:ya,_logWarn:Qu,_validateIsNotUsedTogether:y8,collection:vv,connectFirestoreEmulator:v8,doc:No,enableIndexedDbPersistence:B8,ensureFirestoreConfigured:mx,executeWrite:U8,getDoc:Jle,getDocs:bv,getFirestore:b8,limit:D8,onSnapshot:aw,serverTimestamp:Zle,setDoc:Kd},Symbol.toStringTag,{value:"Module"}));var eAe="firebase",tAe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tu(eAe,tAe,"app");function iU(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function M8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L8=M8,Q8=new lx("auth","Firebase",M8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=new pO("@firebase/auth");function nAe(n,...e){C1.logLevel<=rt.WARN&&C1.warn(`Auth (${u0}): ${n}`,...e)}function XE(n,...e){C1.logLevel<=rt.ERROR&&C1.error(`Auth (${u0}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n,...e){throw sU(n,...e)}function Ho(n,...e){return sU(n,...e)}function j8(n,e,t){const r=Object.assign(Object.assign({},L8()),{[e]:t});return new lx("auth","Firebase",r).create(e,{appName:n.name})}function Fu(n){return j8(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sU(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Q8.create(n,...e)}function He(n,e,...t){if(!n)throw sU(e,...t)}function lA(n){const e="INTERNAL ASSERTION FAILED: "+n;throw XE(e),new Error(e)}function _A(n,e){n||lA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rAe(){return gj()==="http:"||gj()==="https:"}function gj(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iAe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rAe()||vie()||"connection"in navigator)?navigator.onLine:!0}function sAe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.shortDelay=e,this.longDelay=t,_A(t>e,"Short delay should be less than long delay!"),this.isMobile=pie()||wie()}get(){return iAe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n,e){_A(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aAe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oAe=new yx(3e4,6e4);function Hf(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ad(n,e,t,r,i={}){return V8(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Ax(Object.assign({key:n.config.apiKey},a)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const A=Object.assign({method:e,headers:l},s);return yie()||(A.referrerPolicy="no-referrer"),H8.fetch()(K8(n,n.config.apiHost,t,o),A)})}async function V8(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},aAe),e);try{const i=new AAe(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw NB(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,A]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw NB(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw NB(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw NB(n,"user-disabled",a);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(A)throw j8(n,c,A);Za(n,c)}}catch(i){if(i instanceof RA)throw i;Za(n,"network-request-failed",{message:String(i)})}}async function jS(n,e,t,r,i={}){const s=await Ad(n,e,t,r,i);return"mfaPendingCredential"in s&&Za(n,"multi-factor-auth-required",{_serverResponse:s}),s}function K8(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?aU(n.config,i):`${n.config.apiScheme}://${i}`}function lAe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AAe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ho(this.auth,"network-request-failed")),oAe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function NB(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ho(n,e,r);return i.customData._tokenResponse=t,i}function pj(n){return n!==void 0&&n.enterprise!==void 0}class cAe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lAe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function uAe(n,e){return Ad(n,"GET","/v2/recaptchaConfig",Hf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dAe(n,e){return Ad(n,"POST","/v1/accounts:delete",e)}async function $8(n,e){return Ad(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G8(n,e=!1){const t=Wi(n),r=await t.getIdToken(e),i=oU(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xv(sP(i.auth_time)),issuedAtTime:xv(sP(i.iat)),expirationTime:xv(sP(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sP(n){return Number(n)*1e3}function oU(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return XE("JWT malformed, contained fewer than 3 sections"),null;try{const i=w6(t);return i?JSON.parse(i):(XE("Failed to decode base64 JWT payload"),null)}catch(i){return XE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mj(n){const e=oU(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof RA&&hAe(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function hAe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fAe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xv(this.lastLoginAt),this.creationTime=xv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ow(n,$8(t,{idToken:r}));He(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?W8(s.providerUserInfo):[],o=gAe(n.providerData,a),l=n.isAnonymous,A=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),c=l?A:!1,u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new PF(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,u)}async function z8(n){const e=Wi(n);await _1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gAe(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function W8(n){return n.map(e=>{var{providerId:t}=e,r=iU(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pAe(n,e){const t=await V8(n,{},async()=>{const r=Ax({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=K8(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",H8.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mAe(n,e){return Ad(n,"POST","/v2/accounts:revokeToken",Hf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");const t=mj(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await pAe(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new ap;return r&&(He(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ap,this.toJSON())}_performRefresh(){return lA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class AA{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=iU(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fAe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new PF(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ow(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G8(this,e)}reload(){return z8(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new AA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(aA(this.auth.app))return Promise.reject(Fu(this.auth));const e=await this.getIdToken();return await ow(this,dAe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,l,A,c;const u=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(a=t.photoURL)!==null&&a!==void 0?a:void 0,m=(o=t.tenantId)!==null&&o!==void 0?o:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(A=t.createdAt)!==null&&A!==void 0?A:void 0,b=(c=t.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:E,isAnonymous:I,providerData:P,stsTokenManager:_}=t;He(x&&_,e,"internal-error");const T=ap.fromJSON(this.name,_);He(typeof x=="string",e,"internal-error"),ZA(u,e.name),ZA(h,e.name),He(typeof E=="boolean",e,"internal-error"),He(typeof I=="boolean",e,"internal-error"),ZA(g,e.name),ZA(p,e.name),ZA(m,e.name),ZA(w,e.name),ZA(v,e.name),ZA(b,e.name);const k=new AA({uid:x,auth:e,email:h,emailVerified:E,displayName:u,isAnonymous:I,photoURL:p,phoneNumber:g,tenantId:m,stsTokenManager:T,createdAt:v,lastLoginAt:b});return P&&Array.isArray(P)&&(k.providerData=P.map(O=>Object.assign({},O))),w&&(k._redirectEventId=w),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new ap;i.updateFromServerResponse(t);const s=new AA({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _1(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?W8(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new ap;o.updateFromIdToken(r);const l=new AA({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),A={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new PF(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,A),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Map;function cA(n){_A(n instanceof Function,"Expected a class definition");let e=yj.get(n);return e?(_A(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,yj.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X8.type="NONE";const FF=X8;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(n,e,t){return`firebase:${n}:${e}:${t}`}class op{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=YE(this.userKey,i.apiKey,s),this.fullPersistenceKey=YE("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?AA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new op(cA(FF),e,r);const i=(await Promise.all(t.map(async A=>{if(await A._isAvailable())return A}))).filter(A=>A);let s=i[0]||cA(FF);const a=YE(r,e.config.apiKey,e.name);let o=null;for(const A of t)try{const c=await A._get(a);if(c){const u=AA._fromJSON(e,c);A!==s&&(o=u),s=A;break}}catch{}const l=i.filter(A=>A._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new op(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async A=>{if(A!==s)try{await A._remove(a)}catch{}})),new op(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z8(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y8(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tz(e))return"Blackberry";if(nz(e))return"Webos";if(q8(e))return"Safari";if((e.includes("chrome/")||J8(e))&&!e.includes("edge/"))return"Chrome";if(ez(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y8(n=er()){return/firefox\//i.test(n)}function q8(n=er()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J8(n=er()){return/crios\//i.test(n)}function Z8(n=er()){return/iemobile/i.test(n)}function ez(n=er()){return/android/i.test(n)}function tz(n=er()){return/blackberry/i.test(n)}function nz(n=er()){return/webos/i.test(n)}function lU(n=er()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yAe(n=er()){var e;return lU(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vAe(){return bie()&&document.documentMode===10}function rz(n=er()){return lU(n)||ez(n)||nz(n)||tz(n)||/windows phone/i.test(n)||Z8(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(n,e=[]){let t;switch(n){case"Browser":t=vj(er());break;case"Worker":t=`${vj(er())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${u0}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wAe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bAe(n,e={}){return Ad(n,"GET","/v2/passwordPolicy",Hf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xAe=6;class BAe{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:xAe,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EAe{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wj(this),this.idTokenSubscription=new wj(this),this.beforeStateQueue=new wAe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cA(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await op.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $8(this,{idToken:e}),r=await AA._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(aA(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sAe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(aA(this.app))return Promise.reject(Fu(this));const t=e?Wi(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return aA(this.app)?Promise.reject(Fu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return aA(this.app)?Promise.reject(Fu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bAe(this),t=new BAe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lx("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mAe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&cA(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await op.create(this,[cA(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&nAe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function p0(n){return Wi(n)}class wj{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sie(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CAe(n){HS=n}function sz(n){return HS.loadJS(n)}function _Ae(){return HS.recaptchaEnterpriseScript}function SAe(){return HS.gapiScript}function IAe(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const TAe="recaptcha-enterprise",PAe="NO_RECAPTCHA";class FAe{constructor(e){this.type=TAe,this.auth=p0(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{uAe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const A=new cAe(l);return s.tenantId==null?s._agentRecaptchaConfig=A:s._tenantRecaptchaConfigs[s.tenantId]=A,a(A.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;pj(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(A=>{a(A)}).catch(()=>{a(PAe)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&pj(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=_Ae();l.length!==0&&(l+=o),sz(l).then(()=>{i(o,s,a)}).catch(A=>{a(A)})}}).catch(o=>{a(o)})})}}async function bj(n,e,t,r=!1){const i=new FAe(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function xj(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await bj(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await bj(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(n,e){const t=yO(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(c1(s,e??{}))return i;Za(i,"already-initialized")}return t.initialize({options:e})}function kAe(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(cA);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oz(n,e,t){const r=p0(n);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=lz(e),{host:a,port:o}=NAe(e),l=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),DAe()}function lz(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NAe(n){const e=lz(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Bj(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Bj(a)}}}function Bj(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DAe(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lA("not implemented")}_getIdTokenResponse(e){return lA("not implemented")}_linkToIdToken(e,t){return lA("not implemented")}_getReauthenticationResolver(e){return lA("not implemented")}}async function OAe(n,e){return Ad(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UAe(n,e){return jS(n,"POST","/v1/accounts:signInWithPassword",Hf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RAe(n,e){return jS(n,"POST","/v1/accounts:signInWithEmailLink",Hf(n,e))}async function MAe(n,e){return jS(n,"POST","/v1/accounts:signInWithEmailLink",Hf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends VS{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Gm(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Gm(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xj(e,t,"signInWithPassword",UAe);case"emailLink":return RAe(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xj(e,r,"signUpPassword",OAe);case"emailLink":return MAe(e,{idToken:t,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(n,e){return jS(n,"POST","/v1/accounts:signInWithIdp",Hf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LAe="http://localhost";class Gu extends VS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Za("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=iU(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Gu(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return lp(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,lp(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lp(e,t)}buildRequest(){const e={requestUri:LAe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ax(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QAe(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jAe(n){const e=By(Ey(n)).link,t=e?By(Ey(e)).deep_link_id:null,r=By(Ey(n)).deep_link_id;return(r?By(Ey(r)).link:null)||r||t||e||n}class KS{constructor(e){var t,r,i,s,a,o;const l=By(Ey(e)),A=(t=l.apiKey)!==null&&t!==void 0?t:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,u=QAe((i=l.mode)!==null&&i!==void 0?i:null);He(A&&c&&u,"argument-error"),this.apiKey=A,this.operation=u,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=l.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=jAe(e);try{return new KS(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this.providerId=Vf.PROVIDER_ID}static credential(e,t){return Gm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=KS.parseLink(t);return He(r,"argument-error"),Gm._fromEmailAndCode(e,r.code,r.tenantId)}}Vf.PROVIDER_ID="password";Vf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends Az{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends vx{constructor(){super("facebook.com")}static credential(e){return Gu._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ql.credential(e.oauthAccessToken)}catch{return null}}}ql.FACEBOOK_SIGN_IN_METHOD="facebook.com";ql.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends vx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gu._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Jl.credential(t,r)}catch{return null}}}Jl.GOOGLE_SIGN_IN_METHOD="google.com";Jl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends vx{constructor(){super("github.com")}static credential(e){return Gu._fromParams({providerId:Zl.PROVIDER_ID,signInMethod:Zl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zl.credentialFromTaggedObject(e)}static credentialFromError(e){return Zl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zl.credential(e.oauthAccessToken)}catch{return null}}}Zl.GITHUB_SIGN_IN_METHOD="github.com";Zl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends vx{constructor(){super("twitter.com")}static credential(e,t){return Gu._fromParams({providerId:eA.PROVIDER_ID,signInMethod:eA.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eA.credentialFromTaggedObject(e)}static credentialFromError(e){return eA.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eA.credential(t,r)}catch{return null}}}eA.TWITTER_SIGN_IN_METHOD="twitter.com";eA.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await AA._fromIdTokenResponse(e,r,i),a=Ej(r);return new zm({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Ej(r);return new zm({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Ej(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends RA{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S1.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new S1(e,t,r,i)}}function cz(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S1._fromErrorAndOperation(n,s,e,r):s})}async function HAe(n,e,t=!1){const r=await ow(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zm._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VAe(n,e,t=!1){const{auth:r}=n;if(aA(r.app))return Promise.reject(Fu(r));const i="reauthenticate";try{const s=await ow(n,cz(r,i,e,n),t);He(s.idToken,r,"internal-error");const a=oU(s.idToken);He(a,r,"internal-error");const{sub:o}=a;return He(n.uid===o,r,"user-mismatch"),zm._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Za(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(n,e,t=!1){if(aA(n.app))return Promise.reject(Fu(n));const r="signIn",i=await cz(n,r,e),s=await zm._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function dz(n,e){return uz(p0(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KAe(n){const e=p0(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function $Ae(n,e,t){return aA(n.app)?Promise.reject(Fu(n)):dz(Wi(n),Vf.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KAe(n),r})}function hz(n,e,t,r){return Wi(n).onIdTokenChanged(e,t,r)}function fz(n,e,t){return Wi(n).beforeAuthStateChanged(e,t)}function GAe(n){return Wi(n).signOut()}const I1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(I1,"1"),this.storage.removeItem(I1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zAe=1e3,WAe=10;class pz extends gz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);vAe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,WAe):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},zAe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pz.type="LOCAL";const mz=pz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz extends gz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yz.type="SESSION";const AU=yz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XAe(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new $S(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async A=>A(t.origin,s)),l=await XAe(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$S.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YAe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const A=cU("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(u){const h=u;if(h.data.eventId===A)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:A,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return window}function qAe(n){Vo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(){return typeof Vo().WorkerGlobalScope<"u"&&typeof Vo().importScripts=="function"}async function JAe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZAe(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ece(){return vz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz="firebaseLocalStorageDb",tce=1,T1="firebaseLocalStorage",bz="fbase_key";class wx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function GS(n,e){return n.transaction([T1],e?"readwrite":"readonly").objectStore(T1)}function nce(){const n=indexedDB.deleteDatabase(wz);return new wx(n).toPromise()}function kF(){const n=indexedDB.open(wz,tce);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(T1,{keyPath:bz})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(T1)?e(r):(r.close(),await nce(),e(await kF()))})})}async function Cj(n,e,t){const r=GS(n,!0).put({[bz]:e,value:t});return new wx(r).toPromise()}async function rce(n,e){const t=GS(n,!1).get(e),r=await new wx(t).toPromise();return r===void 0?null:r.value}function _j(n,e){const t=GS(n,!0).delete(e);return new wx(t).toPromise()}const ice=800,sce=3;class xz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kF(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sce)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$S._getInstance(ece()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await JAe(),!this.activeServiceWorker)return;this.sender=new YAe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZAe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kF();return await Cj(e,I1,"1"),await _j(e,I1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cj(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>rce(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_j(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=GS(i,!1).getAll();return new wx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ice)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xz.type="LOCAL";const Bz=xz;new yx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ace(n,e){return e?cA(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU extends VS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oce(n){return uz(n.auth,new uU(n),n.bypassAuthState)}function lce(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),VAe(t,new uU(n),n.bypassAuthState)}async function Ace(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),HAe(t,new uU(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(A){this.reject(A)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oce;case"linkViaPopup":case"linkViaRedirect":return Ace;case"reauthViaPopup":case"reauthViaRedirect":return lce;default:Za(this.auth,"internal-error")}}resolve(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cce=new yx(2e3,1e4);class $g extends Ez{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$g.currentPopupAction&&$g.currentPopupAction.cancel(),$g.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){_A(this.filter.length===1,"Popup operations only handle one event");const e=cU();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ho(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ho(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$g.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ho(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cce.get())};e()}}$g.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uce="pendingRedirect",qE=new Map;class dce extends Ez{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qE.get(this.auth._key());if(!e){try{const r=await hce(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qE.set(this.auth._key(),e)}return this.bypassAuthState||qE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hce(n,e){const t=pce(e),r=gce(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function fce(n,e){qE.set(n._key(),e)}function gce(n){return cA(n._redirectPersistence)}function pce(n){return YE(uce,n.config.apiKey,n.name)}async function mce(n,e,t=!1){if(aA(n.app))return Promise.reject(Fu(n));const r=p0(n),i=ace(r,e),a=await new dce(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yce=10*60*1e3;class vce{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wce(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Cz(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ho(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yce&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sj(e))}saveEventToCache(e){this.cachedEventUids.add(Sj(e)),this.lastProcessedEventTime=Date.now()}}function Sj(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Cz({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wce(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cz(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bce(n,e={}){return Ad(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xce=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bce=/^https?/;async function Ece(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bce(n);for(const t of e)try{if(Cce(t))return}catch{}Za(n,"unauthorized-domain")}function Cce(n){const e=TF(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Bce.test(t))return!1;if(xce.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ce=new yx(3e4,6e4);function Ij(){const n=Vo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Sce(n){return new Promise((e,t)=>{var r,i,s;function a(){Ij(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ij(),t(Ho(n,"network-request-failed"))},timeout:_ce.get()})}if(!((i=(r=Vo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vo().gapi)===null||s===void 0)&&s.load)a();else{const o=IAe("iframefcb");return Vo()[o]=()=>{gapi.load?a():t(Ho(n,"network-request-failed"))},sz(`${SAe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw JE=null,e})}let JE=null;function Ice(n){return JE=JE||Sce(n),JE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tce=new yx(5e3,15e3),Pce="__/auth/iframe",Fce="emulator/auth/iframe",kce={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nce=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dce(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?aU(e,Fce):`https://${n.config.authDomain}/${Pce}`,r={apiKey:e.apiKey,appName:n.name,v:u0},i=Nce.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Ax(r).slice(1)}`}async function Oce(n){const e=await Ice(n),t=Vo().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:Dce(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kce,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ho(n,"network-request-failed"),o=Vo().setTimeout(()=>{s(a)},Tce.get());function l(){Vo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rce=500,Mce=600,Lce="_blank",Qce="http://localhost";class Tj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jce(n,e,t,r=Rce,i=Mce){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Uce),{width:r.toString(),height:i.toString(),top:s,left:a}),A=er().toLowerCase();t&&(o=J8(A)?Lce:t),Y8(A)&&(e=e||Qce,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[g,p])=>`${h}${g}=${p},`,"");if(yAe(A)&&o!=="_self")return Hce(e||"",o),new Tj(null);const u=window.open(e||"",o,c);He(u,n,"popup-blocked");try{u.focus()}catch{}return new Tj(u)}function Hce(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vce="__/auth/handler",Kce="emulator/auth/handler",$ce=encodeURIComponent("fac");async function Pj(n,e,t,r,i,s){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:u0,eventId:i};if(e instanceof Az){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",_ie(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,u]of Object.entries({}))a[c]=u}if(e instanceof vx){const c=e.getScopes().filter(u=>u!=="");c.length>0&&(a.scopes=c.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await n._getAppCheckToken(),A=l?`#${$ce}=${encodeURIComponent(l)}`:"";return`${Gce(n)}?${Ax(o).slice(1)}${A}`}function Gce({config:n}){return n.emulator?aU(n,Kce):`https://${n.authDomain}/${Vce}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="webStorageSupport";class zce{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AU,this._completeRedirectFn=mce,this._overrideRedirectResult=fce}async _openPopup(e,t,r,i){var s;_A((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Pj(e,t,r,TF(),i);return jce(e,a,cU())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Pj(e,t,r,TF(),i);return qAe(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(_A(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Oce(e),r=new vce(e);return t.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(aP,{type:aP},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[aP];a!==void 0&&t(!!a),Za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ece(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rz()||q8()||lU()}}const _z=zce;var Fj="@firebase/auth",kj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xce(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yce(n){Um(new vf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;He(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iz(n)},A=new EAe(r,i,s,l);return kAe(A,t),A},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Um(new vf("auth-internal",e=>{const t=p0(e.getProvider("auth").getImmediate());return(r=>new Wce(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tu(Fj,kj,Xce(n)),Tu(Fj,kj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qce=5*60,Jce=B6("authIdTokenMaxAge")||qce;let Nj=null;const Zce=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Jce)return;const i=t==null?void 0:t.token;Nj!==i&&(Nj=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Sz(n=T6()){const e=yO(n,"auth");if(e.isInitialized())return e.getImmediate();const t=az(n,{popupRedirectResolver:_z,persistence:[Bz,mz,AU]}),r=B6("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Zce(s.toString());fz(t,a,()=>a(t.currentUser)),hz(t,o=>a(o))}}const i=b6("auth");return i&&oz(t,`http://${i}`),t}function eue(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CAe({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ho("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",eue().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yce("Browser");const tue=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:KS,AuthCredential:VS,EmailAuthCredential:Gm,EmailAuthProvider:Vf,FacebookAuthProvider:ql,GithubAuthProvider:Zl,GoogleAuthProvider:Jl,OAuthCredential:Gu,TwitterAuthProvider:eA,beforeAuthStateChanged:fz,browserLocalPersistence:mz,browserPopupRedirectResolver:_z,browserSessionPersistence:AU,connectAuthEmulator:oz,getAuth:Sz,getIdTokenResult:G8,inMemoryPersistence:FF,indexedDBLocalPersistence:Bz,initializeAuth:az,onIdTokenChanged:hz,prodErrorMap:L8,reload:z8,signInWithCredential:dz,signInWithEmailAndPassword:$Ae,signOut:GAe},Symbol.toStringTag,{value:"Module"})),nue={apiKey:"AIzaSyBHzCLGD1E8mrp-iVaJ1P1t9cHe5QT8LN8",authDomain:"brainless-schedule.firebaseapp.com",projectId:"brainless-schedule",storageBucket:"brainless-schedule.appspot.com",messagingSenderId:"902167883215",appId:"1:902167883215:web:8dfc400a1035929c5bf6ba"};let P1;r4().length?P1=r4()[0]:P1=I6(nue);const gr=b8(P1),Iz=Sz(P1);try{B8(gr,{cacheSizeBytes:w8}).catch(n=>{n.code==="failed-precondition"?console.warn("離線持久性在多個標籤中失敗"):n.code==="unimplemented"&&console.warn("當前瀏覽器不支持離線持久性")})}catch(n){console.error("啟用離線功能時出錯:",n)}async function rue(){try{const n=await bv(vv(gr,"forecasts"),D8(1));return console.log("Firebase 連接成功"),!0}catch(n){return console.error("Firebase 連接失敗:",n),!1}}const iue=async n=>{try{const{doc:e,getDoc:t}=await Au(async()=>{const{doc:i,getDoc:s}=await Promise.resolve().then(()=>WE);return{doc:i,getDoc:s}},void 0);return(await t(e(gr,"admins",n))).exists()}catch(e){return console.error("檢查管理員狀態失敗:",e),!1}},da={MAX_CONSECUTIVE_DAYS_CHECK:30,MIN_CONSECUTIVE_DAYS:4,MAX_CONSECUTIVE_DAYS:6,REST_SHIFTS:["休假","特休","月休","休","特"],TIME_SLOTS:{MORNING:{start:5,end:12},AFTERNOON:{start:12,end:18},EVENING:{start:18,end:22}},SHIFT_KEYWORDS:{MORNING:["早班","早","Morning","K","KK"],AFTERNOON:["中班","中","Mid","L"],EVENING:["晚班","晚","Evening","Y"]}};let ZE={};const sue=n=>{ZE=n},Lr={consecutiveDays:new Map,todayWorkers:new Map,todayString:null,todayDate:null,lastCacheTime:0},zS=(n=!1)=>{const e=Date.now(),t=new Date().toDateString();(n||Lr.lastCacheTime===0||new Date(Lr.lastCacheTime).toDateString()!==t)&&(Lr.consecutiveDays.clear(),Lr.todayWorkers.clear(),Lr.todayString=null,Lr.todayDate=null,Lr.lastCacheTime=e)},aue=()=>{zS(!0)},Tz=()=>(zS(),Lr.todayString||(Lr.todayString=new Date().toISOString().split("T")[0]),Lr.todayString),Pz=()=>{if(zS(),!Lr.todayDate){const n=new Date;Lr.todayDate={year:n.getFullYear(),month:n.getMonth()+1,date:n.getDate(),day:n.getDay()}}return Lr.todayDate},oue=n=>!n||typeof n!="string"?!1:da.REST_SHIFTS.includes(n.trim()),Gg=n=>{if(!n||typeof n!="string")return!1;const e=n.trim();return e!==""&&!oue(e)},lue=(n,e,t)=>`${n}-${String(e).padStart(2,"0")}-${String(t).padStart(2,"0")}`,Aue=n=>n.timeRestriction?eC(n.startTime,n.endTime):!0,cue=(n,e)=>(n=n.replace(/\{早班同事\}/g,e.morning.length>0?e.morning.join("、"):""),n=n.replace(/\{中班同事\}/g,e.afternoon.length>0?e.afternoon.join("、"):""),n=n.replace(/\{晚班同事\}/g,e.evening.length>0?e.evening.join("、"):""),n=n.replace(/\{所有同事\}/g,e.all.length>0?e.all.join("、"):""),n),uue=(n,e)=>(n=n.replace(/\{早班人數\}/g,e.morning.length.toString()),n=n.replace(/\{中班人數\}/g,e.afternoon.length.toString()),n=n.replace(/\{晚班人數\}/g,e.evening.length.toString()),n=n.replace(/\{總人數\}/g,e.all.length.toString()),n),due=(n,e,t)=>(n=n.replace(/\{([^}]+)\}連續上班\{(\d+)\}/g,(r,i,s)=>{const a=Object.keys(t).find(o=>t[o]===i);if(a){const o=F1(e,a,t);return`${i}連續上班${o}天`}return r}),n=n.replace(/\{([^}]+)\}連續上班天數/g,(r,i)=>{const s=Object.keys(t).find(a=>t[a]===i);if(s){const a=F1(e,s,t);return`${i}連續上班${a}天`}return r}),n),hue=(n,e,t)=>(n=n.replace(/\{連續上班同事\}/g,()=>{const r=Wm(e,t,da.MIN_CONSECUTIVE_DAYS,da.MAX_CONSECUTIVE_DAYS);if(r.length>0){const i={};return r.forEach(a=>{i[a.consecutiveDays]||(i[a.consecutiveDays]=[]),i[a.consecutiveDays].push(a.name)}),Object.entries(i).map(([a,o])=>o.length===1?`${o[0]}連續上班${a}天`:`${o.join("、")}連續上班${a}天`).join("、")}return""}),n=n.replace(/\{連續上班同事數量\}/g,()=>Wm(e,t,da.MIN_CONSECUTIVE_DAYS,da.MAX_CONSECUTIVE_DAYS).length.toString()),n),fue=(n,e,t)=>(n=n.replace(/\{連續上班(\d+)天同事\}/g,(r,i)=>{const s=parseInt(i),a=Wm(e,t,s,s);if(a.length>0){const o=a.map(l=>l.name);return o.length===1?o[0]:o.join("、")}return""}),n=n.replace(/\{連續上班(\d+)天同事數量\}/g,(r,i)=>{const s=parseInt(i);return Wm(e,t,s,s).length.toString()}),n),gue=n=>(n=n.replace(/\s*[，、]\s*$/g,""),n=n.replace(/^\s*[，、]\s*/g,""),n=n.replace(/\s+/g," "),n),pue=(n,e,t)=>{if((n.message.includes("{連續上班同事}")||n.message.includes("{連續上班同事數量}"))&&Wm(e,t,da.MIN_CONSECUTIVE_DAYS,da.MAX_CONSECUTIVE_DAYS).length===0)return!1;const r=n.message.match(/\{連續上班(\d+)天同事\}/g);if(r)for(const i of r){const s=i.match(/\{連續上班(\d+)天同事\}/);if(s){const a=parseInt(s[1]);if(Wm(e,t,a,a).length===0)return!1}}return!0},mue=(n,e,t)=>{if(!n||!Array.isArray(n)||n.length===0)return[];const r=Fz(e);return r.length>0&&kz(r,t),n.filter(i=>i.enabled).map(i=>{const s=xue(i,e,t);return s&&typeof s=="string"&&s.trim()!==""?{id:`schedule-${i.id||i.name}`,type:"schedule",priority:2,message:s,source:`班表模板: ${i.name}`}:null}).filter(Boolean)},eC=(n,e)=>{const t=new Date,r=t.getHours(),i=t.getMinutes(),s=r*60+i,[a,o]=n.split(":").map(Number),[l,A]=e.split(":").map(Number),c=a*60+o,u=l*60+A;return u<c?s>=c||s<=u:s>=c&&s<=u},yue=()=>["日","一","二","三","四","五","六"][new Date().getDay()],vue=(n,e)=>{const t=new Date;return t.getMonth()+1===n&&t.getDate()===e},wue=n=>new Date().getDate()===n,bue=n=>{if(!n||typeof n!="object")return[];const e=[],t=Pz();for(const[r,i]of Object.entries(n))if(r!=="_lastUpdated"&&i&&typeof i=="object"){for(const[s,a]of Object.entries(i))if(Gg(a)){const o=parseInt(s);if(o===t.date){const l={id:`${r}_${o}`,date:lue(t.year,t.month,o),shift:a,employee:r};e.push(l)}}}return e},Fz=n=>{if(!n)return[];if(Array.isArray(n)){const e=Tz();return n.filter(r=>{const a=new Date(r.date).toISOString().split("T")[0]===e,o=Gg(r.shift);return a&&o})}else return bue(n)},F1=(n,e,t={})=>{var i,s,a;if(!n||!e)return 0;zS();const r=`${e}_${JSON.stringify(n)}`;if(Lr.consecutiveDays.has(r))return Lr.consecutiveDays.get(r);if(t[e],Array.isArray(n)){const o=Tz();if(!n.find(u=>u.employee===e&&new Date(u.date).toISOString().split("T")[0]===o))return 0;let A=0,c=new Date;for(;;){const u=c.toISOString().split("T")[0],h=n.find(g=>g.employee===e&&new Date(g.date).toISOString().split("T")[0]===u);if(h&&Gg(h.shift))A++,c.setDate(c.getDate()-1);else break}return Lr.consecutiveDays.set(r,A),A}else{const o=Pz(),l=(i=n[e])==null?void 0:i[o.date];if(!Gg(l))return 0;let A=0,c=o.date;for(;c>=1;){const u=(s=n[e])==null?void 0:s[c];if(Gg(u))A++,c--;else break}if(c<1){const u=new Date,h=u.getFullYear(),g=u.getMonth()+1;let p,m;g===1?(p=h-1,m=12):(p=h,m=g-1);const w=`${p}-${m.toString().padStart(2,"0")}`;if(ZE&&ZE[w]){const v=ZE[w],b=new Date(p,m,0).getDate(),x=7;for(let E=b;E>=Math.max(1,b-x+1);E--){const I=(a=v[e])==null?void 0:a[E];if(Gg(I))A++;else break}}}return Lr.consecutiveDays.set(r,A),A}},Wm=(n,e={},t=da.MIN_CONSECUTIVE_DAYS,r=da.MAX_CONSECUTIVE_DAYS)=>{if(!n)return[];const i=[];return Array.isArray(n)?[...new Set(n.map(a=>a.employee))].forEach(a=>{const o=F1(n,a,e);if(o>=t&&o<=r){const l=e[a]||a;i.push({id:a,name:l,consecutiveDays:o})}}):Object.keys(n).filter(a=>a!=="_lastUpdated").forEach(a=>{const o=F1(n,a,e);if(o>=t&&o<=r){const l=e[a]||a;i.push({id:a,name:l,consecutiveDays:o})}}),i},kz=(n,e={})=>{const t={morning:[],afternoon:[],evening:[],all:[]};return n.forEach(r=>{const i=r.shift||"",s=r.employee||"未知",a=e[s]||s;t.all.push(a),da.SHIFT_KEYWORDS.MORNING.some(o=>i.includes(o))?t.morning.push(a):da.SHIFT_KEYWORDS.AFTERNOON.some(o=>i.includes(o))?t.afternoon.push(a):da.SHIFT_KEYWORDS.EVENING.some(o=>i.includes(o))?t.evening.push(a):t.all.push(a)}),t},xue=(n,e,t={})=>{if(!n||!e||!Aue(n))return null;const r=Fz(e);if(r.length===0)return null;const i=kz(r,t);let s=n.message;return s=cue(s,i),s=uue(s,i),s=due(s,e,t),s=hue(s,e,t),s=fue(s,e,t),s=gue(s),pue(n,e,t)?s:null},Bue=n=>{if(!Array.isArray(n)||n.length===0)return"";const e=n.filter(t=>t&&typeof t=="string"&&t.trim()!=="");return e.length===0?"":e[Math.floor(Math.random()*e.length)]},Eue=(n=null,e=[],t=[],r={})=>{const i=yue(),s=[];if(e&&Array.isArray(e)){const a=[];for(const o of e){if(!o.enabled)continue;let l=!1;o.type==="timeRange"?l=o.allDay||eC(o.startTime,o.endTime):o.type==="dayOfWeek"?l=o.day===i&&(o.allDay||eC(o.startTime,o.endTime)):o.type==="specificDate"?l=vue(o.month,o.date):o.type==="monthlyDate"&&(l=wue(o.date)&&(o.allDay||eC(o.startTime,o.endTime))),l&&o.messages&&Array.isArray(o.messages)&&o.messages.length>0&&o.messages.some(A=>A&&typeof A=="string"&&A.trim()!=="")&&a.push(o)}if(a.length>0){const o=a[Math.floor(Math.random()*a.length)],l=Bue(o.messages);l&&l.trim()!==""&&s.push({id:`custom-${o.id||o.name}`,type:"custom",priority:1,message:l,source:`自定義規則: ${o.name}`})}}if(n&&t&&Array.isArray(t)){const a=mue(t,n,r);s.push(...a)}return s},og=n=>/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(n),QNe=n=>{if(!n.type||!n.messages||!Array.isArray(n.messages)||n.messages.length===0)return!1;switch(n.type){case"timeRange":return n.allDay||og(n.startTime)&&og(n.endTime);case"dayOfWeek":return["日","一","二","三","四","五","六"].includes(n.day)&&(n.allDay||og(n.startTime)&&og(n.endTime));case"specificDate":return n.month>=1&&n.month<=12&&n.date>=1&&n.date<=31;case"monthlyDate":return n.date>=1&&n.date<=31&&(n.allDay||og(n.startTime)&&og(n.endTime));default:return!1}},jNe=n=>n.message&&n.message.trim()!=="",HNe=()=>[{id:"1",name:"早上問候",type:"timeRange",startTime:"08:00",endTime:"10:00",allDay:!1,messages:["早安！新的一天開始了～","早上好！今天也要加油喔！","喵～早安！準備好迎接新的一天了嗎？"],enabled:!1},{id:"2",name:"午休提醒",type:"timeRange",startTime:"12:00",endTime:"13:00",allDay:!1,messages:["午休時間到了，記得休息一下喔～","喵～該吃午餐了！","午休愉快！"],enabled:!1},{id:"3",name:"週三進貨提醒",type:"dayOfWeek",day:"三",startTime:"14:00",endTime:"16:00",allDay:!1,messages:["週三下午進貨時間到了，加油！","喵～進貨時間！","週三進貨，辛苦了！"],enabled:!1},{id:"4",name:"週末問候",type:"dayOfWeek",day:"六",startTime:"09:00",endTime:"11:00",allDay:!1,messages:["週末愉快！好好休息喔～","喵～週末快樂！","週末愉快！享受美好時光～"],enabled:!1},{id:"5",name:"每月1號提醒",type:"monthlyDate",date:1,startTime:"08:00",endTime:"10:00",allDay:!1,messages:["新的月份開始了！大家加油！","喵～新的月份，新的開始！","每月1號，重新出發！"],enabled:!1},{id:"6",name:"週末全天問候",type:"dayOfWeek",day:"六",startTime:"08:00",endTime:"10:00",allDay:!0,messages:["週末愉快！好好享受假期～","喵～週末快樂！全天陪伴你！","週末愉快！放鬆心情～"],enabled:!1}],VNe=()=>[{id:"1",name:"早班問候",message:"{早班同事}，早安！今天也要加油喔！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"2",name:"晚班問候",message:"{晚班同事}，晚安！今天辛苦了！",enabled:!1,timeRestriction:!1,startTime:"18:00",endTime:"20:00"},{id:"3",name:"全體問候",message:"{所有同事}，工作辛苦了！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"4",name:"人數統計",message:"今天有{總人數}位同事上班，加油！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"5",name:"連續上班關心",message:"{連續上班同事}，辛苦了！記得適時休息喔～",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"6",name:"連續上班鼓勵",message:"{連續上班同事}，真是勤奮！繼續保持！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"7",name:"連續上班提醒",message:"提醒：{連續上班同事}，請注意工作時數安排",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"8",name:"連續上班統計",message:"今天有{連續上班同事數量}位同事連續上班4天以上，大家辛苦了！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"9",name:"連續上班6天提醒",message:"{連續上班6天同事}，已經連續上班6天，請務必安排休息！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"10",name:"連續上班5天關心",message:"{連續上班5天同事}，連續上班5天辛苦了，記得適時休息喔～",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"11",name:"連續上班4天鼓勵",message:"{連續上班4天同事}，連續上班4天，工作態度值得肯定！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"12",name:"連續上班6天簡潔提醒",message:"{連續上班6天同事}，請務必安排休息！",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"},{id:"13",name:"連續上班5天簡潔關心",message:"{連續上班5天同事}，辛苦了，記得適時休息喔～",enabled:!1,timeRestriction:!1,startTime:"08:00",endTime:"10:00"}],Cue=()=>{const[n,e]=B.useState(!1),[t,r]=B.useState([]),[i,s]=B.useState(0),[a,o]=B.useState(!1),[l,A]=B.useState(4),[c,u]=B.useState(""),[h,g]=B.useState(!0),[p,m]=B.useState(!1),[w,v]=B.useState(""),[b,x]=B.useState(""),[E,I]=B.useState(""),[P,_]=B.useState(!1),[T,k]=B.useState(!1),[O,U]=B.useState(null),[L,R]=B.useState([]),[re,he]=B.useState([]),[te,ee]=B.useState([]),[Z,ae]=B.useState({}),[fe,Ue]=B.useState(Date.now()),[ie,we]=B.useState([]);B.useEffect(()=>aw(No(gr,"catSpeech","global"),Q=>{if(Q.exists()){const ne=Q.data();e(ne.enabled||!1),r(ne.texts||[]),A(ne.intervalSeconds||4),k(ne.smartMode||!1),R(ne.customRules||[]),he(ne.scheduleTemplates||[]),u("")}else e(!1),r([]),A(4),k(!1),R([]),he([]);g(!1)},Q=>{console.error("監聽設定失敗:",Q),u("載入對話設定失敗"),g(!1)}),[]),B.useEffect(()=>{(async()=>{try{const{doc:Q,getDoc:ne}=await Au(async()=>{const{doc:X,getDoc:J}=await Promise.resolve().then(()=>WE);return{doc:X,getDoc:J}},void 0),V=await ne(Q(gr,"catSpeech","dialogueOrder"));if(V.exists()){const X=V.data();X.dialogues&&Array.isArray(X.dialogues)&&(we(X.dialogues),console.log("載入排序後的對話列表:",X.dialogues.length,"個對話"))}}catch(Q){console.error("載入排序對話列表失敗:",Q)}})()},[]),B.useEffect(()=>{if(!T)return;(async()=>{try{const{collection:Q,getDocs:ne}=await Au(async()=>{const{collection:J,getDocs:$}=await Promise.resolve().then(()=>WE);return{collection:J,getDocs:$}},void 0),V=await ne(Q(gr,"names")),X={};V.forEach(J=>{const $=J.data();X[J.id]=$.name}),ae(X)}catch(Q){console.error("載入姓名資料失敗:",Q)}})()},[T]),B.useEffect(()=>{if(!T)return;(async()=>{try{console.log("開始載入班表資料...");const{collection:Q,getDocs:ne}=await Au(async()=>{const{collection:$,getDocs:De}=await Promise.resolve().then(()=>WE);return{collection:$,getDocs:De}},void 0),V=await ne(Q(gr,"schedule")),X={};let J=null;V.forEach($=>{const De=$.data();X[$.id]=De,($.id==="currentMonth"&&!J||$.id==="nextMonth"&&!J)&&(J=De)}),console.log("載入的班表資料:",Object.keys(X)),sue(X),U(J)}catch(Q){console.error("載入班表資料失敗:",Q)}})()},[T]),B.useEffect(()=>{if(console.log("=== 智能對話生成檢查 ==="),console.log("智能模式:",T),console.log("顯示氣泡:",n),console.log("班表資料:",O?"已載入":"未載入"),console.log("班表模板:",re.length,"個"),console.log("自定義規則:",L.length,"個"),console.log("姓名資料:",Object.keys(Z).length,"個"),!T||!n){console.log("智能模式或顯示氣泡未開啟，跳過智能對話生成");return}const G=()=>{console.log("=== 開始生成智能對話 ==="),aue();const ne=Eue(O,L,re,Z);if(console.log("生成的智能對話數量:",ne.length),console.log("智能對話詳情:",ne.map(V=>{var X;return{id:V.id,type:V.type,message:(X=V.message)==null?void 0:X.substring(0,30),source:V.source}})),ne.length>0){console.log("=== 簡化邏輯：直接使用智能對話 ===");const V=ne.map($=>$.message).filter($=>$&&$.trim()!=="");console.log("智能對話訊息:",V);const X=t.filter($=>$&&typeof $=="string"&&$.trim()!==""&&!V.includes($)),J=[...V,...X];if(console.log("原始普通對話:",X),console.log("合併後的對話:",J),J.length>0)console.log("設置合併後的對話:",J.length,"個"),console.log("最終對話內容:",J),ee(ne),r(J);else{const $=t.filter(De=>De&&typeof De=="string"&&De.trim()!=="");console.log("沒有有效對話，使用原始對話:",$),r($)}}else{const V=t.filter(X=>X&&typeof X=="string"&&X.trim()!=="");console.log("沒有智能對話，使用原始對話:",V),r(V)}};G();const Q=setInterval(G,30*1e3);return()=>clearInterval(Q)},[T,n,O,L,re,Z,fe,ie]),B.useEffect(()=>{if(t.length>0){if(i>=t.length)s(0);else if(!t[i]||typeof t[i]!="string"||t[i].trim()===""){const G=t.findIndex(Q=>Q&&typeof Q=="string"&&Q.trim()!=="");s(G!==-1?G:0)}}},[t,i]),B.useEffect(()=>{if(!n||t.length===0)return;const G=setInterval(()=>{o(!0),setTimeout(()=>{s(Q=>Q>=t.length||Q===t.length-1?0:Q+1),o(!1)},300)},l*1e3);return()=>clearInterval(G)},[n,t.length,l]);const Ye=()=>{Ue(Date.now())};B.useEffect(()=>{const G=Q=>{Q.ctrlKey&&Q.altKey&&Q.key==="A"&&m(!0),Q.ctrlKey&&Q.key==="R"&&T&&(Q.preventDefault(),Ye())};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[T]);const j=async()=>{if(!w.trim()||!b.trim()){I("請輸入信箱和密碼");return}try{_(!0),I("");const{signInWithEmailAndPassword:G}=await Au(async()=>{const{signInWithEmailAndPassword:Q}=await Promise.resolve().then(()=>tue);return{signInWithEmailAndPassword:Q}},void 0);await G(Iz,w,b),m(!1),v(""),x("")}catch(G){console.error("登入失敗:",G);let Q="登入失敗";switch(G.code){case"auth/user-not-found":Q="找不到此帳號";break;case"auth/wrong-password":Q="密碼錯誤";break;case"auth/invalid-email":Q="信箱格式錯誤";break;case"auth/too-many-requests":Q="登入次數過多，請稍後再試";break;default:Q="登入失敗："+G.message}I(Q)}finally{_(!1)}};return h?f.jsx("button",{onClick:()=>m(!0),className:"fixed top-4 right-4 z-50 w-8 h-8 bg-primary/20 hover:bg-primary/30 rounded-full border border-primary/30 hover:border-primary/50 transition-all duration-200 opacity-50 hover:opacity-100",title:"管理員登入 (Ctrl+Alt+A)",children:f.jsx("svg",{className:"w-4 h-4 mx-auto text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}):c?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>m(!0),className:"fixed top-4 right-4 z-50 w-8 h-8 bg-primary/20 hover:bg-primary/30 rounded-full border border-primary/30 hover:border-primary/50 transition-all duration-200 opacity-50 hover:opacity-100",title:"管理員登入 (Ctrl+Alt+A)",children:f.jsx("svg",{className:"w-4 h-4 mx-auto text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),f.jsx("div",{className:"mt-2 mb-0 animate-fadeIn",children:f.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-2xl p-2",children:f.jsx("div",{className:"text-red-400 text-center text-sm",children:c})})})]}):!n||t.length===0?f.jsx("button",{onClick:()=>m(!0),className:"fixed top-4 right-4 z-50 w-8 h-8 bg-primary/20 hover:bg-primary/30 rounded-full border border-primary/30 hover:border-primary/50 transition-all duration-200 opacity-50 hover:opacity-100",title:"管理員登入 (Ctrl+Alt+A)",children:f.jsx("svg",{className:"w-4 h-4 mx-auto text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>m(!0),className:"fixed top-4 right-4 z-50 w-8 h-8 bg-primary/20 hover:bg-primary/30 rounded-full border border-primary/30 hover:border-primary/50 transition-all duration-200 opacity-50 hover:opacity-100",title:"管理員登入 (Ctrl+Alt+A)",children:f.jsx("svg",{className:"w-4 h-4 mx-auto text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),f.jsx("div",{className:"mt-2 mb-0 animate-fadeIn",children:f.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-2xl p-2 border border-primary/20 backdrop-blur-sm shadow-lg relative",children:[T&&f.jsx("button",{onClick:Ye,className:"absolute top-1 right-1 w-6 h-6 bg-primary/20 hover:bg-primary/30 rounded-full border border-primary/30 hover:border-primary/50 transition-all duration-200 opacity-50 hover:opacity-100 z-10",title:"刷新智能對話 (Ctrl+R)",children:f.jsx("svg",{className:"w-3 h-3 mx-auto text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),f.jsx("div",{className:"relative",children:f.jsx("div",{className:`text-white text-center text-lg leading-relaxed min-h-[1.2rem] flex items-center justify-center transition-all duration-300 ${a?"opacity-0 transform translate-y-2":"opacity-100 transform translate-y-0"}`,children:(()=>{const G=t[i];if(G&&typeof G=="string"&&G.trim()!=="")return G;if(t.length===0)return"喵～";{const Q=t.findIndex((ne,V)=>V>i&&ne&&typeof ne=="string"&&ne.trim()!=="");if(Q!==-1)return t[Q];{const ne=t.findIndex(V=>V&&typeof V=="string"&&V.trim()!=="");return ne!==-1?t[ne]:"喵～"}}})()})})]})}),p&&f.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-surface rounded-xl p-6 w-96 border border-primary/20",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"管理員登入"}),f.jsx("input",{type:"email",placeholder:"管理員信箱",value:w,onChange:G=>v(G.target.value),disabled:P,className:"w-full mb-3 p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50",onKeyPress:G=>G.key==="Enter"&&!P&&j()}),f.jsx("input",{type:"password",placeholder:"密碼",value:b,onChange:G=>x(G.target.value),disabled:P,className:"w-full mb-4 p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary/50 disabled:opacity-50",onKeyPress:G=>G.key==="Enter"&&!P&&j()}),E&&f.jsx("div",{className:"text-red-400 text-sm mb-3 bg-red-500/10 border border-red-500/20 rounded-lg p-2",children:E}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:j,disabled:P,className:"flex-1 bg-primary text-white p-3 rounded-lg hover:bg-primary/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"登入中...":"登入"}),f.jsx("button",{onClick:()=>m(!1),disabled:P,className:"flex-1 bg-white/10 text-white p-3 rounded-lg hover:bg-white/20 transition-colors disabled:opacity-50",children:"取消"})]})]})})]})},_ue="/Brainless/assets/logo-cat-CbWHoD5g.png";function Sue(){return f.jsx("header",{className:"bg-surface text-white",children:f.jsx("div",{className:"container-custom py-4 md:py-6",children:f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsxs("div",{className:"flex items-center gap-4 relative",children:[f.jsx("img",{src:_ue,alt:"Cat Logo",className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full border-2 border-primary p-1 logo logo-glow logo-float"}),f.jsxs("div",{className:"flex flex-col items-start gap-1",children:[f.jsx("h1",{className:"text-2xl sm:text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Brainless"}),f.jsx(sie,{})]})]}),f.jsx(Cue,{})]})})})}function Iue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Tue=B.forwardRef(Iue);function Pue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Dj=B.forwardRef(Pue);function Fue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const kue=B.forwardRef(Fue);function Nue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const Due=B.forwardRef(Nue);function Oue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const lw=B.forwardRef(Oue);function Uue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Bv=B.forwardRef(Uue);function Rue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Nz=B.forwardRef(Rue);function Mue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Lue=B.forwardRef(Mue);function Que({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const NF=B.forwardRef(Que);function jue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const DF=B.forwardRef(jue);function Hue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ty=B.forwardRef(Hue);function Vue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Dz=B.forwardRef(Vue);function Kue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const $ue=B.forwardRef(Kue);function Gue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ll=B.forwardRef(Gue);function zue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Al=B.forwardRef(zue);function Wue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Xue=B.forwardRef(Wue);function Yue({title:n,titleId:e,...t},r){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Oz=B.forwardRef(Yue);function que(n){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...n,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 20v-7m0 0l6-6.5H6L12 13zm-4-9h8m-8 0l-2-2m10 2l2-2"})})}const Oj=[{path:"/sandwich",label:"三明治計算器",icon:f.jsx(lw,{className:"w-5 h-5"})},{path:"/cashier",label:"收銀管理",icon:f.jsx(kue,{className:"w-5 h-5"})},{path:"/coffee-beans",label:"咖啡豆管理",icon:f.jsx(NF,{className:"w-5 h-5"})},{path:"/schedule",label:"班表管理",icon:f.jsx(Bv,{className:"w-5 h-5"})},{path:"/daily-reports",label:"報表生成器",icon:f.jsx(Dz,{className:"w-5 h-5"})},{path:"/pdf-analyzer",label:"PDF 分析器",icon:f.jsx(Ty,{className:"w-5 h-5"})},{path:"/poursteady",label:"手沖機調整",icon:f.jsx(Due,{className:"w-5 h-5"})},{path:"/alcohol",label:"酒精計算",icon:f.jsx(que,{className:"w-5 h-5"})}];function Jue(){const[n,e]=B.useState(!1),[t,r]=B.useState(!0),[i,s]=B.useState("");if(B.useEffect(()=>{let o=!0;const l=Iz.onAuthStateChanged(async A=>{if(o){if(A)try{const c=await iue(A.uid);o&&(e(c),s(""))}catch(c){console.error("檢查管理員狀態失敗:",c),o&&(e(!1),s("權限檢查失敗"))}else o&&(e(!1),s(""));o&&r(!1)}});return()=>{o=!1,l()}},[]),t)return f.jsx("nav",{className:"bg-surface sticky top-0 z-50 shadow-lg",children:f.jsx("div",{className:"container-custom py-2 sm:py-4",children:f.jsxs("div",{className:"flex justify-center gap-2 sm:gap-4",children:[Oj.map(({path:o,label:l,icon:A})=>f.jsxs("div",{className:"flex flex-col items-center w-[5.5rem] sm:w-28 min-h-[4.5rem] sm:min-h-20 p-2 sm:p-3 rounded-lg animate-pulse",children:[f.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 bg-white/10 rounded mb-1.5 sm:mb-2"}),f.jsx("div",{className:"w-12 h-3 bg-white/10 rounded text-xs sm:text-sm"})]},o)),f.jsxs("div",{className:"flex flex-col items-center w-[5.5rem] sm:w-28 min-h-[4.5rem] sm:min-h-20 p-2 sm:p-3 rounded-lg animate-pulse",children:[f.jsx("div",{className:"w-6 h-6 sm:w-7 sm:h-7 bg-white/10 rounded mb-1.5 sm:mb-2"}),f.jsx("div",{className:"w-12 h-3 bg-white/10 rounded text-xs sm:text-sm"})]})]})})});const a=[...Oj,...n?[{path:"/admin",label:"管理設定",icon:f.jsx(DF,{className:"w-5 h-5"})}]:[]];return f.jsx("nav",{className:"bg-surface sticky top-0 z-50 shadow-lg",children:f.jsxs("div",{className:"container-custom py-2 sm:py-4",children:[i&&f.jsx("div",{className:"mb-4 bg-amber-500/10 border border-amber-500/30 rounded-lg p-3",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"text-amber-500",children:"⚠️"}),f.jsx("p",{className:"text-amber-400 text-sm",children:i})]})}),f.jsx("div",{className:"flex justify-center gap-2 sm:gap-4",children:a.map(({path:o,label:l,icon:A})=>f.jsxs(tie,{to:o,className:({isActive:c})=>`
                flex flex-col items-center
                w-[5.5rem] sm:w-28
                min-h-[4.5rem] sm:min-h-20
                p-2 sm:p-3
                rounded-lg
                transition-all duration-200
                ${c?"text-primary bg-primary/10":"text-text-secondary hover:text-text-primary hover:bg-white/5"}
              `,children:[f.jsx("div",{className:"mb-1.5 sm:mb-2",children:nS.cloneElement(A,{className:"w-6 h-6 sm:w-7 sm:h-7"})}),f.jsx("div",{className:"text-xs sm:text-sm text-center leading-tight",children:l})]},o))})]})})}function Zue({children:n}){return f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(Sue,{}),f.jsx(Jue,{}),f.jsx("main",{className:"py-6",children:f.jsx("div",{className:"container-custom",children:n})})]})}function ede(){return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent"}),f.jsx("p",{className:"text-text-secondary animate-pulse",children:"載入中..."})]})})}function tde(){return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("h1",{className:"text-4xl font-bold text-red-500",children:"出錯了！"}),f.jsx("p",{className:"text-text-secondary",children:"抱歉，頁面載入時發生錯誤。"}),f.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"重新載入"})]})})}class nde extends nS.Component{constructor(t){super(t);ce(this,"handleReload",()=>{window.location.reload()});ce(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("錯誤邊界捕獲到錯誤:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:f.jsxs("div",{className:"text-center max-w-md mx-auto",children:[f.jsx("div",{className:"text-red-400 text-6xl mb-6",children:"😵"}),f.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"哎呀！發生了一些問題"}),f.jsx("p",{className:"text-text-secondary mb-6",children:"應用程序遇到了一個意外錯誤。請嘗試重新載入頁面或返回首頁。"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("button",{onClick:this.handleReload,className:"w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/80 transition-colors",children:"重新載入頁面"}),f.jsx("button",{onClick:this.handleGoHome,className:"w-full bg-white/10 text-white px-6 py-3 rounded-lg hover:bg-white/20 transition-colors",children:"返回首頁"})]}),!1]})}):this.props.children}}function rde(n){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...n,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 21.5c4.5 0 7.5-3 7.5-7.5C19.5 8.5 12 2.5 12 2.5S4.5 8.5 4.5 14c0 4.5 3 7.5 7.5 7.5z"})})}const io={hot:[40,78,120,162,200,230],cold:{"150ml":[40,58,80,102,120,150],"140ml":[40,58,80,102,120,140],"130ml":[40,58,80,102,120,130]}},DB={hot:[40,38,42,42,38,30],cold:{"150ml":[40,18,22,22,18,30],"140ml":[40,18,22,22,18,20],"130ml":[40,18,22,22,18,10]}};function ide(){const[n,e]=B.useState("hot"),[t,r]=B.useState("150ml"),[i,s]=B.useState({hot:Array(6).fill(""),cold:Array(6).fill("")}),a=(c,u)=>{const h=[...i[n]];h[c]=u,h.map((g,p)=>g===""?io[n][p]:Number(g)),s({...i,[n]:h})},o=()=>{s({...i,[n]:Array(6).fill("")})},l=c=>{r(c),s({...i,cold:Array(6).fill("")})},A=c=>{const u=i[n][c];return n==="hot"?u===""?io.hot[c]:Number(u):u===""?io.cold[t][c]:Number(u)};return f.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6 sm:space-y-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-xl bg-primary/10",children:f.jsx(rde,{className:"w-6 h-6 text-primary"})}),f.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Poursteady 注水量調整"})]}),f.jsx("button",{onClick:o,className:`
            w-full sm:w-auto px-4 py-2 rounded-lg font-medium
            transition-all duration-200
            border border-white/10
            hover:bg-white/5
          `,children:"重設"})]}),f.jsxs("div",{className:"flex gap-2 bg-surface/30 p-1.5 rounded-xl w-full sm:w-fit",children:[f.jsx("button",{onClick:()=>e("hot"),className:`
            flex-1 sm:flex-none px-4 sm:px-6 py-2.5 rounded-lg font-medium
            transition-all duration-200
            ${n==="hot"?"bg-gradient-to-br from-rose-500 to-amber-500 text-white shadow-lg shadow-rose-500/20":"text-text-secondary hover:bg-white/5"}
          `,children:"熱手沖"}),f.jsx("button",{onClick:()=>e("cold"),className:`
            flex-1 sm:flex-none px-4 sm:px-6 py-2.5 rounded-lg font-medium
            transition-all duration-200
            ${n==="cold"?"bg-gradient-to-br from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/20":"text-text-secondary hover:bg-white/5"}
          `,children:"冰手沖"})]}),n==="cold"&&f.jsxs("div",{className:"flex gap-2 bg-surface/30 p-1.5 rounded-xl w-full sm:w-fit",children:[f.jsx("button",{onClick:()=>l("150ml"),className:`
              flex-1 sm:flex-none px-4 sm:px-6 py-2.5 rounded-lg font-medium
              transition-all duration-200
              ${t==="150ml"?"bg-gradient-to-br from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/20":"text-text-secondary hover:bg-white/5"}
            `,children:"150ml"}),f.jsx("button",{onClick:()=>l("140ml"),className:`
              flex-1 sm:flex-none px-4 sm:px-6 py-2.5 rounded-lg font-medium
              transition-all duration-200
              ${t==="140ml"?"bg-gradient-to-br from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/20":"text-text-secondary hover:bg-white/5"}
            `,children:"140ml"}),f.jsx("button",{onClick:()=>l("130ml"),className:`
              flex-1 sm:flex-none px-4 sm:px-6 py-2.5 rounded-lg font-medium
              transition-all duration-200
              ${t==="130ml"?"bg-gradient-to-br from-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/20":"text-text-secondary hover:bg-white/5"}
            `,children:"130ml"})]}),f.jsx("div",{className:"grid gap-4",children:(n==="hot"?io.hot:io.cold[t]).map((c,u)=>{const h=A(u),g=u>0?A(u-1):0,p=u===0?h:h-g,m=n==="hot"?DB.hot[u]:DB.cold[t][u],w=Math.round(p-m);return f.jsx("div",{className:`
                bg-gradient-to-br from-surface/30 to-surface/20
                rounded-xl p-5 space-y-4 border border-white/5
                transition-all duration-300 hover:shadow-lg
                ${n==="hot"?"hover:border-rose-500/20":"hover:border-blue-500/20"}
              `,children:f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`
                    w-8 h-8 rounded-full flex items-center justify-center font-bold
                    ${n==="hot"?"bg-gradient-to-br from-rose-400/20 to-amber-400/20 text-rose-400":"bg-gradient-to-br from-blue-400/20 to-cyan-400/20 text-blue-400"}
                  `,children:u+1}),f.jsxs("div",{children:[f.jsxs("div",{className:"font-medium",children:["第 ",u+1," 段注水"]}),f.jsxs("div",{className:"text-sm text-text-secondary",children:["累計標準: ",c," ml",f.jsxs("span",{className:"block sm:inline sm:ml-2",children:["單段標準: ",m," ml"]})]})]})]}),f.jsx("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-end",children:f.jsxs("div",{className:"w-full sm:w-32 text-center",children:[f.jsx("input",{type:"number",value:i[n][u],onChange:v=>a(u,v.target.value),placeholder:io[n][u],step:"0.1",className:`
                        w-full sm:w-24 text-center rounded-lg px-2 py-1.5 text-lg font-bold
                        bg-white/5 border border-white/10 focus:outline-none
                        focus:ring-1 ${n==="hot"?"focus:ring-rose-500":"focus:ring-blue-500"}
                      `}),w!==0&&f.jsxs("div",{className:`text-xs mt-1 ${w>0?"text-green-400":"text-red-400"}`,children:[w>0?`+${w}`:w," ml"]})]})})]})},u)})}),f.jsx("div",{className:`
        bg-gradient-to-br from-surface/30 to-surface/20
        rounded-xl p-5 border border-white/5
        ${n==="hot"?"hover:border-rose-500/20":"hover:border-blue-500/20"}
      `,children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-sm text-text-secondary",children:"總注水量"}),f.jsxs("div",{className:"text-2xl sm:text-3xl font-bold mt-1",children:[A(5)," ml"]}),(()=>{const c=A(5),u=n==="hot"?io.hot[5]:io.cold[t][5],h=Math.round(c-u);return h!==0?f.jsxs("div",{className:`text-sm mt-1 ${h>0?"text-green-400":"text-red-400"}`,children:[h>0?`+${h}`:h," ml"]}):null})()]}),f.jsxs("div",{className:"text-right w-full sm:w-auto",children:[f.jsx("div",{className:"text-sm text-text-secondary",children:"標準總量"}),f.jsxs("div",{className:"text-xl mt-1",children:[n==="hot"?io.hot[5]:io.cold[t][5]," ml"]}),f.jsx("div",{className:`
              text-xs mt-2 px-2 py-1 rounded-full w-fit ml-auto
              ${n==="hot"?"bg-rose-500/10 text-rose-400":"bg-blue-500/10 text-blue-400"}
            `,children:n==="hot"?"熱手沖":"冰手沖"})]})]})}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`
            w-1 h-5 rounded-full
            ${n==="hot"?"bg-rose-400":"bg-blue-400"}
          `}),f.jsx("h2",{className:"font-medium",children:"需調整水量"})]}),f.jsx("div",{className:"grid gap-2",children:(n==="hot"?DB.hot:DB.cold[t]).map((c,u)=>{const h=A(u),g=u>0?A(u-1):0,p=u===0?h:h-g,m=Math.round(c-p);return m===0?null:f.jsxs("div",{className:`
                  flex items-center justify-between
                  px-4 py-2 rounded-lg
                  ${n==="hot"?"bg-rose-500/5":"bg-blue-500/5"}
                `,children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`
                    w-6 h-6 rounded-full 
                    flex items-center justify-center 
                    text-sm font-medium
                    ${n==="hot"?"bg-rose-400/10 text-rose-400":"bg-blue-400/10 text-blue-400"}
                  `,children:u+1}),f.jsxs("span",{children:["第 ",u+1," 段注水"]})]}),f.jsxs("span",{className:`
                  text-sm px-3 py-1 rounded-full font-medium
                  ${m>0?"bg-green-400/10 text-green-400":"bg-red-400/10 text-red-400"}
                `,children:[m>0?`+${m}`:m," ml"]})]},u)})})]})]})}function sde(n){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...n,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 20v-7m0 0l6-6.5H6L12 13zm-4-9h8m-8 0l-2-2m10 2l2-2"})})}function ade(){const[n,e]=B.useState([{volume:"",concentration:"",unit:"ml",id:Date.now()}]),[t,r]=B.useState({method:"volume",volume:"",cubes:"",cubeWeight:""}),[i,s]=B.useState(null),[a,o]=B.useState("ml"),l=(m,w,v)=>{if(!m)return"";const b=parseFloat(m);return w===v?b:w==="shot"?b*30:b/30},A=()=>{e([...n,{volume:"",concentration:"",unit:"ml",id:Date.now()}])},c=m=>{n.length>1&&e(n.filter(w=>w.id!==m))},u=(m,w,v)=>{e(n.map(b=>b.id===m?{...b,[w]:v}:b))},h=m=>{e(n.map(w=>{if(w.id!==m)return w;const v=w.unit==="shot"?"ml":"shot";return{...w,unit:v,volume:l(w.volume,w.unit,v).toString()}}))},g=()=>{const m=n.reduce((E,{volume:I,concentration:P,unit:_})=>{const T=parseFloat(I)||0,k=_==="shot"?T*30:T,O=parseFloat(P)||0;return E+k*(O/100)},0),w=n.reduce((E,{volume:I,unit:P})=>{const _=parseFloat(I)||0;return E+(P==="shot"?_*30:_)},0);let v=0;if(t.method==="volume")v=parseFloat(t.volume)||0;else{const E=parseFloat(t.cubes)||0,I=parseFloat(t.cubeWeight)||0;v=E*I}const b=w+v,x=m/b*100;s({originalConcentration:m/w*100,finalConcentration:x,totalVolume:b,pureAlcohol:m,meltedIceVolume:v})},p=()=>{e([{volume:"",concentration:"",unit:"ml",id:Date.now()}]),r({method:"volume",volume:"",cubes:"",cubeWeight:""}),s(null)};return f.jsx("div",{className:"container-custom py-8",children:f.jsx("div",{className:"max-w-2xl mx-auto px-4",children:f.jsxs("div",{className:"bg-surface rounded-2xl p-6 shadow-xl",children:[f.jsx("div",{className:"text-center mb-8",children:f.jsxs("div",{className:"inline-flex items-center justify-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-500/20 to-cyan-500/20",children:f.jsx(sde,{className:"w-8 h-8 text-blue-400"})}),f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"酒精濃度計算器"})]})}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"bg-white/5 rounded-xl p-6 space-y-4",children:[f.jsxs("h2",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-5 bg-blue-400 rounded-full"}),"酒類清單"]}),f.jsx("div",{className:"space-y-4",children:n.map((m,w)=>f.jsxs("div",{className:"bg-white/5 rounded-lg p-4 transition-all duration-200 hover:bg-white/10",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"text-sm font-medium text-blue-400",children:["酒類 ",w+1]}),n.length>1&&f.jsx("button",{onClick:()=>c(m.id),className:"p-1 rounded-lg hover:bg-red-500/10 text-red-400 transition-colors",children:f.jsx(Oz,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("label",{className:"text-sm text-text-secondary",children:"容量"}),f.jsx("button",{onClick:()=>h(m.id),className:`text-xs px-2 py-0.5 rounded-full bg-blue-500/10 
                                     hover:bg-blue-500/20 transition-colors text-blue-400`,children:m.unit==="shot"?"ml":"shot"})]}),f.jsx("input",{type:"number",value:m.volume,onChange:v=>u(m.id,"volume",v.target.value),className:"input-field w-full",placeholder:m.unit==="shot"?"1 shot = 30ml":"輸入毫升",min:"0",step:m.unit==="shot"?"0.5":"1"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-1",children:"濃度 (%)"}),f.jsx("input",{type:"number",value:m.concentration,onChange:v=>u(m.id,"concentration",v.target.value),className:"input-field w-full",placeholder:"輸入濃度",min:"0",max:"100"})]})]})]},m.id))}),f.jsx("button",{onClick:A,className:`w-full py-3 rounded-lg border-2 border-dashed border-blue-500/30
                         hover:bg-blue-500/5 text-blue-400
                         transition-all duration-200 group`,children:f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(ll,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),f.jsx("span",{className:"text-sm font-medium",children:"添加酒類"})]})})]}),f.jsxs("div",{className:"bg-white/5 rounded-xl p-6",children:[f.jsxs("h2",{className:"text-lg font-medium mb-4 flex items-center gap-2",children:[f.jsx("span",{className:"w-1.5 h-5 bg-blue-400 rounded-full"}),"融冰計算"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("button",{onClick:()=>r(m=>({...m,method:"volume"})),className:`p-3 rounded-lg transition-all duration-200 ${t.method==="volume"?"bg-blue-500 text-white shadow-lg shadow-blue-500/25":"bg-white/5 hover:bg-white/10 text-text-secondary"}`,children:[f.jsx("div",{className:"text-sm font-medium",children:"直接輸入體積"}),f.jsx("div",{className:"text-xs mt-1 opacity-60",children:"手動輸入融冰量"})]}),f.jsxs("button",{onClick:()=>r(m=>({...m,method:"cubes"})),className:`p-3 rounded-lg transition-all duration-200 ${t.method==="cubes"?"bg-blue-500 text-white shadow-lg shadow-blue-500/25":"bg-white/5 hover:bg-white/10 text-text-secondary"}`,children:[f.jsx("div",{className:"text-sm font-medium",children:"計算冰塊體積"}),f.jsx("div",{className:"text-xs mt-1 opacity-60",children:"根據冰塊計算"})]})]}),f.jsx("div",{className:"bg-white/5 rounded-lg p-4",children:t.method==="volume"?f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:"融冰體積 (ml)"}),f.jsx("input",{type:"number",value:t.volume,onChange:m=>r(w=>({...w,volume:m.target.value})),className:"input-field w-full",placeholder:"輸入預計融化的體積",min:"0"})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:"冰塊數量"}),f.jsx("input",{type:"number",value:t.cubes,onChange:m=>r(w=>({...w,cubes:m.target.value})),className:"input-field w-full",placeholder:"輸入數量",min:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:"每個冰塊重量 (g)"}),f.jsx("input",{type:"number",value:t.cubeWeight,onChange:m=>r(w=>({...w,cubeWeight:m.target.value})),className:"input-field w-full",placeholder:"輸入冰塊重量",min:"0"})]})]}),t.cubes&&t.cubeWeight&&f.jsxs("div",{className:"text-sm bg-blue-500/10 text-blue-400 rounded-lg p-3",children:["預計融化體積：",(parseFloat(t.cubes)*parseFloat(t.cubeWeight)).toFixed(0)," ml"]})]})})]})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("button",{onClick:g,className:`flex-1 py-3 rounded-lg bg-gradient-to-r from-blue-500 to-cyan-500
                         text-white font-medium shadow-lg shadow-blue-500/25
                         hover:shadow-xl hover:shadow-blue-500/40 
                         transition-all duration-200`,children:"計算結果"}),f.jsx("button",{onClick:p,className:`flex-1 py-3 rounded-lg bg-white/5 hover:bg-white/10 
                         text-text-secondary transition-all duration-200`,children:"重設"})]}),i&&f.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[f.jsxs("div",{className:"col-span-2 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-lg p-4",children:[f.jsx("div",{className:"text-sm text-gray-300",children:i.meltedIceVolume>0?"加入融冰後濃度":"酒精濃度"}),f.jsxs("div",{className:"text-3xl font-bold text-blue-400 mt-1",children:[i.finalConcentration.toFixed(2),"%"]}),i.meltedIceVolume>0&&f.jsxs("div",{className:"text-sm text-gray-300 mt-2",children:["調酒前濃度：",i.originalConcentration.toFixed(2),"%"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[f.jsx("div",{className:"text-sm text-text-secondary",children:"總容量"}),f.jsx("div",{className:"text-xl font-bold mt-1",children:a==="shot"?`${(i.totalVolume/30).toFixed(1)} shot`:`${i.totalVolume.toFixed(0)} ml`}),f.jsx("div",{className:"text-sm text-text-secondary mt-1",children:a==="shot"?`${i.totalVolume.toFixed(0)} ml`:`${(i.totalVolume/30).toFixed(1)} shot`}),i.meltedIceVolume>0&&f.jsxs("div",{className:"text-sm text-text-secondary mt-1",children:["含融冰：",i.meltedIceVolume.toFixed(0)," ml"]})]}),f.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[f.jsx("div",{className:"text-sm text-text-secondary",children:"純酒精含量"}),f.jsx("div",{className:"text-xl font-bold mt-1",children:a==="shot"?`${(i.pureAlcohol/30).toFixed(1)} shot`:`${i.pureAlcohol.toFixed(0)} ml`}),f.jsx("div",{className:"text-sm text-text-secondary mt-1",children:a==="shot"?`${i.pureAlcohol.toFixed(0)} ml`:`${(i.pureAlcohol/30).toFixed(1)} shot`})]})]})]})]})})})}function ode(n,e){const[t,r]=B.useState(()=>{try{const i=window.localStorage.getItem(n);return i?JSON.parse(i):e}catch(i){return console.error(i),e}});return B.useEffect(()=>{try{window.localStorage.setItem(n,JSON.stringify(t))}catch(i){console.error(i)}},[n,t]),[t,r]}const Le={common:{loading:"載入中...",error:"出錯了！",retry:"重試",save:"儲存",cancel:"取消",confirm:"確認",delete:"刪除",edit:"編輯"},sandwich:{title:"三明治計算器",subtitle:"選擇拉奶，選擇成功",inputsTitle:"計算輸入",inputsSubtitle:"輸入現有數量",existingHam:"現有的火腿三明治",existingSalami:"現有的臘腸三明治",distribution:"分配方式",distributionEven:"平均分配",distributionHam:"優先火腿",distributionSalami:"優先臘腸",extraBagsLabel:"額外需要的麵包包數",calculate:"計算結果",reset:"重設輸入",resultsTitle:"計算結果",resultsSubtitle:"製作需求總覽",needHam:"需製作的火腿三明治",needSalami:"需製作的臘腸三明治",needBags:"需要的麵包數量",totalNeed:"總計需求",emptyHint:"點擊計算按鈕查看結果"},sandwichUi:{summaryTarget:"目標",summaryExisting:"現有",summaryToMake:"需製作",unitPiece:"個",unitBag:"包",capacityTitle:"容量與分配資訊",capacityFormula:"容量 = 包數 × 每包數量",capacityLeftover:"剩餘切片 = 容量 − 需求",capacityDistributionTitle:"分配方式",capacityEvenDetail:"平均分配：多出的切片會均分到火腿與臘腸",capacityHamDetail:"優先火腿：多出的切片全分給火腿",capacitySalamiDetail:"優先臘腸：多出的切片全分給臘腸",capacityActual:"本次實際分配",hamProgress:"火腿達成度",salamiProgress:"臘腸達成度",inputPlaceholderNumber:"輸入個數",tooltipEven:"平均分配多出的切片",tooltipHam:"多出的切片優先給火腿",tooltipSalami:"多出的切片優先給臘腸"},settings:{title:"基本設定",subtitle:"調整計算參數",breadPerBag:"每包麵包的數量",targetHam:"目標火腿三明治數量",targetSalami:"目標臘腸三明治數量",done:"完成設定"}};function lg(n){const e=parseInt(n,10);return Number.isFinite(e)?e:0}function Uj(n,e){const t=Math.max(1,lg(e.breadPerBag)),r=Math.max(0,lg(e.targetHam)),i=Math.max(0,lg(e.targetSalami)),s=Math.max(0,lg(n.existingHam)),a=Math.max(0,lg(n.existingSalami)),o=Math.max(0,lg(n.extraBags)),l=n.distribution||"even",A=Math.max(0,r-s),c=Math.max(0,i-a),u=A+c,g=Math.max(0,Math.ceil(u/t))+o,p=g*t,m=Math.max(0,p-u);let w=0,v=0;switch(l){case"ham":w=m;break;case"salami":v=m;break;default:w=Math.floor(m/2),v=m-w}const b=A+w,x=c+v;return{totalHamNeeded:b,totalSalamiNeeded:x,bagsNeeded:g,totalTarget:r+i,totalExisting:s+a,baseHamNeeded:A,baseSalamiNeeded:c,baseTotalNeeded:u,totalSlices:p,extraSlices:m,extraHam:w,extraSalami:v}}function lde(){const n={breadPerBag:8,targetHam:60,targetSalami:30},[e,t]=ode("sandwich_settings",n),[r,i]=B.useState({existingHam:"",existingSalami:"",extraBags:0,distribution:"even"}),[s,a]=B.useState(!1),[o,l]=B.useState(e),[A,c]=B.useState(null),[u,h]=B.useState(!0),[g,p]=B.useState(null),[m,w]=B.useState(!1);B.useEffect(()=>{let _;try{_=aw(No(gr,"settings","sandwich"),T=>{T.exists()?t(T.data()):Kd(T.ref,e).catch(k=>{console.error("創建設定文件失敗:",k)}),h(!1)},T=>{console.error("讀取設定錯誤:",T),p("無法連接到 Firebase，使用本地設定"),h(!1)})}catch(T){console.error("Firebase 初始化錯誤:",T),p("Firebase 連接失敗，使用本地設定"),h(!1)}return()=>{_&&_()}},[]),B.useEffect(()=>{s&&l(e)},[s,e]);const v=async _=>{t(_);try{await Kd(No(gr,"settings","sandwich"),_)}catch(T){console.error("更新設定錯誤:",T),p("無法同步到 Firebase，設定已保存到本地")}},b=async()=>{await v(o),a(!1)},x=()=>{const _=Uj(r,e);c(_)},E=B.useMemo(()=>Uj(r,e),[r,e]),I=()=>{i({existingHam:"",existingSalami:"",extraBags:0,distribution:"even"}),c(null)},P=[{value:"even",label:Le.sandwich.distributionEven},{value:"ham",label:Le.sandwich.distributionHam},{value:"salami",label:Le.sandwich.distributionSalami}];return f.jsx("div",{className:"container-custom py-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-2",children:Le.sandwich.title}),f.jsx("p",{className:"text-text-secondary",children:Le.sandwich.subtitle})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[f.jsxs("div",{className:"card bg-gradient-to-br from-surface/80 to-surface/60 border-primary/20",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-xl bg-primary/20 border border-primary/30",children:f.jsx(lw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg sm:text-xl font-bold text-primary",children:Le.sandwich.inputsTitle}),f.jsx("p",{className:"text-xs sm:text-sm text-text-secondary",children:Le.sandwich.inputsSubtitle})]})]}),f.jsx("button",{onClick:()=>a(!0),className:"p-2 rounded-lg bg-primary/20 hover:bg-primary/30 border border-primary/30 text-primary transition-all duration-200 hover:scale-110",title:Le.settings.title,children:f.jsx(DF,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),u?f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"})}):g?f.jsx("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 mb-4",children:f.jsxs("div",{className:"flex items-center gap-2 text-amber-400",children:[f.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f.jsx("span",{className:"text-sm font-medium",children:g})]})}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsxs("div",{className:"rounded-lg bg-white/5 border border-white/10 p-3 text-center",children:[f.jsx("div",{className:"text-xs text-text-secondary",children:Le.sandwichUi.summaryTarget}),f.jsx("div",{className:"text-base font-semibold",children:E.totalTarget})]}),f.jsxs("div",{className:"rounded-lg bg-white/5 border border-white/10 p-3 text-center",children:[f.jsx("div",{className:"text-xs text-text-secondary",children:Le.sandwichUi.summaryExisting}),f.jsx("div",{className:"text-base font-semibold text-text-secondary",children:E.totalExisting})]}),f.jsxs("div",{className:"rounded-lg bg-primary/10 border border-primary/30 p-3 text-center",children:[f.jsx("div",{className:"text-xs text-text-secondary",children:Le.sandwichUi.summaryToMake}),f.jsx("div",{className:"text-lg sm:text-xl font-bold text-primary",children:E.baseTotalNeeded})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.sandwich.existingHam}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"number",className:"input-field w-full pr-10",placeholder:Le.sandwichUi.inputPlaceholderNumber,min:0,inputMode:"numeric",pattern:"[0-9]*",onWheel:_=>_.target.blur(),value:r.existingHam,onChange:_=>i({...r,existingHam:_.target.value})}),f.jsx("span",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-text-secondary text-sm",children:Le.sandwichUi.unitPiece})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.sandwich.existingSalami}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"number",className:"input-field w-full pr-10",placeholder:Le.sandwichUi.inputPlaceholderNumber,min:0,inputMode:"numeric",pattern:"[0-9]*",onWheel:_=>_.target.blur(),value:r.existingSalami,onChange:_=>i({...r,existingSalami:_.target.value})}),f.jsx("span",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none text-text-secondary text-sm",children:Le.sandwichUi.unitPiece})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.sandwich.distribution}),f.jsx("div",{role:"radiogroup","aria-label":Le.sandwich.distribution,className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:P.map(_=>f.jsx("button",{role:"radio","aria-checked":r.distribution===_.value,title:_.value==="even"?Le.sandwichUi.tooltipEven:_.value==="ham"?Le.sandwichUi.tooltipHam:Le.sandwichUi.tooltipSalami,onClick:()=>i({...r,distribution:_.value}),className:`px-3 py-2 sm:px-4 sm:py-3 rounded-lg transition-all duration-200 text-sm sm:text-base ${r.distribution===_.value?"bg-primary/20 border border-primary/30 text-primary":"bg-white/5 hover:bg-white/10 text-text-secondary border border-transparent"}`,children:f.jsx("span",{className:"font-medium",children:_.label})},_.value))})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm text-text-secondary mb-2",children:[Le.sandwich.extraBagsLabel,"：",r.extraBags]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"range",min:"0",max:"5",step:"1",value:r.extraBags,"aria-label":Le.sandwich.extraBagsLabel,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),onTouchStart:()=>w(!0),onTouchEnd:()=>w(!1),onChange:_=>i(T=>({...T,extraBags:parseInt(_.target.value,10)||0})),className:`w-full h-3 bg-white/10 rounded-lg appearance-none cursor-pointer
                                touch-manipulation
                                [&::-webkit-slider-thumb]:appearance-none
                                [&::-webkit-slider-thumb]:w-6
                                [&::-webkit-slider-thumb]:h-6
                                [&::-webkit-slider-thumb]:rounded-full
                                [&::-webkit-slider-thumb]:bg-primary
                                [&::-webkit-slider-thumb]:cursor-pointer
                                [&::-webkit-slider-thumb]:hover:bg-primary/80
                                [&::-webkit-slider-thumb]:transition-all
                                [&::-webkit-slider-thumb]:shadow-lg
                                [&::-moz-range-thumb]:appearance-none
                                [&::-moz-range-thumb]:border-0
                                [&::-moz-range-thumb]:w-6
                                [&::-moz-range-thumb]:h-6
                                [&::-moz-range-thumb]:rounded-full
                                [&::-moz-range-thumb]:bg-primary
                                [&::-moz-range-thumb]:cursor-pointer
                                [&::-moz-range-thumb]:hover:bg-primary/80
                                [&::-moz-range-thumb]:transition-all
                                [&::-moz-range-thumb]:shadow-lg`}),m&&f.jsx("div",{className:"absolute -top-7",style:{left:`${r.extraBags/5*100}%`,transform:"translateX(-50%)"},children:f.jsx("div",{className:"px-2 py-0.5 rounded bg-primary/80 text-white text-xs shadow",children:r.extraBags})})]}),f.jsxs("div",{className:"flex justify-between text-xs text-text-secondary mt-2 px-1",children:[f.jsx("span",{children:"0"}),f.jsx("span",{children:"1"}),f.jsx("span",{children:"2"}),f.jsx("span",{children:"3"}),f.jsx("span",{children:"4"}),f.jsx("span",{children:"5"})]})]}),f.jsxs("div",{className:"space-y-3 pt-4",children:[f.jsx("button",{onClick:x,className:"btn-primary w-full py-3 sm:py-4 text-sm sm:text-base",children:Le.sandwich.calculate}),f.jsx("button",{onClick:I,className:`w-full px-3 py-2 sm:px-4 sm:py-3 bg-white/5 hover:bg-white/10 
                              text-text-secondary rounded-lg transition-all duration-200 text-sm sm:text-base`,children:Le.sandwich.reset})]})]})]}),f.jsxs("div",{className:"card bg-gradient-to-br from-surface/60 to-surface/40 border-primary/20",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"p-2 rounded-xl bg-primary/20 border border-primary/30",children:f.jsx(Nz,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg sm:text-xl font-bold text-primary",children:Le.sandwich.resultsTitle}),f.jsx("p",{className:"text-xs sm:text-sm text-text-secondary",children:Le.sandwich.resultsSubtitle})]})]}),A?f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-secondary/10 rounded-xl p-4 border border-primary/30",children:[f.jsx("div",{className:"text-2xl font-bold text-white",children:A.totalHamNeeded}),f.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:[Le.sandwich.needHam,"（",Le.sandwichUi.unitPiece,"）"]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-secondary/10 rounded-xl p-4 border border-primary/30",children:[f.jsx("div",{className:"text-2xl font-bold text-white",children:A.totalSalamiNeeded}),f.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:[Le.sandwich.needSalami,"（",Le.sandwichUi.unitPiece,"）"]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-secondary/10 rounded-xl p-4 border border-primary/30",children:[f.jsx("div",{className:"text-2xl font-bold text-white",children:A.bagsNeeded}),f.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:[Le.sandwich.needBags,"（",Le.sandwichUi.unitBag,"）"]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-secondary/10 rounded-xl p-4 border border-primary/30",children:[f.jsx("div",{className:"text-2xl font-bold text-white",children:A.totalHamNeeded+A.totalSalamiNeeded}),f.jsxs("div",{className:"text-xs text-text-secondary mt-1",children:[Le.sandwich.totalNeed,"（",Le.sandwichUi.unitPiece,"）"]})]}),f.jsxs("div",{className:"rounded-xl p-4 bg-white/5 border border-white/10 space-y-1.5",children:[f.jsx("div",{className:"text-sm font-semibold",children:Le.sandwichUi.capacityTitle}),f.jsxs("div",{className:"text-xs text-text-secondary",children:[Le.sandwichUi.capacityFormula,"：",A.bagsNeeded," × ",e.breadPerBag," = ",f.jsx("span",{className:"text-white font-medium",children:A.totalSlices})]}),f.jsxs("div",{className:"text-xs text-text-secondary",children:[Le.sandwichUi.capacityLeftover,"：",f.jsx("span",{className:"text-white font-medium",children:A.extraSlices})]}),f.jsxs("div",{className:"text-xs text-text-secondary mt-2",children:[Le.sandwichUi.capacityDistributionTitle,"：",f.jsxs("span",{className:"ml-1",children:[r.distribution==="even"&&Le.sandwichUi.capacityEvenDetail,r.distribution==="ham"&&Le.sandwichUi.capacityHamDetail,r.distribution==="salami"&&Le.sandwichUi.capacitySalamiDetail]})]}),f.jsxs("div",{className:"text-xs text-text-secondary",children:[Le.sandwichUi.capacityActual,"：",f.jsxs("span",{className:"ml-1 text-white font-medium",children:["火腿 +",A.extraHam]}),f.jsx("span",{className:"mx-2",children:"/"}),f.jsxs("span",{className:"text-white font-medium",children:["臘腸 +",A.extraSalami]})]})]})]}):f.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[f.jsx(lw,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{children:Le.sandwich.emptyHint})]})]})]}),s&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-surface/95 backdrop-blur-md border border-white/20 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[f.jsxs("div",{className:"flex justify-between items-start mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-xl bg-primary/20 border border-primary/30",children:f.jsx(DF,{className:"w-6 h-6 text-primary"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-primary",children:Le.settings.title}),f.jsx("p",{className:"text-sm text-text-secondary",children:Le.settings.subtitle})]})]}),f.jsx("button",{onClick:()=>a(!1),className:"p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.settings.breadPerBag}),f.jsx("input",{type:"number",className:"input-field w-full",min:1,inputMode:"numeric",pattern:"[0-9]*",onWheel:_=>_.target.blur(),value:o.breadPerBag,onChange:_=>l(T=>({...T,breadPerBag:parseInt(_.target.value,10)||1}))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.settings.targetHam}),f.jsx("input",{type:"number",className:"input-field w-full",min:0,inputMode:"numeric",pattern:"[0-9]*",onWheel:_=>_.target.blur(),value:o.targetHam,onChange:_=>l(T=>({...T,targetHam:parseInt(_.target.value,10)||0}))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm text-text-secondary mb-2",children:Le.settings.targetSalami}),f.jsx("input",{type:"number",className:"input-field w-full",min:0,inputMode:"numeric",pattern:"[0-9]*",onWheel:_=>_.target.blur(),value:o.targetSalami,onChange:_=>l(T=>({...T,targetSalami:parseInt(_.target.value,10)||0}))})]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsx("button",{className:"flex-1 px-4 py-2 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg transition-colors",onClick:b,children:Le.settings.done}),f.jsx("button",{className:"flex-1 px-4 py-2 bg-white/5 hover:bg-white/10 text-text-secondary rounded-lg transition-colors",onClick:()=>a(!1),children:Le.common.cancel})]})]})})]})})}const tl={brewing:{pourOver:["水洗","日曬","阿寶","台灣豆","Geisha"],espresso:["ESP","水洗"]},retail:["水洗","日曬","阿寶","季節","台灣豆","Geisha"]},Yr=["台灣豆","Geisha"],OB={bagWeight:121,ikeaBoxWeight:365,beanWeightPerPack:19};function Ade(){const[n,e]=B.useState(!1);B.useEffect(()=>{if(n)document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${window.scrollY}px`;else{const j=document.body.style.top;document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",j&&window.scrollTo(0,parseInt(j||"0")*-1)}return()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top=""}},[n]);const t=B.useRef(null),[r,i]=B.useState({brewing:{pourOver:{},espresso:{}},retail:{}}),[s,a]=B.useState("bag"),[o,l]=B.useState(!1),[A,c]=B.useState({}),[u,h]=B.useState("brewing"),[g,p]=B.useState("original"),[m,w]=B.useState(()=>{const j=localStorage.getItem("coffeeBeanWeightSettings");if(j)try{return JSON.parse(j)}catch(G){return console.error("解析重量設定失敗:",G),OB}return OB}),[v,b]=B.useState(()=>{const j=localStorage.getItem("coffeeBeanCalculations");if(j)try{return JSON.parse(j)}catch(G){return console.error("解析計算欄位失敗:",G),[{id:1,totalWeight:"",estimatedPacks:0}]}return[{id:1,totalWeight:"",estimatedPacks:0}]});B.useEffect(()=>{const j=localStorage.getItem("coffeeBeanInventory");j&&i(JSON.parse(j));const G=localStorage.getItem("coffeeBeanWeightMode");G&&a(G)},[]),B.useEffect(()=>{localStorage.setItem("coffeeBeanWeightSettings",JSON.stringify(m))},[m]),B.useEffect(()=>{localStorage.setItem("coffeeBeanInventory",JSON.stringify(r))},[r]),B.useEffect(()=>{localStorage.setItem("coffeeBeanCalculations",JSON.stringify(v))},[v]),B.useEffect(()=>{localStorage.setItem("coffeeBeanWeightMode",s)},[s]),B.useEffect(()=>{const j=()=>{const G=document.getElementById("brewing-section"),Q=document.getElementById("retail-section");if(G&&Q){const ne=G.getBoundingClientRect(),V=Q.getBoundingClientRect();ne.top<window.innerHeight/2&&ne.bottom>window.innerHeight/2?h("brewing"):V.top<window.innerHeight/2&&V.bottom>window.innerHeight/2&&h("retail")}};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]);const x=(j,G,Q)=>{var ne;if(!((ne=r[j][G])!=null&&ne[Q])){const X=Yr.includes(Q)?{store:[""]}:{store:[""],breakRoom:[""]};i(J=>{var $;return{...J,[j]:{...J[j],[G]:{...($=J[j])==null?void 0:$[G],[Q]:X}}}})}},E=(j,G,Q,ne)=>{x(j,G,Q),i(V=>{var X,J,$;return{...V,[j]:{...V[j],[G]:{...V[j][G],[Q]:{...(X=V[j][G])==null?void 0:X[Q],[ne]:[...(($=(J=V[j][G])==null?void 0:J[Q])==null?void 0:$[ne])||[""],""]}}}}})},I=(j,G,Q,ne,V,X)=>{x(j,G,Q),i(J=>{var $,De,ke,Je;return{...J,[j]:{...J[j],[G]:{...J[j][G],[Q]:{...($=J[j][G])==null?void 0:$[Q],[ne]:((Je=(ke=(De=J[j][G])==null?void 0:De[Q])==null?void 0:ke[ne])==null?void 0:Je.map((At,kn)=>kn===V?X:At))||[""]}}}}})},P=(j,G,Q,ne,V)=>{i(X=>{var J,$,De,ke;return{...X,[j]:{...X[j],[G]:{...X[j][G],[Q]:{...(J=X[j][G])==null?void 0:J[Q],[ne]:((ke=(De=($=X[j][G])==null?void 0:$[Q])==null?void 0:De[ne])==null?void 0:ke.filter((Je,At)=>At!==V))||[""]}}}}})},_=j=>(j==null?void 0:j.reduce((G,Q)=>G+(parseInt(Q)||0),0))||0,T=j=>{if(!j)return 0;let G=0;return j.store&&(G+=_(j.store)),j.breakRoom&&(G+=_(j.breakRoom)),G},k=j=>{if(!j)return 0;const G=s==="bag"?m.bagWeight:m.ikeaBoxWeight,Q=j-G;return Q<=0?0:Math.round(Q/m.beanWeightPerPack*10)/10},O=(j,G)=>{w(Q=>({...Q,[j]:parseFloat(G)||0}))},U=()=>{const j=Math.max(...v.map(G=>G.id),0)+1;b(G=>[...G,{id:j,totalWeight:"",estimatedPacks:0}])},L=j=>{v.length>1&&b(G=>G.filter(Q=>Q.id!==j))},R=(j,G)=>{b(Q=>Q.map(ne=>ne.id===j?{...ne,totalWeight:G,estimatedPacks:k(G)}:ne))},re=()=>{l(!0);const j={};tl.brewing.pourOver.forEach(G=>{const Q=r.brewing.pourOver[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]);j[`brewing-pourOver-${G}`]={store:ne.toString(),breakRoom:V.toString(),category:"brewing",subCategory:"pourOver",beanType:G}}),tl.brewing.espresso.forEach(G=>{const Q=r.brewing.espresso[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]);j[`brewing-espresso-${G}`]={store:ne.toString(),breakRoom:V.toString(),category:"brewing",subCategory:"espresso",beanType:G}}),tl.retail.forEach(G=>{const Q=r.retail[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]);j[`retail-${G}`]={store:ne.toString(),breakRoom:V.toString(),category:"retail",subCategory:null,beanType:G}}),c(j)},he=()=>{Object.entries(A).forEach(([j,G])=>{const{category:Q,subCategory:ne,beanType:V,store:X,breakRoom:J}=G;i(Q==="retail"?$=>({...$,retail:{...$.retail,[V]:{store:[X],...Yr.includes(V)?{}:{breakRoom:[J]}}}}):$=>({...$,[Q]:{...$[Q],[ne]:{...$[Q][ne],[V]:{store:[X],...Yr.includes(V)?{}:{breakRoom:[J]}}}}}))}),l(!1),c({})},te=()=>{l(!1),c({})},ee=(j,G,Q)=>{c(ne=>({...ne,[j]:{...ne[j],[G]:Q}}))},Z=()=>{confirm("確定要重置所有數據嗎？此操作無法復原。")&&(i({brewing:{pourOver:{},espresso:{}},retail:{}}),b([{id:1,totalWeight:"",estimatedPacks:0}]),w(OB),a("bag"),l(!1),c({}),localStorage.removeItem("coffeeBeanInventory"),localStorage.removeItem("coffeeBeanWeightSettings"),localStorage.removeItem("coffeeBeanCalculations"),localStorage.removeItem("coffeeBeanWeightMode"))},ae=()=>{confirm("確定要回復原本的重量設定嗎？")&&(w(OB),localStorage.removeItem("coffeeBeanWeightSettings"))},fe=()=>{const j=[];return tl.brewing.pourOver.forEach(G=>{const Q=r.brewing.pourOver[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]),X=ne+V;j.push({category:"出杯豆",beanType:G,storeTotal:ne,breakRoomTotal:V,grandTotal:X})}),tl.brewing.espresso.forEach(G=>{const Q=r.brewing.espresso[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]),X=ne+V;j.push({category:"義式豆",beanType:G,storeTotal:ne,breakRoomTotal:V,grandTotal:X})}),tl.retail.forEach(G=>{const Q=r.retail[G],ne=_((Q==null?void 0:Q.store)||[]),V=Yr.includes(G)?0:_((Q==null?void 0:Q.breakRoom)||[]),X=ne+V;j.push({category:"賣豆",beanType:G,storeTotal:ne,breakRoomTotal:V,grandTotal:X})}),j},Ue=()=>{const j=fe(),G=new Date().toLocaleDateString("zh-TW"),Q={};return j.forEach(ne=>{Q[ne.category]||(Q[ne.category]=[]),Q[ne.category].push(ne)}),`
      <div style="font-family: 'Microsoft JhengHei', Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 30px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); color: #2c3e50; min-height: 100vh;">
        <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
          <div style="text-align: center; margin-bottom: 40px;">
            <h1 style="color: #2c3e50; margin: 0; font-size: 32px; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">咖啡豆盤點表</h1>
            <p style="color: #7f8c8d; margin: 10px 0 0 0; font-size: 16px;">盤點日期：${G}</p>
          </div>
          
          ${Object.entries(Q).map(([ne,V])=>`
            <div style="margin-bottom: 30px;">
              <h2 style="color: white; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 12px 25px; border-radius: 10px 10px 0 0; margin: 0; font-size: 18px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                ${ne}
              </h2>
              
              <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 0 0 10px 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08);">
                <thead>
                  <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 40px;">
                    <th style="padding: 0 15px; text-align: center; vertical-align: middle; font-weight: 600; color: white; font-size: 14px;">豆種</th>
                    <th style="padding: 0 15px; text-align: center; vertical-align: middle; font-weight: 600; color: white; font-size: 14px;">店面庫存</th>
                    <th style="padding: 0 15px; text-align: center; vertical-align: middle; font-weight: 600; color: white; font-size: 14px;">員休室庫存</th>
                    <th style="padding: 0 15px; text-align: center; vertical-align: middle; font-weight: 600; color: white; font-size: 14px;">總計</th>
                  </tr>
                </thead>
                <tbody>
                  ${V.map((X,J)=>`
                    <tr style="${J%2===0?"background: #f8f9fa;":"background: white;"}">
                      <td style="padding: 12px 15px; text-align: center; font-weight: 600; color: #2c3e50; border-bottom: 1px solid #ecf0f1;">${X.beanType}</td>
                      <td style="padding: 12px 15px; text-align: center; color: #34495e; border-bottom: 1px solid #ecf0f1;">${X.storeTotal}</td>
                      <td style="padding: 12px 15px; text-align: center; color: #34495e; border-bottom: 1px solid #ecf0f1;">${X.breakRoomTotal}</td>
                      <td style="padding: 12px 15px; text-align: center; font-weight: 700; color: #27ae60; background: linear-gradient(135deg, #a8e6cf 0%, #dcedc1 100%); border-bottom: 1px solid #ecf0f1;">${X.grandTotal}</td>
                    </tr>
                  `).join("")}
                </tbody>
              </table>
            </div>
          `).join("")}
        </div>
      </div>
    `},ie=()=>{const j=fe(),G=new Date().toLocaleDateString("zh-TW"),Q={};return j.forEach(ne=>{Q[ne.category]||(Q[ne.category]=[]),Q[ne.category].push(ne)}),`
      <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 900px; margin: 0 auto; padding: 40px; background: #13131a; color: #ffffff; min-height: 100vh; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;">
        <div style="background: #1e1e2e; border-radius: 20px; padding: 50px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1);">
          <div style="text-align: center; margin-bottom: 50px;">
            <h1 style="color: #6366f1; margin: 0; font-size: 36px; font-weight: 600; letter-spacing: -0.5px;">咖啡豆盤點表</h1>
            <p style="color: #94a3b8; margin: 12px 0 0 0; font-size: 17px; font-weight: 400;">盤點日期：${G}</p>
          </div>
          
          ${Object.entries(Q).map(([ne,V])=>`
            <div style="margin-bottom: 40px;">
              <h2 style="color: #ffffff; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); padding: 16px 24px; border-radius: 12px; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center; border: none; box-shadow: 0 8px 32px rgba(99, 102, 241, 0.2);">
                ${ne}
              </h2>
              
              <div style="background: #1e1e2e; border-radius: 16px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 8px 32px rgba(0,0,0,0.2);">
                <table style="width: 100%; border-collapse: collapse; background: #1e1e2e;">
                  <thead>
                    <tr style="background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); height: 48px;">
                      <th style="padding: 0 20px; text-align: left; vertical-align: middle; font-weight: 600; color: #ffffff; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);">豆種</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #ffffff; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);">店面庫存</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #ffffff; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);">員休室庫存</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #ffffff; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.1);">總計</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${V.map((X,J)=>`
                      <tr style="background: ${J%2===0?"#1e1e2e":"rgba(255,255,255,0.02)"}; transition: all 0.3s ease;">
                        <td style="padding: 16px 20px; text-align: left; font-weight: 500; color: #ffffff; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.05);">${X.beanType}</td>
                        <td style="padding: 16px 20px; text-align: center; color: #3b82f6; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: 500;">${X.storeTotal}</td>
                        <td style="padding: 16px 20px; text-align: center; color: #10b981; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: 500;">${X.breakRoomTotal}</td>
                        <td style="padding: 16px 20px; text-align: center; font-weight: 600; color: #6366f1; font-size: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);">${X.grandTotal}</td>
                      </tr>
                    `).join("")}
                  </tbody>
                </table>
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `},we=()=>{const j=fe(),G=new Date().toLocaleDateString("zh-TW"),Q={};return j.forEach(ne=>{Q[ne.category]||(Q[ne.category]=[]),Q[ne.category].push(ne)}),`
      <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 40px; background: #fafafa; color: #1d1d1f; min-height: 100vh;">
        <div style="background: white; border-radius: 20px; padding: 50px; box-shadow: 0 8px 32px rgba(0,0,0,0.08);">
          <div style="text-align: center; margin-bottom: 50px;">
            <h1 style="color: #1d1d1f; margin: 0; font-size: 36px; font-weight: 600; letter-spacing: -0.5px;">咖啡豆盤點表</h1>
            <p style="color: #86868b; margin: 12px 0 0 0; font-size: 17px; font-weight: 400;">盤點日期：${G}</p>
          </div>
          
          ${Object.entries(Q).map(([ne,V])=>`
            <div style="margin-bottom: 40px;">
              <h2 style="color: #1d1d1f; background: #f5f5f7; padding: 16px 24px; border-radius: 12px; margin: 0 0 24px 0; font-size: 20px; font-weight: 600; text-align: center; border: none;">
                ${ne}
              </h2>
              
              <div style="background: white; border-radius: 16px; overflow: hidden; border: 1px solid #e5e5e7;">
                <table style="width: 100%; border-collapse: collapse; background: white;">
                  <thead>
                    <tr style="background: #f5f5f7; height: 48px;">
                      <th style="padding: 0 20px; text-align: left; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">豆種</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">店面庫存</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">員休室庫存</th>
                      <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">總計</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${V.map((X,J)=>`
                      <tr style="background: ${J%2===0?"#fafafa":"white"};">
                        <td style="padding: 16px 20px; text-align: left; font-weight: 500; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${X.beanType}</td>
                        <td style="padding: 16px 20px; text-align: center; color: #515154; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${X.storeTotal}</td>
                        <td style="padding: 16px 20px; text-align: center; color: #515154; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${X.breakRoomTotal}</td>
                        <td style="padding: 16px 20px; text-align: center; font-weight: 600; color: #007aff; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${X.grandTotal}</td>
                      </tr>
                    `).join("")}
                  </tbody>
                </table>
              </div>
            </div>
          `).join("")}
        </div>
      </div>
    `},Ye=async()=>{try{let j;try{j=(await Au(async()=>{const{default:J}=await Promise.resolve().then(()=>Rme);return{default:J}},void 0)).default}catch(J){console.error("html2canvas 載入失敗:",J),alert("匯出功能暫時無法使用，請重新整理頁面後再試");return}let G;g==="minimalist"?G=we():g==="web-consistent"?G=ie():G=Ue();const Q=document.createElement("div");Q.innerHTML=G,Q.style.position="absolute",Q.style.left="-9999px",Q.style.top="0",Q.style.width="900px",Q.style.height="auto",Q.style.overflow="visible",document.body.appendChild(Q),await new Promise(J=>setTimeout(J,500));const ne=await j(Q.firstElementChild,{backgroundColor:g==="minimalist"?"#fafafa":g==="web-consistent"?"#13131a":"#ffffff",scale:1,useCORS:!0,allowTaint:!0,logging:!0,width:900,height:Q.firstElementChild.scrollHeight,scrollX:0,scrollY:0,windowWidth:900,windowHeight:Q.firstElementChild.scrollHeight});if(document.body.removeChild(Q),!ne||ne.width===0||ne.height===0)throw new Error("Canvas 渲染失敗");const V=document.createElement("a");let X;g==="minimalist"?X="Minimalist":g==="web-consistent"?X="網頁風格":X="原始風格",V.download=`咖啡豆盤點表_${X}_${new Date().toLocaleDateString("zh-TW")}.png`,V.href=ne.toDataURL("image/png",1),V.click()}catch(j){console.error("匯出圖片失敗:",j),alert(`匯出圖片失敗：${j.message}`)}};return f.jsxs("div",{className:"container-custom py-6 space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 sm:justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 border border-primary/20",children:f.jsx(NF,{className:"w-6 h-6 text-primary"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary to-purple-400 bg-clip-text text-transparent",children:"咖啡豆管理工具"}),f.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"庫存管理與重量換算"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[o?f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:he,className:"px-4 py-2 text-sm font-medium rounded-lg bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/30 text-blue-400 hover:from-blue-500/30 hover:to-cyan-500/30 hover:border-blue-500/50 transition-all duration-200 flex items-center gap-2",children:[f.jsx(NF,{className:"w-4 h-4"}),"儲存盤點"]}),f.jsx("button",{onClick:te,className:"px-4 py-2 text-sm font-medium rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:border-red-500/50 transition-all duration-200",children:"取消"})]}):f.jsxs("button",{onClick:re,className:"px-4 py-2 text-sm font-medium rounded-lg bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30 text-green-400 hover:from-green-500/30 hover:to-emerald-500/30 hover:border-green-500/50 transition-all duration-200 flex items-center gap-2",children:[f.jsx(lw,{className:"w-4 h-4"}),"快速盤點"]}),f.jsx("button",{onClick:Z,className:"px-4 py-2 text-sm font-medium rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:border-red-500/50 transition-all duration-200",children:"重置數據"})]})]}),f.jsxs("div",{className:"card backdrop-blur-sm bg-surface/80 border border-white/20",ref:t,children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-primary mb-1",children:"咖啡豆盤點表"}),f.jsx("p",{className:"text-sm text-text-secondary",children:"即時更新庫存數量"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-surface/40 rounded-lg border border-white/10",children:[f.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[f.jsx("input",{type:"radio",value:"original",checked:g==="original",onChange:j=>p(j.target.value),className:"text-blue-400 w-3 h-3"}),f.jsx("span",{children:"原始風格"})]}),f.jsx("div",{className:"w-px h-4 bg-white/20"}),f.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[f.jsx("input",{type:"radio",value:"minimalist",checked:g==="minimalist",onChange:j=>p(j.target.value),className:"text-blue-400 w-3 h-3"}),f.jsx("span",{children:"Minimalist"})]}),f.jsx("div",{className:"w-px h-4 bg-white/20"}),f.jsxs("label",{className:"flex items-center gap-2 text-xs text-text-secondary",children:[f.jsx("input",{type:"radio",value:"web-consistent",checked:g==="web-consistent",onChange:j=>p(j.target.value),className:"text-blue-400 w-3 h-3"}),f.jsx("span",{children:"網頁風格"})]})]}),f.jsxs("button",{onClick:Ye,className:"px-4 py-2 text-sm font-medium rounded-lg bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-400/30 text-blue-400 hover:from-blue-500/30 hover:to-cyan-500/30 hover:border-blue-500/50 transition-all duration-200 flex items-center gap-2",children:[f.jsx(Tue,{className:"w-4 h-4"}),"匯出圖片"]})]})]}),f.jsxs("div",{id:"brewing-section",className:"space-y-4",children:[f.jsxs("div",{className:"sticky top-0 z-30 flex items-center gap-3 mb-4 p-4 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl border border-blue-400/20 backdrop-blur-md",children:[f.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-blue-400 to-purple-400 rounded-full"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-blue-400",children:"出杯豆"}),f.jsx("p",{className:"text-sm text-blue-300/70",children:"用於製作飲品的咖啡豆"})]}),f.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-400 animate-pulse"}),f.jsx("span",{className:"text-xs text-blue-300 font-medium",children:"當前區域"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"sticky top-16 z-20 flex items-center gap-3 mb-3 p-3 bg-gradient-to-r from-blue-500/5 to-cyan-500/5 rounded-lg border border-blue-400/10 backdrop-blur-sm",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),f.jsx("h4",{className:"text-md font-semibold text-blue-300",children:"手沖豆"}),f.jsx("span",{className:"text-xs text-blue-300/60",children:"手沖咖啡專用"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:tl.brewing.pourOver.map(j=>{const G=Yr.includes(j),Q=r.brewing.pourOver[j],ne=`brewing-pourOver-${j}`,V=A[ne];return f.jsxs("div",{className:`bg-gradient-to-br from-surface/60 to-surface/40 rounded-xl p-3 border transition-all duration-200 hover:shadow-lg hover:shadow-primary/10 ${o?"border-green-400/50 hover:border-green-400/70":"border-white/10 hover:border-primary/30"}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h5",{className:"font-semibold text-sm text-primary",children:j}),f.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-green-400":"bg-primary/60"}`})]}),o?f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.store)||"0",onChange:X=>ee(ne,"store",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10 hover:border-blue-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),!G&&f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.breakRoom)||"0",onChange:X=>ee(ne,"breakRoom",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10 hover:border-green-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-green-500/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-green-400",children:["總計: ",parseInt((V==null?void 0:V.store)||0)+parseInt((V==null?void 0:V.breakRoom)||0)," 包"]})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("button",{onClick:()=>E("brewing","pourOver",j,"store"),className:"p-1.5 rounded-lg hover:bg-blue-500/20 text-blue-400 transition-colors hover:scale-110 transform",children:f.jsx(ll,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.store)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>I("brewing","pourOver",j,"store",J,$.target.value),placeholder:"數量",className:"input-field flex-1 text-sm py-2 px-3 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10 hover:border-blue-400/30 transition-all",inputMode:"decimal"}),((Q==null?void 0:Q.store)||[]).length>1&&f.jsx("button",{onClick:()=>P("brewing","pourOver",j,"store",J),className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),!G&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("button",{onClick:()=>E("brewing","pourOver",j,"breakRoom"),className:"p-1 rounded-lg hover:bg-green-500/20 text-green-400 transition-colors",children:f.jsx(ll,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.breakRoom)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>I("brewing","pourOver",j,"breakRoom",J,$.target.value),placeholder:"數量",className:"input-field flex-1 text-sm py-1.5 px-2.5 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10",inputMode:"decimal"}),((Q==null?void 0:Q.breakRoom)||[]).length>1&&f.jsx("button",{onClick:()=>P("brewing","pourOver",j,"breakRoom",J),className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-primary/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-primary",children:[j,"：總共 ",T(Q)," 包"]})})]})]},j)})})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"sticky top-16 z-20 flex items-center gap-3 mb-3 p-3 bg-gradient-to-r from-purple-500/5 to-pink-500/5 rounded-lg border border-purple-400/10 backdrop-blur-sm",children:[f.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full"}),f.jsx("h4",{className:"text-md font-semibold text-purple-300",children:"義式豆"}),f.jsx("span",{className:"text-xs text-purple-300/60",children:"義式咖啡專用"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:tl.brewing.espresso.map(j=>{const G=Yr.includes(j),Q=r.brewing.espresso[j],ne=`brewing-espresso-${j}`,V=A[ne];return f.jsxs("div",{className:`bg-gradient-to-br from-surface/60 to-surface/40 rounded-xl p-3 border transition-all duration-200 hover:shadow-lg hover:shadow-primary/10 ${o?"border-green-400/50 hover:border-green-400/70":"border-white/10 hover:border-primary/30"}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h5",{className:"font-semibold text-sm text-primary",children:j}),f.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-green-400":"bg-primary/60"}`})]}),o?f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.store)||"0",onChange:X=>ee(ne,"store",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10 hover:border-blue-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),!G&&f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.breakRoom)||"0",onChange:X=>ee(ne,"breakRoom",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10 hover:border-green-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-green-500/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-green-400",children:["總計: ",parseInt((V==null?void 0:V.store)||0)+parseInt((V==null?void 0:V.breakRoom)||0)," 包"]})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("button",{onClick:()=>E("brewing","espresso",j,"store"),className:"p-1 rounded-lg hover:bg-blue-500/20 text-blue-400 transition-colors",children:f.jsx(ll,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.store)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>I("brewing","espresso",j,"store",J,$.target.value),placeholder:"數量",className:"input-field flex-1 text-sm py-1.5 px-2.5 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10",inputMode:"decimal"}),((Q==null?void 0:Q.store)||[]).length>1&&f.jsx("button",{onClick:()=>P("brewing","espresso",j,"store",J),className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),!G&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("button",{onClick:()=>E("brewing","espresso",j,"breakRoom"),className:"p-1 rounded-lg hover:bg-green-500/20 text-green-400 transition-colors",children:f.jsx(ll,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.breakRoom)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>I("brewing","espresso",j,"breakRoom",J,$.target.value),placeholder:"數量",className:"input-field flex-1 text-sm py-1.5 px-2.5 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10",inputMode:"decimal"}),((Q==null?void 0:Q.breakRoom)||[]).length>1&&f.jsx("button",{onClick:()=>P("brewing","espresso",j,"breakRoom",J),className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-primary/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-primary",children:[j,"：總共 ",T(Q)," 包"]})})]})]},j)})})]})]}),f.jsxs("div",{id:"retail-section",className:"space-y-4 mt-8",children:[f.jsxs("div",{className:"sticky top-0 z-30 flex items-center gap-3 mb-4 p-4 bg-gradient-to-r from-orange-500/10 to-yellow-500/10 rounded-xl border border-orange-400/20 backdrop-blur-md",children:[f.jsx("div",{className:"w-2 h-8 bg-gradient-to-b from-orange-400 to-yellow-400 rounded-full"}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-orange-400",children:"賣豆"}),f.jsx("p",{className:"text-sm text-orange-300/70",children:"用於販售的咖啡豆"})]}),f.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-400 animate-pulse"}),f.jsx("span",{className:"text-xs text-orange-300 font-medium",children:"當前區域"})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:tl.retail.map(j=>{const G=Yr.includes(j),Q=r.retail[j],ne=`retail-${j}`,V=A[ne];return f.jsxs("div",{className:`bg-gradient-to-br from-surface/60 to-surface/40 rounded-xl p-3 border transition-all duration-200 hover:shadow-lg hover:shadow-primary/10 ${o?"border-green-400/50 hover:border-green-400/70":"border-white/10 hover:border-primary/30"}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h5",{className:"font-semibold text-sm text-primary",children:j}),f.jsx("div",{className:`w-2 h-2 rounded-full ${o?"bg-green-400":"bg-primary/60"}`})]}),o?f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.store)||"0",onChange:X=>ee(ne,"store",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10 hover:border-blue-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),!G&&f.jsxs("div",{children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("input",{type:"number",value:(V==null?void 0:V.breakRoom)||"0",onChange:X=>ee(ne,"breakRoom",X.target.value),placeholder:"數量",className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10 hover:border-green-400/30 transition-all text-center font-semibold",inputMode:"decimal"})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-green-500/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-green-400",children:["總計: ",parseInt((V==null?void 0:V.store)||0)+parseInt((V==null?void 0:V.breakRoom)||0)," 包"]})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"店面庫存"]}),f.jsx("button",{onClick:()=>{if(!r.retail[j]){const J=Yr.includes(j)?{store:[""]}:{store:[""],breakRoom:[""]};i($=>({...$,retail:{...$.retail,[j]:J}}))}i(X=>{var J;return{...X,retail:{...X.retail,[j]:{...X.retail[j],store:[...((J=X.retail[j])==null?void 0:J.store)||[""],""]}}}})},className:"p-1 rounded-lg hover:bg-blue-500/20 text-blue-400 transition-colors",children:f.jsx(ll,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.store)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>{if(!r.retail[j]){const ke=Yr.includes(j)?{store:[""]}:{store:[""],breakRoom:[""]};i(Je=>({...Je,retail:{...Je.retail,[j]:ke}}))}i(De=>{var ke,Je;return{...De,retail:{...De.retail,[j]:{...De.retail[j],store:((Je=(ke=De.retail[j])==null?void 0:ke.store)==null?void 0:Je.map((At,kn)=>kn===J?$.target.value:At))||[""]}}}})},placeholder:"數量",className:"input-field flex-1 text-sm py-1.5 px-2.5 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10",inputMode:"decimal"}),((Q==null?void 0:Q.store)||[]).length>1&&f.jsx("button",{onClick:()=>{i($=>{var De,ke;return{...$,retail:{...$.retail,[j]:{...$.retail[j],store:((ke=(De=$.retail[j])==null?void 0:De.store)==null?void 0:ke.filter((Je,At)=>At!==J))||[""]}}}})},className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),!G&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("h6",{className:"text-xs font-medium text-text-secondary flex items-center gap-1",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"員休室庫存"]}),f.jsx("button",{onClick:()=>{if(!r.retail[j]){const J=Yr.includes(j)?{store:[""]}:{store:[""],breakRoom:[""]};i($=>({...$,retail:{...$.retail,[j]:J}}))}i(X=>{var J;return{...X,retail:{...X.retail,[j]:{...X.retail[j],breakRoom:[...((J=X.retail[j])==null?void 0:J.breakRoom)||[""],""]}}}})},className:"p-1 rounded-lg hover:bg-green-500/20 text-green-400 transition-colors",children:f.jsx(ll,{className:"w-3 h-3"})})]}),f.jsx("div",{className:"space-y-1.5",children:((Q==null?void 0:Q.breakRoom)||[""]).map((X,J)=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("input",{type:"number",value:X,onChange:$=>{if(!r.retail[j]){const ke=Yr.includes(j)?{store:[""]}:{store:[""],breakRoom:[""]};i(Je=>({...Je,retail:{...Je.retail,[j]:ke}}))}i(De=>{var ke,Je;return{...De,retail:{...De.retail,[j]:{...De.retail[j],breakRoom:((Je=(ke=De.retail[j])==null?void 0:ke.breakRoom)==null?void 0:Je.map((At,kn)=>kn===J?$.target.value:At))||[""]}}}})},placeholder:"數量",className:"input-field flex-1 text-sm py-1.5 px-2.5 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10",inputMode:"decimal"}),((Q==null?void 0:Q.breakRoom)||[]).length>1&&f.jsx("button",{onClick:()=>{i($=>{var De,ke;return{...$,retail:{...$.retail,[j]:{...$.retail[j],breakRoom:((ke=(De=$.retail[j])==null?void 0:De.breakRoom)==null?void 0:ke.filter((Je,At)=>At!==J))||[""]}}}})},className:"p-1 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-3 h-3"})})]},J))})]}),f.jsx("div",{className:"mt-3 pt-2 border-t border-white/10 bg-gradient-to-r from-primary/10 to-transparent rounded-lg p-2",children:f.jsxs("span",{className:"text-xs font-semibold text-primary",children:[j,"：總共 ",T(Q)," 包"]})})]})]},j)})})]})]}),f.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:f.jsx("div",{className:"bg-surface/90 backdrop-blur-md border border-white/20 rounded-full px-4 py-2 shadow-lg",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:()=>{var j;return(j=document.getElementById("brewing-section"))==null?void 0:j.scrollIntoView({behavior:"smooth"})},className:`flex items-center gap-2 px-3 py-1 rounded-full transition-all duration-300 ${u==="brewing"?"bg-blue-400/20 text-blue-400":"text-gray-400 hover:text-blue-300"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${u==="brewing"?"bg-blue-400":"bg-gray-400"}`}),f.jsx("span",{className:"text-sm font-medium",children:"出杯豆"})]}),f.jsx("div",{className:"w-px h-4 bg-gray-600"}),f.jsxs("button",{onClick:()=>{var j;return(j=document.getElementById("retail-section"))==null?void 0:j.scrollIntoView({behavior:"smooth"})},className:`flex items-center gap-2 px-3 py-1 rounded-full transition-all duration-300 ${u==="retail"?"bg-orange-400/20 text-orange-400":"text-gray-400 hover:text-orange-300"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${u==="retail"?"bg-orange-400":"bg-gray-400"}`}),f.jsx("span",{className:"text-sm font-medium",children:"賣豆"})]})]})})}),f.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 p-4 bg-gradient-to-r from-primary/20 to-purple-500/20 border border-primary/30 text-primary hover:from-primary/30 hover:to-purple-500/30 hover:border-primary/50 transition-all duration-200 rounded-full shadow-lg hover:shadow-xl z-50 hover:scale-110 transform",children:f.jsx(lw,{className:"w-6 h-6"})}),n&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:j=>{j.target===j.currentTarget&&e(!1)},children:f.jsxs("div",{className:"bg-surface/95 backdrop-blur-md border border-white/20 rounded-2xl p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:j=>j.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-primary mb-1",children:"重量換算計算器"}),f.jsx("p",{className:"text-sm text-text-secondary",children:"估算豆包數量"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:ae,className:"px-3 py-1.5 text-xs font-medium rounded-lg border border-amber-500/30 text-amber-400 hover:bg-amber-500/10 hover:border-amber-500/50 transition-all duration-200 flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400"}),"回復設定"]}),f.jsx("button",{onClick:()=>e(!1),className:"p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Oz,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-amber-400 to-orange-400 rounded-full"}),f.jsx("h3",{className:"text-lg font-bold text-primary",children:"計算模式"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-white/10 hover:border-amber-400/30 transition-all duration-200 cursor-pointer bg-gradient-to-br from-surface/40 to-surface/20",children:[f.jsx("input",{type:"radio",value:"bag",checked:s==="bag",onChange:j=>a(j.target.value),className:"text-amber-400 w-4 h-4"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),f.jsx("span",{className:"font-medium",children:"外包裝袋"})]})]}),f.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border border-white/10 hover:border-amber-400/30 transition-all duration-200 cursor-pointer bg-gradient-to-br from-surface/40 to-surface/20",children:[f.jsx("input",{type:"radio",value:"ikea",checked:s==="ikea",onChange:j=>a(j.target.value),className:"text-amber-400 w-4 h-4"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400"}),f.jsx("span",{className:"font-medium",children:"IKEA 盒子"})]})]})]})]}),f.jsxs("div",{className:"space-y-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-blue-400 to-purple-400 rounded-full"}),f.jsx("h3",{className:"text-lg font-bold text-primary",children:"重量設定"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-xl p-4 border border-white/10",children:[f.jsxs("label",{className:"block text-sm font-semibold mb-3 text-primary flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),s==="bag"?"外包裝袋重量":"IKEA 盒重量"," (g)"]}),f.jsx("input",{type:"number",value:s==="bag"?m.bagWeight:m.ikeaBoxWeight,onChange:j=>O(s==="bag"?"bagWeight":"ikeaBoxWeight",j.target.value),className:"input-field w-full text-sm py-3 px-4 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10 hover:border-blue-400/30 transition-all",placeholder:"輸入重量",inputMode:"decimal"})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-xl p-4 border border-white/10",children:[f.jsxs("label",{className:"block text-sm font-semibold mb-3 text-primary flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"每包豆子重量 (g)"]}),f.jsx("input",{type:"number",value:m.beanWeightPerPack,onChange:j=>O("beanWeightPerPack",j.target.value),className:"input-field w-full text-sm py-2.5 px-3 rounded-lg bg-white/5 border-white/10 focus:border-green-400/50 focus:bg-white/10",placeholder:"輸入重量",inputMode:"decimal"})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{onClick:U,className:"px-4 py-2.5 text-sm font-medium rounded-lg bg-gradient-to-r from-primary/20 to-purple-500/20 border border-primary/30 text-primary hover:from-primary/30 hover:to-purple-500/30 hover:border-primary/50 transition-all duration-200 flex items-center gap-2",children:[f.jsx(ll,{className:"w-4 h-4"}),"新增計算欄位"]})})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-green-400 to-emerald-400 rounded-full"}),f.jsx("h3",{className:"text-lg font-bold text-primary",children:"計算結果"})]}),v.map(j=>f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-xl p-4 border border-white/10 hover:border-primary/30 transition-all duration-200 hover:shadow-lg hover:shadow-primary/10",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("h5",{className:"font-semibold text-primary",children:["計算欄位 #",j.id]}),f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/60"})]}),v.length>1&&f.jsx("button",{onClick:()=>L(j.id),className:"p-1.5 rounded-lg hover:bg-red-500/20 text-red-400 transition-colors",children:f.jsx(Al,{className:"w-4 h-4"})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-lg p-3 border border-white/10",children:[f.jsxs("label",{className:"block text-sm font-semibold mb-2 text-text-secondary flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),"總重量 (g)"]}),f.jsx("input",{type:"number",value:j.totalWeight,onChange:G=>R(j.id,G.target.value),placeholder:"輸入總重量",className:"input-field w-full text-sm py-2 px-3 rounded-lg bg-white/5 border-white/10 focus:border-blue-400/50 focus:bg-white/10",inputMode:"decimal"})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/40 to-surface/20 rounded-lg p-3 border border-white/10",children:[f.jsxs("label",{className:"block text-sm font-semibold mb-2 text-text-secondary flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),"估算包數"]}),f.jsxs("div",{className:"w-full text-sm py-3 px-4 rounded-lg bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-400/30 text-center font-bold text-green-400 hover:border-green-500/50 transition-all",children:[j.estimatedPacks," 包"]})]})]})]},j.id))]})]})})]})}function cde(n){return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...n,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),f.jsx("polyline",{points:"14,2 14,8 20,8"})]})}function ude(n){return f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",...n,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function dde(){const[n,e]=B.useState("");B.useState(!1);const[t,r]=B.useState(0),[i,s]=B.useState(!1),[a,o]=B.useState(""),[l,A]=B.useState(!1),c=[{value:"1",label:"1月"},{value:"2",label:"2月"},{value:"3",label:"3月"},{value:"4",label:"4月"},{value:"5",label:"5月"},{value:"6",label:"6月"},{value:"7",label:"7月"},{value:"8",label:"8月"},{value:"9",label:"9月"},{value:"10",label:"10月"},{value:"11",label:"11月"},{value:"12",label:"12月"}],u=g=>[31,28,31,30,31,30,31,31,30,31,30,31][parseInt(g)-1],h=()=>{if(!n)return;const g=`DailyReport_${n}_Month.zip`,p=`https://raw.githubusercontent.com/greedysisyphus/Brainless/main/public/reports/${g}`,m=document.createElement("a");m.href=p,m.download=g,document.body.appendChild(m),m.click(),document.body.removeChild(m)};return f.jsx("div",{className:"container-custom py-6",children:f.jsxs("div",{className:"max-w-2xl mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[f.jsx(cde,{className:"w-8 h-8 text-primary"}),f.jsx("h1",{className:"text-2xl font-bold mb-2 text-center",children:"報表生成器"})]}),f.jsx("div",{className:"mb-6",children:f.jsxs("blockquote",{className:"italic text-gray-400 text-center text-base",children:["「我愛改檔名」",f.jsx("span",{className:"block text-xs text-gray-500 mt-1 text-center",children:"— 紅葉"})]})})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"card backdrop-blur-sm bg-surface/80 border border-white/20",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("h2",{className:"text-lg font-semibold text-primary mb-4 flex items-center gap-2",children:[f.jsx(Bv,{className:"w-5 h-5"}),"選擇月份"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-text-secondary",children:"選擇要生成日報表的月份"}),f.jsxs("select",{value:n,onChange:g=>e(g.target.value),className:"input-field w-full max-w-xs",children:[f.jsx("option",{value:"",children:"請選擇月份"}),c.map(g=>f.jsxs("option",{value:g.value,children:[g.label," (",u(g.value),"天)"]},g.value))]}),n&&f.jsxs("div",{className:"text-sm text-text-secondary",children:["將生成 ",u(n)," 個日報表檔案"]})]})]})}),f.jsx("div",{className:"card backdrop-blur-sm bg-surface/80 border border-white/20",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("h2",{className:"text-lg font-semibold text-primary mb-4 flex items-center gap-2",children:[f.jsx(ude,{className:"w-5 h-5"}),"生成日報表"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-text-secondary",children:"點擊下方按鈕開始生成整月日報表"}),f.jsx("button",{onClick:h,disabled:!n,className:"btn-primary w-full max-w-xs disabled:opacity-50 disabled:cursor-not-allowed",children:"下載日報表"})]})]})}),a&&f.jsx("div",{className:"card backdrop-blur-sm bg-red-500/10 border border-red-500/30",children:f.jsxs("div",{className:"p-4 flex items-center gap-3",children:[f.jsx($ue,{className:"w-5 h-5 text-red-400"}),f.jsx("span",{className:"text-red-400",children:a})]})}),l&&f.jsx("div",{className:"card backdrop-blur-sm bg-surface/80 border border-white/20",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h3",{className:"text-lg font-semibold text-primary",children:"生成進度"}),f.jsxs("span",{className:"text-sm text-text-secondary",children:[Math.round(t),"%"]})]}),f.jsx("div",{className:"w-full bg-white/10 rounded-full h-2",children:f.jsx("div",{className:"bg-gradient-to-r from-primary to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${t}%`}})}),i&&f.jsxs("div",{className:"mt-4 flex items-center gap-2 text-green-400",children:[f.jsx(Lue,{className:"w-5 h-5"}),f.jsx("span",{children:"日報表生成完成！"})]})]})})]})]})})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OF=function(n,e){return OF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},OF(n,e)};function to(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");OF(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var UF=function(){return UF=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},UF.apply(this,arguments)};function mi(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{A(r.next(c))}catch(u){a(u)}}function l(c){try{A(r.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((r=r.apply(n,[])).next())})}function ti(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(A){return function(c){return l([A,c])}}function l(A){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=A[0]&2?i.return:A[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,A[1])).done)return s;switch(i=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return t.label++,{value:A[1],done:!1};case 5:t.label++,i=A[1],A=[0];continue;case 7:A=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){t=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){t.label=A[1];break}if(A[0]===6&&t.label<s[1]){t.label=s[1],s=A;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(A);break}s[2]&&t.ops.pop(),t.trys.pop();continue}A=e.call(n,t)}catch(c){A=[6,c],i=0}finally{r=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function UB(n,e,t){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||e)}var SA=function(){function n(e,t,r,i){this.left=e,this.top=t,this.width=r,this.height=i}return n.prototype.add=function(e,t,r,i){return new n(this.left+e,this.top+t,this.width+r,this.height+i)},n.fromClientRect=function(e,t){return new n(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},n.fromDOMRectList=function(e,t){var r=Array.from(t).find(function(i){return i.width!==0});return r?new n(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),WS=function(n,e){return SA.fromClientRect(n,e.getBoundingClientRect())},hde=function(n){var e=n.body,t=n.documentElement;if(!e||!t)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),i=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new SA(0,0,r,i)},XS=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},Sn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var a=n[i];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},Rj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fde=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var RB=0;RB<Rj.length;RB++)fde[Rj.charCodeAt(RB)]=RB;var Mj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Py=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var MB=0;MB<Mj.length;MB++)Py[Mj.charCodeAt(MB)]=MB;var gde=function(n){var e=n.length*.75,t=n.length,r,i=0,s,a,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=Py[n.charCodeAt(r)],a=Py[n.charCodeAt(r+1)],o=Py[n.charCodeAt(r+2)],l=Py[n.charCodeAt(r+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return A},pde=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},mde=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},of=5,dU=11,oP=2,yde=dU-of,Uz=65536>>of,vde=1<<of,lP=vde-1,wde=1024>>of,bde=Uz+wde,xde=bde,Bde=32,Ede=xde+Bde,Cde=65536>>dU,_de=1<<yde,Sde=_de-1,Lj=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},Ide=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Tde=function(n,e){var t=gde(n),r=Array.isArray(t)?mde(t):new Uint32Array(t),i=Array.isArray(t)?pde(t):new Uint16Array(t),s=24,a=Lj(i,s/2,r[4]/2),o=r[5]===2?Lj(i,(s+r[4])/2):Ide(r,Math.ceil((s+r[4])/4));return new Pde(r[0],r[1],r[2],r[3],a,o)},Pde=function(){function n(e,t,r,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=a}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>of],t=(t<<oP)+(e&lP),this.data[t];if(e<=65535)return t=this.index[Uz+(e-55296>>of)],t=(t<<oP)+(e&lP),this.data[t];if(e<this.highStart)return t=Ede-Cde+(e>>dU),t=this.index[t],t+=e>>of&Sde,t=this.index[t],t=(t<<oP)+(e&lP),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Qj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fde=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var LB=0;LB<Qj.length;LB++)Fde[Qj.charCodeAt(LB)]=LB;var kde="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",jj=50,Nde=1,Rz=2,Mz=3,Dde=4,Ode=5,Hj=7,Lz=8,Vj=9,du=10,RF=11,Kj=12,MF=13,Ude=14,Fy=15,LF=16,QB=17,ry=18,Rde=19,$j=20,QF=21,iy=22,AP=23,Ag=24,Ji=25,ky=26,Ny=27,cg=28,Mde=29,Rd=30,Lde=31,jB=32,HB=33,jF=34,HF=35,VF=36,Aw=37,KF=38,tC=39,nC=40,cP=41,Qz=42,Qde=43,jde=[9001,65288],jz="!",nt="×",VB="÷",$F=Tde(kde),nl=[Rd,VF],GF=[Nde,Rz,Mz,Ode],Hz=[du,Lz],Gj=[Ny,ky],Hde=GF.concat(Hz),zj=[KF,tC,nC,jF,HF],Vde=[Fy,MF],Kde=function(n,e){e===void 0&&(e="strict");var t=[],r=[],i=[];return n.forEach(function(s,a){var o=$F.get(s);if(o>jj?(i.push(!0),o-=jj):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return r.push(a),t.push(LF);if(o===Dde||o===RF){if(a===0)return r.push(a),t.push(Rd);var l=t[a-1];return Hde.indexOf(l)===-1?(r.push(r[a-1]),t.push(l)):(r.push(a),t.push(Rd))}if(r.push(a),o===Lde)return t.push(e==="strict"?QF:Aw);if(o===Qz||o===Mde)return t.push(Rd);if(o===Qde)return s>=131072&&s<=196605||s>=196608&&s<=262141?t.push(Aw):t.push(Rd);t.push(o)}),[r,t,i]},uP=function(n,e,t,r){var i=r[t];if(Array.isArray(n)?n.indexOf(i)!==-1:n===i)for(var s=t;s<=r.length;){s++;var a=r[s];if(a===e)return!0;if(a!==du)break}if(i===du)for(var s=t;s>0;){s--;var o=r[s];if(Array.isArray(n)?n.indexOf(o)!==-1:n===o)for(var l=t;l<=r.length;){l++;var a=r[l];if(a===e)return!0;if(a!==du)break}if(o!==du)break}return!1},Wj=function(n,e){for(var t=n;t>=0;){var r=e[t];if(r===du)t--;else return r}return 0},$de=function(n,e,t,r,i){if(t[r]===0)return nt;var s=r-1;if(Array.isArray(i)&&i[s]===!0)return nt;var a=s-1,o=s+1,l=e[s],A=a>=0?e[a]:0,c=e[o];if(l===Rz&&c===Mz)return nt;if(GF.indexOf(l)!==-1)return jz;if(GF.indexOf(c)!==-1||Hz.indexOf(c)!==-1)return nt;if(Wj(s,e)===Lz)return VB;if($F.get(n[s])===RF||(l===jB||l===HB)&&$F.get(n[o])===RF||l===Hj||c===Hj||l===Vj||[du,MF,Fy].indexOf(l)===-1&&c===Vj||[QB,ry,Rde,Ag,cg].indexOf(c)!==-1||Wj(s,e)===iy||uP(AP,iy,s,e)||uP([QB,ry],QF,s,e)||uP(Kj,Kj,s,e))return nt;if(l===du)return VB;if(l===AP||c===AP)return nt;if(c===LF||l===LF)return VB;if([MF,Fy,QF].indexOf(c)!==-1||l===Ude||A===VF&&Vde.indexOf(l)!==-1||l===cg&&c===VF||c===$j||nl.indexOf(c)!==-1&&l===Ji||nl.indexOf(l)!==-1&&c===Ji||l===Ny&&[Aw,jB,HB].indexOf(c)!==-1||[Aw,jB,HB].indexOf(l)!==-1&&c===ky||nl.indexOf(l)!==-1&&Gj.indexOf(c)!==-1||Gj.indexOf(l)!==-1&&nl.indexOf(c)!==-1||[Ny,ky].indexOf(l)!==-1&&(c===Ji||[iy,Fy].indexOf(c)!==-1&&e[o+1]===Ji)||[iy,Fy].indexOf(l)!==-1&&c===Ji||l===Ji&&[Ji,cg,Ag].indexOf(c)!==-1)return nt;if([Ji,cg,Ag,QB,ry].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===Ji)return nt;if([cg,Ag].indexOf(h)!==-1)u--;else break}if([Ny,ky].indexOf(c)!==-1)for(var u=[QB,ry].indexOf(l)!==-1?a:s;u>=0;){var h=e[u];if(h===Ji)return nt;if([cg,Ag].indexOf(h)!==-1)u--;else break}if(KF===l&&[KF,tC,jF,HF].indexOf(c)!==-1||[tC,jF].indexOf(l)!==-1&&[tC,nC].indexOf(c)!==-1||[nC,HF].indexOf(l)!==-1&&c===nC||zj.indexOf(l)!==-1&&[$j,ky].indexOf(c)!==-1||zj.indexOf(c)!==-1&&l===Ny||nl.indexOf(l)!==-1&&nl.indexOf(c)!==-1||l===Ag&&nl.indexOf(c)!==-1||nl.concat(Ji).indexOf(l)!==-1&&c===iy&&jde.indexOf(n[o])===-1||nl.concat(Ji).indexOf(c)!==-1&&l===ry)return nt;if(l===cP&&c===cP){for(var g=t[s],p=1;g>0&&(g--,e[g]===cP);)p++;if(p%2!==0)return nt}return l===jB&&c===HB?nt:VB},Gde=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=Kde(n,e.lineBreak),r=t[0],i=t[1],s=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[Ji,Rd,Qz].indexOf(o)!==-1?Aw:o}));var a=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&n[l]>=19968&&n[l]<=40959}):void 0;return[r,i,a]},zde=function(){function n(e,t,r,i){this.codePoints=e,this.required=t===jz,this.start=r,this.end=i}return n.prototype.slice=function(){return Sn.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),Wde=function(n,e){var t=XS(n),r=Gde(t,e),i=r[0],s=r[1],a=r[2],o=t.length,l=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var c=nt;A<o&&(c=$de(t,s,i,++A,a))===nt;);if(c!==nt||A===o){var u=new zde(t,c,l,A);return l=A,{value:u,done:!1}}return{done:!0,value:null}}}},Xde=1,Yde=2,bx=4,Xj=8,k1=10,Yj=47,Ev=92,qde=9,Jde=32,KB=34,sy=61,Zde=35,ehe=36,the=37,$B=39,GB=40,ay=41,nhe=95,Qi=45,rhe=33,ihe=60,she=62,ahe=64,ohe=91,lhe=93,Ahe=61,che=123,zB=63,uhe=125,qj=124,dhe=126,hhe=128,Jj=65533,dP=42,$d=43,fhe=44,ghe=58,phe=59,cw=46,mhe=0,yhe=8,vhe=11,whe=14,bhe=31,xhe=127,so=-1,Vz=48,Kz=97,$z=101,Bhe=102,Ehe=117,Che=122,Gz=65,zz=69,Wz=70,_he=85,She=90,ri=function(n){return n>=Vz&&n<=57},Ihe=function(n){return n>=55296&&n<=57343},ug=function(n){return ri(n)||n>=Gz&&n<=Wz||n>=Kz&&n<=Bhe},The=function(n){return n>=Kz&&n<=Che},Phe=function(n){return n>=Gz&&n<=She},Fhe=function(n){return The(n)||Phe(n)},khe=function(n){return n>=hhe},WB=function(n){return n===k1||n===qde||n===Jde},N1=function(n){return Fhe(n)||khe(n)||n===nhe},Zj=function(n){return N1(n)||ri(n)||n===Qi},Nhe=function(n){return n>=mhe&&n<=yhe||n===vhe||n>=whe&&n<=bhe||n===xhe},oc=function(n,e){return n!==Ev?!1:e!==k1},XB=function(n,e,t){return n===Qi?N1(e)||oc(e,t):N1(n)?!0:!!(n===Ev&&oc(n,e))},hP=function(n,e,t){return n===$d||n===Qi?ri(e)?!0:e===cw&&ri(t):ri(n===cw?e:n)},Dhe=function(n){var e=0,t=1;(n[e]===$d||n[e]===Qi)&&(n[e]===Qi&&(t=-1),e++);for(var r=[];ri(n[e]);)r.push(n[e++]);var i=r.length?parseInt(Sn.apply(void 0,r),10):0;n[e]===cw&&e++;for(var s=[];ri(n[e]);)s.push(n[e++]);var a=s.length,o=a?parseInt(Sn.apply(void 0,s),10):0;(n[e]===zz||n[e]===$z)&&e++;var l=1;(n[e]===$d||n[e]===Qi)&&(n[e]===Qi&&(l=-1),e++);for(var A=[];ri(n[e]);)A.push(n[e++]);var c=A.length?parseInt(Sn.apply(void 0,A),10):0;return t*(i+o*Math.pow(10,-a))*Math.pow(10,l*c)},Ohe={type:2},Uhe={type:3},Rhe={type:4},Mhe={type:13},Lhe={type:8},Qhe={type:21},jhe={type:9},Hhe={type:10},Vhe={type:11},Khe={type:12},$he={type:14},YB={type:23},Ghe={type:1},zhe={type:25},Whe={type:24},Xhe={type:26},Yhe={type:27},qhe={type:28},Jhe={type:29},Zhe={type:31},zF={type:32},Xz=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(XS(e))},n.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==zF;)e.push(t),t=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case KB:return this.consumeStringToken(KB);case Zde:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Zj(t)||oc(r,i)){var s=XB(t,r,i)?Yde:Xde,a=this.consumeName();return{type:5,value:a,flags:s}}break;case ehe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),Mhe;break;case $B:return this.consumeStringToken($B);case GB:return Ohe;case ay:return Uhe;case dP:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),$he;break;case $d:if(hP(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case fhe:return Rhe;case Qi:var o=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(hP(o,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(XB(o,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Qi&&A===she)return this.consumeCodePoint(),this.consumeCodePoint(),Whe;break;case cw:if(hP(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Yj:if(this.peekCodePoint(0)===dP)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===dP&&(c=this.consumeCodePoint(),c===Yj))return this.consumeToken();if(c===so)return this.consumeToken()}break;case ghe:return Xhe;case phe:return Yhe;case ihe:if(this.peekCodePoint(0)===rhe&&this.peekCodePoint(1)===Qi&&this.peekCodePoint(2)===Qi)return this.consumeCodePoint(),this.consumeCodePoint(),zhe;break;case ahe:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),g=this.peekCodePoint(2);if(XB(u,h,g)){var a=this.consumeName();return{type:7,value:a}}break;case ohe:return qhe;case Ev:if(oc(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case lhe:return Jhe;case Ahe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),Lhe;break;case che:return Vhe;case uhe:return Khe;case Ehe:case _he:var p=this.peekCodePoint(0),m=this.peekCodePoint(1);return p===$d&&(ug(m)||m===zB)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case qj:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),jhe;if(this.peekCodePoint(0)===qj)return this.consumeCodePoint(),Qhe;break;case dhe:if(this.peekCodePoint(0)===sy)return this.consumeCodePoint(),Hhe;break;case so:return zF}return WB(e)?(this.consumeWhiteSpace(),Zhe):ri(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):N1(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Sn(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();ug(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;t===zB&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var i=parseInt(Sn.apply(void 0,e.map(function(l){return l===zB?Vz:l})),16),s=parseInt(Sn.apply(void 0,e.map(function(l){return l===zB?Wz:l})),16);return{type:30,start:i,end:s}}var a=parseInt(Sn.apply(void 0,e),16);if(this.peekCodePoint(0)===Qi&&ug(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];ug(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var s=parseInt(Sn.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===GB?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===GB?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===so)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===$B||t===KB){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===so||this.peekCodePoint(0)===ay)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),YB)}for(;;){var i=this.consumeCodePoint();if(i===so||i===ay)return{type:22,value:Sn.apply(void 0,e)};if(WB(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===so||this.peekCodePoint(0)===ay?(this.consumeCodePoint(),{type:22,value:Sn.apply(void 0,e)}):(this.consumeBadUrlRemnants(),YB);if(i===KB||i===$B||i===GB||Nhe(i))return this.consumeBadUrlRemnants(),YB;if(i===Ev)if(oc(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),YB;else e.push(i)}},n.prototype.consumeWhiteSpace=function(){for(;WB(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===ay||e===so)return;oc(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var t=5e4,r="";e>0;){var i=Math.min(t,e);r+=Sn.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),r},n.prototype.consumeStringToken=function(e){var t="",r=0;do{var i=this._value[r];if(i===so||i===void 0||i===e)return t+=this.consumeStringSlice(r),{type:0,value:t};if(i===k1)return this._value.splice(0,r),Ghe;if(i===Ev){var s=this._value[r+1];s!==so&&s!==void 0&&(s===k1?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):oc(i,s)&&(t+=this.consumeStringSlice(r),t+=Sn(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},n.prototype.consumeNumber=function(){var e=[],t=bx,r=this.peekCodePoint(0);for((r===$d||r===Qi)&&e.push(this.consumeCodePoint());ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(r===cw&&ri(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Xj;ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((r===zz||r===$z)&&((i===$d||i===Qi)&&ri(s)||ri(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Xj;ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Dhe(e),t]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(XB(i,s,a)){var o=this.consumeName();return{type:15,number:t,flags:r,unit:o}}return i===the?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ug(e)){for(var t=Sn(e);ug(this.peekCodePoint(0))&&t.length<6;)t+=Sn(this.consumeCodePoint());WB(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return r===0||Ihe(r)||r>1114111?Jj:r}return e===so?Jj:e},n.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Zj(t))e+=Sn(t);else if(oc(t,this.peekCodePoint(0)))e+=Sn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},n}(),Yz=function(){function n(e){this._tokens=e}return n.create=function(e){var t=new Xz;return t.write(e),new n(t.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(r.type===32||tfe(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?zF:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),xx=function(n){return n.type===15},m0=function(n){return n.type===17},Tt=function(n){return n.type===20},efe=function(n){return n.type===0},WF=function(n,e){return Tt(n)&&n.value===e},qz=function(n){return n.type!==31},Xm=function(n){return n.type!==31&&n.type!==4},qo=function(n){var e=[],t=[];return n.forEach(function(r){if(r.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}r.type!==31&&t.push(r)}),t.length&&e.push(t),e},tfe=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},zu=function(n){return n.type===17||n.type===15},Rn=function(n){return n.type===16||zu(n)},Jz=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},jr={type:17,number:0,flags:bx},hU={type:16,number:50,flags:bx},hu={type:16,number:100,flags:bx},Dy=function(n,e,t){var r=n[0],i=n[1];return[jt(r,e),jt(typeof i<"u"?i:r,t)]},jt=function(n,e){if(n.type===16)return n.number/100*e;if(xx(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},Zz="deg",eW="grad",tW="rad",nW="turn",YS={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case Zz:return Math.PI*e.number/180;case eW:return Math.PI/200*e.number;case tW:return e.number;case nW:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},rW=function(n){return n.type===15&&(n.unit===Zz||n.unit===eW||n.unit===tW||n.unit===nW)},iW=function(n){var e=n.filter(Tt).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[jr,jr];case"to top":case"bottom":return ha(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[jr,hu];case"to right":case"left":return ha(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[hu,hu];case"to bottom":case"top":return ha(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[hu,jr];case"to left":case"right":return ha(270)}return 0},ha=function(n){return Math.PI*n/180},ku={name:"color",parse:function(n,e){if(e.type===18){var t=nfe[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(n,e.values)}if(e.type===5){if(e.value.length===3){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return fu(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var r=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return fu(parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return fu(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var r=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return fu(parseInt(r,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var o=gA[e.value.toUpperCase()];if(typeof o<"u")return o}return gA.TRANSPARENT}},Nu=function(n){return(255&n)===0},or=function(n){var e=255&n,t=255&n>>8,r=255&n>>16,i=255&n>>24;return e<255?"rgba("+i+","+r+","+t+","+e/255+")":"rgb("+i+","+r+","+t+")"},fu=function(n,e,t,r){return(n<<24|e<<16|t<<8|Math.round(r*255)<<0)>>>0},eH=function(n,e){if(n.type===17)return n.number;if(n.type===16){var t=e===3?1:255;return e===3?n.number/100*t:Math.round(n.number/100*t)}return 0},tH=function(n,e){var t=e.filter(Xm);if(t.length===3){var r=t.map(eH),i=r[0],s=r[1],a=r[2];return fu(i,s,a,1)}if(t.length===4){var o=t.map(eH),i=o[0],s=o[1],a=o[2],l=o[3];return fu(i,s,a,l)}return 0};function fP(n,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-n)*t*6+n:t<1/2?e:t<2/3?(e-n)*6*(2/3-t)+n:n}var nH=function(n,e){var t=e.filter(Xm),r=t[0],i=t[1],s=t[2],a=t[3],o=(r.type===17?ha(r.number):YS.parse(n,r))/(Math.PI*2),l=Rn(i)?i.number/100:0,A=Rn(s)?s.number/100:0,c=typeof a<"u"&&Rn(a)?jt(a,1):1;if(l===0)return fu(A*255,A*255,A*255,1);var u=A<=.5?A*(l+1):A+l-A*l,h=A*2-u,g=fP(h,u,o+1/3),p=fP(h,u,o),m=fP(h,u,o-1/3);return fu(g*255,p*255,m*255,c)},nfe={hsl:nH,hsla:nH,rgb:tH,rgba:tH},Cv=function(n,e){return ku.parse(n,Yz.create(e).parseComponentValue())},gA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},rfe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Tt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ife={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qS=function(n,e){var t=ku.parse(n,e[0]),r=e[1];return r&&Rn(r)?{color:t,stop:r}:{color:t,stop:null}},rH=function(n,e){var t=n[0],r=n[n.length-1];t.stop===null&&(t.stop=jr),r.stop===null&&(r.stop=hu);for(var i=[],s=0,a=0;a<n.length;a++){var o=n[a].stop;if(o!==null){var l=jt(o,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var A=null,a=0;a<i.length;a++){var c=i[a];if(c===null)A===null&&(A=a);else if(A!==null){for(var u=a-A,h=i[A-1],g=(c-h)/(u+1),p=1;p<=u;p++)i[A+p-1]=g*p;A=null}}return n.map(function(m,w){var v=m.color;return{color:v,stop:Math.max(Math.min(1,i[w]/e),0)}})},sfe=function(n,e,t){var r=e/2,i=t/2,s=jt(n[0],e)-r,a=i-jt(n[1],t);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},afe=function(n,e,t){var r=typeof n=="number"?n:sfe(n,e,t),i=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),s=e/2,a=t/2,o=i/2,l=Math.sin(r-Math.PI/2)*o,A=Math.cos(r-Math.PI/2)*o;return[i,s-A,s+A,a-l,a+l]},Pa=function(n,e){return Math.sqrt(n*n+e*e)},iH=function(n,e,t,r,i){var s=[[0,0],[0,e],[n,0],[n,e]];return s.reduce(function(a,o){var l=o[0],A=o[1],c=Pa(t-l,r-A);return(i?c<a.optimumDistance:c>a.optimumDistance)?{optimumCorner:o,optimumDistance:c}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},ofe=function(n,e,t,r,i){var s=0,a=0;switch(n.size){case 0:n.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-r)),a=Math.min(Math.abs(t),Math.abs(t-i)));break;case 2:if(n.shape===0)s=a=Math.min(Pa(e,t),Pa(e,t-i),Pa(e-r,t),Pa(e-r,t-i));else if(n.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-i))/Math.min(Math.abs(e),Math.abs(e-r)),l=iH(r,i,e,t,!0),A=l[0],c=l[1];s=Pa(A-e,(c-t)/o),a=o*s}break;case 1:n.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-i)):n.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-r)),a=Math.max(Math.abs(t),Math.abs(t-i)));break;case 3:if(n.shape===0)s=a=Math.max(Pa(e,t),Pa(e,t-i),Pa(e-r,t),Pa(e-r,t-i));else if(n.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-i))/Math.max(Math.abs(e),Math.abs(e-r)),u=iH(r,i,e,t,!1),A=u[0],c=u[1];s=Pa(A-e,(c-t)/o),a=o*s}break}return Array.isArray(n.size)&&(s=jt(n.size[0],r),a=n.size.length===2?jt(n.size[1],i):s),[s,a]},lfe=function(n,e){var t=ha(180),r=[];return qo(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){t=iW(i);return}else if(rW(a)){t=YS.parse(n,a);return}}var o=qS(n,i);r.push(o)}),{angle:t,stops:r,type:1}},qB=function(n,e){var t=ha(180),r=[];return qo(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){t=iW(i);return}else if(rW(a)){t=(YS.parse(n,a)+ha(270))%ha(360);return}}var o=qS(n,i);r.push(o)}),{angle:t,stops:r,type:1}},Afe=function(n,e){var t=ha(180),r=[],i=1,s=0,a=3,o=[];return qo(e).forEach(function(l,A){var c=l[0];if(A===0){if(Tt(c)&&c.value==="linear"){i=1;return}else if(Tt(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=ku.parse(n,c.values[0]);r.push({stop:jr,color:u})}else if(c.name==="to"){var u=ku.parse(n,c.values[0]);r.push({stop:hu,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(Xm);if(h.length===2){var u=ku.parse(n,h[1]),g=h[0];m0(g)&&r.push({stop:{type:16,number:g.number*100,flags:g.flags},color:u})}}}}),i===1?{angle:(t+ha(180))%ha(360),stops:r,type:i}:{size:a,shape:s,stops:r,position:o,type:i}},sW="closest-side",aW="farthest-side",oW="closest-corner",lW="farthest-corner",AW="circle",cW="ellipse",uW="cover",dW="contain",cfe=function(n,e){var t=0,r=3,i=[],s=[];return qo(e).forEach(function(a,o){var l=!0;if(o===0){var A=!1;l=a.reduce(function(u,h){if(A)if(Tt(h))switch(h.value){case"center":return s.push(hU),u;case"top":case"left":return s.push(jr),u;case"right":case"bottom":return s.push(hu),u}else(Rn(h)||zu(h))&&s.push(h);else if(Tt(h))switch(h.value){case AW:return t=0,!1;case cW:return t=1,!1;case"at":return A=!0,!1;case sW:return r=0,!1;case uW:case aW:return r=1,!1;case dW:case oW:return r=2,!1;case lW:return r=3,!1}else if(zu(h)||Rn(h))return Array.isArray(r)||(r=[]),r.push(h),!1;return u},l)}if(l){var c=qS(n,a);i.push(c)}}),{size:r,shape:t,stops:i,position:s,type:2}},JB=function(n,e){var t=0,r=3,i=[],s=[];return qo(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(c,u){if(Tt(u))switch(u.value){case"center":return s.push(hU),!1;case"top":case"left":return s.push(jr),!1;case"right":case"bottom":return s.push(hu),!1}else if(Rn(u)||zu(u))return s.push(u),!1;return c},l):o===1&&(l=a.reduce(function(c,u){if(Tt(u))switch(u.value){case AW:return t=0,!1;case cW:return t=1,!1;case dW:case sW:return r=0,!1;case aW:return r=1,!1;case oW:return r=2,!1;case uW:case lW:return r=3,!1}else if(zu(u)||Rn(u))return Array.isArray(r)||(r=[]),r.push(u),!1;return c},l)),l){var A=qS(n,a);i.push(A)}}),{size:r,shape:t,stops:i,position:s,type:2}},ufe=function(n){return n.type===1},dfe=function(n){return n.type===2},fU={name:"image",parse:function(n,e){if(e.type===22){var t={url:e.value,type:0};return n.cache.addImage(e.value),t}if(e.type===18){var r=hW[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return r(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function hfe(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!hW[n.name])}var hW={"linear-gradient":lfe,"-moz-linear-gradient":qB,"-ms-linear-gradient":qB,"-o-linear-gradient":qB,"-webkit-linear-gradient":qB,"radial-gradient":cfe,"-moz-radial-gradient":JB,"-ms-radial-gradient":JB,"-o-radial-gradient":JB,"-webkit-radial-gradient":JB,"-webkit-gradient":Afe},ffe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(r){return Xm(r)&&hfe(r)}).map(function(r){return fU.parse(n,r)})}},gfe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(t){if(Tt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pfe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return qo(e).map(function(t){return t.filter(Rn)}).map(Jz)}},mfe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return qo(e).map(function(t){return t.filter(Tt).map(function(r){return r.value}).join(" ")}).map(yfe)}},yfe=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ap;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(Ap||(Ap={}));var vfe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return qo(e).map(function(t){return t.filter(wfe)})}},wfe=function(n){return Tt(n)||Rn(n)},JS=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},bfe=JS("top"),xfe=JS("right"),Bfe=JS("bottom"),Efe=JS("left"),ZS=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Jz(t.filter(Rn))}}},Cfe=ZS("top-left"),_fe=ZS("top-right"),Sfe=ZS("bottom-right"),Ife=ZS("bottom-left"),eI=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Tfe=eI("top"),Pfe=eI("right"),Ffe=eI("bottom"),kfe=eI("left"),tI=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return xx(t)?t.number:0}}},Nfe=tI("top"),Dfe=tI("right"),Ofe=tI("bottom"),Ufe=tI("left"),Rfe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Mfe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Lfe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Tt).reduce(function(t,r){return t|Qfe(r.value)},0)}},Qfe=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},jfe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Hfe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},D1;(function(n){n.NORMAL="normal",n.STRICT="strict"})(D1||(D1={}));var Vfe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return D1.STRICT;case"normal":default:return D1.NORMAL}}},Kfe={name:"line-height",initialValue:"normal",prefix:!1,type:4},sH=function(n,e){return Tt(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:Rn(n)?jt(n,e):e},$fe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:fU.parse(n,e)}},Gfe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},XF={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},nI=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},zfe=nI("top"),Wfe=nI("right"),Xfe=nI("bottom"),Yfe=nI("left"),qfe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Tt).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Jfe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},rI=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Zfe=rI("top"),ege=rI("right"),tge=rI("bottom"),nge=rI("left"),rge={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},ige={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},sge={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&WF(e[0],"none")?[]:qo(e).map(function(t){for(var r={color:gA.TRANSPARENT,offsetX:jr,offsetY:jr,blur:jr},i=0,s=0;s<t.length;s++){var a=t[s];zu(a)?(i===0?r.offsetX=a:i===1?r.offsetY=a:r.blur=a,i++):r.color=ku.parse(n,a)}return r})}},age={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},oge={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=cge[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},lge=function(n){var e=n.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Age=function(n){var e=n.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],r=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[t,r,i,s,a,o]:null},cge={matrix:lge,matrix3d:Age},aH={type:16,number:50,flags:bx},uge=[aH,aH],dge={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var t=e.filter(Rn);return t.length!==2?uge:[t[0],t[1]]}},hge={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},_v;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(_v||(_v={}));var fge={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return _v.BREAK_ALL;case"keep-all":return _v.KEEP_ALL;case"normal":default:return _v.NORMAL}}},gge={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(m0(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},fW={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},pge={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return m0(e)?e.number:1}},mge={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},yge={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Tt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},vge={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var t=[],r=[];return e.forEach(function(i){switch(i.type){case 20:case 0:t.push(i.value);break;case 17:t.push(i.number.toString());break;case 4:r.push(t.join(" ")),t.length=0;break}}),t.length&&r.push(t.join(" ")),r.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},wge={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},bge={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(m0(e))return e.number;if(Tt(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},xge={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Tt).map(function(t){return t.value})}},Bge={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},qn=function(n,e){return(n&e)!==0},Ege={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},Cge={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var r=[],i=e.filter(qz),s=0;s<i.length;s++){var a=i[s],o=i[s+1];if(a.type===20){var l=o&&m0(o)?o.number:1;r.push({counter:a.value,increment:l})}}return r}},_ge={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var t=[],r=e.filter(qz),i=0;i<r.length;i++){var s=r[i],a=r[i+1];if(Tt(s)&&s.value!=="none"){var o=a&&m0(a)?a.number:0;t.push({counter:s.value,reset:o})}}return t}},Sge={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(xx).map(function(t){return fW.parse(n,t)})}},Ige={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var r=[],i=e.filter(efe);if(i.length%2!==0)return null;for(var s=0;s<i.length;s+=2){var a=i[s].value,o=i[s+1].value;r.push({open:a,close:o})}return r}},oH=function(n,e,t){if(!n)return"";var r=n[Math.min(e,n.length-1)];return r?t?r.open:r.close:""},Tge={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&WF(e[0],"none")?[]:qo(e).map(function(t){for(var r={color:255,offsetX:jr,offsetY:jr,blur:jr,spread:jr,inset:!1},i=0,s=0;s<t.length;s++){var a=t[s];WF(a,"inset")?r.inset=!0:zu(a)?(i===0?r.offsetX=a:i===1?r.offsetY=a:i===2?r.blur=a:r.spread=a,i++):r.color=ku.parse(n,a)}return r})}},Pge={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var t=[0,1,2],r=[];return e.filter(Tt).forEach(function(i){switch(i.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),t.forEach(function(i){r.indexOf(i)===-1&&r.push(i)}),r}},Fge={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},kge={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return xx(e)?e.number:0}},Nge=function(){function n(e,t){var r,i;this.animationDuration=be(e,Sge,t.animationDuration),this.backgroundClip=be(e,rfe,t.backgroundClip),this.backgroundColor=be(e,ife,t.backgroundColor),this.backgroundImage=be(e,ffe,t.backgroundImage),this.backgroundOrigin=be(e,gfe,t.backgroundOrigin),this.backgroundPosition=be(e,pfe,t.backgroundPosition),this.backgroundRepeat=be(e,mfe,t.backgroundRepeat),this.backgroundSize=be(e,vfe,t.backgroundSize),this.borderTopColor=be(e,bfe,t.borderTopColor),this.borderRightColor=be(e,xfe,t.borderRightColor),this.borderBottomColor=be(e,Bfe,t.borderBottomColor),this.borderLeftColor=be(e,Efe,t.borderLeftColor),this.borderTopLeftRadius=be(e,Cfe,t.borderTopLeftRadius),this.borderTopRightRadius=be(e,_fe,t.borderTopRightRadius),this.borderBottomRightRadius=be(e,Sfe,t.borderBottomRightRadius),this.borderBottomLeftRadius=be(e,Ife,t.borderBottomLeftRadius),this.borderTopStyle=be(e,Tfe,t.borderTopStyle),this.borderRightStyle=be(e,Pfe,t.borderRightStyle),this.borderBottomStyle=be(e,Ffe,t.borderBottomStyle),this.borderLeftStyle=be(e,kfe,t.borderLeftStyle),this.borderTopWidth=be(e,Nfe,t.borderTopWidth),this.borderRightWidth=be(e,Dfe,t.borderRightWidth),this.borderBottomWidth=be(e,Ofe,t.borderBottomWidth),this.borderLeftWidth=be(e,Ufe,t.borderLeftWidth),this.boxShadow=be(e,Tge,t.boxShadow),this.color=be(e,Rfe,t.color),this.direction=be(e,Mfe,t.direction),this.display=be(e,Lfe,t.display),this.float=be(e,jfe,t.cssFloat),this.fontFamily=be(e,vge,t.fontFamily),this.fontSize=be(e,wge,t.fontSize),this.fontStyle=be(e,Bge,t.fontStyle),this.fontVariant=be(e,xge,t.fontVariant),this.fontWeight=be(e,bge,t.fontWeight),this.letterSpacing=be(e,Hfe,t.letterSpacing),this.lineBreak=be(e,Vfe,t.lineBreak),this.lineHeight=be(e,Kfe,t.lineHeight),this.listStyleImage=be(e,$fe,t.listStyleImage),this.listStylePosition=be(e,Gfe,t.listStylePosition),this.listStyleType=be(e,XF,t.listStyleType),this.marginTop=be(e,zfe,t.marginTop),this.marginRight=be(e,Wfe,t.marginRight),this.marginBottom=be(e,Xfe,t.marginBottom),this.marginLeft=be(e,Yfe,t.marginLeft),this.opacity=be(e,pge,t.opacity);var s=be(e,qfe,t.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=be(e,Jfe,t.overflowWrap),this.paddingTop=be(e,Zfe,t.paddingTop),this.paddingRight=be(e,ege,t.paddingRight),this.paddingBottom=be(e,tge,t.paddingBottom),this.paddingLeft=be(e,nge,t.paddingLeft),this.paintOrder=be(e,Pge,t.paintOrder),this.position=be(e,ige,t.position),this.textAlign=be(e,rge,t.textAlign),this.textDecorationColor=be(e,mge,(r=t.textDecorationColor)!==null&&r!==void 0?r:t.color),this.textDecorationLine=be(e,yge,(i=t.textDecorationLine)!==null&&i!==void 0?i:t.textDecoration),this.textShadow=be(e,sge,t.textShadow),this.textTransform=be(e,age,t.textTransform),this.transform=be(e,oge,t.transform),this.transformOrigin=be(e,dge,t.transformOrigin),this.visibility=be(e,hge,t.visibility),this.webkitTextStrokeColor=be(e,Fge,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=be(e,kge,t.webkitTextStrokeWidth),this.wordBreak=be(e,fge,t.wordBreak),this.zIndex=be(e,gge,t.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Nu(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return qn(this.display,4)||qn(this.display,33554432)||qn(this.display,268435456)||qn(this.display,536870912)||qn(this.display,67108864)||qn(this.display,134217728)},n}(),Dge=function(){function n(e,t){this.content=be(e,Ege,t.content),this.quotes=be(e,Ige,t.quotes)}return n}(),lH=function(){function n(e,t){this.counterIncrement=be(e,Cge,t.counterIncrement),this.counterReset=be(e,_ge,t.counterReset)}return n}(),be=function(n,e,t){var r=new Xz,i=t!==null&&typeof t<"u"?t.toString():e.initialValue;r.write(i);var s=new Yz(r.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(n,Tt(a)?a.value:e.initialValue);case 0:return e.parse(n,s.parseComponentValue());case 1:return e.parse(n,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return YS.parse(n,s.parseComponentValue());case"color":return ku.parse(n,s.parseComponentValue());case"image":return fU.parse(n,s.parseComponentValue());case"length":var o=s.parseComponentValue();return zu(o)?o:jr;case"length-percentage":var l=s.parseComponentValue();return Rn(l)?l:jr;case"time":return fW.parse(n,s.parseComponentValue())}break}},Oge="data-html2canvas-debug",Uge=function(n){var e=n.getAttribute(Oge);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},YF=function(n,e){var t=Uge(n);return t===1||e===t},Jo=function(){function n(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,YF(t,3))debugger;this.styles=new Nge(e,window.getComputedStyle(t,null)),ZF(t)&&(this.styles.animationDuration.some(function(r){return r>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=WS(this.context,t),YF(t,4)&&(this.flags|=16)}return n}(),Rge="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",AH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ZB=0;ZB<AH.length;ZB++)Oy[AH.charCodeAt(ZB)]=ZB;var Mge=function(n){var e=n.length*.75,t=n.length,r,i=0,s,a,o,l;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(r=0;r<t;r+=4)s=Oy[n.charCodeAt(r)],a=Oy[n.charCodeAt(r+1)],o=Oy[n.charCodeAt(r+2)],l=Oy[n.charCodeAt(r+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return A},Lge=function(n){for(var e=n.length,t=[],r=0;r<e;r+=2)t.push(n[r+1]<<8|n[r]);return t},Qge=function(n){for(var e=n.length,t=[],r=0;r<e;r+=4)t.push(n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]);return t},lf=5,gU=11,gP=2,jge=gU-lf,gW=65536>>lf,Hge=1<<lf,pP=Hge-1,Vge=1024>>lf,Kge=gW+Vge,$ge=Kge,Gge=32,zge=$ge+Gge,Wge=65536>>gU,Xge=1<<jge,Yge=Xge-1,cH=function(n,e,t){return n.slice?n.slice(e,t):new Uint16Array(Array.prototype.slice.call(n,e,t))},qge=function(n,e,t){return n.slice?n.slice(e,t):new Uint32Array(Array.prototype.slice.call(n,e,t))},Jge=function(n,e){var t=Mge(n),r=Array.isArray(t)?Qge(t):new Uint32Array(t),i=Array.isArray(t)?Lge(t):new Uint16Array(t),s=24,a=cH(i,s/2,r[4]/2),o=r[5]===2?cH(i,(s+r[4])/2):qge(r,Math.ceil((s+r[4])/4));return new Zge(r[0],r[1],r[2],r[3],a,o)},Zge=function(){function n(e,t,r,i,s,a){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=i,this.index=s,this.data=a}return n.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>lf],t=(t<<gP)+(e&pP),this.data[t];if(e<=65535)return t=this.index[gW+(e-55296>>lf)],t=(t<<gP)+(e&pP),this.data[t];if(e<this.highStart)return t=zge-Wge+(e>>gU),t=this.index[t],t+=e>>lf&Yge,t=this.index[t],t=(t<<gP)+(e&pP),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),uH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",epe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eE=0;eE<uH.length;eE++)epe[uH.charCodeAt(eE)]=eE;var tpe=1,mP=2,yP=3,dH=4,hH=5,npe=7,fH=8,vP=9,wP=10,gH=11,pH=12,mH=13,yH=14,bP=15,rpe=function(n){for(var e=[],t=0,r=n.length;t<r;){var i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){var s=n.charCodeAt(t++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),t--)}else e.push(i)}return e},ipe=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var t=n.length;if(!t)return"";for(var r=[],i=-1,s="";++i<t;){var a=n[i];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(i+1===t||r.length>16384)&&(s+=String.fromCharCode.apply(String,r),r.length=0)}return s},spe=Jge(Rge),Ws="×",xP="÷",ape=function(n){return spe.get(n)},ope=function(n,e,t){var r=t-2,i=e[r],s=e[t-1],a=e[t];if(s===mP&&a===yP)return Ws;if(s===mP||s===yP||s===dH||a===mP||a===yP||a===dH)return xP;if(s===fH&&[fH,vP,gH,pH].indexOf(a)!==-1||(s===gH||s===vP)&&(a===vP||a===wP)||(s===pH||s===wP)&&a===wP||a===mH||a===hH||a===npe||s===tpe)return Ws;if(s===mH&&a===yH){for(;i===hH;)i=e[--r];if(i===yH)return Ws}if(s===bP&&a===bP){for(var o=0;i===bP;)o++,i=e[--r];if(o%2===0)return Ws}return xP},lpe=function(n){var e=rpe(n),t=e.length,r=0,i=0,s=e.map(ape);return{next:function(){if(r>=t)return{done:!0,value:null};for(var a=Ws;r<t&&(a=ope(e,s,++r))===Ws;);if(a!==Ws||r===t){var o=ipe.apply(null,e.slice(i,r));return i=r,{value:o,done:!1}}return{done:!0,value:null}}}},Ape=function(n){for(var e=lpe(n),t=[],r;!(r=e.next()).done;)r.value&&t.push(r.value.slice());return t},cpe=function(n){var e=123;if(n.createRange){var t=n.createRange();if(t.getBoundingClientRect){var r=n.createElement("boundtest");r.style.height=e+"px",r.style.display="block",n.body.appendChild(r),t.selectNode(r);var i=t.getBoundingClientRect(),s=Math.round(i.height);if(n.body.removeChild(r),s===e)return!0}}return!1},upe=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var t=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=e.firstChild,i=XS(r.data).map(function(l){return Sn(l)}),s=0,a={},o=i.every(function(l,A){t.setStart(r,s),t.setEnd(r,s+l.length);var c=t.getBoundingClientRect();s+=l.length;var u=c.x>a.x||c.y>a.y;return a=c,A===0?!0:u});return n.body.removeChild(e),o},dpe=function(){return typeof new Image().crossOrigin<"u"},hpe=function(){return typeof new XMLHttpRequest().responseType=="string"},fpe=function(n){var e=new Image,t=n.createElement("canvas"),r=t.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},vH=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},gpe=function(n){var e=n.createElement("canvas"),t=100;e.width=t,e.height=t;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,t,t);var i=new Image,s=e.toDataURL();i.src=s;var a=qF(t,t,0,0,i);return r.fillStyle="red",r.fillRect(0,0,t,t),wH(a).then(function(o){r.drawImage(o,0,0);var l=r.getImageData(0,0,t,t).data;r.fillStyle="red",r.fillRect(0,0,t,t);var A=n.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=t+"px",vH(l)?wH(qF(t,t,0,0,A)):Promise.reject(!1)}).then(function(o){return r.drawImage(o,0,0),vH(r.getImageData(0,0,t,t).data)}).catch(function(){return!1})},qF=function(n,e,t,r,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",n.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},wH=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Nr={get SUPPORT_RANGE_BOUNDS(){var n=cpe(document);return Object.defineProperty(Nr,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=Nr.SUPPORT_RANGE_BOUNDS&&upe(document);return Object.defineProperty(Nr,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=fpe(document);return Object.defineProperty(Nr,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?gpe(document):Promise.resolve(!1);return Object.defineProperty(Nr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=dpe();return Object.defineProperty(Nr,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=hpe();return Object.defineProperty(Nr,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Nr,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Nr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Sv=function(){function n(e,t){this.text=e,this.bounds=t}return n}(),ppe=function(n,e,t,r){var i=vpe(e,t),s=[],a=0;return i.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(Nr.SUPPORT_RANGE_BOUNDS){var l=bH(r,a,o.length).getClientRects();if(l.length>1){var A=pU(o),c=0;A.forEach(function(h){s.push(new Sv(h,SA.fromDOMRectList(n,bH(r,c+a,h.length).getClientRects()))),c+=h.length})}else s.push(new Sv(o,SA.fromDOMRectList(n,l)))}else{var u=r.splitText(o.length);s.push(new Sv(o,mpe(n,r))),r=u}else Nr.SUPPORT_RANGE_BOUNDS||(r=r.splitText(o.length));a+=o.length}),s},mpe=function(n,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(r,e);var s=WS(n,r);return r.firstChild&&i.replaceChild(r.firstChild,r),s}}return SA.EMPTY},bH=function(n,e,t){var r=n.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(n,e),i.setEnd(n,e+t),i},pU=function(n){if(Nr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(t){return t.segment})}return Ape(n)},ype=function(n,e){if(Nr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(n)).map(function(r){return r.segment})}return bpe(n,e)},vpe=function(n,e){return e.letterSpacing!==0?pU(n):ype(n,e)},wpe=[32,160,4961,65792,65793,4153,4241],bpe=function(n,e){for(var t=Wde(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),r=[],i,s=function(){if(i.value){var a=i.value.slice(),o=XS(a),l="";o.forEach(function(A){wpe.indexOf(A)===-1?l+=Sn(A):(l.length&&r.push(l),r.push(Sn(A)),l="")}),l.length&&r.push(l)}};!(i=t.next()).done;)s();return r},xpe=function(){function n(e,t,r){this.text=Bpe(t.data,r.textTransform),this.textBounds=ppe(e,this.text,r,t)}return n}(),Bpe=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(Epe,Cpe);case 2:return n.toUpperCase();default:return n}},Epe=/(^|\s|:|-|\(|\))([a-z])/g,Cpe=function(n,e,t){return n.length>0?e+t.toUpperCase():n},pW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.src=r.currentSrc||r.src,i.intrinsicWidth=r.naturalWidth,i.intrinsicHeight=r.naturalHeight,i.context.cache.addImage(i.src),i}return e}(Jo),mW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r,i.intrinsicWidth=r.width,i.intrinsicHeight=r.height,i}return e}(Jo),yW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=new XMLSerializer,a=WS(t,r);return r.setAttribute("width",a.width+"px"),r.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(r)),i.intrinsicWidth=r.width.baseVal.value,i.intrinsicHeight=r.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(Jo),vW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Jo),JF=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.start=r.start,i.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,i}return e}(Jo),_pe=[{type:15,flags:0,unit:"px",number:3}],Spe=[{type:16,flags:0,number:50}],Ipe=function(n){return n.width>n.height?new SA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new SA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},Tpe=function(n){var e=n.type===Ppe?new Array(n.value.length+1).join("•"):n.value;return e.length===0?n.placeholder||"":e},O1="checkbox",U1="radio",Ppe="password",xH=707406591,mU=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;switch(i.type=r.type.toLowerCase(),i.checked=r.checked,i.value=Tpe(r),(i.type===O1||i.type===U1)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=Ipe(i.bounds)),i.type){case O1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=_pe;break;case U1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Spe;break}return i}return e}(Jo),wW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this,s=r.options[r.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(Jo),bW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.value=r.value,i}return e}(Jo),xW=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;i.src=r.src,i.width=parseInt(r.width,10)||0,i.height=parseInt(r.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){i.tree=EW(t,r.contentWindow.document.documentElement);var s=r.contentWindow.document.documentElement?Cv(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):gA.TRANSPARENT,a=r.contentWindow.document.body?Cv(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):gA.TRANSPARENT;i.backgroundColor=Nu(s)?Nu(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e}(Jo),Fpe=["OL","UL","MENU"],rC=function(n,e,t,r){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,CW(i)&&i.data.trim().length>0)t.textNodes.push(new xpe(n,i,t.styles));else if(zg(i))if(TW(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return rC(n,o,t,r)});else{var a=BW(n,i);a.styles.isVisible()&&(kpe(i,a,r)?a.flags|=4:Npe(a.styles)&&(a.flags|=2),Fpe.indexOf(i.tagName)!==-1&&(a.flags|=8),t.elements.push(a),i.slot,i.shadowRoot?rC(n,i.shadowRoot,a,r):!R1(i)&&!_W(i)&&!M1(i)&&rC(n,i,a,r))}},BW=function(n,e){return ek(e)?new pW(n,e):SW(e)?new mW(n,e):_W(e)?new yW(n,e):Dpe(e)?new vW(n,e):Ope(e)?new JF(n,e):Upe(e)?new mU(n,e):M1(e)?new wW(n,e):R1(e)?new bW(n,e):IW(e)?new xW(n,e):new Jo(n,e)},EW=function(n,e){var t=BW(n,e);return t.flags|=4,rC(n,e,t,t),t},kpe=function(n,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||yU(n)&&t.styles.isTransparent()},Npe=function(n){return n.isPositioned()||n.isFloating()},CW=function(n){return n.nodeType===Node.TEXT_NODE},zg=function(n){return n.nodeType===Node.ELEMENT_NODE},ZF=function(n){return zg(n)&&typeof n.style<"u"&&!iC(n)},iC=function(n){return typeof n.className=="object"},Dpe=function(n){return n.tagName==="LI"},Ope=function(n){return n.tagName==="OL"},Upe=function(n){return n.tagName==="INPUT"},Rpe=function(n){return n.tagName==="HTML"},_W=function(n){return n.tagName==="svg"},yU=function(n){return n.tagName==="BODY"},SW=function(n){return n.tagName==="CANVAS"},BH=function(n){return n.tagName==="VIDEO"},ek=function(n){return n.tagName==="IMG"},IW=function(n){return n.tagName==="IFRAME"},EH=function(n){return n.tagName==="STYLE"},Mpe=function(n){return n.tagName==="SCRIPT"},R1=function(n){return n.tagName==="TEXTAREA"},M1=function(n){return n.tagName==="SELECT"},TW=function(n){return n.tagName==="SLOT"},CH=function(n){return n.tagName.indexOf("-")>0},Lpe=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},n.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},n.prototype.pop=function(e){var t=this;e.forEach(function(r){return t.counters[r].pop()})},n.prototype.parse=function(e){var t=this,r=e.counterIncrement,i=e.counterReset,s=!0;r!==null&&r.forEach(function(o){var l=t.counters[o.counter];l&&o.increment!==0&&(s=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var a=[];return s&&i.forEach(function(o){var l=t.counters[o.counter];a.push(o.counter),l||(l=t.counters[o.counter]=[]),l.push(o.reset)}),a},n}(),_H={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},SH={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Qpe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},jpe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},dg=function(n,e,t,r,i,s){return n<e||n>t?uw(n,i,s.length>0):r.integers.reduce(function(a,o,l){for(;n>=o;)n-=o,a+=r.values[l];return a},"")+s},PW=function(n,e,t,r){var i="";do t||n--,i=r(n)+i,n/=e;while(n*e>=e);return i},En=function(n,e,t,r,i){var s=t-e+1;return(n<0?"-":"")+(PW(Math.abs(n),s,r,function(a){return Sn(Math.floor(a%s)+e)})+i)},xd=function(n,e,t){t===void 0&&(t=". ");var r=e.length;return PW(Math.abs(n),r,!1,function(i){return e[Math.floor(i%r)]})+t},xg=1,nc=2,rc=4,Uy=8,rl=function(n,e,t,r,i,s){if(n<-9999||n>9999)return uw(n,4,i.length>0);var a=Math.abs(n),o=i;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var A=a%10;A===0&&qn(s,xg)&&o!==""?o=e[A]+o:A>1||A===1&&l===0||A===1&&l===1&&qn(s,nc)||A===1&&l===1&&qn(s,rc)&&n>100||A===1&&l>1&&qn(s,Uy)?o=e[A]+(l>0?t[l-1]:"")+o:A===1&&l>0&&(o=t[l-1]+o),a=Math.floor(a/10)}return(n<0?r:"")+o},IH="十百千萬",TH="拾佰仟萬",PH="マイナス",BP="마이너스",uw=function(n,e,t){var r=t?". ":"",i=t?"、":"",s=t?", ":"",a=t?" ":"";switch(e){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var o=En(n,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return xd(n,"〇一二三四五六七八九",i);case 6:return dg(n,1,3999,_H,3,r).toLowerCase();case 7:return dg(n,1,3999,_H,3,r);case 8:return En(n,945,969,!1,r);case 9:return En(n,97,122,!1,r);case 10:return En(n,65,90,!1,r);case 11:return En(n,1632,1641,!0,r);case 12:case 49:return dg(n,1,9999,SH,3,r);case 35:return dg(n,1,9999,SH,3,r).toLowerCase();case 13:return En(n,2534,2543,!0,r);case 14:case 30:return En(n,6112,6121,!0,r);case 15:return xd(n,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return xd(n,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return rl(n,"零一二三四五六七八九",IH,"負",i,nc|rc|Uy);case 47:return rl(n,"零壹貳參肆伍陸柒捌玖",TH,"負",i,xg|nc|rc|Uy);case 42:return rl(n,"零一二三四五六七八九",IH,"负",i,nc|rc|Uy);case 41:return rl(n,"零壹贰叁肆伍陆柒捌玖",TH,"负",i,xg|nc|rc|Uy);case 26:return rl(n,"〇一二三四五六七八九","十百千万",PH,i,0);case 25:return rl(n,"零壱弐参四伍六七八九","拾百千万",PH,i,xg|nc|rc);case 31:return rl(n,"영일이삼사오육칠팔구","십백천만",BP,s,xg|nc|rc);case 33:return rl(n,"零一二三四五六七八九","十百千萬",BP,s,0);case 32:return rl(n,"零壹貳參四五六七八九","拾百千",BP,s,xg|nc|rc);case 18:return En(n,2406,2415,!0,r);case 20:return dg(n,1,19999,jpe,3,r);case 21:return En(n,2790,2799,!0,r);case 22:return En(n,2662,2671,!0,r);case 22:return dg(n,1,10999,Qpe,3,r);case 23:return xd(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return xd(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return En(n,3302,3311,!0,r);case 28:return xd(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return xd(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return En(n,3792,3801,!0,r);case 37:return En(n,6160,6169,!0,r);case 38:return En(n,4160,4169,!0,r);case 39:return En(n,2918,2927,!0,r);case 40:return En(n,1776,1785,!0,r);case 43:return En(n,3046,3055,!0,r);case 44:return En(n,3174,3183,!0,r);case 45:return En(n,3664,3673,!0,r);case 46:return En(n,3872,3881,!0,r);case 3:default:return En(n,48,57,!0,r)}},FW="data-html2canvas-ignore",FH=function(){function n(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new Lpe,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,t){var r=this,i=Hpe(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,a=e.defaultView.pageYOffset,o=i.contentWindow,l=o.document,A=$pe(i).then(function(){return mi(r,void 0,void 0,function(){var c,u;return ti(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(Xpe),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),c=this.options.onclone,u=this.clonedReferenceElement,typeof u>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Kpe(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(l,u)}).then(function(){return i})]:[2,i]}})})});return l.open(),l.write(zpe(document.doctype)+"<html></html>"),Wpe(this.referenceElement.ownerDocument,s,a),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),A},n.prototype.createElementClone=function(e){if(YF(e,2))debugger;if(SW(e))return this.createCanvasClone(e);if(BH(e))return this.createVideoClone(e);if(EH(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return ek(t)&&(ek(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),CH(t)?this.createCustomElementClone(t):t},n.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return EP(e.style,t),t},n.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(s,a){return a&&typeof a.cssText=="string"?s+a.cssText:s},""),i=e.cloneNode(!1);return i.textContent=r,i}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var s=e.getContext("2d"),a=i.getContext("2d");if(a)if(!this.options.allowTaint&&s)a.putImageData(s.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}a.drawImage(e,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},n.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},n.prototype.appendChildNode=function(e,t,r){(!zg(t)||!Mpe(t)&&!t.hasAttribute(FW)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!zg(t)||!EH(t))&&e.appendChild(this.cloneNode(t,r))},n.prototype.cloneChildNodes=function(e,t,r){for(var i=this,s=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;s;s=s.nextSibling)if(zg(s)&&TW(s)&&typeof s.assignedNodes=="function"){var a=s.assignedNodes();a.length&&a.forEach(function(o){return i.appendChildNode(t,o,r)})}else this.appendChildNode(t,s,r)},n.prototype.cloneNode=function(e,t){if(CW(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&zg(e)&&(ZF(e)||iC(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var s=r.getComputedStyle(e),a=r.getComputedStyle(e,":before"),o=r.getComputedStyle(e,":after");this.referenceElement===e&&ZF(i)&&(this.clonedReferenceElement=i),yU(i)&&Jpe(i);var l=this.counters.parse(new lH(this.context,s)),A=this.resolvePseudoContent(e,i,a,Iv.BEFORE);CH(e)&&(t=!0),BH(e)||this.cloneChildNodes(e,i,t),A&&i.insertBefore(A,i.firstChild);var c=this.resolvePseudoContent(e,i,o,Iv.AFTER);return c&&i.appendChild(c),this.counters.pop(l),(s&&(this.options.copyStyles||iC(e))&&!IW(e)||t)&&EP(s,i),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(R1(e)||M1(e))&&(R1(i)||M1(i))&&(i.value=e.value),i}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,t,r,i){var s=this;if(r){var a=r.content,o=t.ownerDocument;if(!(!o||!a||a==="none"||a==="-moz-alt-content"||r.display==="none")){this.counters.parse(new lH(this.context,r));var l=new Dge(this.context,r),A=o.createElement("html2canvaspseudoelement");EP(r,A),l.content.forEach(function(u){if(u.type===0)A.appendChild(o.createTextNode(u.value));else if(u.type===22){var h=o.createElement("img");h.src=u.value,h.style.opacity="1",A.appendChild(h)}else if(u.type===18){if(u.name==="attr"){var g=u.values.filter(Tt);g.length&&A.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(u.name==="counter"){var p=u.values.filter(Xm),m=p[0],w=p[1];if(m&&Tt(m)){var v=s.counters.getCounterValue(m.value),b=w&&Tt(w)?XF.parse(s.context,w.value):3;A.appendChild(o.createTextNode(uw(v,b,!1)))}}else if(u.name==="counters"){var x=u.values.filter(Xm),m=x[0],E=x[1],w=x[2];if(m&&Tt(m)){var I=s.counters.getCounterValues(m.value),P=w&&Tt(w)?XF.parse(s.context,w.value):3,_=E&&E.type===0?E.value:"",T=I.map(function(U){return uw(U,P,!1)}).join(_);A.appendChild(o.createTextNode(T))}}}else if(u.type===20)switch(u.value){case"open-quote":A.appendChild(o.createTextNode(oH(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(o.createTextNode(oH(l.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(o.createTextNode(u.value))}}),A.className=tk+" "+nk;var c=i===Iv.BEFORE?" "+tk:" "+nk;return iC(t)?t.className.baseValue+=c:t.className+=c,A}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Iv;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Iv||(Iv={}));var Hpe=function(n,e){var t=n.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(FW,"true"),n.body.appendChild(t),t},Vpe=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},Kpe=function(n){return Promise.all([].slice.call(n.images,0).map(Vpe))},$pe=function(n){return new Promise(function(e,t){var r=n.contentWindow;if(!r)return t("No window assigned for iframe");var i=r.document;r.onload=n.onload=function(){r.onload=n.onload=null;var s=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(s),e(n))},50)}})},Gpe=["all","d","content"],EP=function(n,e){for(var t=n.length-1;t>=0;t--){var r=n.item(t);Gpe.indexOf(r)===-1&&e.style.setProperty(r,n.getPropertyValue(r))}return e},zpe=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},Wpe=function(n,e,t){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||t!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,t)},Xpe=function(n){var e=n[0],t=n[1],r=n[2];e.scrollLeft=t,e.scrollTop=r},Ype=":before",qpe=":after",tk="___html2canvas___pseudoelement_before",nk="___html2canvas___pseudoelement_after",kH=`{
    content: "" !important;
    display: none !important;
}`,Jpe=function(n){Zpe(n,"."+tk+Ype+kH+`
         .`+nk+qpe+kH)},Zpe=function(n,e){var t=n.ownerDocument;if(t){var r=t.createElement("style");r.textContent=e,n.appendChild(r)}},kW=function(){function n(){}return n.getOrigin=function(e){var t=n._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),eme=function(){function n(e,t){this.context=e,this._options=t,this._cache={}}return n.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(_P(e)||ime(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return mi(this,void 0,void 0,function(){var t,r,i,s,a=this;return ti(this,function(o){switch(o.label){case 0:return t=kW.isSameOrigin(e),r=!CP(e)&&this._options.useCORS===!0&&Nr.SUPPORT_CORS_IMAGES&&!t,i=!CP(e)&&!t&&!_P(e)&&typeof this._options.proxy=="string"&&Nr.SUPPORT_CORS_XHR&&!r,!t&&this._options.allowTaint===!1&&!CP(e)&&!_P(e)&&!i&&!r?[2]:(s=e,i?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,A){var c=new Image;c.onload=function(){return l(c)},c.onerror=A,(sme(s)||r)&&(c.crossOrigin="anonymous"),c.src=s,c.complete===!0&&setTimeout(function(){return l(c)},500),a._options.imageTimeout>0&&setTimeout(function(){return A("Timed out ("+a._options.imageTimeout+"ms) loading image")},a._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise(function(s,a){var o=Nr.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")s(l.response);else{var u=new FileReader;u.addEventListener("load",function(){return s(u.result)},!1),u.addEventListener("error",function(h){return a(h)},!1),u.readAsDataURL(l.response)}else a("Failed to proxy resource "+i+" with status code "+l.status)},l.onerror=a;var A=r.indexOf("?")>-1?"&":"?";if(l.open("GET",""+r+A+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),t._options.imageTimeout){var c=t._options.imageTimeout;l.timeout=c,l.ontimeout=function(){return a("Timed out ("+c+"ms) proxying "+i)}}l.send()})},n}(),tme=/^data:image\/svg\+xml/i,nme=/^data:image\/.*;base64,/i,rme=/^data:image\/.*/i,ime=function(n){return Nr.SUPPORT_SVG_DRAWING||!ame(n)},CP=function(n){return rme.test(n)},sme=function(n){return nme.test(n)},_P=function(n){return n.substr(0,4)==="blob"},ame=function(n){return n.substr(-3).toLowerCase()==="svg"||tme.test(n)},ve=function(){function n(e,t){this.type=0,this.x=e,this.y=t}return n.prototype.add=function(e,t){return new n(this.x+e,this.y+t)},n}(),hg=function(n,e,t){return new ve(n.x+(e.x-n.x)*t,n.y+(e.y-n.y)*t)},tE=function(){function n(e,t,r,i){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=i}return n.prototype.subdivide=function(e,t){var r=hg(this.start,this.startControl,e),i=hg(this.startControl,this.endControl,e),s=hg(this.endControl,this.end,e),a=hg(r,i,e),o=hg(i,s,e),l=hg(a,o,e);return t?new n(this.start,r,a,l):new n(l,o,s,this.end)},n.prototype.add=function(e,t){return new n(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),aa=function(n){return n.type===1},ome=function(){function n(e){var t=e.styles,r=e.bounds,i=Dy(t.borderTopLeftRadius,r.width,r.height),s=i[0],a=i[1],o=Dy(t.borderTopRightRadius,r.width,r.height),l=o[0],A=o[1],c=Dy(t.borderBottomRightRadius,r.width,r.height),u=c[0],h=c[1],g=Dy(t.borderBottomLeftRadius,r.width,r.height),p=g[0],m=g[1],w=[];w.push((s+l)/r.width),w.push((p+u)/r.width),w.push((a+m)/r.height),w.push((A+h)/r.height);var v=Math.max.apply(Math,w);v>1&&(s/=v,a/=v,l/=v,A/=v,u/=v,h/=v,p/=v,m/=v);var b=r.width-l,x=r.height-h,E=r.width-u,I=r.height-m,P=t.borderTopWidth,_=t.borderRightWidth,T=t.borderBottomWidth,k=t.borderLeftWidth,O=jt(t.paddingTop,e.bounds.width),U=jt(t.paddingRight,e.bounds.width),L=jt(t.paddingBottom,e.bounds.width),R=jt(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Yt(r.left+k/3,r.top+P/3,s-k/3,a-P/3,vt.TOP_LEFT):new ve(r.left+k/3,r.top+P/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Yt(r.left+b,r.top+P/3,l-_/3,A-P/3,vt.TOP_RIGHT):new ve(r.left+r.width-_/3,r.top+P/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Yt(r.left+E,r.top+x,u-_/3,h-T/3,vt.BOTTOM_RIGHT):new ve(r.left+r.width-_/3,r.top+r.height-T/3),this.bottomLeftBorderDoubleOuterBox=p>0||m>0?Yt(r.left+k/3,r.top+I,p-k/3,m-T/3,vt.BOTTOM_LEFT):new ve(r.left+k/3,r.top+r.height-T/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Yt(r.left+k*2/3,r.top+P*2/3,s-k*2/3,a-P*2/3,vt.TOP_LEFT):new ve(r.left+k*2/3,r.top+P*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Yt(r.left+b,r.top+P*2/3,l-_*2/3,A-P*2/3,vt.TOP_RIGHT):new ve(r.left+r.width-_*2/3,r.top+P*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Yt(r.left+E,r.top+x,u-_*2/3,h-T*2/3,vt.BOTTOM_RIGHT):new ve(r.left+r.width-_*2/3,r.top+r.height-T*2/3),this.bottomLeftBorderDoubleInnerBox=p>0||m>0?Yt(r.left+k*2/3,r.top+I,p-k*2/3,m-T*2/3,vt.BOTTOM_LEFT):new ve(r.left+k*2/3,r.top+r.height-T*2/3),this.topLeftBorderStroke=s>0||a>0?Yt(r.left+k/2,r.top+P/2,s-k/2,a-P/2,vt.TOP_LEFT):new ve(r.left+k/2,r.top+P/2),this.topRightBorderStroke=s>0||a>0?Yt(r.left+b,r.top+P/2,l-_/2,A-P/2,vt.TOP_RIGHT):new ve(r.left+r.width-_/2,r.top+P/2),this.bottomRightBorderStroke=u>0||h>0?Yt(r.left+E,r.top+x,u-_/2,h-T/2,vt.BOTTOM_RIGHT):new ve(r.left+r.width-_/2,r.top+r.height-T/2),this.bottomLeftBorderStroke=p>0||m>0?Yt(r.left+k/2,r.top+I,p-k/2,m-T/2,vt.BOTTOM_LEFT):new ve(r.left+k/2,r.top+r.height-T/2),this.topLeftBorderBox=s>0||a>0?Yt(r.left,r.top,s,a,vt.TOP_LEFT):new ve(r.left,r.top),this.topRightBorderBox=l>0||A>0?Yt(r.left+b,r.top,l,A,vt.TOP_RIGHT):new ve(r.left+r.width,r.top),this.bottomRightBorderBox=u>0||h>0?Yt(r.left+E,r.top+x,u,h,vt.BOTTOM_RIGHT):new ve(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=p>0||m>0?Yt(r.left,r.top+I,p,m,vt.BOTTOM_LEFT):new ve(r.left,r.top+r.height),this.topLeftPaddingBox=s>0||a>0?Yt(r.left+k,r.top+P,Math.max(0,s-k),Math.max(0,a-P),vt.TOP_LEFT):new ve(r.left+k,r.top+P),this.topRightPaddingBox=l>0||A>0?Yt(r.left+Math.min(b,r.width-_),r.top+P,b>r.width+_?0:Math.max(0,l-_),Math.max(0,A-P),vt.TOP_RIGHT):new ve(r.left+r.width-_,r.top+P),this.bottomRightPaddingBox=u>0||h>0?Yt(r.left+Math.min(E,r.width-k),r.top+Math.min(x,r.height-T),Math.max(0,u-_),Math.max(0,h-T),vt.BOTTOM_RIGHT):new ve(r.left+r.width-_,r.top+r.height-T),this.bottomLeftPaddingBox=p>0||m>0?Yt(r.left+k,r.top+Math.min(I,r.height-T),Math.max(0,p-k),Math.max(0,m-T),vt.BOTTOM_LEFT):new ve(r.left+k,r.top+r.height-T),this.topLeftContentBox=s>0||a>0?Yt(r.left+k+R,r.top+P+O,Math.max(0,s-(k+R)),Math.max(0,a-(P+O)),vt.TOP_LEFT):new ve(r.left+k+R,r.top+P+O),this.topRightContentBox=l>0||A>0?Yt(r.left+Math.min(b,r.width+k+R),r.top+P+O,b>r.width+k+R?0:l-k+R,A-(P+O),vt.TOP_RIGHT):new ve(r.left+r.width-(_+U),r.top+P+O),this.bottomRightContentBox=u>0||h>0?Yt(r.left+Math.min(E,r.width-(k+R)),r.top+Math.min(x,r.height+P+O),Math.max(0,u-(_+U)),h-(T+L),vt.BOTTOM_RIGHT):new ve(r.left+r.width-(_+U),r.top+r.height-(T+L)),this.bottomLeftContentBox=p>0||m>0?Yt(r.left+k+R,r.top+I,Math.max(0,p-(k+R)),m-(T+L),vt.BOTTOM_LEFT):new ve(r.left+k+R,r.top+r.height-(T+L))}return n}(),vt;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(vt||(vt={}));var Yt=function(n,e,t,r,i){var s=4*((Math.sqrt(2)-1)/3),a=t*s,o=r*s,l=n+t,A=e+r;switch(i){case vt.TOP_LEFT:return new tE(new ve(n,A),new ve(n,A-o),new ve(l-a,e),new ve(l,e));case vt.TOP_RIGHT:return new tE(new ve(n,e),new ve(n+a,e),new ve(l,A-o),new ve(l,A));case vt.BOTTOM_RIGHT:return new tE(new ve(l,e),new ve(l,e+o),new ve(n+a,A),new ve(n,A));case vt.BOTTOM_LEFT:default:return new tE(new ve(l,A),new ve(l-a,A),new ve(n,e+o),new ve(n,e))}},L1=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},lme=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Q1=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},Ame=function(){function n(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6}return n}(),nE=function(){function n(e,t){this.path=e,this.target=t,this.type=1}return n}(),cme=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),ume=function(n){return n.type===0},NW=function(n){return n.type===1},dme=function(n){return n.type===2},NH=function(n,e){return n.length===e.length?n.some(function(t,r){return t===e[r]}):!1},hme=function(n,e,t,r,i){return n.map(function(s,a){switch(a){case 0:return s.add(e,t);case 1:return s.add(e+r,t);case 2:return s.add(e+r,t+i);case 3:return s.add(e,t+i)}return s})},DW=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),OW=function(){function n(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new ome(this.container),this.container.styles.opacity<1&&this.effects.push(new cme(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Ame(r,i,s))}if(this.container.styles.overflowX!==0){var a=L1(this.curves),o=Q1(this.curves);NH(a,o)?this.effects.push(new nE(a,6)):(this.effects.push(new nE(a,2)),this.effects.push(new nE(o,4)))}}return n.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,i=this.effects.slice(0);r;){var s=r.effects.filter(function(l){return!NW(l)});if(t||r.container.styles.position!==0||!r.parent){if(i.unshift.apply(i,s),t=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var a=L1(r.curves),o=Q1(r.curves);NH(a,o)||i.unshift(new nE(o,6))}}else i.unshift.apply(i,s);r=r.parent}return i.filter(function(l){return qn(l.target,e)})},n}(),rk=function(n,e,t,r){n.container.elements.forEach(function(i){var s=qn(i.flags,4),a=qn(i.flags,2),o=new OW(i,n);qn(i.styles.display,2048)&&r.push(o);var l=qn(i.flags,8)?[]:r;if(s||a){var A=s||i.styles.isPositioned()?t:e,c=new DW(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;A.negativeZIndex.some(function(p,m){return u>p.element.container.styles.zIndex.order?(h=m,!1):h>0}),A.negativeZIndex.splice(h,0,c)}else if(u>0){var g=0;A.positiveZIndex.some(function(p,m){return u>=p.element.container.styles.zIndex.order?(g=m+1,!1):g>0}),A.positiveZIndex.splice(g,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);rk(o,c,s?c:t,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),rk(o,e,t,l);qn(i.flags,8)&&UW(i,l)})},UW=function(n,e){for(var t=n instanceof JF?n.start:1,r=n instanceof JF?n.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof vW&&typeof s.container.value=="number"&&s.container.value!==0&&(t=s.container.value),s.listValue=uw(t,s.container.styles.listStyleType,!0),t+=r?-1:1}},fme=function(n){var e=new OW(n,null),t=new DW(e),r=[];return rk(e,t,t,r),UW(e.container,r),t},DH=function(n,e){switch(e){case 0:return fa(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return fa(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return fa(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return fa(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},gme=function(n,e){switch(e){case 0:return fa(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return fa(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return fa(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return fa(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},pme=function(n,e){switch(e){case 0:return fa(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return fa(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return fa(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return fa(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},mme=function(n,e){switch(e){case 0:return rE(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return rE(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return rE(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return rE(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},rE=function(n,e){var t=[];return aa(n)?t.push(n.subdivide(.5,!1)):t.push(n),aa(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},fa=function(n,e,t,r){var i=[];return aa(n)?i.push(n.subdivide(.5,!1)):i.push(n),aa(t)?i.push(t.subdivide(.5,!0)):i.push(t),aa(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),aa(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},RW=function(n){var e=n.bounds,t=n.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},j1=function(n){var e=n.styles,t=n.bounds,r=jt(e.paddingLeft,t.width),i=jt(e.paddingRight,t.width),s=jt(e.paddingTop,t.width),a=jt(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},yme=function(n,e){return n===0?e.bounds:n===2?j1(e):RW(e)},vme=function(n,e){return n===0?e.bounds:n===2?j1(e):RW(e)},SP=function(n,e,t){var r=yme(Bg(n.styles.backgroundOrigin,e),n),i=vme(Bg(n.styles.backgroundClip,e),n),s=wme(Bg(n.styles.backgroundSize,e),t,r),a=s[0],o=s[1],l=Dy(Bg(n.styles.backgroundPosition,e),r.width-a,r.height-o),A=bme(Bg(n.styles.backgroundRepeat,e),l,s,r,i),c=Math.round(r.left+l[0]),u=Math.round(r.top+l[1]);return[A,c,u,a,o]},fg=function(n){return Tt(n)&&n.value===Ap.AUTO},iE=function(n){return typeof n=="number"},wme=function(n,e,t){var r=e[0],i=e[1],s=e[2],a=n[0],o=n[1];if(!a)return[0,0];if(Rn(a)&&o&&Rn(o))return[jt(a,t.width),jt(o,t.height)];var l=iE(s);if(Tt(a)&&(a.value===Ap.CONTAIN||a.value===Ap.COVER)){if(iE(s)){var A=t.width/t.height;return A<s!=(a.value===Ap.COVER)?[t.width,t.width/s]:[t.height*s,t.height]}return[t.width,t.height]}var c=iE(r),u=iE(i),h=c||u;if(fg(a)&&(!o||fg(o))){if(c&&u)return[r,i];if(!l&&!h)return[t.width,t.height];if(h&&l){var g=c?r:i*s,p=u?i:r/s;return[g,p]}var m=c?r:t.width,w=u?i:t.height;return[m,w]}if(l){var v=0,b=0;return Rn(a)?v=jt(a,t.width):Rn(o)&&(b=jt(o,t.height)),fg(a)?v=b*s:(!o||fg(o))&&(b=v/s),[v,b]}var x=null,E=null;if(Rn(a)?x=jt(a,t.width):o&&Rn(o)&&(E=jt(o,t.height)),x!==null&&(!o||fg(o))&&(E=c&&u?x/r*i:t.height),E!==null&&fg(a)&&(x=c&&u?E/i*r:t.width),x!==null&&E!==null)return[x,E];throw new Error("Unable to calculate background-size for element")},Bg=function(n,e){var t=n[e];return typeof t>"u"?n[0]:t},bme=function(n,e,t,r,i){var s=e[0],a=e[1],o=t[0],l=t[1];switch(n){case 2:return[new ve(Math.round(r.left),Math.round(r.top+a)),new ve(Math.round(r.left+r.width),Math.round(r.top+a)),new ve(Math.round(r.left+r.width),Math.round(l+r.top+a)),new ve(Math.round(r.left),Math.round(l+r.top+a))];case 3:return[new ve(Math.round(r.left+s),Math.round(r.top)),new ve(Math.round(r.left+s+o),Math.round(r.top)),new ve(Math.round(r.left+s+o),Math.round(r.height+r.top)),new ve(Math.round(r.left+s),Math.round(r.height+r.top))];case 1:return[new ve(Math.round(r.left+s),Math.round(r.top+a)),new ve(Math.round(r.left+s+o),Math.round(r.top+a)),new ve(Math.round(r.left+s+o),Math.round(r.top+a+l)),new ve(Math.round(r.left+s),Math.round(r.top+a+l))];default:return[new ve(Math.round(i.left),Math.round(i.top)),new ve(Math.round(i.left+i.width),Math.round(i.top)),new ve(Math.round(i.left+i.width),Math.round(i.height+i.top)),new ve(Math.round(i.left),Math.round(i.height+i.top))]}},xme="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",OH="Hidden Text",Bme=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",a.appendChild(r),i.src=xme,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(OH)),r.appendChild(s),r.appendChild(i);var o=i.offsetTop-s.offsetTop+2;r.removeChild(s),r.appendChild(this._document.createTextNode(OH)),r.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-r.offsetTop+2;return a.removeChild(r),{baseline:o,middle:l}},n.prototype.getMetrics=function(e,t){var r=e+" "+t;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},n}(),MW=function(){function n(e,t){this.context=e,this.options=t}return n}(),Eme=1e4,Cme=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i._activeEffects=[],i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),r.canvas||(i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px"),i.fontMetrics=new Bme(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),i}return e.prototype.applyEffects=function(t){for(var r=this;this._activeEffects.length;)this.popEffect();t.forEach(function(i){return r.applyEffect(i)})},e.prototype.applyEffect=function(t){this.ctx.save(),dme(t)&&(this.ctx.globalAlpha=t.opacity),ume(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),NW(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return mi(this,void 0,void 0,function(){var r;return ti(this,function(i){switch(i.label){case 0:return r=t.element.container.styles,r.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return mi(this,void 0,void 0,function(){return ti(this,function(r){switch(r.label){case 0:if(qn(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(t)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,r,i){var s=this;if(r===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i);else{var a=pU(t.text);a.reduce(function(o,l){return s.ctx.fillText(l,o,t.bounds.top+i),o+s.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var r=t.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=Pme(t.fontFamily).join(", "),s=xx(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,r,t.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(t,r){return mi(this,void 0,void 0,function(){var i,s,a,o,l,A,c,u,h=this;return ti(this,function(g){return i=this.createFontStyle(r),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),A=l.baseline,c=l.middle,u=r.paintOrder,t.textBounds.forEach(function(p){u.forEach(function(m){switch(m){case 0:h.ctx.fillStyle=or(r.color),h.renderTextWithLetterSpacing(p,r.letterSpacing,A);var w=r.textShadow;w.length&&p.text.trim().length&&(w.slice(0).reverse().forEach(function(v){h.ctx.shadowColor=or(v.color),h.ctx.shadowOffsetX=v.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=v.offsetY.number*h.options.scale,h.ctx.shadowBlur=v.blur.number,h.renderTextWithLetterSpacing(p,r.letterSpacing,A)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),r.textDecorationLine.length&&(h.ctx.fillStyle=or(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(v){switch(v){case 1:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top+A),p.bounds.width,1);break;case 2:h.ctx.fillRect(p.bounds.left,Math.round(p.bounds.top),p.bounds.width,1);break;case 3:h.ctx.fillRect(p.bounds.left,Math.ceil(p.bounds.top+c),p.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&p.text.trim().length&&(h.ctx.strokeStyle=or(r.webkitTextStrokeColor),h.ctx.lineWidth=r.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(p.text,p.bounds.left,p.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,r,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var s=j1(t),a=Q1(r);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return mi(this,void 0,void 0,function(){var r,i,s,a,o,l,b,b,A,c,u,h,E,g,p,I,m,w,v,b,x,E,I;return ti(this,function(P){switch(P.label){case 0:this.applyEffects(t.getEffects(4)),r=t.container,i=t.curves,s=r.styles,a=0,o=r.textNodes,P.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,s)]):[3,4];case 2:P.sent(),P.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof pW))return[3,8];P.label=5;case 5:return P.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return b=P.sent(),this.renderReplacedElement(r,i,b),[3,8];case 7:return P.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof mW&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof yW))return[3,12];P.label=9;case 9:return P.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return b=P.sent(),this.renderReplacedElement(r,i,b),[3,12];case 11:return P.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof xW&&r.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,A.render(r.tree)]):[3,14];case 13:c=P.sent(),r.width&&r.height&&this.ctx.drawImage(c,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),P.label=14;case 14:if(r instanceof mU&&(u=Math.min(r.bounds.width,r.bounds.height),r.type===O1?r.checked&&(this.ctx.save(),this.path([new ve(r.bounds.left+u*.39363,r.bounds.top+u*.79),new ve(r.bounds.left+u*.16,r.bounds.top+u*.5549),new ve(r.bounds.left+u*.27347,r.bounds.top+u*.44071),new ve(r.bounds.left+u*.39694,r.bounds.top+u*.5649),new ve(r.bounds.left+u*.72983,r.bounds.top+u*.23),new ve(r.bounds.left+u*.84,r.bounds.top+u*.34085),new ve(r.bounds.left+u*.39363,r.bounds.top+u*.79)]),this.ctx.fillStyle=or(xH),this.ctx.fill(),this.ctx.restore()):r.type===U1&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+u/2,r.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=or(xH),this.ctx.fill(),this.ctx.restore())),_me(r)&&r.value.length){switch(h=this.createFontStyle(s),E=h[0],g=h[1],p=this.fontMetrics.getMetrics(E,g).baseline,this.ctx.font=E,this.ctx.fillStyle=or(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ime(r.styles.textAlign),I=j1(r),m=0,r.styles.textAlign){case 1:m+=I.width/2;break;case 2:m+=I.width;break}w=I.add(m,0,0,-I.height/2+1),this.ctx.save(),this.path([new ve(I.left,I.top),new ve(I.left+I.width,I.top),new ve(I.left+I.width,I.top+I.height),new ve(I.left,I.top+I.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Sv(r.value,w),s.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!qn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(v=r.styles.listStyleImage,v.type!==0)return[3,18];b=void 0,x=v.url,P.label=15;case 15:return P.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return b=P.sent(),this.ctx.drawImage(b,r.bounds.left-(b.width+10),r.bounds.top),[3,18];case 17:return P.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:t.listValue&&r.styles.listStyleType!==-1&&(E=this.createFontStyle(s)[0],this.ctx.font=E,this.ctx.fillStyle=or(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",I=new SA(r.bounds.left,r.bounds.top+jt(r.styles.paddingTop,r.bounds.width),r.bounds.width,sH(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Sv(t.listValue,I),s.letterSpacing,sH(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),P.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return mi(this,void 0,void 0,function(){var r,i,v,s,a,v,o,l,v,A,c,v,u,h,v,g,p,v,m,w,v;return ti(this,function(b){switch(b.label){case 0:if(qn(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:b.sent(),r=0,i=t.negativeZIndex,b.label=2;case 2:return r<i.length?(v=i[r],[4,this.renderStack(v)]):[3,5];case 3:b.sent(),b.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:b.sent(),s=0,a=t.nonInlineLevel,b.label=7;case 7:return s<a.length?(v=a[s],[4,this.renderNode(v)]):[3,10];case 8:b.sent(),b.label=9;case 9:return s++,[3,7];case 10:o=0,l=t.nonPositionedFloats,b.label=11;case 11:return o<l.length?(v=l[o],[4,this.renderStack(v)]):[3,14];case 12:b.sent(),b.label=13;case 13:return o++,[3,11];case 14:A=0,c=t.nonPositionedInlineLevel,b.label=15;case 15:return A<c.length?(v=c[A],[4,this.renderStack(v)]):[3,18];case 16:b.sent(),b.label=17;case 17:return A++,[3,15];case 18:u=0,h=t.inlineLevel,b.label=19;case 19:return u<h.length?(v=h[u],[4,this.renderNode(v)]):[3,22];case 20:b.sent(),b.label=21;case 21:return u++,[3,19];case 22:g=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,b.label=23;case 23:return g<p.length?(v=p[g],[4,this.renderStack(v)]):[3,26];case 24:b.sent(),b.label=25;case 25:return g++,[3,23];case 26:m=0,w=t.positiveZIndex,b.label=27;case 27:return m<w.length?(v=w[m],[4,this.renderStack(v)]):[3,30];case 28:b.sent(),b.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var r=this;t.forEach(function(i,s){var a=aa(i)?i.start:i;s===0?r.ctx.moveTo(a.x,a.y):r.ctx.lineTo(a.x,a.y),aa(i)&&r.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(t,r,i,s){this.path(t),this.ctx.fillStyle=r,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(t,r,i){var s;if(t.width===r&&t.height===i)return t;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,r),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,r,i),o},e.prototype.renderBackgroundImage=function(t){return mi(this,void 0,void 0,function(){var r,i,s,a,o,l;return ti(this,function(A){switch(A.label){case 0:r=t.styles.backgroundImage.length-1,i=function(c){var u,h,g,O,te,ee,R,re,T,p,O,te,ee,R,re,m,w,v,b,x,E,I,P,_,T,k,O,U,L,R,re,he,te,ee,Z,ae,fe,Ue,ie,we,Ye,j;return ti(this,function(G){switch(G.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,G.label=1;case 1:return G.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=G.sent(),[3,4];case 3:return G.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(g=SP(t,r,[u.width,u.height,u.width/u.height]),O=g[0],te=g[1],ee=g[2],R=g[3],re=g[4],T=s.ctx.createPattern(s.resizeImage(u,R,re),"repeat"),s.renderRepeat(O,T,te,ee)),[3,6];case 5:ufe(c)?(p=SP(t,r,[null,null,null]),O=p[0],te=p[1],ee=p[2],R=p[3],re=p[4],m=afe(c.angle,R,re),w=m[0],v=m[1],b=m[2],x=m[3],E=m[4],I=document.createElement("canvas"),I.width=R,I.height=re,P=I.getContext("2d"),_=P.createLinearGradient(v,x,b,E),rH(c.stops,w).forEach(function(Q){return _.addColorStop(Q.stop,or(Q.color))}),P.fillStyle=_,P.fillRect(0,0,R,re),R>0&&re>0&&(T=s.ctx.createPattern(I,"repeat"),s.renderRepeat(O,T,te,ee))):dfe(c)&&(k=SP(t,r,[null,null,null]),O=k[0],U=k[1],L=k[2],R=k[3],re=k[4],he=c.position.length===0?[hU]:c.position,te=jt(he[0],R),ee=jt(he[he.length-1],re),Z=ofe(c,te,ee,R,re),ae=Z[0],fe=Z[1],ae>0&&fe>0&&(Ue=s.ctx.createRadialGradient(U+te,L+ee,0,U+te,L+ee,ae),rH(c.stops,ae*2).forEach(function(Q){return Ue.addColorStop(Q.stop,or(Q.color))}),s.path(O),s.ctx.fillStyle=Ue,ae!==fe?(ie=t.bounds.left+.5*t.bounds.width,we=t.bounds.top+.5*t.bounds.height,Ye=fe/ae,j=1/Ye,s.ctx.save(),s.ctx.translate(ie,we),s.ctx.transform(1,0,0,Ye,0,0),s.ctx.translate(-ie,-we),s.ctx.fillRect(U,j*(L-we)+we,R,re*j),s.ctx.restore()):s.ctx.fill())),G.label=6;case 6:return r--,[2]}})},s=this,a=0,o=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return a<o.length?(l=o[a],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,r,i){return mi(this,void 0,void 0,function(){return ti(this,function(s){return this.path(DH(i,r)),this.ctx.fillStyle=or(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,r,i,s){return mi(this,void 0,void 0,function(){var a,o;return ti(this,function(l){switch(l.label){case 0:return r<3?[4,this.renderSolidBorder(t,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return a=gme(s,i),this.path(a),this.ctx.fillStyle=or(t),this.ctx.fill(),o=pme(s,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return mi(this,void 0,void 0,function(){var r,i,s,a,o,l,A,c,u=this;return ti(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),r=t.container.styles,i=!Nu(r.backgroundColor)||r.backgroundImage.length,s=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],a=Sme(Bg(r.backgroundClip,0),t.curves),i||r.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Nu(r.backgroundColor)||(this.ctx.fillStyle=or(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(g){u.ctx.save();var p=L1(t.curves),m=g.inset?0:Eme,w=hme(p,-m+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(u.path(p),u.ctx.clip(),u.mask(w)):(u.mask(p),u.ctx.clip(),u.path(w)),u.ctx.shadowOffsetX=g.offsetX.number+m,u.ctx.shadowOffsetY=g.offsetY.number,u.ctx.shadowColor=or(g.color),u.ctx.shadowBlur=g.blur.number,u.ctx.fillStyle=g.inset?or(g.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,l=0,A=s,h.label=3;case 3:return l<A.length?(c=A[l],c.style!==0&&!Nu(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,r,i,s,a){return mi(this,void 0,void 0,function(){var o,l,A,c,u,h,g,p,m,w,v,b,x,E,I,P,I,P;return ti(this,function(_){return this.ctx.save(),o=mme(s,i),l=DH(s,i),a===2&&(this.path(l),this.ctx.clip()),aa(l[0])?(A=l[0].start.x,c=l[0].start.y):(A=l[0].x,c=l[0].y),aa(l[1])?(u=l[1].end.x,h=l[1].end.y):(u=l[1].x,h=l[1].y),i===0||i===2?g=Math.abs(A-u):g=Math.abs(c-h),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),p=r<3?r*3:r*2,m=r<3?r*2:r,a===3&&(p=r,m=r),w=!0,g<=p*2?w=!1:g<=p*2+m?(v=g/(2*p+m),p*=v,m*=v):(b=Math.floor((g+m)/(p+m)),x=(g-b*p)/(b-1),E=(g-(b+1)*p)/b,m=E<=0||Math.abs(m-x)<Math.abs(m-E)?x:E),w&&(a===3?this.ctx.setLineDash([0,p+m]):this.ctx.setLineDash([p,m])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=or(t),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(aa(l[0])&&(I=l[3],P=l[0],this.ctx.beginPath(),this.formatPath([new ve(I.end.x,I.end.y),new ve(P.start.x,P.start.y)]),this.ctx.stroke()),aa(l[1])&&(I=l[1],P=l[2],this.ctx.beginPath(),this.formatPath([new ve(I.end.x,I.end.y),new ve(P.start.x,P.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return mi(this,void 0,void 0,function(){var r;return ti(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=fme(t),[4,this.renderStack(r)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(MW),_me=function(n){return n instanceof bW||n instanceof wW?!0:n instanceof mU&&n.type!==U1&&n.type!==O1},Sme=function(n,e){switch(n){case 0:return L1(e);case 2:return lme(e);case 1:default:return Q1(e)}},Ime=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Tme=["-apple-system","system-ui"],Pme=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return Tme.indexOf(e)===-1}):n},Fme=function(n){to(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.canvas=r.canvas?r.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=r,i.canvas.width=Math.floor(r.width*r.scale),i.canvas.height=Math.floor(r.height*r.scale),i.canvas.style.width=r.width+"px",i.canvas.style.height=r.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-r.x,-r.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),i}return e.prototype.render=function(t){return mi(this,void 0,void 0,function(){var r,i;return ti(this,function(s){switch(s.label){case 0:return r=qF(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,kme(r)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=or(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(MW),kme=function(n){return new Promise(function(e,t){var r=new Image;r.onload=function(){e(r)},r.onerror=t,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},Nme=function(){function n(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,UB([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,UB([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,UB([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,UB([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),Dme=function(){function n(e,t){var r;this.windowBounds=t,this.instanceName="#"+n.instanceCount++,this.logger=new Nme({id:this.instanceName,enabled:e.logging}),this.cache=(r=e.cache)!==null&&r!==void 0?r:new eme(this,e)}return n.instanceCount=1,n}(),LW=function(n,e){return e===void 0&&(e={}),Ome(n,e)};typeof window<"u"&&kW.setContext(window);var Ome=function(n,e){return mi(void 0,void 0,void 0,function(){var t,r,i,s,a,o,l,A,c,u,h,g,p,m,w,v,b,x,E,I,_,P,_,T,k,O,U,L,R,re,he,te,ee,Z,ae,fe,Ue,ie,we,Ye;return ti(this,function(j){switch(j.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=n.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(r=t.defaultView,!r)throw new Error("Document is not attached to a Window");return i={allowTaint:(T=e.allowTaint)!==null&&T!==void 0?T:!1,imageTimeout:(k=e.imageTimeout)!==null&&k!==void 0?k:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},s=UF({logging:(U=e.logging)!==null&&U!==void 0?U:!0,cache:e.cache},i),a={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:r.innerWidth,windowHeight:(R=e.windowHeight)!==null&&R!==void 0?R:r.innerHeight,scrollX:(re=e.scrollX)!==null&&re!==void 0?re:r.pageXOffset,scrollY:(he=e.scrollY)!==null&&he!==void 0?he:r.pageYOffset},o=new SA(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),l=new Dme(s,o),A=(te=e.foreignObjectRendering)!==null&&te!==void 0?te:!1,c={allowTaint:(ee=e.allowTaint)!==null&&ee!==void 0?ee:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),u=new FH(l,n,c),h=u.clonedReferenceElement,h?[4,u.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=j.sent(),p=yU(h)||Rpe(h)?hde(h.ownerDocument):WS(l,h),m=p.width,w=p.height,v=p.left,b=p.top,x=Ume(l,h,e.backgroundColor),E={canvas:e.canvas,backgroundColor:x,scale:(ae=(Z=e.scale)!==null&&Z!==void 0?Z:r.devicePixelRatio)!==null&&ae!==void 0?ae:1,x:((fe=e.x)!==null&&fe!==void 0?fe:0)+v,y:((Ue=e.y)!==null&&Ue!==void 0?Ue:0)+b,width:(ie=e.width)!==null&&ie!==void 0?ie:Math.ceil(m),height:(we=e.height)!==null&&we!==void 0?we:Math.ceil(w)},A?(l.logger.debug("Document cloned, using foreign object rendering"),_=new Fme(l,E),[4,_.render(h)]):[3,3];case 2:return I=j.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+v+","+b+" with size "+m+"x"+w+" using computed rendering"),l.logger.debug("Starting DOM parsing"),P=EW(l,h),x===P.styles.backgroundColor&&(P.styles.backgroundColor=gA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+E.x+","+E.y+" with size "+E.width+"x"+E.height),_=new Cme(l,E),[4,_.render(P)];case 4:I=j.sent(),j.label=5;case 5:return(!((Ye=e.removeContainer)!==null&&Ye!==void 0)||Ye)&&(FH.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,I]}})})},Ume=function(n,e,t){var r=e.ownerDocument,i=r.documentElement?Cv(n,getComputedStyle(r.documentElement).backgroundColor):gA.TRANSPARENT,s=r.body?Cv(n,getComputedStyle(r.body).backgroundColor):gA.TRANSPARENT,a=typeof t=="string"?Cv(n,t):t===null?gA.TRANSPARENT:4294967295;return e===r.documentElement?Nu(i)?Nu(s)?a:s:i:a};const Rme=Object.freeze(Object.defineProperty({__proto__:null,default:LW},Symbol.toStringTag,{value:"Module"}));function QW(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=QW(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function gt(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=QW(n))&&(r&&(r+=" "),r+=e);return r}var iI={},jW={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==="__proto__"}n.isUnsafeProperty=e})(jW);var vU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}n.isDeepKey=e})(vU);var wU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var r;return typeof t=="string"||typeof t=="symbol"?t:Object.is((r=t==null?void 0:t.valueOf)==null?void 0:r.call(t),-0)?"-0":String(t)}n.toKey=e})(wU);var sI={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){const r=[],i=t.length;if(i===0)return r;let s=0,a="",o="",l=!1;for(t.charCodeAt(0)===46&&(r.push(""),s++);s<i;){const A=t[s];o?A==="\\"&&s+1<i?(s++,a+=t[s]):A===o?o="":a+=A:l?A==='"'||A==="'"?o=A:A==="]"?(l=!1,r.push(a),a=""):a+=A:A==="["?(l=!0,a&&(r.push(a),a="")):A==="."?a&&(r.push(a),a=""):a+=A,s++}return a&&r.push(a),r}n.toPath=e})(sI);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jW,t=vU,r=wU,i=sI;function s(o,l,A){if(o==null)return A;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return A;const c=o[l];return c===void 0?t.isDeepKey(l)?s(o,i.toPath(l),A):A:c}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const c=o[l];return c===void 0?A:c}default:{if(Array.isArray(l))return a(o,l,A);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return A;const c=o[l];return c===void 0?A:c}}}function a(o,l,A){if(l.length===0)return A;let c=o;for(let u=0;u<l.length;u++){if(c==null||e.isUnsafeProperty(l[u]))return A;c=c[l[u]]}return c===void 0?A:c}n.get=s})(iI);var Mme=iI.get;const Wu=Yo(Mme);var HW={exports:{}},Rt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bU=Symbol.for("react.transitional.element"),xU=Symbol.for("react.portal"),aI=Symbol.for("react.fragment"),oI=Symbol.for("react.strict_mode"),lI=Symbol.for("react.profiler"),AI=Symbol.for("react.consumer"),cI=Symbol.for("react.context"),uI=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),hI=Symbol.for("react.suspense_list"),fI=Symbol.for("react.memo"),gI=Symbol.for("react.lazy"),Lme=Symbol.for("react.view_transition"),Qme=Symbol.for("react.client.reference");function Ca(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case bU:switch(n=n.type,n){case aI:case lI:case oI:case dI:case hI:case Lme:return n;default:switch(n=n&&n.$$typeof,n){case cI:case uI:case gI:case fI:return n;case AI:return n;default:return e}}case xU:return e}}}Rt.ContextConsumer=AI;Rt.ContextProvider=cI;Rt.Element=bU;Rt.ForwardRef=uI;Rt.Fragment=aI;Rt.Lazy=gI;Rt.Memo=fI;Rt.Portal=xU;Rt.Profiler=lI;Rt.StrictMode=oI;Rt.Suspense=dI;Rt.SuspenseList=hI;Rt.isContextConsumer=function(n){return Ca(n)===AI};Rt.isContextProvider=function(n){return Ca(n)===cI};Rt.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===bU};Rt.isForwardRef=function(n){return Ca(n)===uI};Rt.isFragment=function(n){return Ca(n)===aI};Rt.isLazy=function(n){return Ca(n)===gI};Rt.isMemo=function(n){return Ca(n)===fI};Rt.isPortal=function(n){return Ca(n)===xU};Rt.isProfiler=function(n){return Ca(n)===lI};Rt.isStrictMode=function(n){return Ca(n)===oI};Rt.isSuspense=function(n){return Ca(n)===dI};Rt.isSuspenseList=function(n){return Ca(n)===hI};Rt.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===aI||n===lI||n===oI||n===dI||n===hI||typeof n=="object"&&n!==null&&(n.$$typeof===gI||n.$$typeof===fI||n.$$typeof===cI||n.$$typeof===AI||n.$$typeof===uI||n.$$typeof===Qme||n.getModuleId!==void 0)};Rt.typeOf=Ca;HW.exports=Rt;var jme=HW.exports,yr=n=>n===0?0:n>0?1:-1,Ds=n=>typeof n=="number"&&n!=+n,Gd=n=>typeof n=="string"&&n.indexOf("%")===n.length-1,Be=n=>(typeof n=="number"||n instanceof Number)&&!Ds(n),Go=n=>Be(n)||typeof n=="string",Hme=0,dw=n=>{var e=++Hme;return"".concat(n||"").concat(e)},Ii=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Be(e)&&typeof e!="string")return r;var s;if(Gd(e)){if(t==null)return r;var a=e.indexOf("%");s=t*parseFloat(e.slice(0,a))/100}else s=+e;return Ds(s)&&(s=r),i&&t!=null&&s>t&&(s=t),s},VW=n=>{if(!Array.isArray(n))return!1;for(var e=n.length,t={},r=0;r<e;r++)if(!t[n[r]])t[n[r]]=!0;else return!0;return!1},UH=(n,e)=>Be(n)&&Be(e)?t=>n+t*(e-n):()=>e;function $a(n,e,t){return Be(n)&&Be(e)?n+t*(e-n):e}function KW(n,e,t){if(!(!n||!n.length))return n.find(r=>r&&(typeof e=="function"?e(r):Wu(r,e))===t)}var Xt=n=>n===null||typeof n>"u",Bx=n=>Xt(n)?n:"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1)),Vme=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function BU(n){if(typeof n!="string")return!1;var e=Vme;return e.includes(n)}var Kme=["viewBox","children"],RH=["points","pathLength"],IP={svg:Kme,polygon:RH,polyline:RH},EU=(n,e)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var t=n;if(B.isValidElement(n)&&(t=n.props),typeof t!="object"&&typeof t!="function")return null;var r={};return Object.keys(t).forEach(i=>{BU(i)&&(r[i]=s=>t[i](t,s))}),r},$me=(n,e,t)=>r=>(n(e,t,r),null),Ex=(n,e,t)=>{if(n===null||typeof n!="object"&&typeof n!="function")return null;var r=null;return Object.keys(n).forEach(i=>{var s=n[i];BU(i)&&typeof s=="function"&&(r||(r={}),r[i]=$me(s,e,t))}),r},Gme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function $W(n){if(typeof n!="string")return!1;var e=Gme;return e.includes(n)}function MA(n){var e=Object.entries(n).filter(t=>{var[r]=t;return $W(r)});return Object.fromEntries(e)}var MH=n=>typeof n=="string"?n:n?n.displayName||n.name||"Component":"",LH=null,TP=null,GW=n=>{if(n===LH&&Array.isArray(TP))return TP;var e=[];return B.Children.forEach(n,t=>{Xt(t)||(jme.isFragment(t)?e=e.concat(GW(t.props.children)):e.push(t))}),TP=e,LH=n,e};function Cx(n,e){var t=[],r=[];return Array.isArray(e)?r=e.map(i=>MH(i)):r=[MH(e)],GW(n).forEach(i=>{var s=Wu(i,"type.displayName")||Wu(i,"type.name");r.indexOf(s)!==-1&&t.push(i)}),t}var zW=n=>n&&typeof n=="object"&&"clipDot"in n?!!n.clipDot:!0,zme=(n,e,t,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var s=(i=r&&(IP==null?void 0:IP[r]))!==null&&i!==void 0?i:[],a=e.startsWith("data-"),o=typeof n!="function"&&(!!r&&s.includes(e)||$W(e)),l=!!t&&BU(e);return a||o||l},sn=(n,e,t)=>{if(!n||typeof n=="function"||typeof n=="boolean")return null;var r=n;if(B.isValidElement(n)&&(r=n.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(s=>{var a;zme((a=r)===null||a===void 0?void 0:a[s],s,e,t)&&(i[s]=r[s])}),i},Wme=["children","width","height","viewBox","className","style","title","desc"];function ik(){return ik=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ik.apply(null,arguments)}function Xme(n,e){if(n==null)return{};var t,r,i=Yme(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Yme(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var CU=B.forwardRef((n,e)=>{var{children:t,width:r,height:i,viewBox:s,className:a,style:o,title:l,desc:A}=n,c=Xme(n,Wme),u=s||{width:r,height:i,x:0,y:0},h=gt("recharts-surface",a);return B.createElement("svg",ik({},sn(c,!0,"svg"),{className:h,width:r,height:i,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height),ref:e}),B.createElement("title",null,l),B.createElement("desc",null,A),t)}),qme=["children","className"];function sk(){return sk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sk.apply(null,arguments)}function Jme(n,e){if(n==null)return{};var t,r,i=Zme(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Zme(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var li=B.forwardRef((n,e)=>{var{children:t,className:r}=n,i=Jme(n,qme),s=gt("recharts-layer",r);return B.createElement("g",sk({className:s},sn(i,!0),{ref:e}),t)}),WW=B.createContext(null),e0e=()=>B.useContext(WW);function Qt(n){return function(){return n}}const XW=Math.cos,H1=Math.sin,no=Math.sqrt,V1=Math.PI,pI=2*V1,ak=Math.PI,ok=2*ak,Sd=1e-6,t0e=ok-Sd;function YW(n){this._+=n[0];for(let e=1,t=n.length;e<t;++e)this._+=arguments[e]+n[e]}function n0e(n){let e=Math.floor(n);if(!(e>=0))throw new Error(`invalid digits: ${n}`);if(e>15)return YW;const t=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*t)/t+r[i]}}class r0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?YW:n0e(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,i){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,t,r,i,s,a){this._append`C${+e},${+t},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,r,i,s){if(e=+e,t=+t,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,A=i-t,c=a-e,u=o-t,h=c*c+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(h>Sd)if(!(Math.abs(u*l-A*c)>Sd)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let g=r-a,p=i-o,m=l*l+A*A,w=g*g+p*p,v=Math.sqrt(m),b=Math.sqrt(h),x=s*Math.tan((ak-Math.acos((m+h-w)/(2*v*b)))/2),E=x/b,I=x/v;Math.abs(E-1)>Sd&&this._append`L${e+E*c},${t+E*u}`,this._append`A${s},${s},0,0,${+(u*g>c*p)},${this._x1=e+I*l},${this._y1=t+I*A}`}}arc(e,t,r,i,s,a){if(e=+e,t=+t,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),A=e+o,c=t+l,u=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${A},${c}`:(Math.abs(this._x1-A)>Sd||Math.abs(this._y1-c)>Sd)&&this._append`L${A},${c}`,r&&(h<0&&(h=h%ok+ok),h>t0e?this._append`A${r},${r},0,1,${u},${e-o},${t-l}A${r},${r},0,1,${u},${this._x1=A},${this._y1=c}`:h>Sd&&this._append`A${r},${r},0,${+(h>=ak)},${u},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function _U(n){let e=3;return n.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const r=Math.floor(t);if(!(r>=0))throw new RangeError(`invalid digits: ${t}`);e=r}return n},()=>new r0e(e)}function SU(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function qW(n){this._context=n}qW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:this._context.lineTo(n,e);break}}};function mI(n){return new qW(n)}function JW(n){return n[0]}function ZW(n){return n[1]}function e9(n,e){var t=Qt(!0),r=null,i=mI,s=null,a=_U(o);n=typeof n=="function"?n:n===void 0?JW:Qt(n),e=typeof e=="function"?e:e===void 0?ZW:Qt(e);function o(l){var A,c=(l=SU(l)).length,u,h=!1,g;for(r==null&&(s=i(g=a())),A=0;A<=c;++A)!(A<c&&t(u=l[A],A,l))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+n(u,A,l),+e(u,A,l));if(g)return s=null,g+""||null}return o.x=function(l){return arguments.length?(n=typeof l=="function"?l:Qt(+l),o):n},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Qt(+l),o):e},o.defined=function(l){return arguments.length?(t=typeof l=="function"?l:Qt(!!l),o):t},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function sE(n,e,t){var r=null,i=Qt(!0),s=null,a=mI,o=null,l=_U(A);n=typeof n=="function"?n:n===void 0?JW:Qt(+n),e=typeof e=="function"?e:Qt(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?ZW:Qt(+t);function A(u){var h,g,p,m=(u=SU(u)).length,w,v=!1,b,x=new Array(m),E=new Array(m);for(s==null&&(o=a(b=l())),h=0;h<=m;++h){if(!(h<m&&i(w=u[h],h,u))===v)if(v=!v)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=g;--p)o.point(x[p],E[p]);o.lineEnd(),o.areaEnd()}v&&(x[h]=+n(w,h,u),E[h]=+e(w,h,u),o.point(r?+r(w,h,u):x[h],t?+t(w,h,u):E[h]))}if(b)return o=null,b+""||null}function c(){return e9().defined(i).curve(a).context(s)}return A.x=function(u){return arguments.length?(n=typeof u=="function"?u:Qt(+u),r=null,A):n},A.x0=function(u){return arguments.length?(n=typeof u=="function"?u:Qt(+u),A):n},A.x1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Qt(+u),A):r},A.y=function(u){return arguments.length?(e=typeof u=="function"?u:Qt(+u),t=null,A):e},A.y0=function(u){return arguments.length?(e=typeof u=="function"?u:Qt(+u),A):e},A.y1=function(u){return arguments.length?(t=u==null?null:typeof u=="function"?u:Qt(+u),A):t},A.lineX0=A.lineY0=function(){return c().x(n).y(e)},A.lineY1=function(){return c().x(n).y(t)},A.lineX1=function(){return c().x(r).y(e)},A.defined=function(u){return arguments.length?(i=typeof u=="function"?u:Qt(!!u),A):i},A.curve=function(u){return arguments.length?(a=u,s!=null&&(o=a(s)),A):a},A.context=function(u){return arguments.length?(u==null?s=o=null:o=a(s=u),A):s},A}class t9{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function i0e(n){return new t9(n,!0)}function s0e(n){return new t9(n,!1)}const IU={draw(n,e){const t=no(e/V1);n.moveTo(t,0),n.arc(0,0,t,0,pI)}},a0e={draw(n,e){const t=no(e/5)/2;n.moveTo(-3*t,-t),n.lineTo(-t,-t),n.lineTo(-t,-3*t),n.lineTo(t,-3*t),n.lineTo(t,-t),n.lineTo(3*t,-t),n.lineTo(3*t,t),n.lineTo(t,t),n.lineTo(t,3*t),n.lineTo(-t,3*t),n.lineTo(-t,t),n.lineTo(-3*t,t),n.closePath()}},n9=no(1/3),o0e=n9*2,l0e={draw(n,e){const t=no(e/o0e),r=t*n9;n.moveTo(0,-t),n.lineTo(r,0),n.lineTo(0,t),n.lineTo(-r,0),n.closePath()}},A0e={draw(n,e){const t=no(e),r=-t/2;n.rect(r,r,t,t)}},c0e=.8908130915292852,r9=H1(V1/10)/H1(7*V1/10),u0e=H1(pI/10)*r9,d0e=-XW(pI/10)*r9,h0e={draw(n,e){const t=no(e*c0e),r=u0e*t,i=d0e*t;n.moveTo(0,-t),n.lineTo(r,i);for(let s=1;s<5;++s){const a=pI*s/5,o=XW(a),l=H1(a);n.lineTo(l*t,-o*t),n.lineTo(o*r-l*i,l*r+o*i)}n.closePath()}},PP=no(3),f0e={draw(n,e){const t=-no(e/(PP*3));n.moveTo(0,t*2),n.lineTo(-PP*t,-t),n.lineTo(PP*t,-t),n.closePath()}},Vs=-.5,Ks=no(3)/2,lk=1/no(12),g0e=(lk/2+1)*3,p0e={draw(n,e){const t=no(e/g0e),r=t/2,i=t*lk,s=r,a=t*lk+t,o=-s,l=a;n.moveTo(r,i),n.lineTo(s,a),n.lineTo(o,l),n.lineTo(Vs*r-Ks*i,Ks*r+Vs*i),n.lineTo(Vs*s-Ks*a,Ks*s+Vs*a),n.lineTo(Vs*o-Ks*l,Ks*o+Vs*l),n.lineTo(Vs*r+Ks*i,Vs*i-Ks*r),n.lineTo(Vs*s+Ks*a,Vs*a-Ks*s),n.lineTo(Vs*o+Ks*l,Vs*l-Ks*o),n.closePath()}};function m0e(n,e){let t=null,r=_U(i);n=typeof n=="function"?n:Qt(n||IU),e=typeof e=="function"?e:Qt(e===void 0?64:+e);function i(){let s;if(t||(t=s=r()),n.apply(this,arguments).draw(t,+e.apply(this,arguments)),s)return t=null,s+""||null}return i.type=function(s){return arguments.length?(n=typeof s=="function"?s:Qt(s),i):n},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Qt(+s),i):e},i.context=function(s){return arguments.length?(t=s??null,i):t},i}function K1(){}function $1(n,e,t){n._context.bezierCurveTo((2*n._x0+n._x1)/3,(2*n._y0+n._y1)/3,(n._x0+2*n._x1)/3,(n._y0+2*n._y1)/3,(n._x0+4*n._x1+e)/6,(n._y0+4*n._y1+t)/6)}function i9(n){this._context=n}i9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$1(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function y0e(n){return new i9(n)}function s9(n){this._context=n}s9.prototype={areaStart:K1,areaEnd:K1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._x2=n,this._y2=e;break;case 1:this._point=2,this._x3=n,this._y3=e;break;case 2:this._point=3,this._x4=n,this._y4=e,this._context.moveTo((this._x0+4*this._x1+n)/6,(this._y0+4*this._y1+e)/6);break;default:$1(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function v0e(n){return new s9(n)}function a9(n){this._context=n}a9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+n)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 3:this._point=4;default:$1(this,n,e);break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e}};function w0e(n){return new a9(n)}function o9(n){this._context=n}o9.prototype={areaStart:K1,areaEnd:K1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(n,e){n=+n,e=+e,this._point?this._context.lineTo(n,e):(this._point=1,this._context.moveTo(n,e))}};function b0e(n){return new o9(n)}function QH(n){return n<0?-1:1}function jH(n,e,t){var r=n._x1-n._x0,i=e-n._x1,s=(n._y1-n._y0)/(r||i<0&&-0),a=(t-n._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(QH(s)+QH(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function HH(n,e){var t=n._x1-n._x0;return t?(3*(n._y1-n._y0)/t-e)/2:e}function FP(n,e,t){var r=n._x0,i=n._y0,s=n._x1,a=n._y1,o=(s-r)/3;n._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*t,s,a)}function G1(n){this._context=n}G1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FP(this,this._t0,HH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,e){var t=NaN;if(n=+n,e=+e,!(n===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;break;case 2:this._point=3,FP(this,HH(this,t=jH(this,n,e)),t);break;default:FP(this,this._t0,t=jH(this,n,e));break}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=e,this._t0=t}}};function l9(n){this._context=new A9(n)}(l9.prototype=Object.create(G1.prototype)).point=function(n,e){G1.prototype.point.call(this,e,n)};function A9(n){this._context=n}A9.prototype={moveTo:function(n,e){this._context.moveTo(e,n)},closePath:function(){this._context.closePath()},lineTo:function(n,e){this._context.lineTo(e,n)},bezierCurveTo:function(n,e,t,r,i,s){this._context.bezierCurveTo(e,n,r,t,s,i)}};function x0e(n){return new G1(n)}function B0e(n){return new l9(n)}function c9(n){this._context=n}c9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var n=this._x,e=this._y,t=n.length;if(t)if(this._line?this._context.lineTo(n[0],e[0]):this._context.moveTo(n[0],e[0]),t===2)this._context.lineTo(n[1],e[1]);else for(var r=VH(n),i=VH(e),s=0,a=1;a<t;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],n[a],e[a]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(n,e){this._x.push(+n),this._y.push(+e)}};function VH(n){var e,t=n.length-1,r,i=new Array(t),s=new Array(t),a=new Array(t);for(i[0]=0,s[0]=2,a[0]=n[0]+2*n[1],e=1;e<t-1;++e)i[e]=1,s[e]=4,a[e]=4*n[e]+2*n[e+1];for(i[t-1]=2,s[t-1]=7,a[t-1]=8*n[t-1]+n[t],e=1;e<t;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[t-1]=a[t-1]/s[t-1],e=t-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[t-1]=(n[t]+i[t-1])/2,e=0;e<t-1;++e)s[e]=2*n[e+1]-i[e+1];return[i,s]}function E0e(n){return new c9(n)}function yI(n,e){this._context=n,this._t=e}yI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(n,e){switch(n=+n,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(n,e);else{var t=this._x*(1-this._t)+n*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=n,this._y=e}};function C0e(n){return new yI(n,.5)}function _0e(n){return new yI(n,0)}function S0e(n){return new yI(n,1)}function Ym(n,e){if((a=n.length)>1)for(var t=1,r,i,s=n[e[0]],a,o=s.length;t<a;++t)for(i=s,s=n[e[t]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ak(n){for(var e=n.length,t=new Array(e);--e>=0;)t[e]=e;return t}function I0e(n,e){return n[e]}function T0e(n){const e=[];return e.key=n,e}function P0e(){var n=Qt([]),e=Ak,t=Ym,r=I0e;function i(s){var a=Array.from(n.apply(this,arguments),T0e),o,l=a.length,A=-1,c;for(const u of s)for(o=0,++A;o<l;++o)(a[o][A]=[0,+r(u,a[o].key,A,s)]).data=u;for(o=0,c=SU(e(a));o<l;++o)a[c[o]].index=o;return t(a,c),a}return i.keys=function(s){return arguments.length?(n=typeof s=="function"?s:Qt(Array.from(s)),i):n},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Ak:typeof s=="function"?s:Qt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(t=s??Ym,i):t},i}function F0e(n,e){if((r=n.length)>0){for(var t,r,i=0,s=n[0].length,a;i<s;++i){for(a=t=0;t<r;++t)a+=n[t][i][1]||0;if(a)for(t=0;t<r;++t)n[t][i][1]/=a}Ym(n,e)}}function k0e(n,e){if((i=n.length)>0){for(var t=0,r=n[e[0]],i,s=r.length;t<s;++t){for(var a=0,o=0;a<i;++a)o+=n[a][t][1]||0;r[t][1]+=r[t][0]=-o/2}Ym(n,e)}}function N0e(n,e){if(!(!((a=n.length)>0)||!((s=(i=n[e[0]]).length)>0))){for(var t=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,A=0;o<a;++o){for(var c=n[e[o]],u=c[r][1]||0,h=c[r-1][1]||0,g=(u-h)/2,p=0;p<o;++p){var m=n[e[p]],w=m[r][1]||0,v=m[r-1][1]||0;g+=w-v}l+=u,A+=g*u}i[r-1][1]+=i[r-1][0]=t,l&&(t-=A/l)}i[r-1][1]+=i[r-1][0]=t,Ym(n,e)}}var D0e=["type","size","sizeType"];function ck(){return ck=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ck.apply(null,arguments)}function KH(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function $H(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KH(Object(t),!0).forEach(function(r){O0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KH(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function O0e(n,e,t){return(e=U0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function U0e(n){var e=R0e(n,"string");return typeof e=="symbol"?e:e+""}function R0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function M0e(n,e){if(n==null)return{};var t,r,i=L0e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function L0e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var u9={symbolCircle:IU,symbolCross:a0e,symbolDiamond:l0e,symbolSquare:A0e,symbolStar:h0e,symbolTriangle:f0e,symbolWye:p0e},Q0e=Math.PI/180,j0e=n=>{var e="symbol".concat(Bx(n));return u9[e]||IU},H0e=(n,e,t)=>{if(e==="area")return n;switch(t){case"cross":return 5*n*n/9;case"diamond":return .5*n*n/Math.sqrt(3);case"square":return n*n;case"star":{var r=18*Q0e;return 1.25*n*n*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*n*n/4;case"wye":return(21-10*Math.sqrt(3))*n*n/8;default:return Math.PI*n*n/4}},V0e=(n,e)=>{u9["symbol".concat(Bx(n))]=e},TU=n=>{var{type:e="circle",size:t=64,sizeType:r="area"}=n,i=M0e(n,D0e),s=$H($H({},i),{},{type:e,size:t,sizeType:r}),a=()=>{var u=j0e(e),h=m0e().type(u).size(H0e(t,r,e));return h()},{className:o,cx:l,cy:A}=s,c=sn(s,!0);return l===+l&&A===+A&&t===+t?B.createElement("path",ck({},c,{className:gt("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(A,")"),d:a()})):null};TU.registerSymbol=V0e;function uk(){return uk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},uk.apply(null,arguments)}function GH(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function K0e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GH(Object(t),!0).forEach(function(r){PU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GH(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PU(n,e,t){return(e=$0e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $0e(n){var e=G0e(n,"string");return typeof e=="symbol"?e:e+""}function G0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Ta=32;class FU extends B.PureComponent{renderIcon(e,t){var{inactiveColor:r}=this.props,i=Ta/2,s=Ta/6,a=Ta/3,o=e.inactive?r:e.color,l=t??e.type;if(l==="none")return null;if(l==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Ta,y2:i,className:"recharts-legend-icon"});if(l==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Ta,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return B.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Ta/8,"h").concat(Ta,"v").concat(Ta*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(B.isValidElement(e.legendIcon)){var A=K0e({},e);return delete A.legendIcon,B.cloneElement(e.legendIcon,A)}return B.createElement(TU,{fill:o,cx:i,cy:i,size:Ta,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:r,formatter:i,inactiveColor:s,iconType:a}=this.props,o={x:0,y:0,width:Ta,height:Ta},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},A={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((c,u)=>{var h=c.formatter||i,g=gt({"recharts-legend-item":!0,["legend-item-".concat(u)]:!0,inactive:c.inactive});if(c.type==="none")return null;var p=c.inactive?s:c.color,m=h?h(c.value,c,u):c.value;return B.createElement("li",uk({className:g,style:l,key:"legend-item-".concat(u)},Ex(this.props,c,u)),B.createElement(CU,{width:t,height:t,viewBox:o,style:A,"aria-label":"".concat(m," legend icon")},this.renderIcon(c,a)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},m))})}render(){var{payload:e,layout:t,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:t==="horizontal"?r:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}PU(FU,"displayName","Legend");PU(FU,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var d9={},h9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){const i=new Map;for(let s=0;s<t.length;s++){const a=t[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}n.uniqBy=e})(h9);var kU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t}n.identity=e})(kU);var f9={},vI={},g9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Number.isSafeInteger(t)&&t>=0}n.isLength=e})(g9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=g9;function t(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}n.isArrayLike=t})(vI);var p9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="object"&&t!==null}n.isObjectLike=e})(p9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=vI,t=p9;function r(i){return t.isObjectLike(i)&&e.isArrayLike(i)}n.isArrayLikeObject=r})(f9);var m9={},y9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=iI;function t(r){return function(i){return e.get(i,r)}}n.property=t})(y9);var v9={},kP={},NP={},NU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}n.isObject=e})(NU);var DU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null||typeof t!="object"&&typeof t!="function"}n.isPrimitive=e})(DU);var wI={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r){return t===r||Number.isNaN(t)&&Number.isNaN(r)}n.eq=e})(wI);var zH;function z0e(){return zH||(zH=1,function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=OU(),t=NU,r=DU,i=wI;function s(u,h,g){return typeof g!="function"?e.isMatch(u,h):a(u,h,function p(m,w,v,b,x,E){const I=g(m,w,v,b,x,E);return I!==void 0?!!I:a(m,w,p,E)},new Map)}function a(u,h,g,p){if(h===u)return!0;switch(typeof h){case"object":return o(u,h,g,p);case"function":return Object.keys(h).length>0?a(u,{...h},g,p):i.eq(u,h);default:return t.isObject(u)?typeof h=="string"?h==="":!0:i.eq(u,h)}}function o(u,h,g,p){if(h==null)return!0;if(Array.isArray(h))return A(u,h,g,p);if(h instanceof Map)return l(u,h,g,p);if(h instanceof Set)return c(u,h,g,p);const m=Object.keys(h);if(u==null)return m.length===0;if(m.length===0)return!0;if(p&&p.has(h))return p.get(h)===u;p&&p.set(h,u);try{for(let w=0;w<m.length;w++){const v=m[w];if(!r.isPrimitive(u)&&!(v in u)||h[v]===void 0&&u[v]!==void 0||h[v]===null&&u[v]!==null||!g(u[v],h[v],v,u,h,p))return!1}return!0}finally{p&&p.delete(h)}}function l(u,h,g,p){if(h.size===0)return!0;if(!(u instanceof Map))return!1;for(const[m,w]of h.entries()){const v=u.get(m);if(g(v,w,m,u,h,p)===!1)return!1}return!0}function A(u,h,g,p){if(h.length===0)return!0;if(!Array.isArray(u))return!1;const m=new Set;for(let w=0;w<h.length;w++){const v=h[w];let b=!1;for(let x=0;x<u.length;x++){if(m.has(x))continue;const E=u[x];let I=!1;if(g(E,v,w,u,h,p)&&(I=!0),I){m.add(x),b=!0;break}}if(!b)return!1}return!0}function c(u,h,g,p){return h.size===0?!0:u instanceof Set?A([...u],[...h],g,p):!1}n.isMatchWith=s,n.isSetMatch=c}(NP)),NP}var WH;function OU(){return WH||(WH=1,function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=z0e();function t(r,i){return e.isMatchWith(r,i,()=>{})}n.isMatch=t}(kP)),kP}var w9={},UU={},RU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(r=>Object.prototype.propertyIsEnumerable.call(t,r))}n.getSymbols=e})(RU);var bI={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(bI);var xI={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",A="[object Set]",c="[object Array]",u="[object Function]",h="[object ArrayBuffer]",g="[object Object]",p="[object Error]",m="[object DataView]",w="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",x="[object Uint32Array]",E="[object BigUint64Array]",I="[object Int8Array]",P="[object Int16Array]",_="[object Int32Array]",T="[object BigInt64Array]",k="[object Float32Array]",O="[object Float64Array]";n.argumentsTag=s,n.arrayBufferTag=h,n.arrayTag=c,n.bigInt64ArrayTag=T,n.bigUint64ArrayTag=E,n.booleanTag=i,n.dataViewTag=m,n.dateTag=o,n.errorTag=p,n.float32ArrayTag=k,n.float64ArrayTag=O,n.functionTag=u,n.int16ArrayTag=P,n.int32ArrayTag=_,n.int8ArrayTag=I,n.mapTag=l,n.numberTag=r,n.objectTag=g,n.regexpTag=e,n.setTag=A,n.stringTag=t,n.symbolTag=a,n.uint16ArrayTag=b,n.uint32ArrayTag=x,n.uint8ArrayTag=w,n.uint8ClampedArrayTag=v})(xI);var b9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.isTypedArray=e})(b9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=RU,t=bI,r=xI,i=DU,s=b9;function a(c,u){return o(c,void 0,c,new Map,u)}function o(c,u,h,g=new Map,p=void 0){const m=p==null?void 0:p(c,u,h,g);if(m!=null)return m;if(i.isPrimitive(c))return c;if(g.has(c))return g.get(c);if(Array.isArray(c)){const w=new Array(c.length);g.set(c,w);for(let v=0;v<c.length;v++)w[v]=o(c[v],v,h,g,p);return Object.hasOwn(c,"index")&&(w.index=c.index),Object.hasOwn(c,"input")&&(w.input=c.input),w}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const w=new RegExp(c.source,c.flags);return w.lastIndex=c.lastIndex,w}if(c instanceof Map){const w=new Map;g.set(c,w);for(const[v,b]of c)w.set(v,o(b,v,h,g,p));return w}if(c instanceof Set){const w=new Set;g.set(c,w);for(const v of c)w.add(o(v,void 0,h,g,p));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(s.isTypedArray(c)){const w=new(Object.getPrototypeOf(c)).constructor(c.length);g.set(c,w);for(let v=0;v<c.length;v++)w[v]=o(c[v],v,h,g,p);return w}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const w=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return g.set(c,w),l(w,c,h,g,p),w}if(typeof File<"u"&&c instanceof File){const w=new File([c],c.name,{type:c.type});return g.set(c,w),l(w,c,h,g,p),w}if(c instanceof Blob){const w=new Blob([c],{type:c.type});return g.set(c,w),l(w,c,h,g,p),w}if(c instanceof Error){const w=new c.constructor;return g.set(c,w),w.message=c.message,w.name=c.name,w.stack=c.stack,w.cause=c.cause,l(w,c,h,g,p),w}if(typeof c=="object"&&A(c)){const w=Object.create(Object.getPrototypeOf(c));return g.set(c,w),l(w,c,h,g,p),w}return c}function l(c,u,h=c,g,p){const m=[...Object.keys(u),...e.getSymbols(u)];for(let w=0;w<m.length;w++){const v=m[w],b=Object.getOwnPropertyDescriptor(c,v);(b==null||b.writable)&&(c[v]=o(u[v],v,h,g,p))}}function A(c){switch(t.getTag(c)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}n.cloneDeepWith=a,n.cloneDeepWithImpl=o,n.copyProperties=l})(UU);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=UU;function t(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}n.cloneDeep=t})(w9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=OU(),t=w9;function r(i){return i=t.cloneDeep(i),s=>e.isMatch(s,i)}n.matches=r})(v9);var x9={},B9={},E9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=UU,t=xI;function r(i,s){return e.cloneDeepWith(i,(a,o,l,A)=>{const c=s==null?void 0:s(a,o,l,A);if(c!=null)return c;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case t.numberTag:case t.stringTag:case t.booleanTag:{const u=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(u,i),u}case t.argumentsTag:{const u={};return e.copyProperties(u,i),u.length=i.length,u[Symbol.iterator]=i[Symbol.iterator],u}default:return}})}n.cloneDeepWith=r})(E9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=E9;function t(r){return e.cloneDeepWith(r)}n.cloneDeep=t})(B9);var C9={},MU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function t(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}n.isIndex=t})(MU);var _9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=bI;function t(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}n.isArguments=t})(_9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=vU,t=MU,r=_9,i=sI;function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let A=a;for(let c=0;c<l.length;c++){const u=l[c];if((A==null||!Object.hasOwn(A,u))&&!((Array.isArray(A)||r.isArguments(A))&&t.isIndex(u)&&u<A.length))return!1;A=A[u]}return!0}n.has=s})(C9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=OU(),t=wU,r=B9,i=iI,s=C9;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=t.toKey(o);break}}return l=r.cloneDeep(l),function(A){const c=i.get(A,o);return c===void 0?s.has(A,o):l===void 0?c===void 0:e.isMatch(c,l)}}n.matchesProperty=a})(x9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=kU,t=y9,r=v9,i=x9;function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return t.property(a)}}n.iteratee=s})(m9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=h9,t=kU,r=f9,i=m9;function s(a,o=t.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}n.uniqBy=s})(d9);var W0e=d9.uniqBy;const XH=Yo(W0e);function S9(n,e,t){return e===!0?XH(n,t):typeof e=="function"?XH(n,e):n}var I9={exports:{}},T9={},P9={exports:{}},F9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm=B;function X0e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Y0e=typeof Object.is=="function"?Object.is:X0e,q0e=qm.useState,J0e=qm.useEffect,Z0e=qm.useLayoutEffect,eye=qm.useDebugValue;function tye(n,e){var t=e(),r=q0e({inst:{value:t,getSnapshot:e}}),i=r[0].inst,s=r[1];return Z0e(function(){i.value=t,i.getSnapshot=e,DP(i)&&s({inst:i})},[n,t,e]),J0e(function(){return DP(i)&&s({inst:i}),n(function(){DP(i)&&s({inst:i})})},[n]),eye(t),t}function DP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Y0e(n,t)}catch{return!0}}function nye(n,e){return e()}var rye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nye:tye;F9.useSyncExternalStore=qm.useSyncExternalStore!==void 0?qm.useSyncExternalStore:rye;P9.exports=F9;var iye=P9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=B,sye=iye;function aye(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var oye=typeof Object.is=="function"?Object.is:aye,lye=sye.useSyncExternalStore,Aye=BI.useRef,cye=BI.useEffect,uye=BI.useMemo,dye=BI.useDebugValue;T9.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=Aye(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=uye(function(){function l(g){if(!A){if(A=!0,c=g,g=r(g),i!==void 0&&a.hasValue){var p=a.value;if(i(p,g))return u=p}return u=g}if(p=u,oye(c,g))return p;var m=r(g);return i!==void 0&&i(p,m)?(c=g,p):(c=g,u=m)}var A=!1,c,u,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,r,i]);var o=lye(n,s[0],s[1]);return cye(function(){a.hasValue=!0,a.value=o},[o]),dye(o),o};I9.exports=T9;var hye=I9.exports,LU=B.createContext(null),fye=n=>n,mn=()=>{var n=B.useContext(LU);return n?n.store.dispatch:fye},sC=()=>{},gye=()=>sC,pye=(n,e)=>n===e;function Fe(n){var e=B.useContext(LU);return hye.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:gye,e?e.store.getState:sC,e?e.store.getState:sC,e?n:sC,pye)}function mye(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function yye(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function vye(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${t}]`)}}var YH=n=>Array.isArray(n)?n:[n];function wye(n){const e=Array.isArray(n[0])?n[0]:n;return vye(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function bye(n,e){const t=[],{length:r}=n;for(let i=0;i<r;i++)t.push(n[i].apply(null,e));return t}var xye=class{constructor(n){this.value=n}deref(){return this.value}},Bye=typeof WeakRef<"u"?WeakRef:xye,Eye=0,qH=1;function aE(){return{s:Eye,v:void 0,o:null,p:null}}function k9(n,e={}){let t=aE();const{resultEqualityCheck:r}=e;let i,s=0;function a(){var u;let o=t;const{length:l}=arguments;for(let h=0,g=l;h<g;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=o.o;m===null&&(o.o=m=new WeakMap);const w=m.get(p);w===void 0?(o=aE(),m.set(p,o)):o=w}else{let m=o.p;m===null&&(o.p=m=new Map);const w=m.get(p);w===void 0?(o=aE(),m.set(p,o)):o=w}}const A=o;let c;if(o.s===qH)c=o.v;else if(c=n.apply(null,arguments),s++,r){const h=((u=i==null?void 0:i.deref)==null?void 0:u.call(i))??i;h!=null&&r(h,c)&&(c=h,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Bye(c):c}return A.s=qH,A.v=c,c}return a.clearCache=()=>{t=aE(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Cye(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,r=(...i)=>{let s=0,a=0,o,l={},A=i.pop();typeof A=="object"&&(l=A,A=i.pop()),mye(A,`createSelector expects an output function after the inputs, but received: [${typeof A}]`);const c={...t,...l},{memoize:u,memoizeOptions:h=[],argsMemoize:g=k9,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,w=YH(h),v=YH(p),b=wye(i),x=u(function(){return s++,A.apply(null,arguments)},...w),E=g(function(){a++;const P=bye(b,arguments);return o=x.apply(null,P),o},...v);return Object.assign(E,{resultFunc:A,memoizedResultFunc:x,dependencies:b,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var Y=Cye(k9),_ye=Object.assign((n,e=Y)=>{yye(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),r=t.map(s=>n[s]);return e(r,(...s)=>s.reduce((a,o,l)=>(a[t[l]]=o,a),{}))},{withTypes:()=>_ye}),N9={},D9={},O9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const t=(r,i,s)=>{if(r!==i){const a=e(r),o=e(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};n.compareValues=t})(O9);var U9={},QU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return typeof t=="symbol"||t instanceof Symbol}n.isSymbol=e})(QU);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=QU,t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!t.test(s))||a!=null&&Object.hasOwn(a,s)}n.isKey=i})(U9);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=O9,t=U9,r=sI;function i(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const A=(g,p)=>{let m=g;for(let w=0;w<p.length&&m!=null;++w)m=m[p[w]];return m},c=(g,p)=>p==null||g==null?p:typeof g=="object"&&"key"in g?Object.hasOwn(p,g.key)?p[g.key]:A(p,g.path):typeof g=="function"?g(p):Array.isArray(g)?A(p,g):typeof p=="object"?p[g]:p,u=a.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||t.isKey(g)?g:{key:g,path:r.toPath(g)}));return s.map(g=>({original:g,criteria:u.map(p=>c(p,g))})).slice().sort((g,p)=>{for(let m=0;m<u.length;m++){const w=e.compareValues(g.criteria[m],p.criteria[m],o[m]);if(w!==0)return w}return 0}).map(g=>g.original)}n.orderBy=i})(D9);var R9={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r=1){const i=[],s=Math.floor(r),a=(o,l)=>{for(let A=0;A<o.length;A++){const c=o[A];Array.isArray(c)&&l<s?a(c,l+1):i.push(c)}};return a(t,0),i}n.flatten=e})(R9);var jU={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=MU,t=vI,r=NU,i=wI;function s(a,o,l){return r.isObject(l)&&(typeof o=="number"&&t.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],a):!1}n.isIterateeCall=s})(jU);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=D9,t=R9,r=jU;function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,t.flatten(a),["asc"])}n.sortBy=i})(N9);var Sye=N9.sortBy;const EI=Yo(Sye);var M9=n=>n.legend.settings,Iye=n=>n.legend.size,Tye=n=>n.legend.payload,Pye=Y([Tye,M9],(n,e)=>{var{itemSorter:t}=e,r=n.flat(1);return t?EI(r,t):r});function Fye(){return Fe(Pye)}var oE=1;function L9(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,t]=B.useState({height:0,left:0,top:0,width:0}),r=B.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>oE||Math.abs(a.left-e.left)>oE||Math.abs(a.top-e.top)>oE||Math.abs(a.width-e.width)>oE)&&t({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...n]);return[e,r]}function Fr(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var kye=typeof Symbol=="function"&&Symbol.observable||"@@observable",JH=kye,OP=()=>Math.random().toString(36).substring(7).split("").join("."),Nye={INIT:`@@redux/INIT${OP()}`,REPLACE:`@@redux/REPLACE${OP()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${OP()}`},z1=Nye;function HU(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function Q9(n,e,t){if(typeof n!="function")throw new Error(Fr(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Fr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Fr(1));return t(Q9)(n,e)}let r=n,i=e,s=new Map,a=s,o=0,l=!1;function A(){a===s&&(a=new Map,s.forEach((w,v)=>{a.set(v,w)}))}function c(){if(l)throw new Error(Fr(3));return i}function u(w){if(typeof w!="function")throw new Error(Fr(4));if(l)throw new Error(Fr(5));let v=!0;A();const b=o++;return a.set(b,w),function(){if(v){if(l)throw new Error(Fr(6));v=!1,A(),a.delete(b),s=null}}}function h(w){if(!HU(w))throw new Error(Fr(7));if(typeof w.type>"u")throw new Error(Fr(8));if(typeof w.type!="string")throw new Error(Fr(17));if(l)throw new Error(Fr(9));try{l=!0,i=r(i,w)}finally{l=!1}return(s=a).forEach(b=>{b()}),w}function g(w){if(typeof w!="function")throw new Error(Fr(10));r=w,h({type:z1.REPLACE})}function p(){const w=u;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Fr(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:w(b)}},[JH](){return this}}}return h({type:z1.INIT}),{dispatch:h,subscribe:u,getState:c,replaceReducer:g,[JH]:p}}function Dye(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:z1.INIT})>"u")throw new Error(Fr(12));if(typeof t(void 0,{type:z1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fr(13))})}function j9(n){const e=Object.keys(n),t={};for(let s=0;s<e.length;s++){const a=e[s];typeof n[a]=="function"&&(t[a]=n[a])}const r=Object.keys(t);let i;try{Dye(t)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const A={};for(let c=0;c<r.length;c++){const u=r[c],h=t[u],g=a[u],p=h(g,o);if(typeof p>"u")throw o&&o.type,new Error(Fr(14));A[u]=p,l=l||p!==g}return l=l||r.length!==Object.keys(a).length,l?A:a}}function W1(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function Oye(...n){return e=>(t,r)=>{const i=e(t,r);let s=()=>{throw new Error(Fr(15))};const a={getState:i.getState,dispatch:(l,...A)=>s(l,...A)},o=n.map(l=>l(a));return s=W1(...o)(i.dispatch),{...i,dispatch:s}}}function H9(n){return HU(n)&&"type"in n&&typeof n.type=="string"}var V9=Symbol.for("immer-nothing"),ZH=Symbol.for("immer-draftable"),Os=Symbol.for("immer-state");function za(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Jm=Object.getPrototypeOf;function Sf(n){return!!n&&!!n[Os]}function IA(n){var e;return n?K9(n)||Array.isArray(n)||!!n[ZH]||!!((e=n.constructor)!=null&&e[ZH])||_I(n)||SI(n):!1}var Uye=Object.prototype.constructor.toString();function K9(n){if(!n||typeof n!="object")return!1;const e=Jm(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Uye}function X1(n,e){CI(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,r)=>e(r,t,n))}function CI(n){const e=n[Os];return e?e.type_:Array.isArray(n)?1:_I(n)?2:SI(n)?3:0}function dk(n,e){return CI(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function $9(n,e,t){const r=CI(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function Rye(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function _I(n){return n instanceof Map}function SI(n){return n instanceof Set}function Id(n){return n.copy_||n.base_}function hk(n,e){if(_I(n))return new Map(n);if(SI(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=K9(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Os];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(Jm(n),r)}else{const r=Jm(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function VU(n,e=!1){return II(n)||Sf(n)||!IA(n)||(CI(n)>1&&(n.set=n.add=n.clear=n.delete=Mye),Object.freeze(n),e&&Object.entries(n).forEach(([t,r])=>VU(r,!0))),n}function Mye(){za(2)}function II(n){return Object.isFrozen(n)}var Lye={};function If(n){const e=Lye[n];return e||za(0,n),e}var hw;function G9(){return hw}function Qye(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e3(n,e){e&&(If("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function fk(n){gk(n),n.drafts_.forEach(jye),n.drafts_=null}function gk(n){n===hw&&(hw=n.parent_)}function t3(n){return hw=Qye(hw,n)}function jye(n){const e=n[Os];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function n3(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Os].modified_&&(fk(e),za(4)),IA(n)&&(n=Y1(e,n),e.parent_||q1(e,n)),e.patches_&&If("Patches").generateReplacementPatches_(t[Os].base_,n,e.patches_,e.inversePatches_)):n=Y1(e,t,[]),fk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==V9?n:void 0}function Y1(n,e,t){if(II(e))return e;const r=e[Os];if(!r)return X1(e,(i,s)=>r3(n,r,e,i,s,t)),e;if(r.scope_!==n)return e;if(!r.modified_)return q1(n,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,a=!1;r.type_===3&&(s=new Set(i),i.clear(),a=!0),X1(s,(o,l)=>r3(n,r,i,o,l,t,a)),q1(n,i,!1),t&&n.patches_&&If("Patches").generatePatches_(r,t,n.patches_,n.inversePatches_)}return r.copy_}function r3(n,e,t,r,i,s,a){if(Sf(i)){const o=s&&e&&e.type_!==3&&!dk(e.assigned_,r)?s.concat(r):void 0,l=Y1(n,i,o);if($9(t,r,l),Sf(l))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(IA(i)&&!II(i)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Y1(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(t,r)&&q1(n,i)}}function q1(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&VU(e,t)}function Hye(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:G9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=KU;t&&(i=[r],s=fw);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var KU={get(n,e){if(e===Os)return n;const t=Id(n);if(!dk(t,e))return Vye(n,t,e);const r=t[e];return n.finalized_||!IA(r)?r:r===UP(n.base_,e)?(RP(n),n.copy_[e]=mk(r,n)):r},has(n,e){return e in Id(n)},ownKeys(n){return Reflect.ownKeys(Id(n))},set(n,e,t){const r=z9(Id(n),e);if(r!=null&&r.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=UP(Id(n),e),s=i==null?void 0:i[Os];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(Rye(t,i)&&(t!==void 0||dk(n.base_,e)))return!0;RP(n),pk(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return UP(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,RP(n),pk(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Id(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){za(11)},getPrototypeOf(n){return Jm(n.base_)},setPrototypeOf(){za(12)}},fw={};X1(KU,(n,e)=>{fw[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});fw.deleteProperty=function(n,e){return fw.set.call(this,n,e,void 0)};fw.set=function(n,e,t){return KU.set.call(this,n[0],e,t,n[0])};function UP(n,e){const t=n[Os];return(t?Id(t):n)[e]}function Vye(n,e,t){var i;const r=z9(e,t);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(n.draft_):void 0}function z9(n,e){if(!(e in n))return;let t=Jm(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Jm(t)}}function pk(n){n.modified_||(n.modified_=!0,n.parent_&&pk(n.parent_))}function RP(n){n.copy_||(n.copy_=hk(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Kye=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...A){return a.produce(l,c=>t.call(this,c,...A))}}typeof t!="function"&&za(6),r!==void 0&&typeof r!="function"&&za(7);let i;if(IA(e)){const s=t3(this),a=mk(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?fk(s):gk(s)}return e3(s,r),n3(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===V9&&(i=void 0),this.autoFreeze_&&VU(i,!0),r){const s=[],a=[];If("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else za(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){IA(n)||za(8),Sf(n)&&(n=pA(n));const e=t3(this),t=mk(n,void 0);return t[Os].isManual_=!0,gk(e),t}finishDraft(n,e){const t=n&&n[Os];(!t||!t.isManual_)&&za(9);const{scope_:r}=t;return e3(r,e),n3(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=If("Patches").applyPatches_;return Sf(n)?r(n,e):this.produce(n,i=>r(i,e))}};function mk(n,e){const t=_I(n)?If("MapSet").proxyMap_(n,e):SI(n)?If("MapSet").proxySet_(n,e):Hye(n,e);return(e?e.scope_:G9()).drafts_.push(t),t}function pA(n){return Sf(n)||za(10,n),W9(n)}function W9(n){if(!IA(n)||II(n))return n;const e=n[Os];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=hk(n,e.scope_.immer_.useStrictShallowCopy_)}else t=hk(n,!0);return X1(t,(r,i)=>{$9(t,r,W9(i))}),e&&(e.finalized_=!1),t}var Us=new Kye,X9=Us.produce;Us.produceWithPatches.bind(Us);Us.setAutoFreeze.bind(Us);Us.setUseStrictShallowCopy.bind(Us);Us.applyPatches.bind(Us);Us.createDraft.bind(Us);Us.finishDraft.bind(Us);function Y9(n){return({dispatch:t,getState:r})=>i=>s=>typeof s=="function"?s(t,r,n):i(s)}var $ye=Y9(),Gye=Y9,zye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?W1:W1.apply(null,arguments)};function xa(n,e){function t(...r){if(e){let i=e(...r);if(!i)throw new Error(Ps(0));return{type:n,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:n,payload:r[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=r=>H9(r)&&r.type===n,t}var q9=class Ry extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ry.prototype)}static get[Symbol.species](){return Ry}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ry(...e[0].concat(this)):new Ry(...e.concat(this))}};function i3(n){return IA(n)?X9(n,()=>{}):n}function lE(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Wye(n){return typeof n=="boolean"}var Xye=()=>function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new q9;return t&&(Wye(t)?a.push($ye):a.push(Gye(t.extraArgument))),a},Yye="RTK_autoBatch",s3=n=>e=>{setTimeout(e,n)},qye=(n={type:"raf"})=>e=>(...t)=>{const r=e(...t);let i=!0,s=!1,a=!1;const o=new Set,l=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:s3(10):n.type==="callback"?n.queueNotification:s3(n.timeout),A=()=>{a=!1,s&&(s=!1,o.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const u=()=>i&&c(),h=r.subscribe(u);return o.add(c),()=>{h(),o.delete(c)}},dispatch(c){var u;try{return i=!((u=c==null?void 0:c.meta)!=null&&u[Yye]),s=!i,s&&(a||(a=!0,l(A))),r.dispatch(c)}finally{i=!0}}})},Jye=n=>function(t){const{autoBatch:r=!0}=t??{};let i=new q9(n);return r&&i.push(qye(typeof r=="object"?r:void 0)),i};function Zye(n){const e=Xye(),{reducer:t=void 0,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:a=void 0,enhancers:o=void 0}=n;let l;if(typeof t=="function")l=t;else if(HU(t))l=j9(t);else throw new Error(Ps(1));let A;typeof r=="function"?A=r(e):A=e();let c=W1;i&&(c=zye({trace:!1,...typeof i=="object"&&i}));const u=Oye(...A),h=Jye(u);let g=typeof o=="function"?o(h):h();const p=c(...g);return Q9(l,a,p)}function J9(n){const e={},t=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Ps(28));if(o in e)throw new Error(Ps(29));return e[o]=a,i},addMatcher(s,a){return t.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return n(i),[e,t,r]}function eve(n){return typeof n=="function"}function tve(n,e){let[t,r,i]=J9(e),s;if(eve(n))s=()=>i3(n());else{const o=i3(n);s=()=>o}function a(o=s(),l){let A=[t[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return A.filter(c=>!!c).length===0&&(A=[i]),A.reduce((c,u)=>{if(u)if(Sf(c)){const g=u(c,l);return g===void 0?c:g}else{if(IA(c))return X9(c,h=>u(h,l));{const h=u(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},o)}return a.getInitialState=s,a}var nve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rve=(n=21)=>{let e="",t=n;for(;t--;)e+=nve[Math.random()*64|0];return e},ive=Symbol.for("rtk-slice-createasyncthunk");function sve(n,e){return`${n}/${e}`}function ave({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[ive];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(Ps(11));const o=(typeof i.reducers=="function"?i.reducers(lve()):i.reducers)||{},l=Object.keys(o),A={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(E,I){const P=typeof E=="string"?E:E.type;if(!P)throw new Error(Ps(12));if(P in A.sliceCaseReducersByType)throw new Error(Ps(13));return A.sliceCaseReducersByType[P]=I,c},addMatcher(E,I){return A.sliceMatchers.push({matcher:E,reducer:I}),c},exposeAction(E,I){return A.actionCreators[E]=I,c},exposeCaseReducer(E,I){return A.sliceCaseReducersByName[E]=I,c}};l.forEach(E=>{const I=o[E],P={reducerName:E,type:sve(s,E),createNotation:typeof i.reducers=="function"};cve(I)?dve(P,I,c,e):Ave(P,I,c)});function u(){const[E={},I=[],P=void 0]=typeof i.extraReducers=="function"?J9(i.extraReducers):[i.extraReducers],_={...E,...A.sliceCaseReducersByType};return tve(i.initialState,T=>{for(let k in _)T.addCase(k,_[k]);for(let k of A.sliceMatchers)T.addMatcher(k.matcher,k.reducer);for(let k of I)T.addMatcher(k.matcher,k.reducer);P&&T.addDefaultCase(P)})}const h=E=>E,g=new Map,p=new WeakMap;let m;function w(E,I){return m||(m=u()),m(E,I)}function v(){return m||(m=u()),m.getInitialState()}function b(E,I=!1){function P(T){let k=T[E];return typeof k>"u"&&I&&(k=lE(p,P,v)),k}function _(T=h){const k=lE(g,I,()=>new WeakMap);return lE(k,T,()=>{const O={};for(const[U,L]of Object.entries(i.selectors??{}))O[U]=ove(L,T,()=>lE(p,T,v),I);return O})}return{reducerPath:E,getSelectors:_,get selectors(){return _(P)},selectSlice:P}}const x={name:s,reducer:w,actions:A.actionCreators,caseReducers:A.sliceCaseReducersByName,getInitialState:v,...b(a),injectInto(E,{reducerPath:I,...P}={}){const _=I??a;return E.inject({reducerPath:_,reducer:w},P),{...x,...b(_,!0)}}};return x}}function ove(n,e,t,r){function i(s,...a){let o=e(s);return typeof o>"u"&&r&&(o=t()),n(o,...a)}return i.unwrapped=n,i}var Qs=ave();function lve(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Ave({type:n,reducerName:e,createNotation:t},r,i){let s,a;if("reducer"in r){if(t&&!uve(r))throw new Error(Ps(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(n,s).exposeCaseReducer(e,s).exposeAction(e,a?xa(n,a):xa(n))}function cve(n){return n._reducerDefinitionType==="asyncThunk"}function uve(n){return n._reducerDefinitionType==="reducerWithPrepare"}function dve({type:n,reducerName:e},t,r,i){if(!i)throw new Error(Ps(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:A,options:c}=t,u=i(n,s,c);r.exposeAction(e,u),a&&r.addCase(u.fulfilled,a),o&&r.addCase(u.pending,o),l&&r.addCase(u.rejected,l),A&&r.addMatcher(u.settled,A),r.exposeCaseReducer(e,{fulfilled:a||AE,pending:o||AE,rejected:l||AE,settled:A||AE})}function AE(){}var hve="task",Z9="listener",e7="completed",$U="cancelled",fve=`task-${$U}`,gve=`task-${e7}`,yk=`${Z9}-${$U}`,pve=`${Z9}-${e7}`,TI=class{constructor(n){ce(this,"name","TaskAbortError");ce(this,"message");this.code=n,this.message=`${hve} ${$U} (reason: ${n})`}},GU=(n,e)=>{if(typeof n!="function")throw new TypeError(Ps(32))},J1=()=>{},t7=(n,e=J1)=>(n.catch(e),n),n7=(n,e)=>(n.addEventListener("abort",e,{once:!0}),()=>n.removeEventListener("abort",e)),Af=(n,e)=>{const t=n.signal;t.aborted||("reason"in t||Object.defineProperty(t,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),n.abort(e))},cf=n=>{if(n.aborted){const{reason:e}=n;throw new TI(e)}};function r7(n,e){let t=J1;return new Promise((r,i)=>{const s=()=>i(new TI(n.reason));if(n.aborted){s();return}t=n7(n,s),e.finally(()=>t()).then(r,i)}).finally(()=>{t=J1})}var mve=async(n,e)=>{try{return await Promise.resolve(),{status:"ok",value:await n()}}catch(t){return{status:t instanceof TI?"cancelled":"rejected",error:t}}finally{e==null||e()}},Z1=n=>e=>t7(r7(n,e).then(t=>(cf(n),t))),i7=n=>{const e=Z1(n);return t=>e(new Promise(r=>setTimeout(r,t)))},{assign:cp}=Object,a3={},PI="listenerMiddleware",yve=(n,e)=>{const t=r=>n7(n,()=>Af(r,n.reason));return(r,i)=>{GU(r);const s=new AbortController;t(s);const a=mve(async()=>{cf(n),cf(s.signal);const o=await r({pause:Z1(s.signal),delay:i7(s.signal),signal:s.signal});return cf(s.signal),o},()=>Af(s,gve));return i!=null&&i.autoJoin&&e.push(a.catch(J1)),{result:Z1(n)(a),cancel(){Af(s,fve)}}}},vve=(n,e)=>{const t=async(r,i)=>{cf(e);let s=()=>{};const o=[new Promise((l,A)=>{let c=n({predicate:r,effect:(u,h)=>{h.unsubscribe(),l([u,h.getState(),h.getOriginalState()])}});s=()=>{c(),A()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await r7(e,Promise.race(o));return cf(e),l}finally{s()}};return(r,i)=>t7(t(r,i))},s7=n=>{let{type:e,actionCreator:t,matcher:r,predicate:i,effect:s}=n;if(e)i=xa(e).match;else if(t)e=t.type,i=t.match;else if(r)i=r;else if(!i)throw new Error(Ps(21));return GU(s),{predicate:i,type:e,effect:s}},a7=cp(n=>{const{type:e,predicate:t,effect:r}=s7(n);return{id:rve(),effect:r,type:e,predicate:t,pending:new Set,unsubscribe:()=>{throw new Error(Ps(22))}}},{withTypes:()=>a7}),o3=(n,e)=>{const{type:t,effect:r,predicate:i}=s7(e);return Array.from(n.values()).find(s=>(typeof t=="string"?s.type===t:s.predicate===i)&&s.effect===r)},vk=n=>{n.pending.forEach(e=>{Af(e,yk)})},wve=n=>()=>{n.forEach(vk),n.clear()},l3=(n,e,t)=>{try{n(e,t)}catch(r){setTimeout(()=>{throw r},0)}},o7=cp(xa(`${PI}/add`),{withTypes:()=>o7}),bve=xa(`${PI}/removeAll`),l7=cp(xa(`${PI}/remove`),{withTypes:()=>l7}),xve=(...n)=>{console.error(`${PI}/error`,...n)},_x=(n={})=>{const e=new Map,{extra:t,onError:r=xve}=n;GU(r);const i=c=>(c.unsubscribe=()=>e.delete(c.id),e.set(c.id,c),u=>{c.unsubscribe(),u!=null&&u.cancelActive&&vk(c)}),s=c=>{const u=o3(e,c)??a7(c);return i(u)};cp(s,{withTypes:()=>s});const a=c=>{const u=o3(e,c);return u&&(u.unsubscribe(),c.cancelActive&&vk(u)),!!u};cp(a,{withTypes:()=>a});const o=async(c,u,h,g)=>{const p=new AbortController,m=vve(s,p.signal),w=[];try{c.pending.add(p),await Promise.resolve(c.effect(u,cp({},h,{getOriginalState:g,condition:(v,b)=>m(v,b).then(Boolean),take:m,delay:i7(p.signal),pause:Z1(p.signal),extra:t,signal:p.signal,fork:yve(p.signal,w),unsubscribe:c.unsubscribe,subscribe:()=>{e.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((v,b,x)=>{v!==p&&(Af(v,yk),x.delete(v))})},cancel:()=>{Af(p,yk),c.pending.delete(p)},throwIfCancelled:()=>{cf(p.signal)}})))}catch(v){v instanceof TI||l3(r,v,{raisedBy:"effect"})}finally{await Promise.all(w),Af(p,pve),c.pending.delete(p)}},l=wve(e);return{middleware:c=>u=>h=>{if(!H9(h))return u(h);if(o7.match(h))return s(h.payload);if(bve.match(h)){l();return}if(l7.match(h))return a(h.payload);let g=c.getState();const p=()=>{if(g===a3)throw new Error(Ps(23));return g};let m;try{if(m=u(h),e.size>0){const w=c.getState(),v=Array.from(e.values());for(const b of v){let x=!1;try{x=b.predicate(h,w,g)}catch(E){x=!1,l3(r,E,{raisedBy:"predicate"})}x&&o(b,h,c,p)}}}finally{g=a3}return m},startListening:s,stopListening:a,clearListeners:l}};function Ps(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var Bve={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},A7=Qs({name:"chartLayout",initialState:Bve,reducers:{setLayout(n,e){n.layoutType=e.payload},setChartSize(n,e){n.width=e.payload.width,n.height=e.payload.height},setMargin(n,e){n.margin.top=e.payload.top,n.margin.right=e.payload.right,n.margin.bottom=e.payload.bottom,n.margin.left=e.payload.left},setScale(n,e){n.scale=e.payload}}}),{setMargin:Eve,setLayout:Cve,setChartSize:_ve,setScale:Sve}=A7.actions,Ive=A7.reducer;function A3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function c3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(t),!0).forEach(function(r){Tve(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Tve(n,e,t){return(e=Pve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pve(n){var e=Fve(n,"string");return typeof e=="symbol"?e:e+""}function Fve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var e_=Math.PI/180,kve=n=>n*180/Math.PI,Qn=(n,e,t,r)=>({x:n+Math.cos(-e_*r)*t,y:e+Math.sin(-e_*r)*t}),c7=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},Nve=(n,e)=>{var{x:t,y:r}=n,{x:i,y:s}=e;return Math.sqrt((t-i)**2+(r-s)**2)},Dve=(n,e)=>{var{x:t,y:r}=n,{cx:i,cy:s}=e,a=Nve({x:t,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(t-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:kve(l),angleInRadian:l}},Ove=n=>{var{startAngle:e,endAngle:t}=n,r=Math.floor(e/360),i=Math.floor(t/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:t-s*360}},Uve=(n,e)=>{var{startAngle:t,endAngle:r}=e,i=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(i,s);return n+a*360},Rve=(n,e)=>{var{x:t,y:r}=n,{radius:i,angle:s}=Dve({x:t,y:r},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:l,endAngle:A}=Ove(e),c=s,u;if(l<=A){for(;c>A;)c-=360;for(;c<l;)c+=360;u=c>=l&&c<=A}else{for(;c>l;)c-=360;for(;c<A;)c+=360;u=c>=A&&c<=l}return u?c3(c3({},e),{},{radius:i,angle:Uve(c,e)}):null};function u7(n,e,t){return Array.isArray(n)&&n&&e+t!==0?n.slice(e,t+1):n}function u3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function oa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(t),!0).forEach(function(r){Mve(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):u3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Mve(n,e,t){return(e=Lve(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Lve(n){var e=Qve(n,"string");return typeof e=="symbol"?e:e+""}function Qve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ot(n,e,t){return Xt(n)||Xt(e)?t:Go(e)?Wu(n,e,t):typeof e=="function"?e(n):t}var jve=(n,e,t,r,i)=>{var s,a=-1,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||n==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var A=l>0?t[l-1].coordinate:t[o-1].coordinate,c=t[l].coordinate,u=l>=o-1?t[0].coordinate:t[l+1].coordinate,h=void 0;if(yr(c-A)!==yr(u-c)){var g=[];if(yr(u-c)===yr(i[1]-i[0])){h=u;var p=c+i[1]-i[0];g[0]=Math.min(p,(p+A)/2),g[1]=Math.max(p,(p+A)/2)}else{h=A;var m=u+i[1]-i[0];g[0]=Math.min(c,(m+c)/2),g[1]=Math.max(c,(m+c)/2)}var w=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(n>w[0]&&n<=w[1]||n>=g[0]&&n<=g[1]){({index:a}=t[l]);break}}else{var v=Math.min(A,u),b=Math.max(A,u);if(n>(v+c)/2&&n<=(b+c)/2){({index:a}=t[l]);break}}}else if(e){for(var x=0;x<o;x++)if(x===0&&n<=(e[x].coordinate+e[x+1].coordinate)/2||x>0&&x<o-1&&n>(e[x].coordinate+e[x-1].coordinate)/2&&n<=(e[x].coordinate+e[x+1].coordinate)/2||x===o-1&&n>(e[x].coordinate+e[x-1].coordinate)/2){({index:a}=e[x]);break}}return a},Hve=(n,e,t)=>{if(e&&t){var{width:r,height:i}=t,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&Be(n[s]))return oa(oa({},n),{},{[s]:n[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&Be(n[a]))return oa(oa({},n),{},{[a]:n[a]+(i||0)})}return n},cd=(n,e)=>n==="horizontal"&&e==="xAxis"||n==="vertical"&&e==="yAxis"||n==="centric"&&e==="angleAxis"||n==="radial"&&e==="radiusAxis",d7=(n,e,t,r)=>{if(r)return n.map(o=>o.coordinate);var i,s,a=n.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===t&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(t),a},h7=(n,e,t)=>{if(!n)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:A,tickCount:c,ticks:u,niceTicks:h,axisType:g}=n;if(!a)return null;var p=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=i==="category"&&a.bandwidth?a.bandwidth()/p:0;if(m=g==="angleAxis"&&s&&s.length>=2?yr(s[0]-s[1])*2*m:m,u||h){var w=(u||h||[]).map((v,b)=>{var x=r?r.indexOf(v):v;return{coordinate:a(x)+m,value:v,offset:m,index:b}});return w.filter(v=>!Ds(v.coordinate))}return l&&A?A.map((v,b)=>({coordinate:a(v)+m,value:v,index:b,offset:m})):a.ticks&&c!=null?a.ticks(c).map((v,b)=>({coordinate:a(v)+m,value:v,offset:m,index:b})):a.domain().map((v,b)=>({coordinate:a(v)+m,value:r?r[v]:v,index:b,offset:m}))},d3=1e-4,Vve=n=>{var e=n.domain();if(!(!e||e.length<=2)){var t=e.length,r=n.range(),i=Math.min(r[0],r[1])-d3,s=Math.max(r[0],r[1])+d3,a=n(e[0]),o=n(e[t-1]);(a<i||a>s||o<i||o>s)&&n.domain([e[0],e[t-1]])}},Kve=(n,e)=>{if(!e||e.length!==2||!Be(e[0])||!Be(e[1]))return n;var t=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[n[0],n[1]];return(!Be(n[0])||n[0]<t)&&(i[0]=t),(!Be(n[1])||n[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<t&&(i[1]=t),i},$ve=n=>{var e=n.length;if(!(e<=0))for(var t=0,r=n[0].length;t<r;++t)for(var i=0,s=0,a=0;a<e;++a){var o=Ds(n[a][t][1])?n[a][t][0]:n[a][t][1];o>=0?(n[a][t][0]=i,n[a][t][1]=i+o,i=n[a][t][1]):(n[a][t][0]=s,n[a][t][1]=s+o,s=n[a][t][1])}},Gve=n=>{var e=n.length;if(!(e<=0))for(var t=0,r=n[0].length;t<r;++t)for(var i=0,s=0;s<e;++s){var a=Ds(n[s][t][1])?n[s][t][0]:n[s][t][1];a>=0?(n[s][t][0]=i,n[s][t][1]=i+a,i=n[s][t][1]):(n[s][t][0]=0,n[s][t][1]=0)}},zve={sign:$ve,expand:F0e,none:Ym,silhouette:k0e,wiggle:N0e,positive:Gve},Wve=(n,e,t)=>{var r=zve[t],i=P0e().keys(e).value((s,a)=>+Ot(s,a,0)).order(Ak).offset(r);return i(n)};function Xve(n){return n==null?void 0:String(n)}function h3(n){var{axis:e,ticks:t,bandSize:r,entry:i,index:s,dataKey:a}=n;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Xt(i[e.dataKey])){var o=KW(t,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return t[s]?t[s].coordinate+r/2:null}var l=Ot(i,Xt(a)?e.dataKey:a);return Xt(l)?null:e.scale(l)}var f3=n=>{var{axis:e,ticks:t,offset:r,bandSize:i,entry:s,index:a}=n;if(e.type==="category")return t[a]?t[a].coordinate+r:null;var o=Ot(s,e.dataKey,e.scale.domain()[a]);return Xt(o)?null:e.scale(o)-i/2+r},Yve=n=>{var{numericAxis:e}=n,t=e.scale.domain();if(e.type==="number"){var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return r<=0&&i>=0?0:i<0?i:r}return t[0]},qve=n=>{var e=n.flat(2).filter(Be);return[Math.min(...e),Math.max(...e)]},Jve=n=>[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]],Zve=(n,e,t)=>{if(n!=null)return Jve(Object.keys(n).reduce((r,i)=>{var s=n[i],{stackedData:a}=s,o=a.reduce((l,A)=>{var c=u7(A,e,t),u=qve(c);return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},g3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gw=(n,e,t)=>{if(n&&n.scale&&n.scale.bandwidth){var r=n.scale.bandwidth();if(!t||r>0)return r}if(n&&e&&e.length>=2){for(var i=EI(e,c=>c.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],A=i[a-1];s=Math.min((l.coordinate||0)-(A.coordinate||0),s)}return s===1/0?0:s}return t?void 0:0};function m3(n){var{tooltipEntrySettings:e,dataKey:t,payload:r,value:i,name:s}=n;return oa(oa({},e),{},{dataKey:t,payload:r,value:i,name:s})}function y0(n,e){if(n)return String(n);if(typeof e=="string")return e}function ewe(n,e,t,r,i){if(t==="horizontal"||t==="vertical"){var s=n>=i.left&&n<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return s?{x:n,y:e}:null}return r?Rve({x:n,y:e},r):null}var twe=(n,e,t,r)=>{var i=e.find(A=>A&&A.index===t);if(i){if(n==="horizontal")return{x:i.coordinate,y:r.y};if(n==="vertical")return{x:r.x,y:i.coordinate};if(n==="centric"){var s=i.coordinate,{radius:a}=r;return oa(oa(oa({},r),Qn(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return oa(oa(oa({},r),Qn(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},nwe=(n,e)=>e==="horizontal"?n.x:e==="vertical"?n.y:e==="centric"?n.angle:n.radius,LA=n=>n.layout.width,QA=n=>n.layout.height,rwe=n=>n.layout.scale,f7=n=>n.layout.margin,zU=Y(n=>n.cartesianAxis.xAxis,n=>Object.values(n)),WU=Y(n=>n.cartesianAxis.yAxis,n=>Object.values(n)),g7="data-recharts-item-index",p7="data-recharts-item-data-key",FI=60;function y3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ec(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(t),!0).forEach(function(r){iwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iwe(n,e,t){return(e=swe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function swe(n){var e=awe(n,"string");return typeof e=="symbol"?e:e+""}function awe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var owe=n=>n.brush.height,nr=Y([LA,QA,f7,owe,zU,WU,M9,Iye],(n,e,t,r,i,s,a,o)=>{var l=s.reduce((p,m)=>{var{orientation:w}=m;if(!m.mirror&&!m.hide){var v=typeof m.width=="number"?m.width:FI;return ec(ec({},p),{},{[w]:p[w]+v})}return p},{left:t.left||0,right:t.right||0}),A=i.reduce((p,m)=>{var{orientation:w}=m;return!m.mirror&&!m.hide?ec(ec({},p),{},{[w]:Wu(p,"".concat(w))+m.height}):p},{top:t.top||0,bottom:t.bottom||0}),c=ec(ec({},A),l),u=c.bottom;c.bottom+=r,c=Hve(c,a,o);var h=n-c.left-c.right,g=e-c.top-c.bottom;return ec(ec({brushBottom:u},c),{},{width:Math.max(h,0),height:Math.max(g,0)})}),lwe=Y(nr,n=>({x:n.left,y:n.top,width:n.width,height:n.height})),m7=Y(LA,QA,(n,e)=>({x:0,y:0,width:n,height:e})),Awe=B.createContext(null),Xi=()=>B.useContext(Awe)!=null,kI=n=>n.brush,NI=Y([kI,nr,f7],(n,e,t)=>({height:n.height,x:Be(n.x)?n.x:e.left,y:Be(n.y)?n.y:e.top+e.height+e.brushBottom-((t==null?void 0:t.bottom)||0),width:Be(n.width)?n.width:e.width})),XU=()=>{var n,e=Xi(),t=Fe(lwe),r=Fe(NI),i=(n=Fe(kI))===null||n===void 0?void 0:n.padding;return!e||!r||!i?t:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},cwe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},y7=()=>{var n;return(n=Fe(nr))!==null&&n!==void 0?n:cwe},YU=()=>Fe(LA),qU=()=>Fe(QA),uwe={top:0,right:0,bottom:0,left:0},dwe=()=>{var n;return(n=Fe(e=>e.layout.margin))!==null&&n!==void 0?n:uwe},lt=n=>n.layout.layoutType,DI=()=>Fe(lt),hwe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},v7=Qs({name:"legend",initialState:hwe,reducers:{setLegendSize(n,e){n.size.width=e.payload.width,n.size.height=e.payload.height},setLegendSettings(n,e){n.settings.align=e.payload.align,n.settings.layout=e.payload.layout,n.settings.verticalAlign=e.payload.verticalAlign,n.settings.itemSorter=e.payload.itemSorter},addLegendPayload(n,e){n.payload.push(e.payload)},removeLegendPayload(n,e){var t=pA(n).payload.indexOf(e.payload);t>-1&&n.payload.splice(t,1)}}}),{setLegendSize:v3,setLegendSettings:fwe,addLegendPayload:w7,removeLegendPayload:b7}=v7.actions,gwe=v7.reducer,pwe=["contextPayload"];function wk(){return wk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},wk.apply(null,arguments)}function w3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Zm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w3(Object(t),!0).forEach(function(r){JU(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function JU(n,e,t){return(e=mwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mwe(n){var e=ywe(n,"string");return typeof e=="symbol"?e:e+""}function ywe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vwe(n,e){if(n==null)return{};var t,r,i=wwe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function wwe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function bwe(n){return n.value}function xwe(n){var{contextPayload:e}=n,t=vwe(n,pwe),r=S9(e,n.payloadUniqBy,bwe),i=Zm(Zm({},t),{},{payload:r});return B.isValidElement(n.content)?B.cloneElement(n.content,i):typeof n.content=="function"?B.createElement(n.content,i):B.createElement(FU,i)}function Bwe(n,e,t,r,i,s){var{layout:a,align:o,verticalAlign:l}=e,A,c;return(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))&&(o==="center"&&a==="vertical"?A={left:((r||0)-s.width)/2}:A=o==="right"?{right:t&&t.right||0}:{left:t&&t.left||0}),(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))&&(l==="middle"?c={top:((i||0)-s.height)/2}:c=l==="bottom"?{bottom:t&&t.bottom||0}:{top:t&&t.top||0}),Zm(Zm({},A),c)}function Ewe(n){var e=mn();return B.useEffect(()=>{e(fwe(n))},[e,n]),null}function Cwe(n){var e=mn();return B.useEffect(()=>(e(v3(n)),()=>{e(v3({width:0,height:0}))}),[e,n]),null}function _we(n){var e=Fye(),t=e0e(),r=dwe(),{width:i,height:s,wrapperStyle:a,portal:o}=n,[l,A]=L9([e]),c=YU(),u=qU(),h=c-(r.left||0)-(r.right||0),g=Tf.getWidthOrHeight(n.layout,s,i,h),p=o?a:Zm(Zm({position:"absolute",width:(g==null?void 0:g.width)||i||"auto",height:(g==null?void 0:g.height)||s||"auto"},Bwe(a,n,r,c,u,l)),a),m=o??t;if(m==null)return null;var w=B.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:A},B.createElement(Ewe,{layout:n.layout,align:n.align,verticalAlign:n.verticalAlign,itemSorter:n.itemSorter}),B.createElement(Cwe,{width:l.width,height:l.height}),B.createElement(xwe,wk({},n,g,{margin:r,chartWidth:c,chartHeight:u,contextPayload:e})));return dO.createPortal(w,m)}class Tf extends B.PureComponent{static getWidthOrHeight(e,t,r,i){return e==="vertical"&&Be(t)?{height:t}:e==="horizontal"?{width:r||i}:null}render(){return B.createElement(_we,this.props)}}JU(Tf,"displayName","Legend");JU(Tf,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function bk(){return bk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bk.apply(null,arguments)}function b3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function MP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(t),!0).forEach(function(r){Swe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):b3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Swe(n,e,t){return(e=Iwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Iwe(n){var e=Twe(n,"string");return typeof e=="symbol"?e:e+""}function Twe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pwe(n){return Array.isArray(n)&&Go(n[0])&&Go(n[1])?n.join(" ~ "):n}var Fwe=n=>{var{separator:e=" : ",contentStyle:t={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:A,label:c,labelFormatter:u,accessibilityLayer:h=!1}=n,g=()=>{if(s&&s.length){var I={padding:0,margin:0},P=(o?EI(s,o):s).map((_,T)=>{if(_.type==="none")return null;var k=_.formatter||a||Pwe,{value:O,name:U}=_,L=O,R=U;{var re=k(O,U,_,T,s);if(Array.isArray(re))[L,R]=re;else if(re!=null)L=re;else return null}var he=MP({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},r);return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:he},Go(R)?B.createElement("span",{className:"recharts-tooltip-item-name"},R):null,Go(R)?B.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,B.createElement("span",{className:"recharts-tooltip-item-value"},L),B.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:I},P)}return null},p=MP({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},t),m=MP({margin:0},i),w=!Xt(c),v=w?c:"",b=gt("recharts-default-tooltip",l),x=gt("recharts-tooltip-label",A);w&&u&&s!==void 0&&s!==null&&(v=u(c,s));var E=h?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",bk({className:b,style:p},E),B.createElement("p",{className:x,style:m},B.isValidElement(v)?v:"".concat(v)),g())},oy="recharts-tooltip-wrapper",kwe={visibility:"hidden"};function Nwe(n){var{coordinate:e,translateX:t,translateY:r}=n;return gt(oy,{["".concat(oy,"-right")]:Be(t)&&e&&Be(e.x)&&t>=e.x,["".concat(oy,"-left")]:Be(t)&&e&&Be(e.x)&&t<e.x,["".concat(oy,"-bottom")]:Be(r)&&e&&Be(e.y)&&r>=e.y,["".concat(oy,"-top")]:Be(r)&&e&&Be(e.y)&&r<e.y})}function x3(n){var{allowEscapeViewBox:e,coordinate:t,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:A}=n;if(s&&Be(s[r]))return s[r];var c=t[r]-o-(i>0?i:0),u=t[r]+i;if(e[r])return a[r]?c:u;var h=l[r];if(h==null)return 0;if(a[r]){var g=c,p=h;return g<p?Math.max(u,h):Math.max(c,h)}if(A==null)return 0;var m=u+o,w=h+A;return m>w?Math.max(c,h):Math.max(u,h)}function Dwe(n){var{translateX:e,translateY:t,useTranslate3d:r}=n;return{transform:r?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function Owe(n){var{allowEscapeViewBox:e,coordinate:t,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=n,A,c,u;return a.height>0&&a.width>0&&t?(c=x3({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),u=x3({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),A=Dwe({translateX:c,translateY:u,useTranslate3d:o})):A=kwe,{cssProperties:A,cssClasses:Nwe({translateX:c,translateY:u,coordinate:t})}}function B3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function cE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(t),!0).forEach(function(r){xk(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function xk(n,e,t){return(e=Uwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Uwe(n){var e=Rwe(n,"string");return typeof e=="symbol"?e:e+""}function Rwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class Mwe extends B.PureComponent{constructor(){super(...arguments),xk(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xk(this,"handleKeyDown",e=>{if(e.key==="Escape"){var t,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(t=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&t!==void 0?t:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((t=this.props.coordinate)===null||t===void 0?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:A,position:c,reverseDirection:u,useTranslate3d:h,viewBox:g,wrapperStyle:p,lastBoundingBox:m,innerRef:w,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:x}=Owe({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:A,position:c,reverseDirection:u,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:g}),E=v?{}:cE(cE({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=cE(cE({},E),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},p);return B.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:I,ref:w},s)}}var Lwe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Kf={isSsr:Lwe()},x7=()=>Fe(n=>n.rootProps.accessibilityLayer);function Rs(n){return Number.isFinite(n)}function e0(n){return typeof n=="number"&&n>0&&Number.isFinite(n)}function Bk(){return Bk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bk.apply(null,arguments)}function E3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function C3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(t),!0).forEach(function(r){Qwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):E3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Qwe(n,e,t){return(e=jwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jwe(n){var e=Hwe(n,"string");return typeof e=="symbol"?e:e+""}function Hwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var _3={curveBasisClosed:v0e,curveBasisOpen:w0e,curveBasis:y0e,curveBumpX:i0e,curveBumpY:s0e,curveLinearClosed:b0e,curveLinear:mI,curveMonotoneX:x0e,curveMonotoneY:B0e,curveNatural:E0e,curveStep:C0e,curveStepAfter:S0e,curveStepBefore:_0e},uE=n=>Rs(n.x)&&Rs(n.y),ly=n=>n.x,Ay=n=>n.y,Vwe=(n,e)=>{if(typeof n=="function")return n;var t="curve".concat(Bx(n));return(t==="curveMonotone"||t==="curveBump")&&e?_3["".concat(t).concat(e==="vertical"?"Y":"X")]:_3[t]||mI},Kwe=n=>{var{type:e="linear",points:t=[],baseLine:r,layout:i,connectNulls:s=!1}=n,a=Vwe(e,i),o=s?t.filter(uE):t,l;if(Array.isArray(r)){var A=s?r.filter(u=>uE(u)):r,c=o.map((u,h)=>C3(C3({},u),{},{base:A[h]}));return i==="vertical"?l=sE().y(Ay).x1(ly).x0(u=>u.base.x):l=sE().x(ly).y1(Ay).y0(u=>u.base.y),l.defined(uE).curve(a),l(c)}return i==="vertical"&&Be(r)?l=sE().y(Ay).x1(ly).x0(r):Be(r)?l=sE().x(ly).y1(Ay).y0(r):l=e9().x(ly).y(Ay),l.defined(uE).curve(a),l(o)},ZU=n=>{var{className:e,points:t,path:r,pathRef:i}=n;if((!t||!t.length)&&!r)return null;var s=t&&t.length?Kwe(n):r;return B.createElement("path",Bk({},MA(n),EU(n),{className:gt("recharts-curve",e),d:s===null?void 0:s,ref:i}))},$we=["x","y","top","left","width","height","className"];function Ek(){return Ek=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ek.apply(null,arguments)}function S3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Gwe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S3(Object(t),!0).forEach(function(r){zwe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zwe(n,e,t){return(e=Wwe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wwe(n){var e=Xwe(n,"string");return typeof e=="symbol"?e:e+""}function Xwe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ywe(n,e){if(n==null)return{};var t,r,i=qwe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function qwe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var Jwe=(n,e,t,r,i,s)=>"M".concat(n,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(t),Zwe=n=>{var{x:e=0,y:t=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=n,l=Ywe(n,$we),A=Gwe({x:e,y:t,top:r,left:i,width:s,height:a},l);return!Be(e)||!Be(t)||!Be(s)||!Be(a)||!Be(r)||!Be(i)?null:B.createElement("path",Ek({},sn(A,!0),{className:gt("recharts-cross",o),d:Jwe(e,t,s,a,r,i)}))};function ebe(n,e,t,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:n==="horizontal"?e.x-i:t.left+.5,y:n==="horizontal"?t.top+.5:e.y-i,width:n==="horizontal"?r:t.width-1,height:n==="horizontal"?t.height-1:r}}function I3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tbe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I3(Object(t),!0).forEach(function(r){nbe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function nbe(n,e,t){return(e=rbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rbe(n){var e=ibe(n,"string");return typeof e=="symbol"?e:e+""}function ibe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function js(n,e){var t=tbe({},n),r=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),t);return s}var B7={},E7={},C7={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(!t||typeof t!="object")return!1;const r=Object.getPrototypeOf(t);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(t)==="[object Object]":!1}n.isPlainObject=e})(C7);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=C7,t=RU,r=bI,i=xI,s=wI;function a(A,c,u){return o(A,c,void 0,void 0,void 0,void 0,u)}function o(A,c,u,h,g,p,m){const w=m(A,c,u,h,g,p);if(w!==void 0)return w;if(typeof A==typeof c)switch(typeof A){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return A===c;case"number":return A===c||Object.is(A,c);case"function":return A===c;case"object":return l(A,c,p,m)}return l(A,c,p,m)}function l(A,c,u,h){if(Object.is(A,c))return!0;let g=r.getTag(A),p=r.getTag(c);if(g===i.argumentsTag&&(g=i.objectTag),p===i.argumentsTag&&(p=i.objectTag),g!==p)return!1;switch(g){case i.stringTag:return A.toString()===c.toString();case i.numberTag:{const v=A.valueOf(),b=c.valueOf();return s.eq(v,b)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(A.valueOf(),c.valueOf());case i.regexpTag:return A.source===c.source&&A.flags===c.flags;case i.functionTag:return A===c}u=u??new Map;const m=u.get(A),w=u.get(c);if(m!=null&&w!=null)return m===c;u.set(A,c),u.set(c,A);try{switch(g){case i.mapTag:{if(A.size!==c.size)return!1;for(const[v,b]of A.entries())if(!c.has(v)||!o(b,c.get(v),v,A,c,u,h))return!1;return!0}case i.setTag:{if(A.size!==c.size)return!1;const v=Array.from(A.values()),b=Array.from(c.values());for(let x=0;x<v.length;x++){const E=v[x],I=b.findIndex(P=>o(E,P,void 0,A,c,u,h));if(I===-1)return!1;b.splice(I,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(A)!==Buffer.isBuffer(c)||A.length!==c.length)return!1;for(let v=0;v<A.length;v++)if(!o(A[v],c[v],v,A,c,u,h))return!1;return!0}case i.arrayBufferTag:return A.byteLength!==c.byteLength?!1:l(new Uint8Array(A),new Uint8Array(c),u,h);case i.dataViewTag:return A.byteLength!==c.byteLength||A.byteOffset!==c.byteOffset?!1:l(new Uint8Array(A),new Uint8Array(c),u,h);case i.errorTag:return A.name===c.name&&A.message===c.message;case i.objectTag:{if(!(l(A.constructor,c.constructor,u,h)||e.isPlainObject(A)&&e.isPlainObject(c)))return!1;const b=[...Object.keys(A),...t.getSymbols(A)],x=[...Object.keys(c),...t.getSymbols(c)];if(b.length!==x.length)return!1;for(let E=0;E<b.length;E++){const I=b[E],P=A[I];if(!Object.hasOwn(c,I))return!1;const _=c[I];if(!o(P,_,I,A,c,u,h))return!1}return!0}default:return!1}}finally{u.delete(A),u.delete(c)}}n.isEqualWith=a})(E7);var _7={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(){}n.noop=e})(_7);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=E7,t=_7;function r(i,s){return e.isEqualWith(i,s,t.noop)}n.isEqual=r})(B7);var sbe=B7.isEqual;const abe=Yo(sbe);var t_=1e-4,S7=(n,e)=>[0,3*n,3*e-6*n,3*n-3*e+1],I7=(n,e)=>n.map((t,r)=>t*e**r).reduce((t,r)=>t+r),T3=(n,e)=>t=>{var r=S7(n,e);return I7(r,t)},obe=(n,e)=>t=>{var r=S7(n,e),i=[...r.map((s,a)=>s*a).slice(1),0];return I7(i,t)},P3=function(){for(var e,t,r,i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,r,t,i]=[0,0,1,1];break;case"ease":[e,r,t,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,t,i]=[.42,0,1,1];break;case"ease-out":[e,r,t,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,t,i]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,t,i]=l[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else a.length===4&&([e,r,t,i]=a);var A=T3(e,t),c=T3(r,i),u=obe(e,t),h=p=>p>1?1:p<0?0:p,g=p=>{for(var m=p>1?1:p,w=m,v=0;v<8;++v){var b=A(w)-m,x=u(w);if(Math.abs(b-m)<t_||x<t_)return c(w);w=h(w-b/x)}return c(w)};return g.isStepper=!1,g},lbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:t=100,damping:r=8,dt:i=17}=e,s=(a,o,l)=>{var A=-(a-o)*t,c=l*r,u=l+(A-c)*i/1e3,h=l*i/1e3+a;return Math.abs(h-o)<t_&&Math.abs(u)<t_?[o,0]:[h,u]};return s.isStepper=!0,s.dt=i,s},T7=n=>{if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return P3(n);case"spring":return lbe();default:if(n.split("(")[0]==="cubic-bezier")return P3(n)}return typeof n=="function"?n:null};function F3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function k3(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F3(Object(t),!0).forEach(function(r){Abe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):F3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Abe(n,e,t){return(e=cbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cbe(n){var e=ube(n,"string");return typeof e=="symbol"?e:e+""}function ube(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var dbe=n=>n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),hbe=(n,e,t)=>n.map(r=>"".concat(dbe(r)," ").concat(e,"ms ").concat(t)).join(","),fbe=(n,e)=>[Object.keys(n),Object.keys(e)].reduce((t,r)=>t.filter(i=>r.includes(i))),pw=(n,e)=>Object.keys(e).reduce((t,r)=>k3(k3({},t),{},{[r]:n(r,e[r])}),{});function N3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ur(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N3(Object(t),!0).forEach(function(r){gbe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function gbe(n,e,t){return(e=pbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function pbe(n){var e=mbe(n,"string");return typeof e=="symbol"?e:e+""}function mbe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var n_=(n,e,t)=>n+(e-n)*t,Ck=n=>{var{from:e,to:t}=n;return e!==t},P7=(n,e,t)=>{var r=pw((i,s)=>{if(Ck(s)){var[a,o]=n(s.from,s.to,s.velocity);return Ur(Ur({},s),{},{from:a,velocity:o})}return s},e);return t<1?pw((i,s)=>Ck(s)?Ur(Ur({},s),{},{velocity:n_(s.velocity,r[i].velocity,t),from:n_(s.from,r[i].from,t)}):s,e):P7(n,r,t-1)};function ybe(n,e,t,r,i,s){var a,o=r.reduce((h,g)=>Ur(Ur({},h),{},{[g]:{from:n[g],velocity:0,to:e[g]}}),{}),l=()=>pw((h,g)=>g.from,o),A=()=>!Object.values(o).filter(Ck).length,c=null,u=h=>{a||(a=h);var g=h-a,p=g/t.dt;o=P7(t,o,p),i(Ur(Ur(Ur({},n),e),l())),a=h,A()||(c=s.setTimeout(u))};return()=>(c=s.setTimeout(u),()=>{c()})}function vbe(n,e,t,r,i,s,a){var o=null,l=i.reduce((u,h)=>Ur(Ur({},u),{},{[h]:[n[h],e[h]]}),{}),A,c=u=>{A||(A=u);var h=(u-A)/r,g=pw((m,w)=>n_(...w,t(h)),l);if(s(Ur(Ur(Ur({},n),e),g)),h<1)o=a.setTimeout(c);else{var p=pw((m,w)=>n_(...w,t(1)),l);s(Ur(Ur(Ur({},n),e),p))}};return()=>(o=a.setTimeout(c),()=>{o()})}const F7=(n,e,t,r,i,s)=>{var a=fbe(n,e);return t.isStepper===!0?ybe(n,e,t,a,i,s):vbe(n,e,t,r,a,i,s)};function wbe(n){var e,t=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...A]=o;if(typeof l=="number"){i=n.setTimeout(s.bind(null,A),l);return}s(l),i=n.setTimeout(s.bind(null,A));return}typeof a=="string"&&(e=a,t(e)),typeof a=="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(t=a,()=>{t=()=>null}),getTimeoutController:()=>n}}class bbe{setTimeout(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=t?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{cancelAnimationFrame(i)}}}function xbe(){return wbe(new bbe)}var Bbe=B.createContext(xbe);function k7(n,e){var t=B.useContext(Bbe);return B.useMemo(()=>e??t(n),[n,e,t])}var Ebe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _k(){return _k=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_k.apply(null,arguments)}function Cbe(n,e){if(n==null)return{};var t,r,i=_be(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function _be(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function D3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function tc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(t),!0).forEach(function(r){zd(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):D3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function zd(n,e,t){return(e=Sbe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sbe(n){var e=Ibe(n,"string");return typeof e=="symbol"?e:e+""}function Ibe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class eR extends B.PureComponent{constructor(e,t){super(e,t),zd(this,"mounted",!1),zd(this,"manager",void 0),zd(this,"stopJSAnimation",null),zd(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:s,to:a,children:o,duration:l,animationManager:A}=this.props;if(this.manager=A,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:a});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:i?{[i]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,!(!e||!t)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:r,attributeName:i,shouldReAnimate:s,to:a,from:o}=this.props,{style:l}=this.state;if(r){if(!t){var A={style:i?{[i]:a}:a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(A);return}if(!(abe(e.to,a)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||s?o:e.to;if(this.state&&l){var h={style:i?{[i]:u}:u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(h)}this.runAnimation(tc(tc({},this.props),{},{from:u,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l}=e,A=F7(t,r,T7(s),i,this.changeStyle,this.manager.getTimeoutController()),c=()=>{this.stopJSAnimation=A()};this.manager.start([l,a,c,i,o])}runAnimation(e){var{begin:t,duration:r,attributeName:i,to:s,easing:a,onAnimationStart:o,onAnimationEnd:l,children:A}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof A=="function"||a==="spring"){this.runJSAnimation(e);return}var c=i?{[i]:s}:s,u=hbe(Object.keys(c),r,a);this.manager.start([o,t,tc(tc({},c),{},{transition:u}),r,l])}render(){var e=this.props,{children:t,begin:r,duration:i,attributeName:s,easing:a,isActive:o,from:l,to:A,canBegin:c,onAnimationEnd:u,shouldReAnimate:h,onAnimationReStart:g,animationManager:p}=e,m=Cbe(e,Ebe),w=B.Children.count(t),v=this.state.style;if(typeof t=="function")return t(v);if(!o||w===0||i<=0)return t;var b=x=>{var{style:E={},className:I}=x.props,P=B.cloneElement(x,tc(tc({},m),{},{style:tc(tc({},E),v),className:I}));return P};return w===1?b(B.Children.only(t)):B.createElement("div",null,B.Children.map(t,x=>b(x)))}}zd(eR,"displayName","Animate");zd(eR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function r_(n){var e,t=k7((e=n.attributeName)!==null&&e!==void 0?e:Object.keys(n.to).join(","),n.animationManager);return B.createElement(eR,_k({},n,{animationManager:t}))}function i_(){return i_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i_.apply(null,arguments)}var O3=(n,e,t,r,i)=>{var s=Math.min(Math.abs(t)/2,Math.abs(r)/2),a=r>=0?1:-1,o=t>=0?1:-1,l=r>=0&&t>=0||r<0&&t<0?1:0,A;if(s>0&&i instanceof Array){for(var c=[0,0,0,0],u=0,h=4;u<h;u++)c[u]=i[u]>s?s:i[u];A="M".concat(n,",").concat(e+a*c[0]),c[0]>0&&(A+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(l,",").concat(n+o*c[0],",").concat(e)),A+="L ".concat(n+t-o*c[1],",").concat(e),c[1]>0&&(A+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(l,`,
        `).concat(n+t,",").concat(e+a*c[1])),A+="L ".concat(n+t,",").concat(e+r-a*c[2]),c[2]>0&&(A+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(l,`,
        `).concat(n+t-o*c[2],",").concat(e+r)),A+="L ".concat(n+o*c[3],",").concat(e+r),c[3]>0&&(A+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(l,`,
        `).concat(n,",").concat(e+r-a*c[3])),A+="Z"}else if(s>0&&i===+i&&i>0){var g=Math.min(s,i);A="M ".concat(n,",").concat(e+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(n+o*g,",").concat(e,`
            L `).concat(n+t-o*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(n+t,",").concat(e+a*g,`
            L `).concat(n+t,",").concat(e+r-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(n+t-o*g,",").concat(e+r,`
            L `).concat(n+o*g,",").concat(e+r,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(n,",").concat(e+r-a*g," Z")}else A="M ".concat(n,",").concat(e," h ").concat(t," v ").concat(r," h ").concat(-t," Z");return A},Tbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},N7=n=>{var e=js(n,Tbe),t=B.useRef(null),[r,i]=B.useState(-1);B.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var v=t.current.getTotalLength();v&&i(v)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:A,className:c}=e,{animationEasing:u,animationDuration:h,animationBegin:g,isAnimationActive:p,isUpdateAnimationActive:m}=e;if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var w=gt("recharts-rectangle",c);return m?B.createElement(r_,{canBegin:r>0,from:{width:o,height:l,x:s,y:a},to:{width:o,height:l,x:s,y:a},duration:h,animationEasing:u,isActive:m},v=>{var{width:b,height:x,x:E,y:I}=v;return B.createElement(r_,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:h,isActive:p,easing:u},B.createElement("path",i_({},sn(e,!0),{className:w,d:O3(E,I,b,x,A),ref:t})))}):B.createElement("path",i_({},sn(e,!0),{className:w,d:O3(s,a,o,l,A)}))};function D7(n){var{cx:e,cy:t,radius:r,startAngle:i,endAngle:s}=n,a=Qn(e,t,r,i),o=Qn(e,t,r,s);return{points:[a,o],cx:e,cy:t,radius:r,startAngle:i,endAngle:s}}function Sk(){return Sk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Sk.apply(null,arguments)}var Pbe=(n,e)=>{var t=yr(e-n),r=Math.min(Math.abs(e-n),359.999);return t*r},dE=n=>{var{cx:e,cy:t,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=n,A=o*(a?1:-1)+r,c=Math.asin(o/A)/e_,u=l?i:i+s*c,h=Qn(e,t,A,u),g=Qn(e,t,r,u),p=l?i-s*c:i,m=Qn(e,t,A*Math.cos(c*e_),p);return{center:h,circleTangency:g,lineTangency:m,theta:c}},O7=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=n,o=Pbe(s,a),l=s+o,A=Qn(e,t,i,s),c=Qn(e,t,i,l),u="M ".concat(A.x,",").concat(A.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(r>0){var h=Qn(e,t,r,s),g=Qn(e,t,r,l);u+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(e,",").concat(t," Z");return u},Fbe=n=>{var{cx:e,cy:t,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:A}=n,c=yr(A-l),{circleTangency:u,lineTangency:h,theta:g}=dE({cx:e,cy:t,radius:i,angle:l,sign:c,cornerRadius:s,cornerIsExternal:o}),{circleTangency:p,lineTangency:m,theta:w}=dE({cx:e,cy:t,radius:i,angle:A,sign:-c,cornerRadius:s,cornerIsExternal:o}),v=o?Math.abs(l-A):Math.abs(l-A)-g-w;if(v<0)return a?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):O7({cx:e,cy:t,innerRadius:r,outerRadius:i,startAngle:l,endAngle:A});var b="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(u.x,",").concat(u.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(v>180),",").concat(+(c<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
  `);if(r>0){var{circleTangency:x,lineTangency:E,theta:I}=dE({cx:e,cy:t,radius:r,angle:l,sign:c,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:P,lineTangency:_,theta:T}=dE({cx:e,cy:t,radius:r,angle:A,sign:-c,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),k=o?Math.abs(l-A):Math.abs(l-A)-I-T;if(k<0&&s===0)return"".concat(b,"L").concat(e,",").concat(t,"Z");b+="L".concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(c>0),",").concat(x.x,",").concat(x.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(E.x,",").concat(E.y,"Z")}else b+="L".concat(e,",").concat(t,"Z");return b},kbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},U7=n=>{var e=js(n,kbe),{cx:t,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:A,endAngle:c,className:u}=e;if(s<i||A===c)return null;var h=gt("recharts-sector",u),g=s-i,p=Ii(a,g,0,!0),m;return p>0&&Math.abs(A-c)<360?m=Fbe({cx:t,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(p,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:A,endAngle:c}):m=O7({cx:t,cy:r,innerRadius:i,outerRadius:s,startAngle:A,endAngle:c}),B.createElement("path",Sk({},sn(e,!0),{className:h,d:m}))};function Nbe(n,e,t){var r,i,s,a;if(n==="horizontal")r=e.x,s=r,i=t.top,a=t.top+t.height;else if(n==="vertical")i=e.y,a=i,r=t.left,s=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(n==="centric"){var{cx:o,cy:l,innerRadius:A,outerRadius:c,angle:u}=e,h=Qn(o,l,A,u),g=Qn(o,l,c,u);r=h.x,i=h.y,s=g.x,a=g.y}else return D7(e);return[{x:r,y:i},{x:s,y:a}]}var R7={},M7={},L7={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=QU;function t(r){return e.isSymbol(r)?NaN:Number(r)}n.toNumber=t})(L7);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=L7;function t(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}n.toFinite=t})(M7);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=jU,t=M7;function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=t.toFinite(i),s===void 0?(s=i,i=0):s=t.toFinite(s),a=a===void 0?i<s?1:-1:t.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),l=new Array(o);for(let A=0;A<o;A++)l[A]=i,i+=a;return l}n.range=r})(R7);var Dbe=R7.range;const Q7=Yo(Dbe);function Du(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Obe(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function tR(n){let e,t,r;n.length!==2?(e=Du,t=(o,l)=>Du(n(o),l),r=(o,l)=>n(o)-l):(e=n===Du||n===Obe?n:Ube,t=n,r=n);function i(o,l,A=0,c=o.length){if(A<c){if(e(l,l)!==0)return c;do{const u=A+c>>>1;t(o[u],l)<0?A=u+1:c=u}while(A<c)}return A}function s(o,l,A=0,c=o.length){if(A<c){if(e(l,l)!==0)return c;do{const u=A+c>>>1;t(o[u],l)<=0?A=u+1:c=u}while(A<c)}return A}function a(o,l,A=0,c=o.length){const u=i(o,l,A,c-1);return u>A&&r(o[u-1],l)>-r(o[u],l)?u-1:u}return{left:i,center:a,right:s}}function Ube(){return 0}function j7(n){return n===null?NaN:+n}function*Rbe(n,e){for(let t of n)t!=null&&(t=+t)>=t&&(yield t)}const Mbe=tR(Du),Sx=Mbe.right;tR(j7).center;class U3 extends Map{constructor(e,t=jbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(R3(this,e))}has(e){return super.has(R3(this,e))}set(e,t){return super.set(Lbe(this,e),t)}delete(e){return super.delete(Qbe(this,e))}}function R3({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function Lbe({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Qbe({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function jbe(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Hbe(n=Du){if(n===Du)return H7;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const r=n(e,t);return r||r===0?r:(n(t,t)===0)-(n(e,e)===0)}}function H7(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0)}const Vbe=Math.sqrt(50),Kbe=Math.sqrt(10),$be=Math.sqrt(2);function s_(n,e,t){const r=(e-n)/Math.max(0,t),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Vbe?10:s>=Kbe?5:s>=$be?2:1;let o,l,A;return i<0?(A=Math.pow(10,-i)/a,o=Math.round(n*A),l=Math.round(e*A),o/A<n&&++o,l/A>e&&--l,A=-A):(A=Math.pow(10,i)*a,o=Math.round(n/A),l=Math.round(e/A),o*A<n&&++o,l*A>e&&--l),l<o&&.5<=t&&t<2?s_(n,e,t*2):[o,l,A]}function Ik(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const r=e<n,[i,s,a]=r?s_(e,n,t):s_(n,e,t);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let A=0;A<o;++A)l[A]=(s-A)/-a;else for(let A=0;A<o;++A)l[A]=(s-A)*a;else if(a<0)for(let A=0;A<o;++A)l[A]=(i+A)/-a;else for(let A=0;A<o;++A)l[A]=(i+A)*a;return l}function Tk(n,e,t){return e=+e,n=+n,t=+t,s_(n,e,t)[2]}function Pk(n,e,t){e=+e,n=+n,t=+t;const r=e<n,i=r?Tk(e,n,t):Tk(n,e,t);return(r?-1:1)*(i<0?1/-i:i)}function M3(n,e){let t;for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);return t}function L3(n,e){let t;for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);return t}function V7(n,e,t=0,r=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),r=Math.floor(Math.min(n.length-1,r)),!(t<=e&&e<=r))return n;for(i=i===void 0?H7:Hbe(i);r>t;){if(r-t>600){const l=r-t+1,A=e-t+1,c=Math.log(l),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(l-u)/l)*(A-l/2<0?-1:1),g=Math.max(t,Math.floor(e-A*u/l+h)),p=Math.min(r,Math.floor(e+(l-A)*u/l+h));V7(n,e,g,p,i)}const s=n[e];let a=t,o=r;for(cy(n,t,e),i(n[r],s)>0&&cy(n,t,r);a<o;){for(cy(n,a,o),++a,--o;i(n[a],s)<0;)++a;for(;i(n[o],s)>0;)--o}i(n[t],s)===0?cy(n,t,o):(++o,cy(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}return n}function cy(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function Gbe(n,e,t){if(n=Float64Array.from(Rbe(n)),!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return L3(n);if(e>=1)return M3(n);var r,i=(r-1)*e,s=Math.floor(i),a=M3(V7(n,s).subarray(0,s+1)),o=L3(n.subarray(s+1));return a+(o-a)*(i-s)}}function zbe(n,e,t=j7){if(!(!(r=n.length)||isNaN(e=+e))){if(e<=0||r<2)return+t(n[0],0,n);if(e>=1)return+t(n[r-1],r-1,n);var r,i=(r-1)*e,s=Math.floor(i),a=+t(n[s],s,n),o=+t(n[s+1],s+1,n);return a+(o-a)*(i-s)}}function Wbe(n,e,t){n=+n,e=+e,t=(i=arguments.length)<2?(e=n,n=0,1):i<3?1:+t;for(var r=-1,i=Math.max(0,Math.ceil((e-n)/t))|0,s=new Array(i);++r<i;)s[r]=n+r*t;return s}function _a(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}function jA(n,e){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break}default:{this.domain(n),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Fk=Symbol("implicit");function nR(){var n=new U3,e=[],t=[],r=Fk;function i(s){let a=n.get(s);if(a===void 0){if(r!==Fk)return r;n.set(s,a=e.push(s)-1)}return t[a%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new U3;for(const a of s)n.has(a)||n.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return nR(e,t).unknown(r)},_a.apply(i,arguments),i}function rR(){var n=nR().unknown(void 0),e=n.domain,t=n.range,r=0,i=1,s,a,o=!1,l=0,A=0,c=.5;delete n.unknown;function u(){var h=e().length,g=i<r,p=g?i:r,m=g?r:i;s=(m-p)/Math.max(1,h-l+A*2),o&&(s=Math.floor(s)),p+=(m-p-s*(h-l))*c,a=s*(1-l),o&&(p=Math.round(p),a=Math.round(a));var w=Wbe(h).map(function(v){return p+s*v});return t(g?w.reverse():w)}return n.domain=function(h){return arguments.length?(e(h),u()):e()},n.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,u()):[r,i]},n.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,u()},n.bandwidth=function(){return a},n.step=function(){return s},n.round=function(h){return arguments.length?(o=!!h,u()):o},n.padding=function(h){return arguments.length?(l=Math.min(1,A=+h),u()):l},n.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),u()):l},n.paddingOuter=function(h){return arguments.length?(A=+h,u()):A},n.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),u()):c},n.copy=function(){return rR(e(),[r,i]).round(o).paddingInner(l).paddingOuter(A).align(c)},_a.apply(u(),arguments)}function K7(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return K7(e())},n}function Xbe(){return K7(rR.apply(null,arguments).paddingInner(1))}function iR(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function $7(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Ix(){}var mw=.7,a_=1/mw,up="\\s*([+-]?\\d+)\\s*",yw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ybe=/^#([0-9a-f]{3,8})$/,qbe=new RegExp(`^rgb\\(${up},${up},${up}\\)$`),Jbe=new RegExp(`^rgb\\(${Ko},${Ko},${Ko}\\)$`),Zbe=new RegExp(`^rgba\\(${up},${up},${up},${yw}\\)$`),exe=new RegExp(`^rgba\\(${Ko},${Ko},${Ko},${yw}\\)$`),txe=new RegExp(`^hsl\\(${yw},${Ko},${Ko}\\)$`),nxe=new RegExp(`^hsla\\(${yw},${Ko},${Ko},${yw}\\)$`),Q3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iR(Ix,vw,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:j3,formatHex:j3,formatHex8:rxe,formatHsl:ixe,formatRgb:H3,toString:H3});function j3(){return this.rgb().formatHex()}function rxe(){return this.rgb().formatHex8()}function ixe(){return G7(this).formatHsl()}function H3(){return this.rgb().formatRgb()}function vw(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=Ybe.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?V3(e):t===3?new Ki(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?hE(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?hE(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qbe.exec(n))?new Ki(e[1],e[2],e[3],1):(e=Jbe.exec(n))?new Ki(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zbe.exec(n))?hE(e[1],e[2],e[3],e[4]):(e=exe.exec(n))?hE(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=txe.exec(n))?G3(e[1],e[2]/100,e[3]/100,1):(e=nxe.exec(n))?G3(e[1],e[2]/100,e[3]/100,e[4]):Q3.hasOwnProperty(n)?V3(Q3[n]):n==="transparent"?new Ki(NaN,NaN,NaN,0):null}function V3(n){return new Ki(n>>16&255,n>>8&255,n&255,1)}function hE(n,e,t,r){return r<=0&&(n=e=t=NaN),new Ki(n,e,t,r)}function sxe(n){return n instanceof Ix||(n=vw(n)),n?(n=n.rgb(),new Ki(n.r,n.g,n.b,n.opacity)):new Ki}function kk(n,e,t,r){return arguments.length===1?sxe(n):new Ki(n,e,t,r??1)}function Ki(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}iR(Ki,kk,$7(Ix,{brighter(n){return n=n==null?a_:Math.pow(a_,n),new Ki(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?mw:Math.pow(mw,n),new Ki(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Ki(uf(this.r),uf(this.g),uf(this.b),o_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:K3,formatHex:K3,formatHex8:axe,formatRgb:$3,toString:$3}));function K3(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}`}function axe(){return`#${Wd(this.r)}${Wd(this.g)}${Wd(this.b)}${Wd((isNaN(this.opacity)?1:this.opacity)*255)}`}function $3(){const n=o_(this.opacity);return`${n===1?"rgb(":"rgba("}${uf(this.r)}, ${uf(this.g)}, ${uf(this.b)}${n===1?")":`, ${n})`}`}function o_(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function uf(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Wd(n){return n=uf(n),(n<16?"0":"")+n.toString(16)}function G3(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new Wa(n,e,t,r)}function G7(n){if(n instanceof Wa)return new Wa(n.h,n.s,n.l,n.opacity);if(n instanceof Ix||(n=vw(n)),!n)return new Wa;if(n instanceof Wa)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),s=Math.max(e,t,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(t-r)/o+(t<r)*6:t===s?a=(r-e)/o+2:a=(e-t)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Wa(a,o,l,n.opacity)}function oxe(n,e,t,r){return arguments.length===1?G7(n):new Wa(n,e,t,r??1)}function Wa(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}iR(Wa,oxe,$7(Ix,{brighter(n){return n=n==null?a_:Math.pow(a_,n),new Wa(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?mw:Math.pow(mw,n),new Wa(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Ki(LP(n>=240?n-240:n+120,i,r),LP(n,i,r),LP(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new Wa(z3(this.h),fE(this.s),fE(this.l),o_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=o_(this.opacity);return`${n===1?"hsl(":"hsla("}${z3(this.h)}, ${fE(this.s)*100}%, ${fE(this.l)*100}%${n===1?")":`, ${n})`}`}}));function z3(n){return n=(n||0)%360,n<0?n+360:n}function fE(n){return Math.max(0,Math.min(1,n||0))}function LP(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const sR=n=>()=>n;function lxe(n,e){return function(t){return n+t*e}}function Axe(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function cxe(n){return(n=+n)==1?z7:function(e,t){return t-e?Axe(e,t,n):sR(isNaN(e)?t:e)}}function z7(n,e){var t=e-n;return t?lxe(n,t):sR(isNaN(n)?e:n)}const W3=function n(e){var t=cxe(e);function r(i,s){var a=t((i=kk(i)).r,(s=kk(s)).r),o=t(i.g,s.g),l=t(i.b,s.b),A=z7(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=A(c),i+""}}return r.gamma=n,r}(1);function uxe(n,e){e||(e=[]);var t=n?Math.min(e.length,n.length):0,r=e.slice(),i;return function(s){for(i=0;i<t;++i)r[i]=n[i]*(1-s)+e[i]*s;return r}}function dxe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function hxe(n,e){var t=e?e.length:0,r=n?Math.min(t,n.length):0,i=new Array(r),s=new Array(t),a;for(a=0;a<r;++a)i[a]=v0(n[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function fxe(n,e){var t=new Date;return n=+n,e=+e,function(r){return t.setTime(n*(1-r)+e*r),t}}function l_(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function gxe(n,e){var t={},r={},i;(n===null||typeof n!="object")&&(n={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in n?t[i]=v0(n[i],e[i]):r[i]=e[i];return function(s){for(i in t)r[i]=t[i](s);return r}}var Nk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QP=new RegExp(Nk.source,"g");function pxe(n){return function(){return n}}function mxe(n){return function(e){return n(e)+""}}function yxe(n,e){var t=Nk.lastIndex=QP.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(n=n+"",e=e+"";(r=Nk.exec(n))&&(i=QP.exec(e));)(s=i.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:l_(r,i)})),t=QP.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?mxe(l[0].x):pxe(e):(e=l.length,function(A){for(var c=0,u;c<e;++c)o[(u=l[c]).i]=u.x(A);return o.join("")})}function v0(n,e){var t=typeof e,r;return e==null||t==="boolean"?sR(e):(t==="number"?l_:t==="string"?(r=vw(e))?(e=r,W3):yxe:e instanceof vw?W3:e instanceof Date?fxe:dxe(e)?uxe:Array.isArray(e)?hxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gxe:l_)(n,e)}function aR(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function vxe(n,e){e===void 0&&(e=n,n=v0);for(var t=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);t<r;)s[t]=n(i,i=e[++t]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function wxe(n){return function(){return n}}function A_(n){return+n}var X3=[0,1];function xi(n){return n}function Dk(n,e){return(e-=n=+n)?function(t){return(t-n)/e}:wxe(isNaN(e)?NaN:.5)}function bxe(n,e){var t;return n>e&&(t=n,n=e,e=t),function(r){return Math.max(n,Math.min(e,r))}}function xxe(n,e,t){var r=n[0],i=n[1],s=e[0],a=e[1];return i<r?(r=Dk(i,r),s=t(a,s)):(r=Dk(r,i),s=t(s,a)),function(o){return s(r(o))}}function Bxe(n,e,t){var r=Math.min(n.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Dk(n[a],n[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var l=Sx(n,o,1,r)-1;return s[l](i[l](o))}}function Tx(n,e){return e.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function OI(){var n=X3,e=X3,t=v0,r,i,s,a=xi,o,l,A;function c(){var h=Math.min(n.length,e.length);return a!==xi&&(a=bxe(n[0],n[h-1])),o=h>2?Bxe:xxe,l=A=null,u}function u(h){return h==null||isNaN(h=+h)?s:(l||(l=o(n.map(r),e,t)))(r(a(h)))}return u.invert=function(h){return a(i((A||(A=o(e,n.map(r),l_)))(h)))},u.domain=function(h){return arguments.length?(n=Array.from(h,A_),c()):n.slice()},u.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},u.rangeRound=function(h){return e=Array.from(h),t=aR,c()},u.clamp=function(h){return arguments.length?(a=h?!0:xi,c()):a!==xi},u.interpolate=function(h){return arguments.length?(t=h,c()):t},u.unknown=function(h){return arguments.length?(s=h,u):s},function(h,g){return r=h,i=g,c()}}function oR(){return OI()(xi,xi)}function Exe(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function c_(n,e){if((t=(n=e?n.toExponential(e-1):n.toExponential()).indexOf("e"))<0)return null;var t,r=n.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+n.slice(t+1)]}function t0(n){return n=c_(Math.abs(n)),n?n[1]:NaN}function Cxe(n,e){return function(t,r){for(var i=t.length,s=[],a=0,o=n[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(t.substring(i-=o,i+o)),!((l+=o+1)>r));)o=n[a=(a+1)%n.length];return s.reverse().join(e)}}function _xe(n){return function(e){return e.replace(/[0-9]/g,function(t){return n[+t]})}}var Sxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ww(n){if(!(e=Sxe.exec(n)))throw new Error("invalid format: "+n);var e;return new lR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ww.prototype=lR.prototype;function lR(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}lR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ixe(n){e:for(var e=n.length,t=1,r=-1,i;t<e;++t)switch(n[t]){case".":r=i=t;break;case"0":r===0&&(r=t),i=t;break;default:if(!+n[t])break e;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var W7;function Txe(n,e){var t=c_(n,e);if(!t)return n+"";var r=t[0],i=t[1],s=i-(W7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+c_(n,Math.max(0,e+s-1))[0]}function Y3(n,e){var t=c_(n,e);if(!t)return n+"";var r=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const q3={"%":(n,e)=>(n*100).toFixed(e),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Exe,e:(n,e)=>n.toExponential(e),f:(n,e)=>n.toFixed(e),g:(n,e)=>n.toPrecision(e),o:n=>Math.round(n).toString(8),p:(n,e)=>Y3(n*100,e),r:Y3,s:Txe,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function J3(n){return n}var Z3=Array.prototype.map,e5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pxe(n){var e=n.grouping===void 0||n.thousands===void 0?J3:Cxe(Z3.call(n.grouping,Number),n.thousands+""),t=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",s=n.numerals===void 0?J3:_xe(Z3.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function A(u){u=ww(u);var h=u.fill,g=u.align,p=u.sign,m=u.symbol,w=u.zero,v=u.width,b=u.comma,x=u.precision,E=u.trim,I=u.type;I==="n"?(b=!0,I="g"):q3[I]||(x===void 0&&(x=12),E=!0,I="g"),(w||h==="0"&&g==="=")&&(w=!0,h="0",g="=");var P=m==="$"?t:m==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",_=m==="$"?r:/[%p]/.test(I)?a:"",T=q3[I],k=/[defgprs%]/.test(I);x=x===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O(U){var L=P,R=_,re,he,te;if(I==="c")R=T(U)+R,U="";else{U=+U;var ee=U<0||1/U<0;if(U=isNaN(U)?l:T(Math.abs(U),x),E&&(U=Ixe(U)),ee&&+U==0&&p!=="+"&&(ee=!1),L=(ee?p==="("?p:o:p==="-"||p==="("?"":p)+L,R=(I==="s"?e5[8+W7/3]:"")+R+(ee&&p==="("?")":""),k){for(re=-1,he=U.length;++re<he;)if(te=U.charCodeAt(re),48>te||te>57){R=(te===46?i+U.slice(re+1):U.slice(re))+R,U=U.slice(0,re);break}}}b&&!w&&(U=e(U,1/0));var Z=L.length+U.length+R.length,ae=Z<v?new Array(v-Z+1).join(h):"";switch(b&&w&&(U=e(ae+U,ae.length?v-R.length:1/0),ae=""),g){case"<":U=L+U+R+ae;break;case"=":U=L+ae+U+R;break;case"^":U=ae.slice(0,Z=ae.length>>1)+L+U+R+ae.slice(Z);break;default:U=ae+L+U+R;break}return s(U)}return O.toString=function(){return u+""},O}function c(u,h){var g=A((u=ww(u),u.type="f",u)),p=Math.max(-8,Math.min(8,Math.floor(t0(h)/3)))*3,m=Math.pow(10,-p),w=e5[8+p/3];return function(v){return g(m*v)+w}}return{format:A,formatPrefix:c}}var gE,AR,X7;Fxe({thousands:",",grouping:[3],currency:["$",""]});function Fxe(n){return gE=Pxe(n),AR=gE.format,X7=gE.formatPrefix,gE}function kxe(n){return Math.max(0,-t0(Math.abs(n)))}function Nxe(n,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(t0(e)/3)))*3-t0(Math.abs(n)))}function Dxe(n,e){return n=Math.abs(n),e=Math.abs(e)-n,Math.max(0,t0(e)-t0(n))+1}function Y7(n,e,t,r){var i=Pk(n,e,t),s;switch(r=ww(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(e));return r.precision==null&&!isNaN(s=Nxe(i,a))&&(r.precision=s),X7(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Dxe(i,Math.max(Math.abs(n),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=kxe(i))&&(r.precision=s-(r.type==="%")*2);break}}return AR(r)}function ud(n){var e=n.domain;return n.ticks=function(t){var r=e();return Ik(r[0],r[r.length-1],t??10)},n.tickFormat=function(t,r){var i=e();return Y7(i[0],i[i.length-1],t??10,r)},n.nice=function(t){t==null&&(t=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,A,c=10;for(o<a&&(A=a,a=o,o=A,A=i,i=s,s=A);c-- >0;){if(A=Tk(a,o,t),A===l)return r[i]=a,r[s]=o,e(r);if(A>0)a=Math.floor(a/A)*A,o=Math.ceil(o/A)*A;else if(A<0)a=Math.ceil(a*A)/A,o=Math.floor(o*A)/A;else break;l=A}return n},n}function q7(){var n=oR();return n.copy=function(){return Tx(n,q7())},_a.apply(n,arguments),ud(n)}function J7(n){var e;function t(r){return r==null||isNaN(r=+r)?e:r}return t.invert=t,t.domain=t.range=function(r){return arguments.length?(n=Array.from(r,A_),t):n.slice()},t.unknown=function(r){return arguments.length?(e=r,t):e},t.copy=function(){return J7(n).unknown(e)},n=arguments.length?Array.from(n,A_):[0,1],ud(t)}function Z7(n,e){n=n.slice();var t=0,r=n.length-1,i=n[t],s=n[r],a;return s<i&&(a=t,t=r,r=a,a=i,i=s,s=a),n[t]=e.floor(i),n[r]=e.ceil(s),n}function t5(n){return Math.log(n)}function n5(n){return Math.exp(n)}function Oxe(n){return-Math.log(-n)}function Uxe(n){return-Math.exp(-n)}function Rxe(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Mxe(n){return n===10?Rxe:n===Math.E?Math.exp:e=>Math.pow(n,e)}function Lxe(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),e=>Math.log(e)/n)}function r5(n){return(e,t)=>-n(-e,t)}function cR(n){const e=n(t5,n5),t=e.domain;let r=10,i,s;function a(){return i=Lxe(r),s=Mxe(r),t()[0]<0?(i=r5(i),s=r5(s),n(Oxe,Uxe)):n(t5,n5),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(t(o),a()):t()},e.ticks=o=>{const l=t();let A=l[0],c=l[l.length-1];const u=c<A;u&&([A,c]=[c,A]);let h=i(A),g=i(c),p,m;const w=o==null?10:+o;let v=[];if(!(r%1)&&g-h<w){if(h=Math.floor(h),g=Math.ceil(g),A>0){for(;h<=g;++h)for(p=1;p<r;++p)if(m=h<0?p/s(-h):p*s(h),!(m<A)){if(m>c)break;v.push(m)}}else for(;h<=g;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/s(-h):p*s(h),!(m<A)){if(m>c)break;v.push(m)}v.length*2<w&&(v=Ik(A,c,w))}else v=Ik(h,g,Math.min(g-h,w)).map(s);return u?v.reverse():v},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ww(l)).precision==null&&(l.trim=!0),l=AR(l)),o===1/0)return l;const A=Math.max(1,r*o/e.ticks().length);return c=>{let u=c/s(Math.round(i(c)));return u*r<r-.5&&(u*=r),u<=A?l(c):""}},e.nice=()=>t(Z7(t(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function eX(){const n=cR(OI()).domain([1,10]);return n.copy=()=>Tx(n,eX()).base(n.base()),_a.apply(n,arguments),n}function i5(n){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/n))}}function s5(n){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*n}}function uR(n){var e=1,t=n(i5(e),s5(e));return t.constant=function(r){return arguments.length?n(i5(e=+r),s5(e)):e},ud(t)}function tX(){var n=uR(OI());return n.copy=function(){return Tx(n,tX()).constant(n.constant())},_a.apply(n,arguments)}function a5(n){return function(e){return e<0?-Math.pow(-e,n):Math.pow(e,n)}}function Qxe(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function jxe(n){return n<0?-n*n:n*n}function dR(n){var e=n(xi,xi),t=1;function r(){return t===1?n(xi,xi):t===.5?n(Qxe,jxe):n(a5(t),a5(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,r()):t},ud(e)}function hR(){var n=dR(OI());return n.copy=function(){return Tx(n,hR()).exponent(n.exponent())},_a.apply(n,arguments),n}function Hxe(){return hR.apply(null,arguments).exponent(.5)}function o5(n){return Math.sign(n)*n*n}function Vxe(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function nX(){var n=oR(),e=[0,1],t=!1,r;function i(s){var a=Vxe(n(s));return isNaN(a)?r:t?Math.round(a):a}return i.invert=function(s){return n.invert(o5(s))},i.domain=function(s){return arguments.length?(n.domain(s),i):n.domain()},i.range=function(s){return arguments.length?(n.range((e=Array.from(s,A_)).map(o5)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(t=!!s,i):t},i.clamp=function(s){return arguments.length?(n.clamp(s),i):n.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return nX(n.domain(),e).round(t).clamp(n.clamp()).unknown(r)},_a.apply(i,arguments),ud(i)}function rX(){var n=[],e=[],t=[],r;function i(){var a=0,o=Math.max(1,e.length);for(t=new Array(o-1);++a<o;)t[a-1]=zbe(n,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Sx(t,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?t[o-1]:n[0],o<t.length?t[o]:n[n.length-1]]},s.domain=function(a){if(!arguments.length)return n.slice();n=[];for(let o of a)o!=null&&!isNaN(o=+o)&&n.push(o);return n.sort(Du),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return t.slice()},s.copy=function(){return rX().domain(n).range(e).unknown(r)},_a.apply(s,arguments)}function iX(){var n=0,e=1,t=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[Sx(r,l,0,t)]:s}function o(){var l=-1;for(r=new Array(t);++l<t;)r[l]=((l+1)*e-(l-t)*n)/(t+1);return a}return a.domain=function(l){return arguments.length?([n,e]=l,n=+n,e=+e,o()):[n,e]},a.range=function(l){return arguments.length?(t=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var A=i.indexOf(l);return A<0?[NaN,NaN]:A<1?[n,r[0]]:A>=t?[r[t-1],e]:[r[A-1],r[A]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return iX().domain([n,e]).range(i).unknown(s)},_a.apply(ud(a),arguments)}function sX(){var n=[.5],e=[0,1],t,r=1;function i(s){return s!=null&&s<=s?e[Sx(n,s,0,r)]:t}return i.domain=function(s){return arguments.length?(n=Array.from(s),r=Math.min(n.length,e.length-1),i):n.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(n.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[n[a-1],n[a]]},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return sX().domain(n).range(e).unknown(t)},_a.apply(i,arguments)}const jP=new Date,HP=new Date;function rr(n,e,t,r){function i(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(n(s=new Date(+s)),s),i.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let A;do l.push(A=new Date(+s)),e(s,o),n(s);while(A<s&&s<a);return l},i.filter=s=>rr(a=>{if(a>=a)for(;n(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),t&&(i.count=(s,a)=>(jP.setTime(+s),HP.setTime(+a),n(jP),n(HP),Math.floor(t(jP,HP))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const u_=rr(()=>{},(n,e)=>{n.setTime(+n+e)},(n,e)=>e-n);u_.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?rr(e=>{e.setTime(Math.floor(e/n)*n)},(e,t)=>{e.setTime(+e+t*n)},(e,t)=>(t-e)/n):u_);u_.range;const uA=1e3,ga=uA*60,dA=ga*60,TA=dA*24,fR=TA*7,l5=TA*30,VP=TA*365,Xd=rr(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*uA)},(n,e)=>(e-n)/uA,n=>n.getUTCSeconds());Xd.range;const gR=rr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*uA)},(n,e)=>{n.setTime(+n+e*ga)},(n,e)=>(e-n)/ga,n=>n.getMinutes());gR.range;const pR=rr(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ga)},(n,e)=>(e-n)/ga,n=>n.getUTCMinutes());pR.range;const mR=rr(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*uA-n.getMinutes()*ga)},(n,e)=>{n.setTime(+n+e*dA)},(n,e)=>(e-n)/dA,n=>n.getHours());mR.range;const yR=rr(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*dA)},(n,e)=>(e-n)/dA,n=>n.getUTCHours());yR.range;const Px=rr(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ga)/TA,n=>n.getDate()-1);Px.range;const UI=rr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/TA,n=>n.getUTCDate()-1);UI.range;const aX=rr(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/TA,n=>Math.floor(n/TA));aX.range;function $f(n){return rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ga)/fR)}const RI=$f(0),d_=$f(1),Kxe=$f(2),$xe=$f(3),n0=$f(4),Gxe=$f(5),zxe=$f(6);RI.range;d_.range;Kxe.range;$xe.range;n0.range;Gxe.range;zxe.range;function Gf(n){return rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/fR)}const MI=Gf(0),h_=Gf(1),Wxe=Gf(2),Xxe=Gf(3),r0=Gf(4),Yxe=Gf(5),qxe=Gf(6);MI.range;h_.range;Wxe.range;Xxe.range;r0.range;Yxe.range;qxe.range;const vR=rr(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());vR.range;const wR=rr(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());wR.range;const PA=rr(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());PA.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});PA.range;const FA=rr(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());FA.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});FA.range;function oX(n,e,t,r,i,s){const a=[[Xd,1,uA],[Xd,5,5*uA],[Xd,15,15*uA],[Xd,30,30*uA],[s,1,ga],[s,5,5*ga],[s,15,15*ga],[s,30,30*ga],[i,1,dA],[i,3,3*dA],[i,6,6*dA],[i,12,12*dA],[r,1,TA],[r,2,2*TA],[t,1,fR],[e,1,l5],[e,3,3*l5],[n,1,VP]];function o(A,c,u){const h=c<A;h&&([A,c]=[c,A]);const g=u&&typeof u.range=="function"?u:l(A,c,u),p=g?g.range(A,+c+1):[];return h?p.reverse():p}function l(A,c,u){const h=Math.abs(c-A)/u,g=tR(([,,w])=>w).right(a,h);if(g===a.length)return n.every(Pk(A/VP,c/VP,u));if(g===0)return u_.every(Math.max(Pk(A,c,u),1));const[p,m]=a[h/a[g-1][2]<a[g][2]/h?g-1:g];return p.every(m)}return[o,l]}const[Jxe,Zxe]=oX(FA,wR,MI,aX,yR,pR),[eBe,tBe]=oX(PA,vR,RI,Px,mR,gR);function KP(n){if(0<=n.y&&n.y<100){var e=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return e.setFullYear(n.y),e}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function $P(n){if(0<=n.y&&n.y<100){var e=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function uy(n,e,t){return{y:n,m:e,d:t,H:0,M:0,S:0,L:0}}function nBe(n){var e=n.dateTime,t=n.date,r=n.time,i=n.periods,s=n.days,a=n.shortDays,o=n.months,l=n.shortMonths,A=dy(i),c=hy(i),u=dy(s),h=hy(s),g=dy(a),p=hy(a),m=dy(o),w=hy(o),v=dy(l),b=hy(l),x={a:ee,A:Z,b:ae,B:fe,c:null,d:f5,e:f5,f:CBe,g:OBe,G:RBe,H:xBe,I:BBe,j:EBe,L:lX,m:_Be,M:SBe,p:Ue,q:ie,Q:m5,s:y5,S:IBe,u:TBe,U:PBe,V:FBe,w:kBe,W:NBe,x:null,X:null,y:DBe,Y:UBe,Z:MBe,"%":p5},E={a:we,A:Ye,b:j,B:G,c:null,d:g5,e:g5,f:HBe,g:JBe,G:eEe,H:LBe,I:QBe,j:jBe,L:cX,m:VBe,M:KBe,p:Q,q:ne,Q:m5,s:y5,S:$Be,u:GBe,U:zBe,V:WBe,w:XBe,W:YBe,x:null,X:null,y:qBe,Y:ZBe,Z:tEe,"%":p5},I={a:O,A:U,b:L,B:R,c:re,d:d5,e:d5,f:yBe,g:u5,G:c5,H:h5,I:h5,j:fBe,L:mBe,m:hBe,M:gBe,p:k,q:dBe,Q:wBe,s:bBe,S:pBe,u:oBe,U:lBe,V:ABe,w:aBe,W:cBe,x:he,X:te,y:u5,Y:c5,Z:uBe,"%":vBe};x.x=P(t,x),x.X=P(r,x),x.c=P(e,x),E.x=P(t,E),E.X=P(r,E),E.c=P(e,E);function P(V,X){return function(J){var $=[],De=-1,ke=0,Je=V.length,At,kn,KA;for(J instanceof Date||(J=new Date(+J));++De<Je;)V.charCodeAt(De)===37&&($.push(V.slice(ke,De)),(kn=A5[At=V.charAt(++De)])!=null?At=V.charAt(++De):kn=At==="e"?" ":"0",(KA=X[At])&&(At=KA(J,kn)),$.push(At),ke=De+1);return $.push(V.slice(ke,De)),$.join("")}}function _(V,X){return function(J){var $=uy(1900,void 0,1),De=T($,V,J+="",0),ke,Je;if(De!=J.length)return null;if("Q"in $)return new Date($.Q);if("s"in $)return new Date($.s*1e3+("L"in $?$.L:0));if(X&&!("Z"in $)&&($.Z=0),"p"in $&&($.H=$.H%12+$.p*12),$.m===void 0&&($.m="q"in $?$.q:0),"V"in $){if($.V<1||$.V>53)return null;"w"in $||($.w=1),"Z"in $?(ke=$P(uy($.y,0,1)),Je=ke.getUTCDay(),ke=Je>4||Je===0?h_.ceil(ke):h_(ke),ke=UI.offset(ke,($.V-1)*7),$.y=ke.getUTCFullYear(),$.m=ke.getUTCMonth(),$.d=ke.getUTCDate()+($.w+6)%7):(ke=KP(uy($.y,0,1)),Je=ke.getDay(),ke=Je>4||Je===0?d_.ceil(ke):d_(ke),ke=Px.offset(ke,($.V-1)*7),$.y=ke.getFullYear(),$.m=ke.getMonth(),$.d=ke.getDate()+($.w+6)%7)}else("W"in $||"U"in $)&&("w"in $||($.w="u"in $?$.u%7:"W"in $?1:0),Je="Z"in $?$P(uy($.y,0,1)).getUTCDay():KP(uy($.y,0,1)).getDay(),$.m=0,$.d="W"in $?($.w+6)%7+$.W*7-(Je+5)%7:$.w+$.U*7-(Je+6)%7);return"Z"in $?($.H+=$.Z/100|0,$.M+=$.Z%100,$P($)):KP($)}}function T(V,X,J,$){for(var De=0,ke=X.length,Je=J.length,At,kn;De<ke;){if($>=Je)return-1;if(At=X.charCodeAt(De++),At===37){if(At=X.charAt(De++),kn=I[At in A5?X.charAt(De++):At],!kn||($=kn(V,J,$))<0)return-1}else if(At!=J.charCodeAt($++))return-1}return $}function k(V,X,J){var $=A.exec(X.slice(J));return $?(V.p=c.get($[0].toLowerCase()),J+$[0].length):-1}function O(V,X,J){var $=g.exec(X.slice(J));return $?(V.w=p.get($[0].toLowerCase()),J+$[0].length):-1}function U(V,X,J){var $=u.exec(X.slice(J));return $?(V.w=h.get($[0].toLowerCase()),J+$[0].length):-1}function L(V,X,J){var $=v.exec(X.slice(J));return $?(V.m=b.get($[0].toLowerCase()),J+$[0].length):-1}function R(V,X,J){var $=m.exec(X.slice(J));return $?(V.m=w.get($[0].toLowerCase()),J+$[0].length):-1}function re(V,X,J){return T(V,e,X,J)}function he(V,X,J){return T(V,t,X,J)}function te(V,X,J){return T(V,r,X,J)}function ee(V){return a[V.getDay()]}function Z(V){return s[V.getDay()]}function ae(V){return l[V.getMonth()]}function fe(V){return o[V.getMonth()]}function Ue(V){return i[+(V.getHours()>=12)]}function ie(V){return 1+~~(V.getMonth()/3)}function we(V){return a[V.getUTCDay()]}function Ye(V){return s[V.getUTCDay()]}function j(V){return l[V.getUTCMonth()]}function G(V){return o[V.getUTCMonth()]}function Q(V){return i[+(V.getUTCHours()>=12)]}function ne(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var X=P(V+="",x);return X.toString=function(){return V},X},parse:function(V){var X=_(V+="",!1);return X.toString=function(){return V},X},utcFormat:function(V){var X=P(V+="",E);return X.toString=function(){return V},X},utcParse:function(V){var X=_(V+="",!0);return X.toString=function(){return V},X}}}var A5={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,rBe=/^%/,iBe=/[\\^$*+?|[\]().{}]/g;function pt(n,e,t){var r=n<0?"-":"",i=(r?-n:n)+"",s=i.length;return r+(s<t?new Array(t-s+1).join(e)+i:i)}function sBe(n){return n.replace(iBe,"\\$&")}function dy(n){return new RegExp("^(?:"+n.map(sBe).join("|")+")","i")}function hy(n){return new Map(n.map((e,t)=>[e.toLowerCase(),t]))}function aBe(n,e,t){var r=wr.exec(e.slice(t,t+1));return r?(n.w=+r[0],t+r[0].length):-1}function oBe(n,e,t){var r=wr.exec(e.slice(t,t+1));return r?(n.u=+r[0],t+r[0].length):-1}function lBe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.U=+r[0],t+r[0].length):-1}function ABe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.V=+r[0],t+r[0].length):-1}function cBe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.W=+r[0],t+r[0].length):-1}function c5(n,e,t){var r=wr.exec(e.slice(t,t+4));return r?(n.y=+r[0],t+r[0].length):-1}function u5(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function uBe(n,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function dBe(n,e,t){var r=wr.exec(e.slice(t,t+1));return r?(n.q=r[0]*3-3,t+r[0].length):-1}function hBe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.m=r[0]-1,t+r[0].length):-1}function d5(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.d=+r[0],t+r[0].length):-1}function fBe(n,e,t){var r=wr.exec(e.slice(t,t+3));return r?(n.m=0,n.d=+r[0],t+r[0].length):-1}function h5(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.H=+r[0],t+r[0].length):-1}function gBe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.M=+r[0],t+r[0].length):-1}function pBe(n,e,t){var r=wr.exec(e.slice(t,t+2));return r?(n.S=+r[0],t+r[0].length):-1}function mBe(n,e,t){var r=wr.exec(e.slice(t,t+3));return r?(n.L=+r[0],t+r[0].length):-1}function yBe(n,e,t){var r=wr.exec(e.slice(t,t+6));return r?(n.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function vBe(n,e,t){var r=rBe.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function wBe(n,e,t){var r=wr.exec(e.slice(t));return r?(n.Q=+r[0],t+r[0].length):-1}function bBe(n,e,t){var r=wr.exec(e.slice(t));return r?(n.s=+r[0],t+r[0].length):-1}function f5(n,e){return pt(n.getDate(),e,2)}function xBe(n,e){return pt(n.getHours(),e,2)}function BBe(n,e){return pt(n.getHours()%12||12,e,2)}function EBe(n,e){return pt(1+Px.count(PA(n),n),e,3)}function lX(n,e){return pt(n.getMilliseconds(),e,3)}function CBe(n,e){return lX(n,e)+"000"}function _Be(n,e){return pt(n.getMonth()+1,e,2)}function SBe(n,e){return pt(n.getMinutes(),e,2)}function IBe(n,e){return pt(n.getSeconds(),e,2)}function TBe(n){var e=n.getDay();return e===0?7:e}function PBe(n,e){return pt(RI.count(PA(n)-1,n),e,2)}function AX(n){var e=n.getDay();return e>=4||e===0?n0(n):n0.ceil(n)}function FBe(n,e){return n=AX(n),pt(n0.count(PA(n),n)+(PA(n).getDay()===4),e,2)}function kBe(n){return n.getDay()}function NBe(n,e){return pt(d_.count(PA(n)-1,n),e,2)}function DBe(n,e){return pt(n.getFullYear()%100,e,2)}function OBe(n,e){return n=AX(n),pt(n.getFullYear()%100,e,2)}function UBe(n,e){return pt(n.getFullYear()%1e4,e,4)}function RBe(n,e){var t=n.getDay();return n=t>=4||t===0?n0(n):n0.ceil(n),pt(n.getFullYear()%1e4,e,4)}function MBe(n){var e=n.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pt(e/60|0,"0",2)+pt(e%60,"0",2)}function g5(n,e){return pt(n.getUTCDate(),e,2)}function LBe(n,e){return pt(n.getUTCHours(),e,2)}function QBe(n,e){return pt(n.getUTCHours()%12||12,e,2)}function jBe(n,e){return pt(1+UI.count(FA(n),n),e,3)}function cX(n,e){return pt(n.getUTCMilliseconds(),e,3)}function HBe(n,e){return cX(n,e)+"000"}function VBe(n,e){return pt(n.getUTCMonth()+1,e,2)}function KBe(n,e){return pt(n.getUTCMinutes(),e,2)}function $Be(n,e){return pt(n.getUTCSeconds(),e,2)}function GBe(n){var e=n.getUTCDay();return e===0?7:e}function zBe(n,e){return pt(MI.count(FA(n)-1,n),e,2)}function uX(n){var e=n.getUTCDay();return e>=4||e===0?r0(n):r0.ceil(n)}function WBe(n,e){return n=uX(n),pt(r0.count(FA(n),n)+(FA(n).getUTCDay()===4),e,2)}function XBe(n){return n.getUTCDay()}function YBe(n,e){return pt(h_.count(FA(n)-1,n),e,2)}function qBe(n,e){return pt(n.getUTCFullYear()%100,e,2)}function JBe(n,e){return n=uX(n),pt(n.getUTCFullYear()%100,e,2)}function ZBe(n,e){return pt(n.getUTCFullYear()%1e4,e,4)}function eEe(n,e){var t=n.getUTCDay();return n=t>=4||t===0?r0(n):r0.ceil(n),pt(n.getUTCFullYear()%1e4,e,4)}function tEe(){return"+0000"}function p5(){return"%"}function m5(n){return+n}function y5(n){return Math.floor(+n/1e3)}var gg,dX,hX;nEe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nEe(n){return gg=nBe(n),dX=gg.format,gg.parse,hX=gg.utcFormat,gg.utcParse,gg}function rEe(n){return new Date(n)}function iEe(n){return n instanceof Date?+n:+new Date(+n)}function bR(n,e,t,r,i,s,a,o,l,A){var c=oR(),u=c.invert,h=c.domain,g=A(".%L"),p=A(":%S"),m=A("%I:%M"),w=A("%I %p"),v=A("%a %d"),b=A("%b %d"),x=A("%B"),E=A("%Y");function I(P){return(l(P)<P?g:o(P)<P?p:a(P)<P?m:s(P)<P?w:r(P)<P?i(P)<P?v:b:t(P)<P?x:E)(P)}return c.invert=function(P){return new Date(u(P))},c.domain=function(P){return arguments.length?h(Array.from(P,iEe)):h().map(rEe)},c.ticks=function(P){var _=h();return n(_[0],_[_.length-1],P??10)},c.tickFormat=function(P,_){return _==null?I:A(_)},c.nice=function(P){var _=h();return(!P||typeof P.range!="function")&&(P=e(_[0],_[_.length-1],P??10)),P?h(Z7(_,P)):c},c.copy=function(){return Tx(c,bR(n,e,t,r,i,s,a,o,l,A))},c}function sEe(){return _a.apply(bR(eBe,tBe,PA,vR,RI,Px,mR,gR,Xd,dX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aEe(){return _a.apply(bR(Jxe,Zxe,FA,wR,MI,UI,yR,pR,Xd,hX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function LI(){var n=0,e=1,t,r,i,s,a=xi,o=!1,l;function A(u){return u==null||isNaN(u=+u)?l:a(i===0?.5:(u=(s(u)-t)*i,o?Math.max(0,Math.min(1,u)):u))}A.domain=function(u){return arguments.length?([n,e]=u,t=s(n=+n),r=s(e=+e),i=t===r?0:1/(r-t),A):[n,e]},A.clamp=function(u){return arguments.length?(o=!!u,A):o},A.interpolator=function(u){return arguments.length?(a=u,A):a};function c(u){return function(h){var g,p;return arguments.length?([g,p]=h,a=u(g,p),A):[a(0),a(1)]}}return A.range=c(v0),A.rangeRound=c(aR),A.unknown=function(u){return arguments.length?(l=u,A):l},function(u){return s=u,t=u(n),r=u(e),i=t===r?0:1/(r-t),A}}function dd(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function fX(){var n=ud(LI()(xi));return n.copy=function(){return dd(n,fX())},jA.apply(n,arguments)}function gX(){var n=cR(LI()).domain([1,10]);return n.copy=function(){return dd(n,gX()).base(n.base())},jA.apply(n,arguments)}function pX(){var n=uR(LI());return n.copy=function(){return dd(n,pX()).constant(n.constant())},jA.apply(n,arguments)}function xR(){var n=dR(LI());return n.copy=function(){return dd(n,xR()).exponent(n.exponent())},jA.apply(n,arguments)}function oEe(){return xR.apply(null,arguments).exponent(.5)}function mX(){var n=[],e=xi;function t(r){if(r!=null&&!isNaN(r=+r))return e((Sx(n,r,1)-1)/(n.length-1))}return t.domain=function(r){if(!arguments.length)return n.slice();n=[];for(let i of r)i!=null&&!isNaN(i=+i)&&n.push(i);return n.sort(Du),t},t.interpolator=function(r){return arguments.length?(e=r,t):e},t.range=function(){return n.map((r,i)=>e(i/(n.length-1)))},t.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Gbe(n,s/r))},t.copy=function(){return mX(e).domain(n)},jA.apply(t,arguments)}function QI(){var n=0,e=.5,t=1,r=1,i,s,a,o,l,A=xi,c,u=!1,h;function g(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-s)*(r*m<r*s?o:l),A(u?Math.max(0,Math.min(1,m)):m))}g.domain=function(m){return arguments.length?([n,e,t]=m,i=c(n=+n),s=c(e=+e),a=c(t=+t),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g):[n,e,t]},g.clamp=function(m){return arguments.length?(u=!!m,g):u},g.interpolator=function(m){return arguments.length?(A=m,g):A};function p(m){return function(w){var v,b,x;return arguments.length?([v,b,x]=w,A=vxe(m,[v,b,x]),g):[A(0),A(.5),A(1)]}}return g.range=p(v0),g.rangeRound=p(aR),g.unknown=function(m){return arguments.length?(h=m,g):h},function(m){return c=m,i=m(n),s=m(e),a=m(t),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,g}}function yX(){var n=ud(QI()(xi));return n.copy=function(){return dd(n,yX())},jA.apply(n,arguments)}function vX(){var n=cR(QI()).domain([.1,1,10]);return n.copy=function(){return dd(n,vX()).base(n.base())},jA.apply(n,arguments)}function wX(){var n=uR(QI());return n.copy=function(){return dd(n,wX()).constant(n.constant())},jA.apply(n,arguments)}function BR(){var n=dR(QI());return n.copy=function(){return dd(n,BR()).exponent(n.exponent())},jA.apply(n,arguments)}function lEe(){return BR.apply(null,arguments).exponent(.5)}const My=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rR,scaleDiverging:yX,scaleDivergingLog:vX,scaleDivergingPow:BR,scaleDivergingSqrt:lEe,scaleDivergingSymlog:wX,scaleIdentity:J7,scaleImplicit:Fk,scaleLinear:q7,scaleLog:eX,scaleOrdinal:nR,scalePoint:Xbe,scalePow:hR,scaleQuantile:rX,scaleQuantize:iX,scaleRadial:nX,scaleSequential:fX,scaleSequentialLog:gX,scaleSequentialPow:xR,scaleSequentialQuantile:mX,scaleSequentialSqrt:oEe,scaleSequentialSymlog:pX,scaleSqrt:Hxe,scaleSymlog:tX,scaleThreshold:sX,scaleTime:sEe,scaleUtc:aEe,tickFormat:Y7},Symbol.toStringTag,{value:"Module"}));var hd=n=>n.chartData,ER=Y([hd],n=>{var e=n.chartData!=null?n.chartData.length-1:0;return{chartData:n.chartData,computedData:n.computedData,dataEndIndex:e,dataStartIndex:0}}),jI=(n,e,t,r)=>r?ER(n):hd(n);function i0(n){if(Array.isArray(n)&&n.length===2){var[e,t]=n;if(Rs(e)&&Rs(t))return!0}return!1}function v5(n,e,t){return t?n:[Math.min(n[0],e[0]),Math.max(n[1],e[1])]}function AEe(n,e){if(e&&typeof n!="function"&&Array.isArray(n)&&n.length===2){var[t,r]=n,i,s;if(Rs(t))i=t;else if(typeof t=="function")return;if(Rs(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(i0(a))return a}}function cEe(n,e,t){if(!(!t&&e==null)){if(typeof n=="function"&&e!=null)try{var r=n(e,t);if(i0(r))return v5(r,e,t)}catch{}if(Array.isArray(n)&&n.length===2){var[i,s]=n,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(Be(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&g3.test(i)){var l=g3.exec(i);if(l==null||e==null)a=void 0;else{var A=+l[1];a=e[0]-A}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(Be(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&p3.test(s)){var c=p3.exec(s);if(c==null||e==null)o=void 0;else{var u=+c[1];o=e[1]+u}}else o=e==null?void 0:e[1];var h=[a,o];if(i0(h))return e==null?h:v5(h,e,t)}}}var w0=1e9,uEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_R,an=!0,Ba="[DecimalError] ",df=Ba+"Invalid argument: ",CR=Ba+"Exponent out of range: ",b0=Math.floor,Td=Math.pow,dEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cs,pr=1e7,zt=7,bX=9007199254740991,f_=b0(bX/zt),Se={};Se.absoluteValue=Se.abs=function(){var n=new this.constructor(this);return n.s&&(n.s=1),n};Se.comparedTo=Se.cmp=function(n){var e,t,r,i,s=this;if(n=new s.constructor(n),s.s!==n.s)return s.s||-n.s;if(s.e!==n.e)return s.e>n.e^s.s<0?1:-1;for(r=s.d.length,i=n.d.length,e=0,t=r<i?r:i;e<t;++e)if(s.d[e]!==n.d[e])return s.d[e]>n.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var n=this,e=n.d.length-1,t=(e-n.e)*zt;if(e=n.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};Se.dividedBy=Se.div=function(n){return mA(this,new this.constructor(n))};Se.dividedToIntegerBy=Se.idiv=function(n){var e=this,t=e.constructor;return Ut(mA(e,new t(n),0,1),t.precision)};Se.equals=Se.eq=function(n){return!this.cmp(n)};Se.exponent=function(){return jn(this)};Se.greaterThan=Se.gt=function(n){return this.cmp(n)>0};Se.greaterThanOrEqualTo=Se.gte=function(n){return this.cmp(n)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(n){return this.cmp(n)<0};Se.lessThanOrEqualTo=Se.lte=function(n){return this.cmp(n)<1};Se.logarithm=Se.log=function(n){var e,t=this,r=t.constructor,i=r.precision,s=i+5;if(n===void 0)n=new r(10);else if(n=new r(n),n.s<1||n.eq(Cs))throw Error(Ba+"NaN");if(t.s<1)throw Error(Ba+(t.s?"NaN":"-Infinity"));return t.eq(Cs)?new r(0):(an=!1,e=mA(bw(t,s),bw(n,s),s),an=!0,Ut(e,i))};Se.minus=Se.sub=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?EX(e,n):xX(e,(n.s=-n.s,n))};Se.modulo=Se.mod=function(n){var e,t=this,r=t.constructor,i=r.precision;if(n=new r(n),!n.s)throw Error(Ba+"NaN");return t.s?(an=!1,e=mA(t,n,0,1).times(n),an=!0,t.minus(e)):Ut(new r(t),i)};Se.naturalExponential=Se.exp=function(){return BX(this)};Se.naturalLogarithm=Se.ln=function(){return bw(this)};Se.negated=Se.neg=function(){var n=new this.constructor(this);return n.s=-n.s||0,n};Se.plus=Se.add=function(n){var e=this;return n=new e.constructor(n),e.s==n.s?xX(e,n):EX(e,(n.s=-n.s,n))};Se.precision=Se.sd=function(n){var e,t,r,i=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(df+n);if(e=jn(i)+1,r=i.d.length-1,t=r*zt+1,r=i.d[r],r){for(;r%10==0;r/=10)t--;for(r=i.d[0];r>=10;r/=10)t++}return n&&e>t?e:t};Se.squareRoot=Se.sqrt=function(){var n,e,t,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ba+"NaN")}for(n=jn(o),an=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Mo(o.d),(e.length+n)%2==0&&(e+="0"),i=Math.sqrt(e),n=b0((n+1)/2)-(n<0||n%2),i==1/0?e="5e"+n:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+n),r=new l(e)):r=new l(i.toString()),t=l.precision,i=a=t+3;;)if(s=r,r=s.plus(mA(o,s,a+2)).times(.5),Mo(s.d).slice(0,a)===(e=Mo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Ut(s,t+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return an=!0,Ut(r,t)};Se.times=Se.mul=function(n){var e,t,r,i,s,a,o,l,A,c=this,u=c.constructor,h=c.d,g=(n=new u(n)).d;if(!c.s||!n.s)return new u(0);for(n.s*=c.s,t=c.e+n.e,l=h.length,A=g.length,l<A&&(s=h,h=g,g=s,a=l,l=A,A=a),s=[],a=l+A,r=a;r--;)s.push(0);for(r=A;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+g[r]*h[i-r-1]+e,s[i--]=o%pr|0,e=o/pr|0;s[i]=(s[i]+e)%pr|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),n.d=s,n.e=t,an?Ut(n,u.precision):n};Se.toDecimalPlaces=Se.todp=function(n,e){var t=this,r=t.constructor;return t=new r(t),n===void 0?t:(zo(n,0,w0),e===void 0?e=r.rounding:zo(e,0,8),Ut(t,n+jn(t)+1,e))};Se.toExponential=function(n,e){var t,r=this,i=r.constructor;return n===void 0?t=Pf(r,!0):(zo(n,0,w0),e===void 0?e=i.rounding:zo(e,0,8),r=Ut(new i(r),n+1,e),t=Pf(r,!0,n+1)),t};Se.toFixed=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?Pf(i):(zo(n,0,w0),e===void 0?e=s.rounding:zo(e,0,8),r=Ut(new s(i),n+jn(i)+1,e),t=Pf(r.abs(),!1,n+jn(r)+1),i.isneg()&&!i.isZero()?"-"+t:t)};Se.toInteger=Se.toint=function(){var n=this,e=n.constructor;return Ut(new e(n),jn(n)+1,e.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(n){var e,t,r,i,s,a,o=this,l=o.constructor,A=12,c=+(n=new l(n));if(!n.s)return new l(Cs);if(o=new l(o),!o.s){if(n.s<1)throw Error(Ba+"Infinity");return o}if(o.eq(Cs))return o;if(r=l.precision,n.eq(Cs))return Ut(o,r);if(e=n.e,t=n.d.length-1,a=e>=t,s=o.s,a){if((t=c<0?-c:c)<=bX){for(i=new l(Cs),e=Math.ceil(r/zt+4),an=!1;t%2&&(i=i.times(o),b5(i.d,e)),t=b0(t/2),t!==0;)o=o.times(o),b5(o.d,e);return an=!0,n.s<0?new l(Cs).div(i):Ut(i,r)}}else if(s<0)throw Error(Ba+"NaN");return s=s<0&&n.d[Math.max(e,t)]&1?-1:1,o.s=1,an=!1,i=n.times(bw(o,r+A)),an=!0,i=BX(i),i.s=s,i};Se.toPrecision=function(n,e){var t,r,i=this,s=i.constructor;return n===void 0?(t=jn(i),r=Pf(i,t<=s.toExpNeg||t>=s.toExpPos)):(zo(n,1,w0),e===void 0?e=s.rounding:zo(e,0,8),i=Ut(new s(i),n,e),t=jn(i),r=Pf(i,n<=t||t<=s.toExpNeg,n)),r};Se.toSignificantDigits=Se.tosd=function(n,e){var t=this,r=t.constructor;return n===void 0?(n=r.precision,e=r.rounding):(zo(n,1,w0),e===void 0?e=r.rounding:zo(e,0,8)),Ut(new r(t),n,e)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var n=this,e=jn(n),t=n.constructor;return Pf(n,e<=t.toExpNeg||e>=t.toExpPos)};function xX(n,e){var t,r,i,s,a,o,l,A,c=n.constructor,u=c.precision;if(!n.s||!e.s)return e.s||(e=new c(n)),an?Ut(e,u):e;if(l=n.d,A=e.d,a=n.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=A.length):(r=A,i=a,o=l.length),a=Math.ceil(u/zt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=A.length,o-s<0&&(s=o,r=A,A=l,l=r),t=0;s;)t=(l[--s]=l[s]+A[s]+t)/pr|0,l[s]%=pr;for(t&&(l.unshift(t),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,an?Ut(e,u):e}function zo(n,e,t){if(n!==~~n||n<e||n>t)throw Error(df+n)}function Mo(n){var e,t,r,i=n.length-1,s="",a=n[0];if(i>0){for(s+=a,e=1;e<i;e++)r=n[e]+"",t=zt-r.length,t&&(s+=lc(t)),s+=r;a=n[e],r=a+"",t=zt-r.length,t&&(s+=lc(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var mA=function(){function n(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%pr|0,a=s/pr|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function t(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*pr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,A,c,u,h,g,p,m,w,v,b,x,E,I,P,_,T,k=r.constructor,O=r.s==i.s?1:-1,U=r.d,L=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(Ba+"Division by zero");for(l=r.e-i.e,_=L.length,I=U.length,g=new k(O),p=g.d=[],A=0;L[A]==(U[A]||0);)++A;if(L[A]>(U[A]||0)&&--l,s==null?b=s=k.precision:a?b=s+(jn(r)-jn(i))+1:b=s,b<0)return new k(0);if(b=b/zt+2|0,A=0,_==1)for(c=0,L=L[0],b++;(A<I||c)&&b--;A++)x=c*pr+(U[A]||0),p[A]=x/L|0,c=x%L|0;else{for(c=pr/(L[0]+1)|0,c>1&&(L=n(L,c),U=n(U,c),_=L.length,I=U.length),E=_,m=U.slice(0,_),w=m.length;w<_;)m[w++]=0;T=L.slice(),T.unshift(0),P=L[0],L[1]>=pr/2&&++P;do c=0,o=e(L,m,_,w),o<0?(v=m[0],_!=w&&(v=v*pr+(m[1]||0)),c=v/P|0,c>1?(c>=pr&&(c=pr-1),u=n(L,c),h=u.length,w=m.length,o=e(u,m,h,w),o==1&&(c--,t(u,_<h?T:L,h))):(c==0&&(o=c=1),u=L.slice()),h=u.length,h<w&&u.unshift(0),t(m,u,w),o==-1&&(w=m.length,o=e(L,m,_,w),o<1&&(c++,t(m,_<w?T:L,w))),w=m.length):o===0&&(c++,m=[0]),p[A++]=c,o&&m[0]?m[w++]=U[E]||0:(m=[U[E]],w=1);while((E++<I||m[0]!==void 0)&&b--)}return p[0]||p.shift(),g.e=l,Ut(g,a?s+jn(g)+1:s)}}();function BX(n,e){var t,r,i,s,a,o,l=0,A=0,c=n.constructor,u=c.precision;if(jn(n)>16)throw Error(CR+jn(n));if(!n.s)return new c(Cs);for(e==null?(an=!1,o=u):o=e,a=new c(.03125);n.abs().gte(.1);)n=n.times(a),A+=5;for(r=Math.log(Td(2,A))/Math.LN10*2+5|0,o+=r,t=i=s=new c(Cs),c.precision=o;;){if(i=Ut(i.times(n),o),t=t.times(++l),a=s.plus(mA(i,t,o)),Mo(a.d).slice(0,o)===Mo(s.d).slice(0,o)){for(;A--;)s=Ut(s.times(s),o);return c.precision=u,e==null?(an=!0,Ut(s,u)):s}s=a}}function jn(n){for(var e=n.e*zt,t=n.d[0];t>=10;t/=10)e++;return e}function GP(n,e,t){if(e>n.LN10.sd())throw an=!0,t&&(n.precision=t),Error(Ba+"LN10 precision limit exceeded");return Ut(new n(n.LN10),e)}function lc(n){for(var e="";n--;)e+="0";return e}function bw(n,e){var t,r,i,s,a,o,l,A,c,u=1,h=10,g=n,p=g.d,m=g.constructor,w=m.precision;if(g.s<1)throw Error(Ba+(g.s?"NaN":"-Infinity"));if(g.eq(Cs))return new m(0);if(e==null?(an=!1,A=w):A=e,g.eq(10))return e==null&&(an=!0),GP(m,A);if(A+=h,m.precision=A,t=Mo(p),r=t.charAt(0),s=jn(g),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)g=g.times(n),t=Mo(g.d),r=t.charAt(0),u++;s=jn(g),r>1?(g=new m("0."+t),s++):g=new m(r+"."+t.slice(1))}else return l=GP(m,A+2,w).times(s+""),g=bw(new m(r+"."+t.slice(1)),A-h).plus(l),m.precision=w,e==null?(an=!0,Ut(g,w)):g;for(o=a=g=mA(g.minus(Cs),g.plus(Cs),A),c=Ut(g.times(g),A),i=3;;){if(a=Ut(a.times(c),A),l=o.plus(mA(a,new m(i),A)),Mo(l.d).slice(0,A)===Mo(o.d).slice(0,A))return o=o.times(2),s!==0&&(o=o.plus(GP(m,A+2,w).times(s+""))),o=mA(o,new m(u),A),m.precision=w,e==null?(an=!0,Ut(o,w)):o;o=l,i+=2}}function w5(n,e){var t,r,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,t=t-r-1,n.e=b0(t/zt),n.d=[],r=(t+1)%zt,t<0&&(r+=zt),r<i){for(r&&n.d.push(+e.slice(0,r)),i-=zt;r<i;)n.d.push(+e.slice(r,r+=zt));e=e.slice(r),r=zt-e.length}else r-=i;for(;r--;)e+="0";if(n.d.push(+e),an&&(n.e>f_||n.e<-f_))throw Error(CR+t)}else n.s=0,n.e=0,n.d=[0];return n}function Ut(n,e,t){var r,i,s,a,o,l,A,c,u=n.d;for(a=1,s=u[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=zt,i=e,A=u[c=0];else{if(c=Math.ceil((r+1)/zt),s=u.length,c>=s)return n;for(A=s=u[c],a=1;s>=10;s/=10)a++;r%=zt,i=r-zt+a}if(t!==void 0&&(s=Td(10,a-i-1),o=A/s%10|0,l=e<0||u[c+1]!==void 0||A%s,l=t<4?(o||l)&&(t==0||t==(n.s<0?3:2)):o>5||o==5&&(t==4||l||t==6&&(r>0?i>0?A/Td(10,a-i):0:u[c-1])%10&1||t==(n.s<0?8:7))),e<1||!u[0])return l?(s=jn(n),u.length=1,e=e-s-1,u[0]=Td(10,(zt-e%zt)%zt),n.e=b0(-e/zt)||0):(u.length=1,u[0]=n.e=n.s=0),n;if(r==0?(u.length=c,s=1,c--):(u.length=c+1,s=Td(10,zt-r),u[c]=i>0?(A/Td(10,a-i)%Td(10,i)|0)*s:0),l)for(;;)if(c==0){(u[0]+=s)==pr&&(u[0]=1,++n.e);break}else{if(u[c]+=s,u[c]!=pr)break;u[c--]=0,s=1}for(r=u.length;u[--r]===0;)u.pop();if(an&&(n.e>f_||n.e<-f_))throw Error(CR+jn(n));return n}function EX(n,e){var t,r,i,s,a,o,l,A,c,u,h=n.constructor,g=h.precision;if(!n.s||!e.s)return e.s?e.s=-e.s:e=new h(n),an?Ut(e,g):e;if(l=n.d,u=e.d,r=e.e,A=n.e,l=l.slice(),a=A-r,a){for(c=a<0,c?(t=l,a=-a,o=u.length):(t=u,r=A,o=l.length),i=Math.max(Math.ceil(g/zt),o)+2,a>i&&(a=i,t.length=1),t.reverse(),i=a;i--;)t.push(0);t.reverse()}else{for(i=l.length,o=u.length,c=i<o,c&&(o=i),i=0;i<o;i++)if(l[i]!=u[i]){c=l[i]<u[i];break}a=0}for(c&&(t=l,l=u,u=t,e.s=-e.s),o=l.length,i=u.length-o;i>0;--i)l[o++]=0;for(i=u.length;i>a;){if(l[--i]<u[i]){for(s=i;s&&l[--s]===0;)l[s]=pr-1;--l[s],l[i]+=pr}l[i]-=u[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,an?Ut(e,g):e):new h(0)}function Pf(n,e,t){var r,i=jn(n),s=Mo(n.d),a=s.length;return e?(t&&(r=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+lc(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+lc(-i-1)+s,t&&(r=t-a)>0&&(s+=lc(r))):i>=a?(s+=lc(i+1-a),t&&(r=t-i-1)>0&&(s=s+"."+lc(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),t&&(r=t-a)>0&&(i+1===a&&(s+="."),s+=lc(r))),n.s<0?"-"+s:s}function b5(n,e){if(n.length>e)return n.length=e,!0}function CX(n){var e,t,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(df+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return w5(a,s.toString())}else if(typeof s!="string")throw Error(df+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,dEe.test(s))w5(a,s);else throw Error(df+s)}if(i.prototype=Se,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=CX,i.config=i.set=hEe,n===void 0&&(n={}),n)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)n.hasOwnProperty(t=r[e++])||(n[t]=this[t]);return i.config(n),i}function hEe(n){if(!n||typeof n!="object")throw Error(Ba+"Object expected");var e,t,r,i=["precision",1,w0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=n[t=i[e]])!==void 0)if(b0(r)===r&&r>=i[e+1]&&r<=i[e+2])this[t]=r;else throw Error(df+t+": "+r);if((r=n[t="LN10"])!==void 0)if(r==Math.LN10)this[t]=new this(r);else throw Error(df+t+": "+r);return this}var _R=CX(uEe);Cs=new _R(1);const Bt=_R;var fEe=n=>n,_X={"@@functional/placeholder":!0},SX=n=>n===_X,x5=n=>function e(){return arguments.length===0||arguments.length===1&&SX(arguments.length<=0?void 0:arguments[0])?e:n(...arguments)},IX=(n,e)=>n===1?e:x5(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=r.filter(a=>a!==_X).length;return s>=n?e(...r):IX(n-s,x5(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var A=r.map(c=>SX(c)?o.shift():c);return e(...A,...o)}))}),HI=n=>IX(n.length,n),Ok=(n,e)=>{for(var t=[],r=n;r<e;++r)t[r-n]=r;return t},gEe=HI((n,e)=>Array.isArray(e)?e.map(n):Object.keys(e).map(t=>e[t]).map(n)),pEe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return fEe;var i=t.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},Uk=n=>Array.isArray(n)?n.reverse():n.split("").reverse().join(""),TX=n=>{var e=null,t=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e&&i.every((a,o)=>{var l;return a===((l=e)===null||l===void 0?void 0:l[o])})||(e=i,t=n(...i)),t}};function PX(n){var e;return n===0?e=1:e=Math.floor(new Bt(n).abs().log(10).toNumber())+1,e}function FX(n,e,t){for(var r=new Bt(n),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(t),i++;return s}HI((n,e,t)=>{var r=+n,i=+e;return r+t*(i-r)});HI((n,e,t)=>{var r=e-+n;return r=r||1/0,(t-n)/r});HI((n,e,t)=>{var r=e-+n;return r=r||1/0,Math.max(0,Math.min(1,(t-n)/r))});var kX=n=>{var[e,t]=n,[r,i]=[e,t];return e>t&&([r,i]=[t,e]),[r,i]},NX=(n,e,t)=>{if(n.lte(0))return new Bt(0);var r=PX(n.toNumber()),i=new Bt(10).pow(r),s=n.div(i),a=r!==1?.05:.1,o=new Bt(Math.ceil(s.div(a).toNumber())).add(t).mul(a),l=o.mul(i);return e?new Bt(l.toNumber()):new Bt(Math.ceil(l.toNumber()))},mEe=(n,e,t)=>{var r=new Bt(1),i=new Bt(n);if(!i.isint()&&t){var s=Math.abs(n);s<1?(r=new Bt(10).pow(PX(n)-1),i=new Bt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new Bt(Math.floor(n)))}else n===0?i=new Bt(Math.floor((e-1)/2)):t||(i=new Bt(Math.floor(n)));var a=Math.floor((e-1)/2),o=pEe(gEe(l=>i.add(new Bt(l-a).mul(r)).toNumber()),Ok);return o(0,e)},DX=function(e,t,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Bt(0),tickMin:new Bt(0),tickMax:new Bt(0)};var a=NX(new Bt(t).sub(e).div(r-1),i,s),o;e<=0&&t>=0?o=new Bt(0):(o=new Bt(e).add(t).div(2),o=o.sub(new Bt(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),A=Math.ceil(new Bt(t).sub(o).div(a).toNumber()),c=l+A+1;return c>r?DX(e,t,r,i,s+1):(c<r&&(A=t>0?A+(r-c):A,l=t>0?l:l+(r-c)),{step:a,tickMin:o.sub(new Bt(l).mul(a)),tickMax:o.add(new Bt(A).mul(a))})};function yEe(n){var[e,t]=n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(r,2),[a,o]=kX([e,t]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...Ok(0,r-1).map(()=>1/0)]:[...Ok(0,r-1).map(()=>-1/0),o];return e>t?Uk(l):l}if(a===o)return mEe(a,r,i);var{step:A,tickMin:c,tickMax:u}=DX(a,o,s,i,0),h=FX(c,u.add(new Bt(.1).mul(A)),A);return e>t?Uk(h):h}function vEe(n,e){var[t,r]=n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=kX([t,r]);if(s===-1/0||a===1/0)return[t,r];if(s===a)return[s];var o=Math.max(e,2),l=NX(new Bt(a).sub(s).div(o-1),i,0),A=[...FX(new Bt(s),new Bt(a),l),a];return i===!1&&(A=A.map(c=>Math.round(c))),t>r?Uk(A):A}var wEe=TX(yEe),bEe=TX(vEe),OX=n=>n.rootProps.maxBarSize,xEe=n=>n.rootProps.barGap,UX=n=>n.rootProps.barCategoryGap,BEe=n=>n.rootProps.barSize,Fx=n=>n.rootProps.stackOffset,SR=n=>n.options.chartName,IR=n=>n.rootProps.syncId,RX=n=>n.rootProps.syncMethod,TR=n=>n.options.eventEmitter,tA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},bs={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},VI=(n,e)=>{if(!(!n||!e))return n!=null&&n.reversed?[e[1],e[0]]:e},EEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:tA.angleAxisId,includeHidden:!1,name:void 0,reversed:tA.reversed,scale:tA.scale,tick:tA.tick,tickCount:void 0,ticks:void 0,type:tA.type,unit:void 0},CEe={allowDataOverflow:bs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bs.scale,tick:bs.tick,tickCount:bs.tickCount,ticks:void 0,type:bs.type,unit:void 0},_Ee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:tA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tA.scale,tick:tA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SEe={allowDataOverflow:bs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bs.scale,tick:bs.tick,tickCount:bs.tickCount,ticks:void 0,type:"category",unit:void 0},PR=(n,e)=>n.polarAxis.angleAxis[e]!=null?n.polarAxis.angleAxis[e]:n.layout.layoutType==="radial"?_Ee:EEe,FR=(n,e)=>n.polarAxis.radiusAxis[e]!=null?n.polarAxis.radiusAxis[e]:n.layout.layoutType==="radial"?SEe:CEe,KI=n=>n.polarOptions,kR=Y([LA,QA,nr],c7),MX=Y([KI,kR],(n,e)=>{if(n!=null)return Ii(n.innerRadius,e,0)}),LX=Y([KI,kR],(n,e)=>{if(n!=null)return Ii(n.outerRadius,e,e*.8)}),IEe=n=>{if(n==null)return[0,0];var{startAngle:e,endAngle:t}=n;return[e,t]},QX=Y([KI],IEe);Y([PR,QX],VI);var jX=Y([kR,MX,LX],(n,e,t)=>{if(!(n==null||e==null||t==null))return[e,t]});Y([FR,jX],VI);var HX=Y([lt,KI,MX,LX,LA,QA],(n,e,t,r,i,s)=>{if(!(n!=="centric"&&n!=="radial"||e==null||t==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:A}=e;return{cx:Ii(a,i,i/2),cy:Ii(o,s,s/2),innerRadius:t,outerRadius:r,startAngle:l,endAngle:A,clockWise:!1}}}),An=(n,e)=>e,kx=(n,e,t)=>t;function NR(n){return n==null?void 0:n.id}var ir=n=>{var e=lt(n);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},x0=n=>n.tooltip.settings.axisId,sr=n=>{var e=ir(n),t=x0(n);return Nx(n,e,t)};function VX(n,e,t){var{chartData:r=[]}=e,i=t==null?void 0:t.dataKey,s=new Map;return n.forEach(a=>{var o,l=(o=a.data)!==null&&o!==void 0?o:r;if(!(l==null||l.length===0)){var A=NR(a);l.forEach((c,u)=>{var h=i==null?u:String(Ot(c,i,null)),g=Ot(c,a.dataKey,0),p;s.has(h)?p=s.get(h):p={},Object.assign(p,{[A]:g}),s.set(h,p)})}}),Array.from(s.values())}function $I(n){return n.stackId!=null&&n.dataKey!=null}function B5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function g_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(t),!0).forEach(function(r){TEe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function TEe(n,e,t){return(e=PEe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PEe(n){var e=FEe(n,"string");return typeof e=="symbol"?e:e+""}function FEe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Rk=[0,"auto"],Zi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},HA=(n,e)=>{var t=n.cartesianAxis.xAxis[e];return t??Zi},es={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Rk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:FI},fd=(n,e)=>{var t=n.cartesianAxis.yAxis[e];return t??es},kEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},DR=(n,e)=>{var t=n.cartesianAxis.zAxis[e];return t??kEe},Fn=(n,e,t)=>{switch(e){case"xAxis":return HA(n,t);case"yAxis":return fd(n,t);case"zAxis":return DR(n,t);case"angleAxis":return PR(n,t);case"radiusAxis":return FR(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},NEe=(n,e,t)=>{switch(e){case"xAxis":return HA(n,t);case"yAxis":return fd(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},Nx=(n,e,t)=>{switch(e){case"xAxis":return HA(n,t);case"yAxis":return fd(n,t);case"angleAxis":return PR(n,t);case"radiusAxis":return FR(n,t);default:throw new Error("Unexpected axis type: ".concat(e))}},KX=n=>n.graphicalItems.cartesianItems.some(e=>e.type==="bar")||n.graphicalItems.polarItems.some(e=>e.type==="radialBar");function OR(n,e){return t=>{switch(n){case"xAxis":return"xAxisId"in t&&t.xAxisId===e;case"yAxis":return"yAxisId"in t&&t.yAxisId===e;case"zAxis":return"zAxisId"in t&&t.zAxisId===e;case"angleAxis":return"angleAxisId"in t&&t.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in t&&t.radiusAxisId===e;default:return!1}}}var GI=n=>n.graphicalItems.cartesianItems,DEe=Y([An,kx],OR),UR=(n,e,t)=>n.filter(t).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Dx=Y([GI,Fn,DEe],UR),$X=Y([Dx],n=>n.filter(e=>e.type==="area"||e.type==="bar").filter($I)),GX=n=>n.filter(e=>!("stackId"in e)||e.stackId===void 0),zX=Y([Dx],GX),RR=n=>n.map(e=>e.data).filter(Boolean).flat(1),OEe=Y([Dx],RR),MR=(n,e)=>{var{chartData:t=[],dataStartIndex:r,dataEndIndex:i}=e;return n.length>0?n:t.slice(r,i+1)},LR=Y([OEe,jI],MR),QR=(n,e,t)=>(e==null?void 0:e.dataKey)!=null?n.map(r=>({value:Ot(r,e.dataKey)})):t.length>0?t.map(r=>r.dataKey).flatMap(r=>n.map(i=>({value:Ot(i,r)}))):n.map(r=>({value:r})),zI=Y([LR,Fn,Dx],QR);function WX(n,e){switch(n){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function zf(n){return n.filter(e=>Go(e)||e instanceof Date).map(Number).filter(e=>Ds(e)===!1)}function UEe(n,e,t){return!t||typeof e!="number"||Ds(e)?[]:t.length?zf(t.flatMap(r=>{var i=Ot(n,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!Rs(s)||!Rs(a)))return[e-s,e+a]})):[]}var REe=Y([$X,jI,sr],VX),XX=(n,e,t)=>{var r={},i=e.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),r);return Object.fromEntries(Object.entries(i).map(s=>{var[a,o]=s,l=o.map(NR);return[a,{stackedData:Wve(n,l,t),graphicalItems:o}]}))},Mk=Y([REe,$X,Fx],XX),YX=(n,e,t)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(t!=="zAxis"){var s=Zve(n,r,i);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},MEe=Y([Mk,hd,An],YX),qX=(n,e,t,r,i)=>t.length>0?n.flatMap(s=>t.flatMap(a=>{var o,l,A=(o=r[a.id])===null||o===void 0?void 0:o.filter(u=>WX(i,u)),c=Ot(s,(l=e.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:c,errorDomain:UEe(s,c,A)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?n.map(s=>({value:Ot(s,e.dataKey),errorDomain:[]})):n.map(s=>({value:s,errorDomain:[]})),WI=n=>n.errorBars,JX=(n,e,t)=>n.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>WX(t,r));Y([zX,WI,An],JX);var LEe=Y([LR,Fn,zX,WI,An],qX);function QEe(n){var{value:e}=n;if(Go(e)||e instanceof Date)return e}var E5=n=>{var e=n.flatMap(r=>[r.value,r.errorDomain]).flat(1),t=zf(e);if(t.length!==0)return[Math.min(...t),Math.max(...t)]},jEe=(n,e,t)=>{var r=n.map(QEe).filter(i=>i!=null);return t&&(e.dataKey==null||e.allowDuplicatedCategory&&VW(r))?Q7(0,n.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},jR=n=>{var e;if(n==null||!("domain"in n))return Rk;if(n.domain!=null)return n.domain;if(n.ticks!=null){if(n.type==="number"){var t=zf(n.ticks);return[Math.min(...t),Math.max(...t)]}if(n.type==="category")return n.ticks.map(String)}return(e=n==null?void 0:n.domain)!==null&&e!==void 0?e:Rk},p_=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},ZX=n=>n.referenceElements.dots,B0=(n,e,t)=>n.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===t:r.yAxisId===t),HEe=Y([ZX,An,kx],B0),eY=n=>n.referenceElements.areas,VEe=Y([eY,An,kx],B0),tY=n=>n.referenceElements.lines,KEe=Y([tY,An,kx],B0),nY=(n,e)=>{var t=zf(n.map(r=>e==="xAxis"?r.x:r.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},$Ee=Y(HEe,An,nY),rY=(n,e)=>{var t=zf(n.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},GEe=Y([VEe,An],rY),iY=(n,e)=>{var t=zf(n.map(r=>e==="xAxis"?r.x:r.y));if(t.length!==0)return[Math.min(...t),Math.max(...t)]},zEe=Y(KEe,An,iY),WEe=Y($Ee,zEe,GEe,(n,e,t)=>p_(n,t,e)),sY=Y([Fn],jR),HR=(n,e,t,r,i,s,a)=>{var o=AEe(e,n.allowDataOverflow);if(o!=null)return o;var l=s==="vertical"&&a==="xAxis"||s==="horizontal"&&a==="yAxis",A=l?p_(t,i,E5(r)):p_(i,E5(r));return cEe(e,A,n.allowDataOverflow)},XEe=Y([Fn,sY,MEe,LEe,WEe,lt,An],HR),YEe=[0,1],VR=(n,e,t,r,i,s,a)=>{if(!((n==null||t==null||t.length===0)&&a===void 0)){var{dataKey:o,type:l}=n,A=cd(e,s);return A&&o==null?Q7(0,t.length):l==="category"?jEe(r,n,A):i==="expand"?YEe:a}},KR=Y([Fn,lt,LR,zI,Fx,An,XEe],VR),aY=(n,e,t,r,i)=>{if(n!=null){var{scale:s,type:a}=n;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Bx(s));return o in My?o:"point"}}},E0=Y([Fn,lt,KX,SR,An],aY);function qEe(n){if(n!=null){if(n in My)return My[n]();var e="scale".concat(Bx(n));if(e in My)return My[e]()}}function $R(n,e,t,r){if(!(t==null||r==null)){if(typeof n.scale=="function")return n.scale.copy().domain(t).range(r);var i=qEe(e);if(i!=null){var s=i.domain(t).range(r);return Vve(s),s}}}var GR=(n,e,t)=>{var r=jR(e);if(!(t!=="auto"&&t!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&i0(n))return wEe(n,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&i0(n))return bEe(n,e.tickCount,e.allowDecimals)}},zR=Y([KR,Nx,E0],GR),WR=(n,e,t,r)=>{if(r!=="angleAxis"&&(n==null?void 0:n.type)==="number"&&i0(e)&&Array.isArray(t)&&t.length>0){var i=e[0],s=t[0],a=e[1],o=t[t.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},JEe=Y([Fn,KR,zR,An],WR),ZEe=Y(zI,Fn,(n,e)=>{if(!(!e||e.type!=="number")){var t=1/0,r=Array.from(zf(n.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];t=Math.min(t,a)}return t/i}}),oY=Y(ZEe,lt,UX,nr,(n,e,t,r)=>r,(n,e,t,r,i)=>{if(!Rs(n))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return n*s/2;if(i==="no-gap"){var a=Ii(t,n*s),o=n*s/2;return o-a-(o-a)/s*a}return 0}),eCe=(n,e)=>{var t=HA(n,e);return t==null||typeof t.padding!="string"?0:oY(n,"xAxis",e,t.padding)},tCe=(n,e)=>{var t=fd(n,e);return t==null||typeof t.padding!="string"?0:oY(n,"yAxis",e,t.padding)},nCe=Y(HA,eCe,(n,e)=>{var t,r;if(n==null)return{left:0,right:0};var{padding:i}=n;return typeof i=="string"?{left:e,right:e}:{left:((t=i.left)!==null&&t!==void 0?t:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),rCe=Y(fd,tCe,(n,e)=>{var t,r;if(n==null)return{top:0,bottom:0};var{padding:i}=n;return typeof i=="string"?{top:e,bottom:e}:{top:((t=i.top)!==null&&t!==void 0?t:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),iCe=Y([nr,nCe,NI,kI,(n,e,t)=>t],(n,e,t,r,i)=>{var{padding:s}=r;return i?[s.left,t.width-s.right]:[n.left+e.left,n.left+n.width-e.right]}),sCe=Y([nr,lt,rCe,NI,kI,(n,e,t)=>t],(n,e,t,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[n.top+n.height-t.bottom,n.top+t.top]:[n.top+t.top,n.top+n.height-t.bottom]}),Ox=(n,e,t,r)=>{var i;switch(e){case"xAxis":return iCe(n,t,r);case"yAxis":return sCe(n,t,r);case"zAxis":return(i=DR(n,t))===null||i===void 0?void 0:i.range;case"angleAxis":return QX(n);case"radiusAxis":return jX(n,t);default:return}},lY=Y([Fn,Ox],VI),C0=Y([Fn,E0,JEe,lY],$R);Y([Dx,WI,An],JX);function AY(n,e){return n.id<e.id?-1:n.id>e.id?1:0}var XI=(n,e)=>e,YI=(n,e,t)=>t,aCe=Y(zU,XI,YI,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(AY)),oCe=Y(WU,XI,YI,(n,e,t)=>n.filter(r=>r.orientation===e).filter(r=>r.mirror===t).sort(AY)),cY=(n,e)=>({width:n.width,height:e.height}),lCe=(n,e)=>{var t=typeof e.width=="number"?e.width:FI;return{width:t,height:n.height}},uY=Y(nr,HA,cY),ACe=(n,e,t)=>{switch(e){case"top":return n.top;case"bottom":return t-n.bottom;default:return 0}},cCe=(n,e,t)=>{switch(e){case"left":return n.left;case"right":return t-n.right;default:return 0}},uCe=Y(QA,nr,aCe,XI,YI,(n,e,t,r,i)=>{var s={},a;return t.forEach(o=>{var l=cY(e,o);a==null&&(a=ACe(e,r,n));var A=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(A)*l.height,a+=(A?-1:1)*l.height}),s}),dCe=Y(LA,nr,oCe,XI,YI,(n,e,t,r,i)=>{var s={},a;return t.forEach(o=>{var l=lCe(e,o);a==null&&(a=cCe(e,r,n));var A=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(A)*l.width,a+=(A?-1:1)*l.width}),s}),hCe=(n,e)=>{var t=nr(n),r=HA(n,e);if(r!=null){var i=uCe(n,r.orientation,r.mirror),s=i[e];return s==null?{x:t.left,y:0}:{x:t.left,y:s}}},fCe=(n,e)=>{var t=nr(n),r=fd(n,e);if(r!=null){var i=dCe(n,r.orientation,r.mirror),s=i[e];return s==null?{x:0,y:t.top}:{x:s,y:t.top}}},dY=Y(nr,fd,(n,e)=>{var t=typeof e.width=="number"?e.width:FI;return{width:t,height:n.height}}),C5=(n,e,t)=>{switch(e){case"xAxis":return uY(n,t).width;case"yAxis":return dY(n,t).height;default:return}},hY=(n,e,t,r)=>{if(t!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=t,o=cd(n,r),l=e.map(A=>A.value);if(a&&o&&s==="category"&&i&&VW(l))return l}},XR=Y([lt,zI,Fn,An],hY),fY=(n,e,t,r)=>{if(!(t==null||t.dataKey==null)){var{type:i,scale:s}=t,a=cd(n,r);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},YR=Y([lt,zI,Nx,An],fY),_5=Y([lt,NEe,E0,C0,XR,YR,Ox,zR,An],(n,e,t,r,i,s,a,o,l)=>{if(e==null)return null;var A=cd(n,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:A,niceTicks:o,range:a,realScaleType:t,scale:r}}),gCe=(n,e,t,r,i,s,a,o,l)=>{if(!(e==null||r==null)){var A=cd(n,l),{type:c,ticks:u,tickCount:h}=e,g=t==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/g:0;p=l==="angleAxis"&&s!=null&&s.length>=2?yr(s[0]-s[1])*2*p:p;var m=u||i;if(m){var w=m.map((v,b)=>{var x=a?a.indexOf(v):v;return{index:b,coordinate:r(x)+p,value:v,offset:p}});return w.filter(v=>!Ds(v.coordinate))}return A&&o?o.map((v,b)=>({coordinate:r(v)+p,value:v,index:b,offset:p})):r.ticks?r.ticks(h).map(v=>({coordinate:r(v)+p,value:v,offset:p})):r.domain().map((v,b)=>({coordinate:r(v)+p,value:a?a[v]:v,index:b,offset:p}))}},gY=Y([lt,Nx,E0,C0,zR,Ox,XR,YR,An],gCe),pCe=(n,e,t,r,i,s,a)=>{if(!(e==null||t==null||r==null||r[0]===r[1])){var o=cd(n,a),{tickCount:l}=e,A=0;return A=a==="angleAxis"&&(r==null?void 0:r.length)>=2?yr(r[0]-r[1])*2*A:A,o&&s?s.map((c,u)=>({coordinate:t(c)+A,value:c,index:u,offset:A})):t.ticks?t.ticks(l).map(c=>({coordinate:t(c)+A,value:c,offset:A})):t.domain().map((c,u)=>({coordinate:t(c)+A,value:i?i[c]:c,index:u,offset:A}))}},Xu=Y([lt,Nx,C0,Ox,XR,YR,An],pCe),Yu=Y(Fn,C0,(n,e)=>{if(!(n==null||e==null))return g_(g_({},n),{},{scale:e})}),mCe=Y([Fn,E0,KR,lY],$R);Y((n,e,t)=>DR(n,t),mCe,(n,e)=>{if(!(n==null||e==null))return g_(g_({},n),{},{scale:e})});var yCe=Y([lt,zU,WU],(n,e,t)=>{switch(n){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return t.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),pY=n=>n.options.defaultTooltipEventType,mY=n=>n.options.validateTooltipEventTypes;function yY(n,e,t){if(n==null)return e;var r=n?"axis":"item";return t==null?e:t.includes(r)?r:e}function qR(n,e){var t=pY(n),r=mY(n);return yY(e,t,r)}function vCe(n){return Fe(e=>qR(e,n))}var vY=(n,e)=>{var t,r=Number(e);if(!(Ds(r)||e==null))return r>=0?n==null||(t=n[r])===null||t===void 0?void 0:t.value:void 0},wCe=n=>n.tooltip.settings,dc={active:!1,index:null,dataKey:void 0,coordinate:void 0},bCe={itemInteraction:{click:dc,hover:dc},axisInteraction:{click:dc,hover:dc},keyboardInteraction:dc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},wY=Qs({name:"tooltip",initialState:bCe,reducers:{addTooltipEntrySettings(n,e){n.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(n,e){var t=pA(n).tooltipItemPayloads.indexOf(e.payload);t>-1&&n.tooltipItemPayloads.splice(t,1)},setTooltipSettingsState(n,e){n.settings=e.payload},setActiveMouseOverItemIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.itemInteraction.hover.active=!0,n.itemInteraction.hover.index=e.payload.activeIndex,n.itemInteraction.hover.dataKey=e.payload.activeDataKey,n.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(n){n.itemInteraction.hover.active=!1,n.axisInteraction.hover.active=!1},mouseLeaveItem(n){n.itemInteraction.hover.active=!1},setActiveClickItemIndex(n,e){n.syncInteraction.active=!1,n.itemInteraction.click.active=!0,n.keyboardInteraction.active=!1,n.itemInteraction.click.index=e.payload.activeIndex,n.itemInteraction.click.dataKey=e.payload.activeDataKey,n.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(n,e){n.syncInteraction.active=!1,n.axisInteraction.hover.active=!0,n.keyboardInteraction.active=!1,n.axisInteraction.hover.index=e.payload.activeIndex,n.axisInteraction.hover.dataKey=e.payload.activeDataKey,n.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(n,e){n.syncInteraction.active=!1,n.keyboardInteraction.active=!1,n.axisInteraction.click.active=!0,n.axisInteraction.click.index=e.payload.activeIndex,n.axisInteraction.click.dataKey=e.payload.activeDataKey,n.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(n,e){n.syncInteraction=e.payload},setKeyboardInteraction(n,e){n.keyboardInteraction.active=e.payload.active,n.keyboardInteraction.index=e.payload.activeIndex,n.keyboardInteraction.coordinate=e.payload.activeCoordinate,n.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:xCe,removeTooltipEntrySettings:BCe,setTooltipSettingsState:ECe,setActiveMouseOverItemIndex:bY,mouseLeaveItem:CCe,mouseLeaveChart:xY,setActiveClickItemIndex:_Ce,setMouseOverAxisIndex:BY,setMouseClickAxisIndex:SCe,setSyncInteraction:Lk,setKeyboardInteraction:Qk}=wY.actions,ICe=wY.reducer;function S5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function pE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(t),!0).forEach(function(r){TCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):S5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function TCe(n,e,t){return(e=PCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function PCe(n){var e=FCe(n,"string");return typeof e=="symbol"?e:e+""}function FCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kCe(n,e,t){return e==="axis"?t==="click"?n.axisInteraction.click:n.axisInteraction.hover:t==="click"?n.itemInteraction.click:n.itemInteraction.hover}function NCe(n){return n.index!=null}var EY=(n,e,t,r)=>{if(e==null)return dc;var i=kCe(n,e,t);if(i==null)return dc;if(i.active)return i;if(n.keyboardInteraction.active)return n.keyboardInteraction;if(n.syncInteraction.active&&n.syncInteraction.index!=null)return n.syncInteraction;var s=n.settings.active===!0;if(NCe(i)){if(s)return pE(pE({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return pE(pE({},dc),{},{coordinate:i.coordinate})},JR=(n,e)=>{var t=n==null?void 0:n.index;if(t==null)return null;var r=Number(t);if(!Rs(r))return t;var i=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(i,Math.min(r,s)))},CY=(n,e,t,r,i,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],A=l==null?void 0:o(l.positions,s);if(A!=null)return A;var c=i==null?void 0:i[Number(s)];if(c)switch(t){case"horizontal":return{x:c.coordinate,y:(r.top+e)/2};default:return{x:(r.left+n)/2,y:c.coordinate}}}},_Y=(n,e,t,r)=>{if(e==="axis")return n.tooltipItemPayloads;if(n.tooltipItemPayloads.length===0)return[];var i;return t==="hover"?i=n.itemInteraction.hover.dataKey:i=n.itemInteraction.click.dataKey,i==null&&r!=null?[n.tooltipItemPayloads[0]]:n.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Ux=n=>n.options.tooltipPayloadSearcher,_0=n=>n.tooltip;function I5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function T5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I5(Object(t),!0).forEach(function(r){DCe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):I5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function DCe(n,e,t){return(e=OCe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OCe(n){var e=UCe(n,"string");return typeof e=="symbol"?e:e+""}function UCe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RCe(n,e){return n??e}var SY=(n,e,t,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:A,dataEndIndex:c}=t,u=[];return n.reduce((h,g)=>{var p,{dataDefinedOnItem:m,settings:w}=g,v=RCe(m,o),b=Array.isArray(v)?u7(v,A,c):v,x=(p=w==null?void 0:w.dataKey)!==null&&p!==void 0?p:r==null?void 0:r.dataKey,E=w==null?void 0:w.nameKey,I;if(r!=null&&r.dataKey&&Array.isArray(b)&&!Array.isArray(b[0])&&a==="axis"?I=KW(b,r.dataKey,i):I=s(b,e,l,E),Array.isArray(I))I.forEach(_=>{var T=T5(T5({},w),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push(m3({tooltipEntrySettings:T,dataKey:_.dataKey,payload:_.payload,value:Ot(_.payload,_.dataKey),name:_.name}))});else{var P;h.push(m3({tooltipEntrySettings:w,dataKey:x,payload:I,value:Ot(I,x),name:(P=Ot(I,E))!==null&&P!==void 0?P:w==null?void 0:w.name}))}return h},u)}},ZR=Y([sr,lt,KX,SR,ir],aY),MCe=Y([n=>n.graphicalItems.cartesianItems,n=>n.graphicalItems.polarItems],(n,e)=>[...n,...e]),LCe=Y([ir,x0],OR),Rx=Y([MCe,sr,LCe],UR),QCe=Y([Rx],n=>n.filter($I)),jCe=Y([Rx],RR),S0=Y([jCe,hd],MR),HCe=Y([QCe,hd,sr],VX),eM=Y([S0,sr,Rx],QR),VCe=Y([sr],jR),KCe=Y([Rx],n=>n.filter($I)),$Ce=Y([HCe,KCe,Fx],XX),GCe=Y([$Ce,hd,ir],YX),zCe=Y([Rx],GX),WCe=Y([S0,sr,zCe,WI,ir],qX),XCe=Y([ZX,ir,x0],B0),YCe=Y([XCe,ir],nY),qCe=Y([eY,ir,x0],B0),JCe=Y([qCe,ir],rY),ZCe=Y([tY,ir,x0],B0),e1e=Y([ZCe,ir],iY),t1e=Y([YCe,e1e,JCe],p_),n1e=Y([sr,VCe,GCe,WCe,t1e,lt,ir],HR),IY=Y([sr,lt,S0,eM,Fx,ir,n1e],VR),r1e=Y([IY,sr,ZR],GR),i1e=Y([sr,IY,r1e,ir],WR),TY=n=>{var e=ir(n),t=x0(n),r=!1;return Ox(n,e,t,r)},PY=Y([sr,TY],VI),FY=Y([sr,ZR,i1e,PY],$R),s1e=Y([lt,eM,sr,ir],hY),a1e=Y([lt,eM,sr,ir],fY),o1e=(n,e,t,r,i,s,a,o)=>{if(e){var{type:l}=e,A=cd(n,o);if(r){var c=t==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,u=l==="category"&&r.bandwidth?r.bandwidth()/c:0;return u=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?yr(i[0]-i[1])*2*u:u,A&&a?a.map((h,g)=>({coordinate:r(h)+u,value:h,index:g,offset:u})):r.domain().map((h,g)=>({coordinate:r(h)+u,value:s?s[h]:h,index:g,offset:u}))}}},VA=Y([lt,sr,ZR,FY,TY,s1e,a1e,ir],o1e),tM=Y([pY,mY,wCe],(n,e,t)=>yY(t.shared,n,e)),kY=n=>n.tooltip.settings.trigger,nM=n=>n.tooltip.settings.defaultIndex,qI=Y([_0,tM,kY,nM],EY),qu=Y([qI,S0],JR),NY=Y([VA,qu],vY),DY=Y([qI],n=>{if(n)return n.dataKey}),OY=Y([_0,tM,kY,nM],_Y),l1e=Y([LA,QA,lt,nr,VA,nM,OY,Ux],CY),A1e=Y([qI,l1e],(n,e)=>n!=null&&n.coordinate?n.coordinate:e),c1e=Y([qI],n=>n.active),u1e=Y([OY,qu,hd,sr,NY,Ux,tM],SY),d1e=Y([u1e],n=>{if(n!=null){var e=n.map(t=>t.payload).filter(t=>t!=null);return Array.from(new Set(e))}});function P5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function F5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(t),!0).forEach(function(r){h1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function h1e(n,e,t){return(e=f1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f1e(n){var e=g1e(n,"string");return typeof e=="symbol"?e:e+""}function g1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var p1e=()=>Fe(sr),m1e=()=>{var n=p1e(),e=Fe(VA),t=Fe(FY);return gw(F5(F5({},n),{},{scale:t}),e)},y1e=()=>Fe(SR),rM=(n,e)=>e,UY=(n,e,t)=>t,iM=(n,e,t,r)=>r,v1e=Y(VA,n=>EI(n,e=>e.coordinate)),sM=Y([_0,rM,UY,iM],EY),RY=Y([sM,S0],JR),w1e=(n,e,t)=>{if(e!=null){var r=_0(n);return e==="axis"?t==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:t==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},MY=Y([_0,rM,UY,iM],_Y),m_=Y([LA,QA,lt,nr,VA,iM,MY,Ux],CY),b1e=Y([sM,m_],(n,e)=>{var t;return(t=n.coordinate)!==null&&t!==void 0?t:e}),LY=Y(VA,RY,vY),x1e=Y([MY,RY,hd,sr,LY,Ux,rM],SY),B1e=Y([sM],n=>({isActive:n.active,activeIndex:n.index})),E1e=(n,e,t,r,i,s,a,o)=>{if(!(!n||!e||!r||!i||!s)){var l=ewe(n.chartX,n.chartY,e,t,o);if(l){var A=nwe(l,e),c=jve(A,a,s,r,i),u=twe(e,s,c,l);return{activeIndex:String(c),activeCoordinate:u}}}};function jk(){return jk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jk.apply(null,arguments)}function k5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function mE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(t),!0).forEach(function(r){C1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function C1e(n,e,t){return(e=_1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _1e(n){var e=S1e(n,"string");return typeof e=="symbol"?e:e+""}function S1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function I1e(n){var{coordinate:e,payload:t,index:r,offset:i,tooltipAxisBandSize:s,layout:a,cursor:o,tooltipEventType:l,chartName:A}=n,c=e,u=t,h=r;if(!o||!c||A!=="ScatterChart"&&l!=="axis")return null;var g,p;if(A==="ScatterChart")g=c,p=Zwe;else if(A==="BarChart")g=ebe(a,c,i,s),p=N7;else if(a==="radial"){var{cx:m,cy:w,radius:v,startAngle:b,endAngle:x}=D7(c);g={cx:m,cy:w,startAngle:b,endAngle:x,innerRadius:v,outerRadius:v},p=U7}else g={points:Nbe(a,c,i)},p=ZU;var E=typeof o=="object"&&"className"in o?o.className:void 0,I=mE(mE(mE(mE({stroke:"#ccc",pointerEvents:"none"},i),g),sn(o,!1)),{},{payload:u,payloadIndex:h,className:gt("recharts-tooltip-cursor",E)});return B.isValidElement(o)?B.cloneElement(o,I):B.createElement(p,I)}function T1e(n){var e=m1e(),t=y7(),r=DI(),i=y1e();return B.createElement(I1e,jk({},n,{coordinate:n.coordinate,index:n.index,payload:n.payload,offset:t,layout:r,tooltipAxisBandSize:e,chartName:i}))}var QY=B.createContext(null),P1e=()=>B.useContext(QY),jY={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,A,c){this.fn=l,this.context=A,this.once=c||!1}function s(l,A,c,u,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,u||l,h),p=t?t+A:A;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],g]:l._events[p].push(g):(l._events[p]=g,l._eventsCount++),l}function a(l,A){--l._eventsCount===0?l._events=new r:delete l._events[A]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var A=[],c,u;if(this._eventsCount===0)return A;for(u in c=this._events)e.call(c,u)&&A.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(c)):A},o.prototype.listeners=function(A){var c=t?t+A:A,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,g=u.length,p=new Array(g);h<g;h++)p[h]=u[h].fn;return p},o.prototype.listenerCount=function(A){var c=t?t+A:A,u=this._events[c];return u?u.fn?1:u.length:0},o.prototype.emit=function(A,c,u,h,g,p){var m=t?t+A:A;if(!this._events[m])return!1;var w=this._events[m],v=arguments.length,b,x;if(w.fn){switch(w.once&&this.removeListener(A,w.fn,void 0,!0),v){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,c),!0;case 3:return w.fn.call(w.context,c,u),!0;case 4:return w.fn.call(w.context,c,u,h),!0;case 5:return w.fn.call(w.context,c,u,h,g),!0;case 6:return w.fn.call(w.context,c,u,h,g,p),!0}for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];w.fn.apply(w.context,b)}else{var E=w.length,I;for(x=0;x<E;x++)switch(w[x].once&&this.removeListener(A,w[x].fn,void 0,!0),v){case 1:w[x].fn.call(w[x].context);break;case 2:w[x].fn.call(w[x].context,c);break;case 3:w[x].fn.call(w[x].context,c,u);break;case 4:w[x].fn.call(w[x].context,c,u,h);break;default:if(!b)for(I=1,b=new Array(v-1);I<v;I++)b[I-1]=arguments[I];w[x].fn.apply(w[x].context,b)}}return!0},o.prototype.on=function(A,c,u){return s(this,A,c,u,!1)},o.prototype.once=function(A,c,u){return s(this,A,c,u,!0)},o.prototype.removeListener=function(A,c,u,h){var g=t?t+A:A;if(!this._events[g])return this;if(!c)return a(this,g),this;var p=this._events[g];if(p.fn)p.fn===c&&(!h||p.once)&&(!u||p.context===u)&&a(this,g);else{for(var m=0,w=[],v=p.length;m<v;m++)(p[m].fn!==c||h&&!p[m].once||u&&p[m].context!==u)&&w.push(p[m]);w.length?this._events[g]=w.length===1?w[0]:w:a(this,g)}return this},o.prototype.removeAllListeners=function(A){var c;return A?(c=t?t+A:A,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(jY);var F1e=jY.exports;const k1e=Yo(F1e);var xw=new k1e,Hk="recharts.syncEvent.tooltip",N5="recharts.syncEvent.brush";function aM(n,e){if(e){var t=Number.parseInt(e,10);if(!Ds(t))return n==null?void 0:n[t]}}var N1e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},HY=Qs({name:"options",initialState:N1e,reducers:{createEventEmitter:n=>{n.eventEmitter==null&&(n.eventEmitter=Symbol("rechartsEventEmitter"))}}}),D1e=HY.reducer,{createEventEmitter:O1e}=HY.actions;function U1e(n){return n.tooltip.syncInteraction}var R1e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},VY=Qs({name:"chartData",initialState:R1e,reducers:{setChartData(n,e){if(n.chartData=e.payload,e.payload==null){n.dataStartIndex=0,n.dataEndIndex=0;return}e.payload.length>0&&n.dataEndIndex!==e.payload.length-1&&(n.dataEndIndex=e.payload.length-1)},setComputedData(n,e){n.computedData=e.payload},setDataStartEndIndexes(n,e){var{startIndex:t,endIndex:r}=e.payload;t!=null&&(n.dataStartIndex=t),r!=null&&(n.dataEndIndex=r)}}}),{setChartData:D5,setDataStartEndIndexes:M1e,setComputedData:KNe}=VY.actions,L1e=VY.reducer,KY=()=>{};function Q1e(){var n=Fe(IR),e=Fe(TR),t=mn(),r=Fe(RX),i=Fe(VA),s=DI(),a=XU(),o=Fe(l=>l.rootProps.className);B.useEffect(()=>{if(n==null)return KY;var l=(A,c,u)=>{if(e!==u&&n===A){if(r==="index"){t(c);return}if(i!=null){var h;if(typeof r=="function"){var g={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},p=r(i,g);h=i[p]}else r==="value"&&(h=i.find(P=>String(P.value)===c.payload.label));var{coordinate:m}=c.payload;if(h==null||c.payload.active===!1||m==null||a==null){t(Lk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:w,y:v}=m,b=Math.min(w,a.x+a.width),x=Math.min(v,a.y+a.height),E={x:s==="horizontal"?h.coordinate:b,y:s==="horizontal"?x:h.coordinate},I=Lk({active:c.payload.active,coordinate:E,dataKey:c.payload.dataKey,index:String(h.index),label:c.payload.label});t(I)}}};return xw.on(Hk,l),()=>{xw.off(Hk,l)}},[o,t,e,n,r,i,s,a])}function j1e(){var n=Fe(IR),e=Fe(TR),t=mn();B.useEffect(()=>{if(n==null)return KY;var r=(i,s,a)=>{e!==a&&n===i&&t(M1e(s))};return xw.on(N5,r),()=>{xw.off(N5,r)}},[t,e,n])}function H1e(){var n=mn();B.useEffect(()=>{n(O1e())},[n]),Q1e(),j1e()}function V1e(n,e,t,r,i,s){var a=Fe(h=>w1e(h,n,e)),o=Fe(TR),l=Fe(IR),A=Fe(RX),c=Fe(U1e),u=c==null?void 0:c.active;B.useEffect(()=>{if(!u&&l!=null&&o!=null){var h=Lk({active:s,coordinate:t,dataKey:a,index:i,label:typeof r=="number"?String(r):r});xw.emit(Hk,l,h,o)}},[u,t,a,i,r,o,l,A,s])}function O5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function U5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?O5(Object(t),!0).forEach(function(r){K1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function K1e(n,e,t){return(e=$1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $1e(n){var e=G1e(n,"string");return typeof e=="symbol"?e:e+""}function G1e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function z1e(n){return n.dataKey}function W1e(n,e){return B.isValidElement(n)?B.cloneElement(n,e):typeof n=="function"?B.createElement(n,e):B.createElement(Fwe,e)}var R5=[],X1e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Kf.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function gu(n){var e=js(n,X1e),{active:t,allowEscapeViewBox:r,animationDuration:i,animationEasing:s,content:a,filterNull:o,isAnimationActive:l,offset:A,payloadUniqBy:c,position:u,reverseDirection:h,useTranslate3d:g,wrapperStyle:p,cursor:m,shared:w,trigger:v,defaultIndex:b,portal:x,axisId:E}=e,I=mn(),P=typeof b=="number"?String(b):b;B.useEffect(()=>{I(ECe({shared:w,trigger:v,axisId:E,active:t,defaultIndex:P}))},[I,w,v,E,t,P]);var _=XU(),T=x7(),k=vCe(w),{activeIndex:O,isActive:U}=Fe(j=>B1e(j,k,v,P)),L=Fe(j=>x1e(j,k,v,P)),R=Fe(j=>LY(j,k,v,P)),re=Fe(j=>b1e(j,k,v,P)),he=L,te=P1e(),ee=t??U,[Z,ae]=L9([he,ee]),fe=k==="axis"?R:void 0;V1e(k,v,re,fe,O,ee);var Ue=x??te;if(Ue==null)return null;var ie=he??R5;ee||(ie=R5),o&&ie.length&&(ie=S9(he.filter(j=>j.value!=null&&(j.hide!==!0||e.includeHidden)),c,z1e));var we=ie.length>0,Ye=B.createElement(Mwe,{allowEscapeViewBox:r,animationDuration:i,animationEasing:s,isAnimationActive:l,active:ee,coordinate:re,hasPayload:we,offset:A,position:u,reverseDirection:h,useTranslate3d:g,viewBox:_,wrapperStyle:p,lastBoundingBox:Z,innerRef:ae,hasPortalFromProps:!!x},W1e(a,U5(U5({},e),{},{payload:ie,label:fe,active:ee,coordinate:re,accessibilityLayer:T})));return B.createElement(B.Fragment,null,dO.createPortal(Ye,Ue),ee&&B.createElement(T1e,{cursor:m,tooltipEventType:k,coordinate:re,payload:he,index:O}))}var $Y={},GY={},zY={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,r,{signal:i,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),A=s==null||s.includes("trailing"),c=()=>{o!==null&&(t.apply(a,o),a=void 0,o=null)},u=()=>{A&&c(),m()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,u()},r)},p=()=>{h!==null&&(clearTimeout(h),h=null)},m=()=>{p(),a=void 0,o=null},w=()=>{c()},v=function(...b){if(i!=null&&i.aborted)return;a=this,o=b;const x=h==null;g(),l&&x&&c()};return v.schedule=g,v.cancel=m,v.flush=w,i==null||i.addEventListener("abort",m,{once:!0}),v}n.debounce=e})(zY);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=zY;function t(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,A=Array(2);a&&(A[0]="leading"),o&&(A[1]="trailing");let c,u=null;const h=e.debounce(function(...m){c=r.apply(this,m),u=null},i,{edges:A}),g=function(...m){return l!=null&&(u===null&&(u=Date.now()),Date.now()-u>=l)?(c=r.apply(this,m),u=Date.now(),h.cancel(),h.schedule(),c):(h.apply(this,m),c)},p=()=>(h.flush(),c);return g.cancel=h.cancel,g.flush=p,g}n.debounce=t})(GY);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=GY;function t(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:o})}n.throttle=t})($Y);var Y1e=$Y.throttle;const q1e=Yo(Y1e);var Tv=function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function M5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M5(Object(t),!0).forEach(function(r){J1e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):M5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function J1e(n,e,t){return(e=Z1e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Z1e(n){var e=e_e(n,"string");return typeof e=="symbol"?e:e+""}function e_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var pu=B.forwardRef((n,e)=>{var{aspect:t,initialDimension:r={width:-1,height:-1},width:i="100%",height:s="100%",minWidth:a=0,minHeight:o,maxHeight:l,children:A,debounce:c=0,id:u,className:h,onResize:g,style:p={}}=n,m=B.useRef(null),w=B.useRef();w.current=g,B.useImperativeHandle(e,()=>m.current);var[v,b]=B.useState({containerWidth:r.width,containerHeight:r.height}),x=B.useCallback((I,P)=>{b(_=>{var T=Math.round(I),k=Math.round(P);return _.containerWidth===T&&_.containerHeight===k?_:{containerWidth:T,containerHeight:k}})},[]);B.useEffect(()=>{var I=k=>{var O,{width:U,height:L}=k[0].contentRect;x(U,L),(O=w.current)===null||O===void 0||O.call(w,U,L)};c>0&&(I=q1e(I,c,{trailing:!0,leading:!1}));var P=new ResizeObserver(I),{width:_,height:T}=m.current.getBoundingClientRect();return x(_,T),P.observe(m.current),()=>{P.disconnect()}},[x,c]);var E=B.useMemo(()=>{var{containerWidth:I,containerHeight:P}=v;if(I<0||P<0)return null;Tv(Gd(i)||Gd(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,s),Tv(!t||t>0,"The aspect(%s) must be greater than zero.",t);var _=Gd(i)?I:i,T=Gd(s)?P:s;return t&&t>0&&(_?T=_/t:T&&(_=T*t),l&&T>l&&(T=l)),Tv(_>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,T,i,s,a,o,t),B.Children.map(A,k=>B.cloneElement(k,{width:_,height:T,style:zP({width:_,height:T},k.props.style)}))},[t,A,s,l,o,a,v,i]);return B.createElement("div",{id:u?"".concat(u):void 0,className:gt("recharts-responsive-container",h),style:zP(zP({},p),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:m},B.createElement("div",{style:{width:0,height:0,overflow:"visible"}},E))}),I0=n=>null;I0.displayName="Cell";function t_e(n,e,t){return(e=n_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n_e(n){var e=r_e(n,"string");return typeof e=="symbol"?e:e+""}function r_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class i_e{constructor(e){t_e(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}function L5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function s_e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(t),!0).forEach(function(r){a_e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function a_e(n,e,t){return(e=o_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o_e(n){var e=l_e(n,"string");return typeof e=="symbol"?e:e+""}function l_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var A_e={cacheSize:2e3,enableCache:!0},WY=s_e({},A_e),Q5=new i_e(WY.cacheSize),c_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},j5="recharts_measurement_span";function u_e(n,e){var t=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(n,"|").concat(t,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var H5=(n,e)=>{try{var t=document.getElementById(j5);t||(t=document.createElement("span"),t.setAttribute("id",j5),t.setAttribute("aria-hidden","true"),document.body.appendChild(t)),Object.assign(t.style,c_e,e),t.textContent="".concat(n);var r=t.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Pv=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Kf.isSsr)return{width:0,height:0};if(!WY.enableCache)return H5(e,t);var r=u_e(e,t),i=Q5.get(r);if(i)return i;var s=H5(e,t);return Q5.set(r,s),s},V5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d_e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,h_e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,XY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},f_e=Object.keys(XY),Wg="NaN";function g_e(n,e){return n*XY[e]}class Ri{static parse(e){var t,[,r,i]=(t=h_e.exec(e))!==null&&t!==void 0?t:[];return new Ri(parseFloat(r),i??"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Ds(e)&&(this.unit=""),t!==""&&!d_e.test(t)&&(this.num=NaN,this.unit=""),f_e.includes(t)&&(this.num=g_e(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new Ri(NaN,""):new Ri(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ri(NaN,""):new Ri(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ri(NaN,""):new Ri(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ri(NaN,""):new Ri(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ds(this.num)}}function YY(n){if(n.includes(Wg))return Wg;for(var e=n;e.includes("*")||e.includes("/");){var t,[,r,i,s]=(t=V5.exec(e))!==null&&t!==void 0?t:[],a=Ri.parse(r??""),o=Ri.parse(s??""),l=i==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return Wg;e=e.replace(V5,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var A,[,c,u,h]=(A=K5.exec(e))!==null&&A!==void 0?A:[],g=Ri.parse(c??""),p=Ri.parse(h??""),m=u==="+"?g.add(p):g.subtract(p);if(m.isNaN())return Wg;e=e.replace(K5,m.toString())}return e}var $5=/\(([^()]*)\)/;function p_e(n){for(var e=n,t;(t=$5.exec(e))!=null;){var[,r]=t;e=e.replace($5,YY(r))}return e}function m_e(n){var e=n.replace(/\s+/g,"");return e=p_e(e),e=YY(e),e}function y_e(n){try{return m_e(n)}catch{return Wg}}function WP(n){var e=y_e(n.slice(5,-1));return e===Wg?"":e}var v_e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],w_e=["dx","dy","angle","className","breakAll"];function Vk(){return Vk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vk.apply(null,arguments)}function G5(n,e){if(n==null)return{};var t,r,i=b_e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function b_e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var qY=/[ \f\n\r\t\v\u2028\u2029]+/,JY=n=>{var{children:e,breakAll:t,style:r}=n;try{var i=[];Xt(e)||(t?i=e.toString().split(""):i=e.toString().split(qY));var s=i.map(o=>({word:o,width:Pv(o,r).width})),a=t?0:Pv(" ",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},x_e=(n,e,t,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=n,A=Be(s),c=a,u=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce((L,R)=>{var{word:re,width:he}=R,te=L[L.length-1];if(te&&(r==null||i||te.width+he+t<Number(r)))te.words.push(re),te.width+=he+t;else{var ee={words:[re],width:he};L.push(ee)}return L},[])},h=u(e),g=O=>O.reduce((U,L)=>U.width>L.width?U:L);if(!A||i)return h;var p=h.length>s||g(h).width>Number(r);if(!p)return h;for(var m="…",w=O=>{var U=c.slice(0,O),L=JY({breakAll:l,style:o,children:U+m}).wordsWithComputedWidth,R=u(L),re=R.length>s||g(R).width>Number(r);return[re,R]},v=0,b=c.length-1,x=0,E;v<=b&&x<=c.length-1;){var I=Math.floor((v+b)/2),P=I-1,[_,T]=w(P),[k]=w(I);if(!_&&!k&&(v=I+1),_&&k&&(b=I-1),!_&&k){E=T;break}x++}return E||h},z5=n=>{var e=Xt(n)?[]:n.toString().split(qY);return[{words:e}]},B_e=n=>{var{width:e,scaleToFit:t,children:r,style:i,breakAll:s,maxLines:a}=n;if((e||t)&&!Kf.isSsr){var o,l,A=JY({breakAll:s,children:r,style:i});if(A){var{wordsWithComputedWidth:c,spaceWidth:u}=A;o=c,l=u}else return z5(r);return x_e({breakAll:s,children:r,maxLines:a,style:i},o,l,e,t)}return z5(r)},W5="#808080",JI=B.forwardRef((n,e)=>{var{x:t=0,y:r=0,lineHeight:i="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:A=W5}=n,c=G5(n,v_e),u=B.useMemo(()=>B_e({breakAll:c.breakAll,children:c.children,maxLines:c.maxLines,scaleToFit:a,style:c.style,width:c.width}),[c.breakAll,c.children,c.maxLines,a,c.style,c.width]),{dx:h,dy:g,angle:p,className:m,breakAll:w}=c,v=G5(c,w_e);if(!Go(t)||!Go(r))return null;var b=t+(Be(h)?h:0),x=r+(Be(g)?g:0),E;switch(l){case"start":E=WP("calc(".concat(s,")"));break;case"middle":E=WP("calc(".concat((u.length-1)/2," * -").concat(i," + (").concat(s," / 2))"));break;default:E=WP("calc(".concat(u.length-1," * -").concat(i,")"));break}var I=[];if(a){var P=u[0].width,{width:_}=c;I.push("scale(".concat(Be(_)?_/P:1,")"))}return p&&I.push("rotate(".concat(p,", ").concat(b,", ").concat(x,")")),I.length&&(v.transform=I.join(" ")),B.createElement("text",Vk({},sn(v,!0),{ref:e,x:b,y:x,className:gt("recharts-text",m),textAnchor:o,fill:A.includes("url")?W5:A}),u.map((T,k)=>{var O=T.words.join(w?"":" ");return B.createElement("tspan",{x:b,dy:k===0?E:i,key:"".concat(O,"-").concat(k)},O)}))});JI.displayName="Text";var E_e=["offset"],C_e=["labelRef"];function X5(n,e){if(n==null)return{};var t,r,i=__e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function __e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Y5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function wn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(t),!0).forEach(function(r){S_e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Y5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function S_e(n,e,t){return(e=I_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I_e(n){var e=T_e(n,"string");return typeof e=="symbol"?e:e+""}function T_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nA(){return nA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nA.apply(null,arguments)}var P_e=n=>{var{value:e,formatter:t}=n,r=Xt(n.children)?e:n.children;return typeof t=="function"?t(r):r},oM=n=>n!=null&&typeof n=="function",F_e=(n,e)=>{var t=yr(e-n),r=Math.min(Math.abs(e-n),360);return t*r},k_e=(n,e,t,r)=>{var{position:i,offset:s,className:a}=n,{cx:o,cy:l,innerRadius:A,outerRadius:c,startAngle:u,endAngle:h,clockWise:g}=r,p=(A+c)/2,m=F_e(u,h),w=m>=0?1:-1,v,b;i==="insideStart"?(v=u+w*s,b=g):i==="insideEnd"?(v=h-w*s,b=!g):i==="end"&&(v=h+w*s,b=g),b=m<=0?b:!b;var x=Qn(o,l,p,v),E=Qn(o,l,p,v+(b?1:-1)*359),I="M".concat(x.x,",").concat(x.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(b?0:1,`,
    `).concat(E.x,",").concat(E.y),P=Xt(n.id)?dw("recharts-radial-line-"):n.id;return B.createElement("text",nA({},t,{dominantBaseline:"central",className:gt("recharts-radial-bar-label",a)}),B.createElement("defs",null,B.createElement("path",{id:P,d:I})),B.createElement("textPath",{xlinkHref:"#".concat(P)},e))},N_e=(n,e,t)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=n,A=(o+l)/2;if(t==="outside"){var{x:c,y:u}=Qn(r,i,a+e,A);return{x:c,y:u,textAnchor:c>=r?"start":"end",verticalAnchor:"middle"}}if(t==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(t==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(t==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+a)/2,{x:g,y:p}=Qn(r,i,h,A);return{x:g,y:p,textAnchor:"middle",verticalAnchor:"middle"}},D_e=(n,e)=>{var{parentViewBox:t,offset:r,position:i}=n,{x:s,y:a,width:o,height:l}=e,A=l>=0?1:-1,c=A*r,u=A>0?"end":"start",h=A>0?"start":"end",g=o>=0?1:-1,p=g*r,m=g>0?"end":"start",w=g>0?"start":"end";if(i==="top"){var v={x:s+o/2,y:a-A*r,textAnchor:"middle",verticalAnchor:u};return wn(wn({},v),t?{height:Math.max(a-t.y,0),width:o}:{})}if(i==="bottom"){var b={x:s+o/2,y:a+l+c,textAnchor:"middle",verticalAnchor:h};return wn(wn({},b),t?{height:Math.max(t.y+t.height-(a+l),0),width:o}:{})}if(i==="left"){var x={x:s-p,y:a+l/2,textAnchor:m,verticalAnchor:"middle"};return wn(wn({},x),t?{width:Math.max(x.x-t.x,0),height:l}:{})}if(i==="right"){var E={x:s+o+p,y:a+l/2,textAnchor:w,verticalAnchor:"middle"};return wn(wn({},E),t?{width:Math.max(t.x+t.width-E.x,0),height:l}:{})}var I=t?{width:o,height:l}:{};return i==="insideLeft"?wn({x:s+p,y:a+l/2,textAnchor:w,verticalAnchor:"middle"},I):i==="insideRight"?wn({x:s+o-p,y:a+l/2,textAnchor:m,verticalAnchor:"middle"},I):i==="insideTop"?wn({x:s+o/2,y:a+c,textAnchor:"middle",verticalAnchor:h},I):i==="insideBottom"?wn({x:s+o/2,y:a+l-c,textAnchor:"middle",verticalAnchor:u},I):i==="insideTopLeft"?wn({x:s+p,y:a+c,textAnchor:w,verticalAnchor:h},I):i==="insideTopRight"?wn({x:s+o-p,y:a+c,textAnchor:m,verticalAnchor:h},I):i==="insideBottomLeft"?wn({x:s+p,y:a+l-c,textAnchor:w,verticalAnchor:u},I):i==="insideBottomRight"?wn({x:s+o-p,y:a+l-c,textAnchor:m,verticalAnchor:u},I):i&&typeof i=="object"&&(Be(i.x)||Gd(i.x))&&(Be(i.y)||Gd(i.y))?wn({x:s+Ii(i.x,o),y:a+Ii(i.y,l),textAnchor:"end",verticalAnchor:"end"},I):wn({x:s+o/2,y:a+l/2,textAnchor:"middle",verticalAnchor:"middle"},I)},O_e=n=>"cx"in n&&Be(n.cx);function Bs(n){var{offset:e=5}=n,t=X5(n,E_e),r=wn({offset:e},t),{viewBox:i,position:s,value:a,children:o,content:l,className:A="",textBreakAll:c,labelRef:u}=r,h=Fe(HX),g=XU(),p=s==="center"?g:h??g,m=i||p;if(!m||Xt(a)&&Xt(o)&&!B.isValidElement(l)&&typeof l!="function")return null;var w=wn(wn({},r),{},{viewBox:m});if(B.isValidElement(l)){var v=X5(w,C_e);return B.cloneElement(l,v)}var b;if(typeof l=="function"){if(b=B.createElement(l,w),B.isValidElement(b))return b}else b=P_e(r);var x=O_e(m),E=sn(r,!0);if(x&&(s==="insideStart"||s==="insideEnd"||s==="end"))return k_e(r,b,E,m);var I=x?N_e(m,r.offset,r.position):D_e(r,m);return B.createElement(JI,nA({ref:u,className:gt("recharts-label",A)},E,I,{breakAll:c}),b)}Bs.displayName="Label";var ZY=n=>{var{cx:e,cy:t,angle:r,startAngle:i,endAngle:s,r:a,radius:o,innerRadius:l,outerRadius:A,x:c,y:u,top:h,left:g,width:p,height:m,clockWise:w,labelViewBox:v}=n;if(v)return v;if(Be(p)&&Be(m)){if(Be(c)&&Be(u))return{x:c,y:u,width:p,height:m};if(Be(h)&&Be(g))return{x:h,y:g,width:p,height:m}}if(Be(c)&&Be(u))return{x:c,y:u,width:0,height:0};if(Be(e)&&Be(t))return{cx:e,cy:t,startAngle:i||r||0,endAngle:s||r||0,innerRadius:l||0,outerRadius:A||o||a||0,clockWise:w};if(n.viewBox)return n.viewBox},U_e=(n,e,t)=>{if(!n)return null;var r={viewBox:e,labelRef:t};return n===!0?B.createElement(Bs,nA({key:"label-implicit"},r)):Go(n)?B.createElement(Bs,nA({key:"label-implicit",value:n},r)):B.isValidElement(n)?n.type===Bs?B.cloneElement(n,wn({key:"label-implicit"},r)):B.createElement(Bs,nA({key:"label-implicit",content:n},r)):oM(n)?B.createElement(Bs,nA({key:"label-implicit",content:n},r)):n&&typeof n=="object"?B.createElement(Bs,nA({},n,{key:"label-implicit"},r)):null},R_e=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:i,labelRef:s}=e,a=ZY(e),o=Cx(i,Bs).map((A,c)=>B.cloneElement(A,{viewBox:t||a,key:"label-".concat(c)}));if(!r)return o;var l=U_e(e.label,t||a,s);return[l,...o]};Bs.parseViewBox=ZY;Bs.renderCallByParent=R_e;var eq={},tq={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t[t.length-1]}n.last=e})(tq);var nq={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Array.isArray(t)?t:Array.from(t)}n.toArray=e})(nq);(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=tq,t=nq,r=vI;function i(s){if(r.isArrayLike(s))return e.last(t.toArray(s))}n.last=i})(eq);var M_e=eq.last;const L_e=Yo(M_e);var Q_e=["valueAccessor"],j_e=["data","dataKey","clockWise","id","textBreakAll"];function y_(){return y_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y_.apply(null,arguments)}function q5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function J5(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?q5(Object(t),!0).forEach(function(r){H_e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):q5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function H_e(n,e,t){return(e=V_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V_e(n){var e=K_e(n,"string");return typeof e=="symbol"?e:e+""}function K_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z5(n,e){if(n==null)return{};var t,r,i=$_e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function $_e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var G_e=n=>Array.isArray(n.value)?L_e(n.value):n.value;function Ou(n){var{valueAccessor:e=G_e}=n,t=Z5(n,Q_e),{data:r,dataKey:i,clockWise:s,id:a,textBreakAll:o}=t,l=Z5(t,j_e);return!r||!r.length?null:B.createElement(li,{className:"recharts-label-list"},r.map((A,c)=>{var u=Xt(i)?e(A,c):Ot(A&&A.payload,i),h=Xt(a)?{}:{id:"".concat(a,"-").concat(c)};return B.createElement(Bs,y_({},sn(A,!0),l,h,{parentViewBox:A.parentViewBox,value:u,textBreakAll:o,viewBox:Bs.parseViewBox(Xt(s)?A:J5(J5({},A),{},{clockWise:s})),key:"label-".concat(c),index:c}))}))}Ou.displayName="LabelList";function z_e(n,e){return n?n===!0?B.createElement(Ou,{key:"labelList-implicit",data:e}):B.isValidElement(n)||oM(n)?B.createElement(Ou,{key:"labelList-implicit",data:e,content:n}):typeof n=="object"?B.createElement(Ou,y_({data:e},n,{key:"labelList-implicit"})):null:null}function W_e(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!n||!n.children&&t&&!n.label)return null;var{children:r}=n,i=Cx(r,Ou).map((a,o)=>B.cloneElement(a,{data:e,key:"labelList-".concat(o)}));if(!t)return i;var s=z_e(n.label,e);return[s,...i]}Ou.renderCallByParent=W_e;function Kk(){return Kk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kk.apply(null,arguments)}var rq=n=>{var{cx:e,cy:t,r,className:i}=n,s=gt("recharts-dot",i);return e===+e&&t===+t&&r===+r?B.createElement("circle",Kk({},MA(n),EU(n),{className:s,cx:e,cy:t,r})):null},iq=n=>n.graphicalItems.polarItems,X_e=Y([An,kx],OR),lM=Y([iq,Fn,X_e],UR),Y_e=Y([lM],RR),AM=Y([Y_e,ER],MR),q_e=Y([AM,Fn,lM],QR),J_e=Y([AM,Fn,lM],(n,e,t)=>t.length>0?n.flatMap(r=>t.flatMap(i=>{var s,a=Ot(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?n.map(r=>({value:Ot(r,e.dataKey),errorDomain:[]})):n.map(r=>({value:r,errorDomain:[]}))),eV=()=>{},Z_e=Y([Fn,sY,eV,J_e,eV,lt,An],HR),sq=Y([Fn,lt,AM,q_e,Fx,An,Z_e],VR),eSe=Y([sq,Fn,E0],GR);Y([Fn,sq,eSe,An],WR);var tSe={radiusAxis:{},angleAxis:{}},nSe=Qs({name:"polarAxis",initialState:tSe,reducers:{addRadiusAxis(n,e){n.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(n,e){delete n.radiusAxis[e.payload.id]},addAngleAxis(n,e){n.angleAxis[e.payload.id]=e.payload},removeAngleAxis(n,e){delete n.angleAxis[e.payload.id]}}}),rSe=nSe.reducer;function tV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(t),!0).forEach(function(r){iSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):tV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function iSe(n,e,t){return(e=sSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sSe(n){var e=aSe(n,"string");return typeof e=="symbol"?e:e+""}function aSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var oSe=(n,e)=>e,cM=Y([iq,oSe],(n,e)=>n.filter(t=>t.type==="pie").find(t=>t.id===e)),lSe=[],uM=(n,e,t)=>(t==null?void 0:t.length)===0?lSe:t,aq=Y([ER,cM,uM],(n,e,t)=>{var{chartData:r}=n;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&t!=null&&(i=t.map(s=>nV(nV({},e.presentationProps),s.props))),i!=null)return i}}),ASe=Y([aq,cM,uM],(n,e,t)=>{if(!(n==null||e==null))return n.map((r,i)=>{var s,a=Ot(r,e.nameKey,e.name),o;return t!=null&&(s=t[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=t[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:y0(a,e.dataKey),color:o,payload:r,type:e.legendType}})}),cSe=Y([aq,cM,uM,nr],(n,e,t,r)=>{if(!(e==null||n==null))return tIe({offset:r,pieSettings:e,displayedData:n,cells:t})}),oq={};(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){var i;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const s=t[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&i.writable)?!1:t.toString()===`[object ${s}]`}let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}n.isPlainObject=e})(oq);var uSe=oq.isPlainObject;const dSe=Yo(uSe);function v_(){return v_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},v_.apply(null,arguments)}var rV=(n,e,t,r,i)=>{var s=t-r,a;return a="M ".concat(n,",").concat(e),a+="L ".concat(n+t,",").concat(e),a+="L ".concat(n+t-s/2,",").concat(e+i),a+="L ".concat(n+t-s/2-r,",").concat(e+i),a+="L ".concat(n,",").concat(e," Z"),a},hSe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fSe=n=>{var e=js(n,hSe),t=B.useRef(),[r,i]=B.useState(-1);B.useEffect(()=>{if(t.current&&t.current.getTotalLength)try{var w=t.current.getTotalLength();w&&i(w)}catch{}},[]);var{x:s,y:a,upperWidth:o,lowerWidth:l,height:A,className:c}=e,{animationEasing:u,animationDuration:h,animationBegin:g,isUpdateAnimationActive:p}=e;if(s!==+s||a!==+a||o!==+o||l!==+l||A!==+A||o===0&&l===0||A===0)return null;var m=gt("recharts-trapezoid",c);return p?B.createElement(r_,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:A,x:s,y:a},to:{upperWidth:o,lowerWidth:l,height:A,x:s,y:a},duration:h,animationEasing:u,isActive:p},w=>{var{upperWidth:v,lowerWidth:b,height:x,x:E,y:I}=w;return B.createElement(r_,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:h,easing:u},B.createElement("path",v_({},sn(e,!0),{className:m,d:rV(E,I,v,b,x),ref:t})))}):B.createElement("g",null,B.createElement("path",v_({},sn(e,!0),{className:m,d:rV(s,a,o,l,A)})))},gSe=["option","shapeType","propTransformer","activeClassName","isActive"];function pSe(n,e){if(n==null)return{};var t,r,i=mSe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function mSe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function iV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function w_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iV(Object(t),!0).forEach(function(r){ySe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ySe(n,e,t){return(e=vSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vSe(n){var e=wSe(n,"string");return typeof e=="symbol"?e:e+""}function wSe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bSe(n,e){return w_(w_({},e),n)}function xSe(n,e){return n==="symbols"}function sV(n){var{shapeType:e,elementProps:t}=n;switch(e){case"rectangle":return B.createElement(N7,t);case"trapezoid":return B.createElement(fSe,t);case"sector":return B.createElement(U7,t);case"symbols":if(xSe(e))return B.createElement(TU,t);break;default:return null}}function BSe(n){return B.isValidElement(n)?n.props:n}function lq(n){var{option:e,shapeType:t,propTransformer:r=bSe,activeClassName:i="recharts-active-shape",isActive:s}=n,a=pSe(n,gSe),o;if(B.isValidElement(e))o=B.cloneElement(e,w_(w_({},a),BSe(e)));else if(typeof e=="function")o=e(a);else if(dSe(e)&&typeof e!="boolean"){var l=r(e,a);o=B.createElement(sV,{shapeType:t,elementProps:l})}else{var A=a;o=B.createElement(sV,{shapeType:t,elementProps:A})}return s?B.createElement(li,{className:i},o):o}var dM=(n,e)=>{var t=mn();return(r,i)=>s=>{n==null||n(r,i,s),t(bY({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},hM=n=>{var e=mn();return(t,r)=>i=>{n==null||n(t,r,i),e(CCe())}},fM=(n,e)=>{var t=mn();return(r,i)=>s=>{n==null||n(r,i,s),t(_Ce({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function gM(n){var{fn:e,args:t}=n,r=mn(),i=Xi();return B.useEffect(()=>{if(!i){var s=e(t);return r(xCe(s)),()=>{r(BCe(s))}}},[e,t,r,i]),null}var Aq=()=>{};function cq(n){var{legendPayload:e}=n,t=mn(),r=Xi();return B.useEffect(()=>r?Aq:(t(w7(e)),()=>{t(b7(e))}),[t,r,e]),null}function ESe(n){var{legendPayload:e}=n,t=mn(),r=Fe(lt);return B.useEffect(()=>r!=="centric"&&r!=="radial"?Aq:(t(w7(e)),()=>{t(b7(e))}),[t,r,e]),null}function pM(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",t=B.useRef(dw(e)),r=B.useRef(n);return r.current!==n&&(t.current=dw(e),r.current=n),t.current}var XP,CSe=()=>{var[n]=B.useState(()=>dw("uid-"));return n},_Se=(XP=sK.useId)!==null&&XP!==void 0?XP:CSe;function SSe(n,e){var t=_Se();return e||(n?"".concat(n,"-").concat(t):t)}var ISe=B.createContext(void 0),mM=n=>{var{id:e,type:t,children:r}=n,i=SSe("recharts-".concat(t),e);return B.createElement(ISe.Provider,{value:i},r(i))},TSe={cartesianItems:[],polarItems:[]},uq=Qs({name:"graphicalItems",initialState:TSe,reducers:{addCartesianGraphicalItem(n,e){n.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(n,e){var{prev:t,next:r}=e.payload,i=pA(n).cartesianItems.indexOf(t);i>-1&&(n.cartesianItems[i]=r)},removeCartesianGraphicalItem(n,e){var t=pA(n).cartesianItems.indexOf(e.payload);t>-1&&n.cartesianItems.splice(t,1)},addPolarGraphicalItem(n,e){n.polarItems.push(e.payload)},removePolarGraphicalItem(n,e){var t=pA(n).polarItems.indexOf(e.payload);t>-1&&n.polarItems.splice(t,1)}}}),{addCartesianGraphicalItem:PSe,replaceCartesianGraphicalItem:FSe,removeCartesianGraphicalItem:kSe,addPolarGraphicalItem:NSe,removePolarGraphicalItem:DSe}=uq.actions,OSe=uq.reducer;function dq(n){var e=mn(),t=B.useRef(null);return B.useEffect(()=>{t.current===null?e(PSe(n)):t.current!==n&&e(FSe({prev:t.current,next:n})),t.current=n},[e,n]),B.useEffect(()=>()=>{t.current&&(e(kSe(t.current)),t.current=null)},[e]),null}function USe(n){var e=mn();return B.useEffect(()=>(e(NSe(n)),()=>{e(DSe(n))}),[e,n]),null}function RSe(){}var MSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},aV={t:0},YP={t:1};function yM(n){var e=js(n,MSe),{isActive:t,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:A}=e,c=k7("JavascriptAnimate",e.animationManager),[u,h]=B.useState(t?aV:YP),g=B.useRef(null);return B.useEffect(()=>{t||h(YP)},[t]),B.useEffect(()=>{if(!t||!r)return RSe;var p=F7(aV,YP,T7(s),i,h,c.getTimeoutController()),m=()=>{g.current=p()};return c.start([l,a,m,i,o]),()=>{c.stop(),g.current&&g.current(),o()}},[t,r,i,s,a,l,o,c]),A(u.t)}var LSe=["onMouseEnter","onClick","onMouseLeave"],QSe=["id"],jSe=["id"];function vM(n,e){if(n==null)return{};var t,r,i=HSe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function HSe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function oV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function xn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oV(Object(t),!0).forEach(function(r){VSe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):oV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function VSe(n,e,t){return(e=KSe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KSe(n){var e=$Se(n,"string");return typeof e=="symbol"?e:e+""}function $Se(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function kA(){return kA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kA.apply(null,arguments)}function GSe(n){var e=B.useMemo(()=>Cx(n.children,I0),[n.children]),t=Fe(r=>ASe(r,n.id,e));return t==null?null:B.createElement(ESe,{legendPayload:t})}function zSe(n){var{dataKey:e,nameKey:t,sectors:r,stroke:i,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:A}=n;return{dataDefinedOnItem:r==null?void 0:r.map(c=>c.tooltipPayload),positions:r==null?void 0:r.map(c=>c.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:e,nameKey:t,name:y0(o,e),hide:l,type:A,color:a,unit:""}}}var WSe=(n,e)=>n>e?"start":n<e?"end":"middle",XSe=(n,e,t)=>typeof e=="function"?e(n):Ii(e,t,t*.8),YSe=(n,e,t)=>{var{top:r,left:i,width:s,height:a}=e,o=c7(s,a),l=i+Ii(n.cx,s,s/2),A=r+Ii(n.cy,a,a/2),c=Ii(n.innerRadius,o,0),u=XSe(t,n.outerRadius,o),h=n.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:A,innerRadius:c,outerRadius:u,maxRadius:h}},qSe=(n,e)=>{var t=yr(e-n),r=Math.min(Math.abs(e-n),360);return t*r},JSe=(n,e)=>{if(B.isValidElement(n))return B.cloneElement(n,e);if(typeof n=="function")return n(e);var t=gt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return B.createElement(ZU,kA({},e,{type:"linear",className:t}))},ZSe=(n,e,t)=>{if(B.isValidElement(n))return B.cloneElement(n,e);var r=t;if(typeof n=="function"&&(r=n(e),B.isValidElement(r)))return r;var i=gt("recharts-pie-label-text",typeof n!="boolean"&&typeof n!="function"?n.className:"");return B.createElement(JI,kA({},e,{alignmentBaseline:"middle",className:i}),r)};function eIe(n){var{sectors:e,props:t,showLabels:r}=n,{label:i,labelLine:s,dataKey:a}=t;if(!r||!i||!e)return null;var o=MA(t),l=sn(i,!1),A=sn(s,!1),c=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,u=e.map((h,g)=>{var p=(h.startAngle+h.endAngle)/2,m=Qn(h.cx,h.cy,h.outerRadius+c,p),w=xn(xn(xn(xn({},o),h),{},{stroke:"none"},l),{},{index:g,textAnchor:WSe(m.x,h.cx)},m),v=xn(xn(xn(xn({},o),h),{},{fill:"none",stroke:h.fill},A),{},{index:g,points:[Qn(h.cx,h.cy,h.outerRadius,p),m],key:"line"});return B.createElement(li,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(g)},s&&JSe(s,v),ZSe(i,w,Ot(h,a)))});return B.createElement(li,{className:"recharts-pie-labels"},u)}function hq(n){var{sectors:e,activeShape:t,inactiveShape:r,allOtherPieProps:i,showLabels:s}=n,a=Fe(qu),{onMouseEnter:o,onClick:l,onMouseLeave:A}=i,c=vM(i,LSe),u=dM(o,i.dataKey),h=hM(A),g=fM(l,i.dataKey);return e==null?null:B.createElement(B.Fragment,null,e.map((p,m)=>{if((p==null?void 0:p.startAngle)===0&&(p==null?void 0:p.endAngle)===0&&e.length!==1)return null;var w=t&&String(m)===a,v=a?r:null,b=w?t:v,x=xn(xn({},p),{},{stroke:p.stroke,tabIndex:-1,[g7]:m,[p7]:i.dataKey});return B.createElement(li,kA({tabIndex:-1,className:"recharts-pie-sector"},Ex(c,p,m),{onMouseEnter:u(p,m),onMouseLeave:h(p,m),onClick:g(p,m),key:"sector-".concat(p==null?void 0:p.startAngle,"-").concat(p==null?void 0:p.endAngle,"-").concat(p.midAngle,"-").concat(m)}),B.createElement(lq,kA({option:b,isActive:w,shapeType:"sector"},x)))}),B.createElement(eIe,{sectors:e,props:i,showLabels:s}))}function tIe(n){var e,{pieSettings:t,displayedData:r,cells:i,offset:s}=n,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:A,nameKey:c,tooltipType:u}=t,h=Math.abs(t.minAngle),g=qSe(o,l),p=Math.abs(g),m=r.length<=1?0:(e=t.paddingAngle)!==null&&e!==void 0?e:0,w=r.filter(P=>Ot(P,A,0)!==0).length,v=(p>=360?w:w-1)*m,b=p-w*h-v,x=r.reduce((P,_)=>{var T=Ot(_,A,0);return P+(Be(T)?T:0)},0),E;if(x>0){var I;E=r.map((P,_)=>{var T=Ot(P,A,0),k=Ot(P,c,_),O=YSe(t,s,P),U=(Be(T)?T:0)/x,L,R=xn(xn({},P),i&&i[_]&&i[_].props);_?L=I.endAngle+yr(g)*m*(T!==0?1:0):L=o;var re=L+yr(g)*((T!==0?h:0)+U*b),he=(L+re)/2,te=(O.innerRadius+O.outerRadius)/2,ee=[{name:k,value:T,payload:R,dataKey:A,type:u}],Z=Qn(O.cx,O.cy,te,he);return I=xn(xn(xn(xn({},t.presentationProps),{},{percent:U,cornerRadius:a,name:k,tooltipPayload:ee,midAngle:he,middleRadius:te,tooltipPosition:Z},R),O),{},{value:Ot(P,A),startAngle:L,endAngle:re,payload:R,paddingAngle:yr(g)*m}),I})}return E}function nIe(n){var{props:e,previousSectorsRef:t}=n,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:A,onAnimationStart:c,onAnimationEnd:u}=e,h=pM(e,"recharts-pie-"),g=t.current,[p,m]=B.useState(!0),w=B.useCallback(()=>{typeof u=="function"&&u(),m(!1)},[u]),v=B.useCallback(()=>{typeof c=="function"&&c(),m(!0)},[c]);return B.createElement(yM,{begin:s,duration:a,isActive:i,easing:o,onAnimationStart:v,onAnimationEnd:w,key:h},b=>{var x=[],E=r&&r[0],I=E.startAngle;return r.forEach((P,_)=>{var T=g&&g[_],k=_>0?Wu(P,"paddingAngle",0):0;if(T){var O=UH(T.endAngle-T.startAngle,P.endAngle-P.startAngle),U=xn(xn({},P),{},{startAngle:I+k,endAngle:I+O(b)+k});x.push(U),I=U.endAngle}else{var{endAngle:L,startAngle:R}=P,re=UH(0,L-R),he=re(b),te=xn(xn({},P),{},{startAngle:I+k,endAngle:I+he+k});x.push(te),I=te.endAngle}}),t.current=x,B.createElement(li,null,B.createElement(hq,{sectors:x,activeShape:l,inactiveShape:A,allOtherPieProps:e,showLabels:!p}))})}function rIe(n){var{sectors:e,isAnimationActive:t,activeShape:r,inactiveShape:i}=n,s=B.useRef(null),a=s.current;return t&&e&&e.length&&(!a||a!==e)?B.createElement(nIe,{props:n,previousSectorsRef:s}):B.createElement(hq,{sectors:e,activeShape:r,inactiveShape:i,allOtherPieProps:n,showLabels:!0})}function iIe(n){var{hide:e,className:t,rootTabIndex:r}=n,i=gt("recharts-pie",t);return e?null:B.createElement(li,{tabIndex:r,className:i},B.createElement(rIe,n))}var sIe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Kf.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function aIe(n){var{id:e}=n,t=vM(n,QSe),r=B.useMemo(()=>Cx(n.children,I0),[n.children]),i=Fe(s=>cSe(s,e,r));return B.createElement(B.Fragment,null,B.createElement(gM,{fn:zSe,args:xn(xn({},n),{},{sectors:i})}),B.createElement(iIe,kA({},t,{sectors:i})))}function wM(n){var e=js(n,sIe),{id:t}=e,r=vM(e,jSe),i=MA(r);return B.createElement(mM,{id:t,type:"pie"},s=>B.createElement(B.Fragment,null,B.createElement(USe,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i}),B.createElement(GSe,kA({},r,{id:s})),B.createElement(aIe,kA({},r,{id:s})),r.children))}wM.displayName="Pie";var oIe=Y([nr],n=>{if(n)return{top:n.top,bottom:n.bottom,left:n.left,right:n.right}}),lIe=Y([oIe,LA,QA],(n,e,t)=>{if(!(!n||e==null||t==null))return{x:n.left,y:n.top,width:Math.max(0,e-n.left-n.right),height:Math.max(0,t-n.top-n.bottom)}}),bM=()=>Fe(lIe),AIe=()=>Fe(d1e);function lV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function AV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(t),!0).forEach(function(r){cIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cIe(n,e,t){return(e=uIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uIe(n){var e=dIe(n,"string");return typeof e=="symbol"?e:e+""}function dIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var hIe=n=>{var{point:e,childIndex:t,mainColor:r,activeDot:i,dataKey:s}=n;if(i===!1||e.x==null||e.y==null)return null;var a=AV(AV({index:t,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},sn(i,!1)),EU(i)),o;return B.isValidElement(i)?o=B.cloneElement(i,a):typeof i=="function"?o=i(a):o=B.createElement(rq,a),B.createElement(li,{className:"recharts-active-dot"},o)};function fIe(n){var{points:e,mainColor:t,activeDot:r,itemDataKey:i}=n,s=Fe(qu),a=AIe();if(e==null||a==null)return null;var o=e.find(l=>a.includes(l.payload));return Xt(o)?null:hIe({point:o,childIndex:Number(s),mainColor:t,dataKey:i,activeDot:r})}var gIe="Invariant failed";function pIe(n,e){throw new Error(gIe)}var mIe=["x","y"];function $k(){return $k=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$k.apply(null,arguments)}function cV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function fy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(t),!0).forEach(function(r){yIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yIe(n,e,t){return(e=vIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function vIe(n){var e=wIe(n,"string");return typeof e=="symbol"?e:e+""}function wIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function bIe(n,e){if(n==null)return{};var t,r,i=xIe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function xIe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function BIe(n,e){var{x:t,y:r}=n,i=bIe(n,mIe),s="".concat(t),a=parseInt(s,10),o="".concat(r),l=parseInt(o,10),A="".concat(e.height||i.height),c=parseInt(A,10),u="".concat(e.width||i.width),h=parseInt(u,10);return fy(fy(fy(fy(fy({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function fq(n){return B.createElement(lq,$k({shapeType:"rectangle",propTransformer:BIe,activeClassName:"recharts-active-bar"},n))}var EIe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Be(e))return e;var s=Be(r)||Xt(r);return s?e(r,i):(s||pIe(),t)}},CIe={},_Ie=Qs({name:"errorBars",initialState:CIe,reducers:{addErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]||(n[t]=[]),n[t].push(r)},removeErrorBar:(n,e)=>{var{itemId:t,errorBar:r}=e.payload;n[t]&&(n[t]=n[t].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),SIe=_Ie.reducer,IIe=["children"];function TIe(n,e){if(n==null)return{};var t,r,i=PIe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function PIe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var FIe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kIe=B.createContext(FIe);function gq(n){var{children:e}=n,t=TIe(n,IIe);return B.createElement(kIe.Provider,{value:t},e)}function xM(n,e){var t,r,i=Fe(A=>HA(A,n)),s=Fe(A=>fd(A,e)),a=(t=i==null?void 0:i.allowDataOverflow)!==null&&t!==void 0?t:Zi.allowDataOverflow,o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:es.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function pq(n){var{xAxisId:e,yAxisId:t,clipPathId:r}=n,i=bM(),{needClipX:s,needClipY:a,needClip:o}=xM(e,t);if(!o)return null;var{x:l,y:A,width:c,height:u}=i;return B.createElement("clipPath",{id:"clipPath-".concat(r)},B.createElement("rect",{x:s?l:l-c/2,y:a?A:A-u/2,width:s?c:c*2,height:a?u:u*2}))}var NIe=["onMouseEnter","onMouseLeave","onClick"],DIe=["value","background","tooltipPosition"],OIe=["id"],UIe=["onMouseEnter","onClick","onMouseLeave"];function s0(){return s0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s0.apply(null,arguments)}function uV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function si(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uV(Object(t),!0).forEach(function(r){RIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):uV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RIe(n,e,t){return(e=MIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MIe(n){var e=LIe(n,"string");return typeof e=="symbol"?e:e+""}function LIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function b_(n,e){if(n==null)return{};var t,r,i=QIe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function QIe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var jIe=n=>{var{dataKey:e,name:t,fill:r,legendType:i,hide:s}=n;return[{inactive:s,dataKey:e,type:i,color:r,value:y0(t,e),payload:n}]};function HIe(n){var{dataKey:e,stroke:t,strokeWidth:r,fill:i,name:s,hide:a,unit:o}=n;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:t,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:y0(s,e),hide:a,type:n.tooltipType,color:n.fill,unit:o}}}function VIe(n){var e=Fe(qu),{data:t,dataKey:r,background:i,allOtherBarProps:s}=n,{onMouseEnter:a,onMouseLeave:o,onClick:l}=s,A=b_(s,NIe),c=dM(a,r),u=hM(o),h=fM(l,r);if(!i||t==null)return null;var g=sn(i,!1);return B.createElement(B.Fragment,null,t.map((p,m)=>{var{value:w,background:v,tooltipPosition:b}=p,x=b_(p,DIe);if(!v)return null;var E=c(p,m),I=u(p,m),P=h(p,m),_=si(si(si(si(si({option:i,isActive:String(m)===e},x),{},{fill:"#eee"},v),g),Ex(A,p,m)),{},{onMouseEnter:E,onMouseLeave:I,onClick:P,dataKey:r,index:m,className:"recharts-bar-background-rectangle"});return B.createElement(fq,s0({key:"background-bar-".concat(m)},_))}))}function mq(n){var{data:e,props:t,showLabels:r}=n,i=MA(t),s=b_(i,OIe),{shape:a,dataKey:o,activeBar:l}=t,A=Fe(qu),c=Fe(DY),{onMouseEnter:u,onClick:h,onMouseLeave:g}=t,p=b_(t,UIe),m=dM(u,o),w=hM(g),v=fM(h,o);return e?B.createElement(B.Fragment,null,e.map((b,x)=>{var E=l&&String(x)===A&&(c==null||o===c),I=E?l:a,P=si(si(si({},s),b),{},{isActive:E,option:I,index:x,dataKey:o});return B.createElement(li,s0({className:"recharts-bar-rectangle"},Ex(p,b,x),{onMouseEnter:m(b,x),onMouseLeave:w(b,x),onClick:v(b,x),key:"rectangle-".concat(b==null?void 0:b.x,"-").concat(b==null?void 0:b.y,"-").concat(b==null?void 0:b.value,"-").concat(x)}),B.createElement(fq,P))}),r&&Ou.renderCallByParent(t,e)):null}function KIe(n){var{props:e,previousRectanglesRef:t}=n,{data:r,layout:i,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:A,onAnimationStart:c}=e,u=t.current,h=pM(e,"recharts-bar-"),[g,p]=B.useState(!1),m=B.useCallback(()=>{typeof A=="function"&&A(),p(!1)},[A]),w=B.useCallback(()=>{typeof c=="function"&&c(),p(!0)},[c]);return B.createElement(yM,{begin:a,duration:o,isActive:s,easing:l,onAnimationEnd:m,onAnimationStart:w,key:h},v=>{var b=v===1?r:r==null?void 0:r.map((x,E)=>{var I=u&&u[E];if(I)return si(si({},x),{},{x:$a(I.x,x.x,v),y:$a(I.y,x.y,v),width:$a(I.width,x.width,v),height:$a(I.height,x.height,v)});if(i==="horizontal"){var P=$a(0,x.height,v);return si(si({},x),{},{y:x.y+x.height-P,height:P})}var _=$a(0,x.width,v);return si(si({},x),{},{width:_})});return v>0&&(t.current=b??null),b==null?null:B.createElement(li,null,B.createElement(mq,{props:e,data:b,showLabels:!g}))})}function $Ie(n){var{data:e,isAnimationActive:t}=n,r=B.useRef(null);return t&&e&&e.length&&(r.current==null||r.current!==e)?B.createElement(KIe,{previousRectanglesRef:r,props:n}):B.createElement(mq,{props:n,data:e,showLabels:!0})}var yq=0,GIe=(n,e)=>{var t=Array.isArray(n.value)?n.value[1]:n.value;return{x:n.x,y:n.y,value:t,errorVal:Ot(n,e)}};class zIe extends B.PureComponent{render(){var{hide:e,data:t,dataKey:r,className:i,xAxisId:s,yAxisId:a,needClip:o,background:l,id:A}=this.props;if(e)return null;var c=gt("recharts-bar",i),u=A;return B.createElement(li,{className:c,id:A},o&&B.createElement("defs",null,B.createElement(pq,{clipPathId:u,xAxisId:s,yAxisId:a})),B.createElement(li,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(u,")"):void 0},B.createElement(VIe,{data:t,dataKey:r,background:l,allOtherBarProps:this.props}),B.createElement($Ie,this.props)),this.props.children)}}var WIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Kf.isSsr,legendType:"rect",minPointSize:yq,xAxisId:0,yAxisId:0};function XIe(n){var{xAxisId:e,yAxisId:t,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:A,isAnimationActive:c}=n,{needClip:u}=xM(e,t),h=DI(),g=Xi(),p=Cx(n.children,I0),m=Fe(b=>xTe(b,e,t,g,n.id,p));if(h!=="vertical"&&h!=="horizontal")return null;var w,v=m==null?void 0:m[0];return v==null||v.height==null||v.width==null?w=0:w=h==="vertical"?v.height/2:v.width/2,B.createElement(gq,{xAxisId:e,yAxisId:t,data:m,dataPointFormatter:GIe,errorBarOffset:w},B.createElement(zIe,s0({},n,{layout:h,needClip:u,data:m,xAxisId:e,yAxisId:t,hide:r,legendType:i,minPointSize:s,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:A,isAnimationActive:c})))}function YIe(n){var{layout:e,barSettings:{dataKey:t,minPointSize:r},pos:i,bandSize:s,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:A,stackedData:c,displayedData:u,offset:h,cells:g}=n,p=e==="horizontal"?o:a,m=c?p.scale.domain():null,w=Yve({numericAxis:p});return u.map((v,b)=>{var x,E,I,P,_,T;c?x=Kve(c[b],m):(x=Ot(v,t),Array.isArray(x)||(x=[w,x]));var k=EIe(r,yq)(x[1],b);if(e==="horizontal"){var O,[U,L]=[o.scale(x[0]),o.scale(x[1])];E=f3({axis:a,ticks:l,bandSize:s,offset:i.offset,entry:v,index:b}),I=(O=L??U)!==null&&O!==void 0?O:void 0,P=i.size;var R=U-L;if(_=Ds(R)?0:R,T={x:E,y:h.top,width:P,height:h.height},Math.abs(k)>0&&Math.abs(_)<Math.abs(k)){var re=yr(_||k)*(Math.abs(k)-Math.abs(_));I-=re,_+=re}}else{var[he,te]=[a.scale(x[0]),a.scale(x[1])];if(E=he,I=f3({axis:o,ticks:A,bandSize:s,offset:i.offset,entry:v,index:b}),P=te-he,_=i.size,T={x:h.left,y:I,width:h.width,height:_},Math.abs(k)>0&&Math.abs(P)<Math.abs(k)){var ee=yr(P||k)*(Math.abs(k)-Math.abs(P));P+=ee}}if(E==null||I==null||P==null||_==null)return null;var Z=si(si({},v),{},{x:E,y:I,width:P,height:_,value:c?x:x[1],payload:v,background:T,tooltipPosition:{x:E+P/2,y:I+_/2}},g&&g[b]&&g[b].props);return Z}).filter(Boolean)}function hc(n){var e=js(n,WIe),t=Xi();return B.createElement(mM,{id:e.id,type:"bar"},r=>B.createElement(B.Fragment,null,B.createElement(cq,{legendPayload:jIe(e)}),B.createElement(gM,{fn:HIe,args:e}),B.createElement(dq,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Xve(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:t}),B.createElement(XIe,s0({},e,{id:r}))))}hc.displayName="Bar";function dV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function yE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(t),!0).forEach(function(r){qIe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qIe(n,e,t){return(e=JIe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JIe(n){var e=ZIe(n,"string");return typeof e=="symbol"?e:e+""}function ZIe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var eTe=(n,e)=>e,tTe=(n,e,t)=>t,nTe=(n,e,t,r)=>r,rTe=(n,e,t,r,i)=>i,Mx=Y([GI,rTe],(n,e)=>n.filter(t=>t.type==="bar").find(t=>t.id===e)),iTe=Y([Mx],n=>n==null?void 0:n.maxBarSize),sTe=(n,e,t,r,i,s)=>s,hV=(n,e,t)=>{var r=t??n;if(!Xt(r))return Ii(r,e,0)},aTe=Y([lt,GI,eTe,tTe,nTe],(n,e,t,r,i)=>e.filter(s=>n==="horizontal"?s.xAxisId===t:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),oTe=(n,e,t,r)=>{var i=lt(n);return i==="horizontal"?Mk(n,"yAxis",t,r):Mk(n,"xAxis",e,r)},lTe=(n,e,t)=>{var r=lt(n);return r==="horizontal"?C5(n,"xAxis",e):C5(n,"yAxis",t)},ATe=(n,e,t)=>{var r={},i=n.filter($I),s=n.filter(A=>A.stackId==null),a=i.reduce((A,c)=>(A[c.stackId]||(A[c.stackId]=[]),A[c.stackId].push(c),A),r),o=Object.entries(a).map(A=>{var[c,u]=A,h=u.map(p=>p.dataKey),g=hV(e,t,u[0].barSize);return{stackId:c,dataKeys:h,barSize:g}}),l=s.map(A=>{var c=[A.dataKey].filter(h=>h!=null),u=hV(e,t,A.barSize);return{stackId:void 0,dataKeys:c,barSize:u}});return[...o,...l]},cTe=Y([aTe,BEe,lTe],ATe),uTe=(n,e,t,r,i)=>{var s,a,o=Mx(n,e,t,r,i);if(o!=null){var l=lt(n),A=OX(n),{maxBarSize:c}=o,u=Xt(c)?A:c,h,g;return l==="horizontal"?(h=Yu(n,"xAxis",e,r),g=Xu(n,"xAxis",e,r)):(h=Yu(n,"yAxis",t,r),g=Xu(n,"yAxis",t,r)),(s=(a=gw(h,g,!0))!==null&&a!==void 0?a:u)!==null&&s!==void 0?s:0}},vq=(n,e,t,r)=>{var i=lt(n),s,a;return i==="horizontal"?(s=Yu(n,"xAxis",e,r),a=Xu(n,"xAxis",e,r)):(s=Yu(n,"yAxis",t,r),a=Xu(n,"yAxis",t,r)),gw(s,a)};function dTe(n,e,t,r,i){var s=r.length;if(!(s<1)){var a=Ii(n,t,0,!0),o,l=[];if(Rs(r[0].barSize)){var A=!1,c=t/s,u=r.reduce((v,b)=>v+(b.barSize||0),0);u+=(s-1)*a,u>=t&&(u-=(s-1)*a,a=0),u>=t&&c>0&&(A=!0,c*=.9,u=s*c);var h=(t-u)/2>>0,g={offset:h-a,size:0};o=r.reduce((v,b)=>{var x,E={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:g.offset+g.size+a,size:A?c:(x=b.barSize)!==null&&x!==void 0?x:0}},I=[...v,E];return g=I[I.length-1].position,I},l)}else{var p=Ii(e,t,0,!0);t-2*p-(s-1)*a<=0&&(a=0);var m=(t-2*p-(s-1)*a)/s;m>1&&(m>>=0);var w=Rs(i)?Math.min(m,i):m;o=r.reduce((v,b,x)=>[...v,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p+(m+a)*x+(m-w)/2,size:w}}],l)}return o}}var hTe=(n,e,t,r,i,s,a)=>{var o=Xt(a)?e:a,l=dTe(t,r,i!==s?i:s,n,o);return i!==s&&l!=null&&(l=l.map(A=>yE(yE({},A),{},{position:yE(yE({},A.position),{},{offset:A.position.offset-i/2})}))),l},fTe=Y([cTe,OX,xEe,UX,uTe,vq,iTe],hTe),gTe=(n,e,t,r)=>Yu(n,"xAxis",e,r),pTe=(n,e,t,r)=>Yu(n,"yAxis",t,r),mTe=(n,e,t,r)=>Xu(n,"xAxis",e,r),yTe=(n,e,t,r)=>Xu(n,"yAxis",t,r),vTe=Y([fTe,Mx],(n,e)=>{if(!(n==null||e==null)){var t=n.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(t!=null)return t.position}}),wTe=(n,e)=>{var t=NR(e);if(!(!n||t==null||e==null)){var{stackId:r}=e;if(r!=null){var i=n[r];if(i){var{stackedData:s}=i;if(s)return s.find(a=>a.key===t)}}}},bTe=Y([oTe,Mx],wTe),xTe=Y([nr,gTe,pTe,mTe,yTe,vTe,lt,jI,vq,bTe,Mx,sTe],(n,e,t,r,i,s,a,o,l,A,c,u)=>{var{chartData:h,dataStartIndex:g,dataEndIndex:p}=o;if(!(c==null||s==null||a!=="horizontal"&&a!=="vertical"||e==null||t==null||r==null||i==null||l==null)){var{data:m}=c,w;if(m!=null&&m.length>0?w=m:w=h==null?void 0:h.slice(g,p+1),w!=null)return YIe({layout:a,barSettings:c,pos:s,bandSize:l,xAxis:e,yAxis:t,xAxisTicks:r,yAxisTicks:i,stackedData:A,displayedData:w,offset:n,cells:u})}}),wq=n=>{var{chartData:e}=n,t=mn(),r=Xi();return B.useEffect(()=>r?()=>{}:(t(D5(e)),()=>{t(D5(void 0))}),[e,t,r]),null},fV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BTe=Qs({name:"brush",initialState:fV,reducers:{setBrushSettings(n,e){return e.payload==null?fV:e.payload}}}),ETe=BTe.reducer;function CTe(n,e,t){return(e=_Te(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Te(n){var e=STe(n,"string");return typeof e=="symbol"?e:e+""}function STe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class BM{static create(e){return new BM(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],i=t[t.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}CTe(BM,"EPS",1e-4);function ITe(n){return(n%180+180)%180}var TTe=function(e){var{width:t,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=ITe(i),a=s*Math.PI/180,o=Math.atan(r/t),l=a>o&&a<Math.PI-o?r/Math.sin(a):t/Math.cos(a);return Math.abs(l)},PTe={dots:[],areas:[],lines:[]},FTe=Qs({name:"referenceElements",initialState:PTe,reducers:{addDot:(n,e)=>{n.dots.push(e.payload)},removeDot:(n,e)=>{var t=pA(n).dots.findIndex(r=>r===e.payload);t!==-1&&n.dots.splice(t,1)},addArea:(n,e)=>{n.areas.push(e.payload)},removeArea:(n,e)=>{var t=pA(n).areas.findIndex(r=>r===e.payload);t!==-1&&n.areas.splice(t,1)},addLine:(n,e)=>{n.lines.push(e.payload)},removeLine:(n,e)=>{var t=pA(n).lines.findIndex(r=>r===e.payload);t!==-1&&n.lines.splice(t,1)}}}),kTe=FTe.reducer,NTe=B.createContext(void 0),DTe=n=>{var{children:e}=n,[t]=B.useState("".concat(dw("recharts"),"-clip")),r=bM();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return B.createElement(NTe.Provider,{value:t},B.createElement("defs",null,B.createElement("clipPath",{id:t},B.createElement("rect",{x:i,y:s,height:o,width:a}))),e)};function qP(n,e){for(var t in n)if({}.hasOwnProperty.call(n,t)&&(!{}.hasOwnProperty.call(e,t)||n[t]!==e[t]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(n,r))return!1;return!0}function bq(n,e,t){if(e<1)return[];if(e===1&&t===void 0)return n;for(var r=[],i=0;i<n.length;i+=e)r.push(n[i]);return r}function OTe(n,e,t){var r={width:n.width+e.width,height:n.height+e.height};return TTe(r,t)}function UTe(n,e,t){var r=t==="width",{x:i,y:s,width:a,height:o}=n;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function x_(n,e,t,r,i){if(n*e<n*r||n*e>n*i)return!1;var s=t();return n*(e-n*s/2-r)>=0&&n*(e+n*s/2-i)<=0}function RTe(n,e){return bq(n,e+1)}function MTe(n,e,t,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=e,l=0,A=1,c=a,u=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:bq(r,A)};var m=l,w,v=()=>(w===void 0&&(w=t(p,m)),w),b=p.coordinate,x=l===0||x_(n,b,v,c,o);x||(l=0,c=a,A+=1),x&&(c=b+n*(v()/2+i),l+=A)},h;A<=s.length;)if(h=u(),h)return h.v;return[]}function gV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ni(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gV(Object(t),!0).forEach(function(r){LTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function LTe(n,e,t){return(e=QTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function QTe(n){var e=jTe(n,"string");return typeof e=="symbol"?e:e+""}function jTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HTe(n,e,t,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=e,{end:l}=e,A=function(h){var g=s[h],p,m=()=>(p===void 0&&(p=t(g,h)),p);if(h===a-1){var w=n*(g.coordinate+n*m()/2-l);s[h]=g=ni(ni({},g),{},{tickCoord:w>0?g.coordinate-w*n:g.coordinate})}else s[h]=g=ni(ni({},g),{},{tickCoord:g.coordinate});var v=x_(n,g.tickCoord,m,o,l);v&&(l=g.tickCoord-n*(m()/2+i),s[h]=ni(ni({},g),{},{isShow:!0}))},c=a-1;c>=0;c--)A(c);return s}function VTe(n,e,t,r,i,s){var a=(r||[]).slice(),o=a.length,{start:l,end:A}=e;if(s){var c=r[o-1],u=t(c,o-1),h=n*(c.coordinate+n*u/2-A);a[o-1]=c=ni(ni({},c),{},{tickCoord:h>0?c.coordinate-h*n:c.coordinate});var g=x_(n,c.tickCoord,()=>u,l,A);g&&(A=c.tickCoord-n*(u/2+i),a[o-1]=ni(ni({},c),{},{isShow:!0}))}for(var p=s?o-1:o,m=function(b){var x=a[b],E,I=()=>(E===void 0&&(E=t(x,b)),E);if(b===0){var P=n*(x.coordinate-n*I()/2-l);a[b]=x=ni(ni({},x),{},{tickCoord:P<0?x.coordinate-P*n:x.coordinate})}else a[b]=x=ni(ni({},x),{},{tickCoord:x.coordinate});var _=x_(n,x.tickCoord,I,l,A);_&&(l=x.tickCoord+n*(I()/2+i),a[b]=ni(ni({},x),{},{isShow:!0}))},w=0;w<p;w++)m(w);return a}function EM(n,e,t){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:A,unit:c,angle:u}=n;if(!i||!i.length||!r)return[];if(Be(l)||Kf.isSsr){var h;return(h=RTe(i,Be(l)?l:0))!==null&&h!==void 0?h:[]}var g=[],p=o==="top"||o==="bottom"?"width":"height",m=c&&p==="width"?Pv(c,{fontSize:e,letterSpacing:t}):{width:0,height:0},w=(x,E)=>{var I=typeof A=="function"?A(x.value,E):x.value;return p==="width"?OTe(Pv(I,{fontSize:e,letterSpacing:t}),m,u):Pv(I,{fontSize:e,letterSpacing:t})[p]},v=i.length>=2?yr(i[1].coordinate-i[0].coordinate):1,b=UTe(s,v,p);return l==="equidistantPreserveStart"?MTe(v,b,w,i,a):(l==="preserveStart"||l==="preserveStartEnd"?g=VTe(v,b,w,i,a,l==="preserveStartEnd"):g=HTe(v,b,w,i,a),g.filter(x=>x.isShow))}var KTe=["viewBox"],$Te=["viewBox"];function Xg(){return Xg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xg.apply(null,arguments)}function pV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pV(Object(t),!0).forEach(function(r){CM(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):pV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function mV(n,e){if(n==null)return{};var t,r,i=GTe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function GTe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function CM(n,e,t){return(e=zTe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zTe(n){var e=WTe(n,"string");return typeof e=="symbol"?e:e+""}function WTe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}class gd extends B.Component{constructor(e){super(e),this.tickRefs=B.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:r}=e,i=mV(e,KTe),s=this.props,{viewBox:a}=s,o=mV(s,$Te);return!qP(r,a)||!qP(i,o)||!qP(t,this.state)}getTickLineCoord(e){var{x:t,y:r,width:i,height:s,orientation:a,tickSize:o,mirror:l,tickMargin:A}=this.props,c,u,h,g,p,m,w=l?-1:1,v=e.tickSize||o,b=Be(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=u=e.coordinate,g=r+ +!l*s,h=g-w*v,m=h-w*A,p=b;break;case"left":h=g=e.coordinate,u=t+ +!l*i,c=u-w*v,p=c-w*A,m=b;break;case"right":h=g=e.coordinate,u=t+ +l*i,c=u+w*v,p=c+w*A,m=b;break;default:c=u=e.coordinate,g=r+ +l*s,h=g+w*v,m=h+w*A,p=b;break}return{line:{x1:c,y1:h,x2:u,y2:g},tick:{x:p,y:m}}}getTickTextAnchor(){var{orientation:e,mirror:t}=this.props,r;switch(e){case"left":r=t?"start":"end";break;case"right":r=t?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:r,height:i,orientation:s,mirror:a,axisLine:o}=this.props,l=Kn(Kn(Kn({},sn(this.props,!1)),sn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var A=+(s==="top"&&!a||s==="bottom"&&a);l=Kn(Kn({},l),{},{x1:e,y1:t+A*i,x2:e+r,y2:t+A*i})}else{var c=+(s==="left"&&!a||s==="right"&&a);l=Kn(Kn({},l),{},{x1:e+c*r,y1:t,x2:e+c*r,y2:t+i})}return B.createElement("line",Xg({},l,{className:gt("recharts-cartesian-axis-line",Wu(o,"className"))}))}static renderTickItem(e,t,r){var i,s=gt(t.className,"recharts-cartesian-axis-tick-value");if(B.isValidElement(e))i=B.cloneElement(e,Kn(Kn({},t),{},{className:s}));else if(typeof e=="function")i=e(Kn(Kn({},t),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=gt(a,e.className)),i=B.createElement(JI,Xg({},t,{className:a}),r)}return i}renderTicks(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:s,tick:a,tickFormatter:o,unit:l,padding:A}=this.props,c=EM(Kn(Kn({},this.props),{},{ticks:r}),e,t),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),g=MA(this.props),p=sn(a,!1),m=Kn(Kn({},g),{},{fill:"none"},sn(i,!1)),w=c.map((v,b)=>{var{line:x,tick:E}=this.getTickLineCoord(v),I=Kn(Kn(Kn(Kn({textAnchor:u,verticalAnchor:h},g),{},{stroke:"none",fill:s},p),E),{},{index:b,payload:v,visibleTicksCount:c.length,tickFormatter:o,padding:A});return B.createElement(li,Xg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(v.value,"-").concat(v.coordinate,"-").concat(v.tickCoord)},Ex(this.props,v,b)),i&&B.createElement("line",Xg({},m,x,{className:gt("recharts-cartesian-axis-tick-line",Wu(i,"className"))})),a&&gd.renderTickItem(a,I,"".concat(typeof o=="function"?o(v.value,b):v.value).concat(l||"")))});return w.length>0?B.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:e,width:t,height:r,className:i,hide:s}=this.props;if(s)return null;var{ticks:a}=this.props;return t!=null&&t<=0||r!=null&&r<=0?null:B.createElement(li,{className:gt("recharts-cartesian-axis",i),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var A=l[0];if(A){var c=window.getComputedStyle(A).fontSize,u=window.getComputedStyle(A).letterSpacing;(c!==this.state.fontSize||u!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(A).fontSize,letterSpacing:window.getComputedStyle(A).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),Bs.renderCallByParent(this.props))}}CM(gd,"displayName","CartesianAxis");CM(gd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var XTe=["x1","y1","x2","y2","key"],YTe=["offset"],qTe=["xAxisId","yAxisId"],JTe=["xAxisId","yAxisId"];function yV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function ai(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yV(Object(t),!0).forEach(function(r){ZTe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ZTe(n,e,t){return(e=ePe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ePe(n){var e=tPe(n,"string");return typeof e=="symbol"?e:e+""}function tPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Yd(){return Yd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yd.apply(null,arguments)}function B_(n,e){if(n==null)return{};var t,r,i=nPe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function nPe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var rPe=n=>{var{fill:e}=n;if(!e||e==="none")return null;var{fillOpacity:t,x:r,y:i,width:s,height:a,ry:o}=n;return B.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:t,className:"recharts-cartesian-grid-bg"})};function xq(n,e){var t;if(B.isValidElement(n))t=B.cloneElement(n,e);else if(typeof n=="function")t=n(e);else{var{x1:r,y1:i,x2:s,y2:a,key:o}=e,l=B_(e,XTe),A=MA(l),c=B_(A,YTe);t=B.createElement("line",Yd({},c,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return t}function iPe(n){var{x:e,width:t,horizontal:r=!0,horizontalPoints:i}=n;if(!r||!i||!i.length)return null;var s=B_(n,qTe),a=i.map((o,l)=>{var A=ai(ai({},s),{},{x1:e,y1:o,x2:e+t,y2:o,key:"line-".concat(l),index:l});return xq(r,A)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function sPe(n){var{y:e,height:t,vertical:r=!0,verticalPoints:i}=n;if(!r||!i||!i.length)return null;var s=B_(n,JTe),a=i.map((o,l)=>{var A=ai(ai({},s),{},{x1:o,y1:e,x2:o,y2:e+t,key:"line-".concat(l),index:l});return xq(r,A)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function aPe(n){var{horizontalFill:e,fillOpacity:t,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=n;if(!l||!e||!e.length)return null;var A=o.map(u=>Math.round(u+i-i)).sort((u,h)=>u-h);i!==A[0]&&A.unshift(0);var c=A.map((u,h)=>{var g=!A[h+1],p=g?i+a-u:A[h+1]-u;if(p<=0)return null;var m=h%e.length;return B.createElement("rect",{key:"react-".concat(h),y:u,x:r,height:p,width:s,stroke:"none",fill:e[m],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function oPe(n){var{vertical:e=!0,verticalFill:t,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:l}=n;if(!e||!t||!t.length)return null;var A=l.map(u=>Math.round(u+i-i)).sort((u,h)=>u-h);i!==A[0]&&A.unshift(0);var c=A.map((u,h)=>{var g=!A[h+1],p=g?i+a-u:A[h+1]-u;if(p<=0)return null;var m=h%t.length;return B.createElement("rect",{key:"react-".concat(h),x:u,y:s,width:p,height:o,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var lPe=(n,e)=>{var{xAxis:t,width:r,height:i,offset:s}=n;return d7(EM(ai(ai(ai({},gd.defaultProps),t),{},{ticks:h7(t),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},APe=(n,e)=>{var{yAxis:t,width:r,height:i,offset:s}=n;return d7(EM(ai(ai(ai({},gd.defaultProps),t),{},{ticks:h7(t),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},cPe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function hf(n){var e=YU(),t=qU(),r=y7(),i=ai(ai({},js(n,cPe)),{},{x:Be(n.x)?n.x:r.left,y:Be(n.y)?n.y:r.top,width:Be(n.width)?n.width:r.width,height:Be(n.height)?n.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:A,height:c,syncWithTicks:u,horizontalValues:h,verticalValues:g}=i,p=Xi(),m=Fe(k=>_5(k,"xAxis",s,p)),w=Fe(k=>_5(k,"yAxis",a,p));if(!Be(A)||A<=0||!Be(c)||c<=0||!Be(o)||o!==+o||!Be(l)||l!==+l)return null;var v=i.verticalCoordinatesGenerator||lPe,b=i.horizontalCoordinatesGenerator||APe,{horizontalPoints:x,verticalPoints:E}=i;if((!x||!x.length)&&typeof b=="function"){var I=h&&h.length,P=b({yAxis:w?ai(ai({},w),{},{ticks:I?h:w.ticks}):void 0,width:e,height:t,offset:r},I?!0:u);Tv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(x=P)}if((!E||!E.length)&&typeof v=="function"){var _=g&&g.length,T=v({xAxis:m?ai(ai({},m),{},{ticks:_?g:m.ticks}):void 0,width:e,height:t,offset:r},_?!0:u);Tv(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(rPe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),B.createElement(aPe,Yd({},i,{horizontalPoints:x})),B.createElement(oPe,Yd({},i,{verticalPoints:E})),B.createElement(iPe,Yd({},i,{offset:r,horizontalPoints:x,xAxis:m,yAxis:w})),B.createElement(sPe,Yd({},i,{offset:r,verticalPoints:E,xAxis:m,yAxis:w})))}hf.displayName="CartesianGrid";var Bq=(n,e,t,r)=>Yu(n,"xAxis",e,r),Eq=(n,e,t,r)=>Xu(n,"xAxis",e,r),Cq=(n,e,t,r)=>Yu(n,"yAxis",t,r),_q=(n,e,t,r)=>Xu(n,"yAxis",t,r),uPe=Y([lt,Bq,Cq,Eq,_q],(n,e,t,r,i)=>cd(n,"xAxis")?gw(e,r,!1):gw(t,i,!1)),dPe=(n,e,t,r,i)=>i;function hPe(n){return n.type==="line"}var fPe=Y([GI,dPe],(n,e)=>n.filter(hPe).find(t=>t.id===e)),gPe=Y([lt,Bq,Cq,Eq,_q,fPe,uPe,jI],(n,e,t,r,i,s,a,o)=>{var{chartData:l,dataStartIndex:A,dataEndIndex:c}=o;if(!(s==null||e==null||t==null||r==null||i==null||r.length===0||i.length===0||a==null)){var{dataKey:u,data:h}=s,g;if(h!=null&&h.length>0?g=h:g=l==null?void 0:l.slice(A,c+1),g!=null)return UPe({layout:n,xAxis:e,yAxis:t,xAxisTicks:r,yAxisTicks:i,dataKey:u,bandSize:a,displayedData:g})}}),pPe=["id"],mPe=["type","layout","connectNulls","needClip"],yPe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function vV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Ga(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(t),!0).forEach(function(r){vPe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):vV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vPe(n,e,t){return(e=wPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wPe(n){var e=bPe(n,"string");return typeof e=="symbol"?e:e+""}function bPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _M(n,e){if(n==null)return{};var t,r,i=xPe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function xPe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Ff(){return Ff=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ff.apply(null,arguments)}var BPe=n=>{var{dataKey:e,name:t,stroke:r,legendType:i,hide:s}=n;return[{inactive:s,dataKey:e,type:i,color:r,value:y0(t,e),payload:n}]};function EPe(n){var{dataKey:e,data:t,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:l}=n;return{dataDefinedOnItem:t,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:y0(a,e),hide:o,type:n.tooltipType,color:n.stroke,unit:l}}}var Sq=(n,e)=>"".concat(e,"px ").concat(n-e,"px");function CPe(n,e){for(var t=n.length%2!==0?[...n,0]:n,r=[],i=0;i<e;++i)r=[...r,...t];return r}var _Pe=(n,e,t)=>{var r=t.reduce((u,h)=>u+h);if(!r)return Sq(e,n);for(var i=Math.floor(n/r),s=n%r,a=e-n,o=[],l=0,A=0;l<t.length;A+=t[l],++l)if(A+t[l]>s){o=[...t.slice(0,l),s-A];break}var c=o.length%2===0?[0,a]:[a];return[...CPe(t,i),...o,...c].map(u=>"".concat(u,"px")).join(", ")};function SPe(n,e){var t;if(B.isValidElement(n))t=B.cloneElement(n,e);else if(typeof n=="function")t=n(e);else{var r=gt("recharts-line-dot",typeof n!="boolean"?n.className:"");t=B.createElement(rq,Ff({},e,{className:r}))}return t}function IPe(n,e){return n==null?!1:e?!0:n.length===1}function TPe(n){var{clipPathId:e,points:t,props:r}=n,{dot:i,dataKey:s,needClip:a}=r;if(!IPe(t,i))return null;var o=_M(r,pPe),l=zW(i),A=MA(o),c=sn(i,!0),u=t.map((g,p)=>{var m=Ga(Ga(Ga({key:"dot-".concat(p),r:3},A),c),{},{index:p,cx:g.x,cy:g.y,dataKey:s,value:g.value,payload:g.payload,points:t});return SPe(i,m)}),h={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(e,")"):void 0};return B.createElement(li,Ff({className:"recharts-line-dots",key:"dots"},h),u)}function Gk(n){var{clipPathId:e,pathRef:t,points:r,strokeDasharray:i,props:s,showLabels:a}=n,{type:o,layout:l,connectNulls:A,needClip:c}=s,u=_M(s,mPe),h=Ga(Ga({},sn(u,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:l,connectNulls:A,strokeDasharray:i??s.strokeDasharray});return B.createElement(B.Fragment,null,(r==null?void 0:r.length)>1&&B.createElement(ZU,Ff({},h,{pathRef:t})),B.createElement(TPe,{points:r,clipPathId:e,props:s}),a&&Ou.renderCallByParent(s,r))}function PPe(n){try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}function FPe(n){var{clipPathId:e,props:t,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=n,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:A,animationDuration:c,animationEasing:u,animateNewValues:h,width:g,height:p,onAnimationEnd:m,onAnimationStart:w}=t,v=i.current,b=pM(t,"recharts-line-"),[x,E]=B.useState(!1),I=B.useCallback(()=>{typeof m=="function"&&m(),E(!1)},[m]),P=B.useCallback(()=>{typeof w=="function"&&w(),E(!0)},[w]),_=PPe(r.current),T=s.current;return B.createElement(yM,{begin:A,duration:c,isActive:l,easing:u,onAnimationEnd:I,onAnimationStart:P,key:b},k=>{var O=$a(T,_+T,k),U=Math.min(O,_),L;if(o){var R="".concat(o).split(/[,\s]+/gim).map(te=>parseFloat(te));L=_Pe(U,_,R)}else L=Sq(_,U);if(v){var re=v.length/a.length,he=k===1?a:a.map((te,ee)=>{var Z=Math.floor(ee*re);if(v[Z]){var ae=v[Z];return Ga(Ga({},te),{},{x:$a(ae.x,te.x,k),y:$a(ae.y,te.y,k)})}return h?Ga(Ga({},te),{},{x:$a(g*2,te.x,k),y:$a(p/2,te.y,k)}):Ga(Ga({},te),{},{x:te.x,y:te.y})});return i.current=he,B.createElement(Gk,{props:t,points:he,clipPathId:e,pathRef:r,showLabels:!x,strokeDasharray:L})}return k>0&&_>0&&(i.current=a,s.current=U),B.createElement(Gk,{props:t,points:a,clipPathId:e,pathRef:r,showLabels:!x,strokeDasharray:L})})}function kPe(n){var{clipPathId:e,props:t}=n,{points:r,isAnimationActive:i}=t,s=B.useRef(null),a=B.useRef(0),o=B.useRef(null),l=s.current;return i&&r&&r.length&&l!==r?B.createElement(FPe,{props:t,clipPathId:e,previousPointsRef:s,longestAnimatedLengthRef:a,pathRef:o}):B.createElement(Gk,{props:t,points:r,clipPathId:e,pathRef:o,showLabels:!0})}var NPe=(n,e)=>({x:n.x,y:n.y,value:n.value,errorVal:Ot(n.payload,e)});class DPe extends B.Component{render(){var e,{hide:t,dot:r,points:i,className:s,xAxisId:a,yAxisId:o,top:l,left:A,width:c,height:u,id:h,needClip:g}=this.props;if(t)return null;var p=gt("recharts-line",s),m=h,{r:w=3,strokeWidth:v=2}=(e=sn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},b=zW(r),x=w*2+v;return B.createElement(B.Fragment,null,B.createElement(li,{className:p},g&&B.createElement("defs",null,B.createElement(pq,{clipPathId:m,xAxisId:a,yAxisId:o}),!b&&B.createElement("clipPath",{id:"clipPath-dots-".concat(m)},B.createElement("rect",{x:A-x/2,y:l-x/2,width:c+x,height:u+x}))),B.createElement(kPe,{props:this.props,clipPathId:m}),B.createElement(gq,{xAxisId:a,yAxisId:o,data:i,dataPointFormatter:NPe,errorBarOffset:0},this.props.children)),B.createElement(fIe,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Iq={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Kf.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function OPe(n){var e=js(n,Iq),{activeDot:t,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,hide:A,isAnimationActive:c,label:u,legendType:h,xAxisId:g,yAxisId:p,id:m}=e,w=_M(e,yPe),{needClip:v}=xM(g,p),b=bM(),x=DI(),E=Xi(),I=Fe(O=>gPe(O,g,p,E,m));if(x!=="horizontal"&&x!=="vertical"||I==null||b==null)return null;var{height:P,width:_,x:T,y:k}=b;return B.createElement(DPe,Ff({},w,{id:m,connectNulls:o,dot:l,activeDot:t,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:c,hide:A,label:u,legendType:h,xAxisId:g,yAxisId:p,points:I,layout:x,height:P,width:_,left:T,top:k,needClip:v}))}function UPe(n){var{layout:e,xAxis:t,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:l}=n;return l.map((A,c)=>{var u=Ot(A,a);if(e==="horizontal"){var h=h3({axis:t,ticks:i,bandSize:o,entry:A,index:c}),g=Xt(u)?null:r.scale(u);return{x:h,y:g,value:u,payload:A}}var p=Xt(u)?null:t.scale(u),m=h3({axis:r,ticks:s,bandSize:o,entry:A,index:c});return p==null||m==null?null:{x:p,y:m,value:u,payload:A}}).filter(Boolean)}function mu(n){var e=js(n,Iq),t=Xi();return B.createElement(mM,{id:e.id,type:"line"},r=>B.createElement(B.Fragment,null,B.createElement(cq,{legendPayload:BPe(e)}),B.createElement(gM,{fn:EPe,args:e}),B.createElement(dq,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:t}),B.createElement(OPe,Ff({},e,{id:r}))))}mu.displayName="Line";function wV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(t),!0).forEach(function(r){RPe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):wV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function RPe(n,e,t){return(e=MPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function MPe(n){var e=LPe(n,"string");return typeof e=="symbol"?e:e+""}function LPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var QPe={xAxis:{},yAxis:{},zAxis:{}},Tq=Qs({name:"cartesianAxis",initialState:QPe,reducers:{addXAxis(n,e){n.xAxis[e.payload.id]=e.payload},removeXAxis(n,e){delete n.xAxis[e.payload.id]},addYAxis(n,e){n.yAxis[e.payload.id]=e.payload},removeYAxis(n,e){delete n.yAxis[e.payload.id]},addZAxis(n,e){n.zAxis[e.payload.id]=e.payload},removeZAxis(n,e){delete n.zAxis[e.payload.id]},updateYAxisWidth(n,e){var{id:t,width:r}=e.payload;n.yAxis[t]&&(n.yAxis[t]=bV(bV({},n.yAxis[t]),{},{width:r}))}}}),{addXAxis:jPe,removeXAxis:HPe,addYAxis:VPe,removeYAxis:KPe,addZAxis:$Ne,removeZAxis:GNe,updateYAxisWidth:$Pe}=Tq.actions,GPe=Tq.reducer,zPe=["children"],WPe=["dangerouslySetInnerHTML","ticks"];function Pq(n,e,t){return(e=XPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XPe(n){var e=YPe(n,"string");return typeof e=="symbol"?e:e+""}function YPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zk(){return zk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zk.apply(null,arguments)}function Fq(n,e){if(n==null)return{};var t,r,i=qPe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function qPe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function JPe(n){var e=mn(),t=B.useMemo(()=>{var s=Fq(n,zPe);return s},[n]),r=Fe(s=>HA(s,t.id)),i=t===r;return B.useEffect(()=>(e(jPe(t)),()=>{e(HPe(t))}),[t,e]),i?n.children:null}var ZPe=n=>{var{xAxisId:e,className:t}=n,r=Fe(m7),i=Xi(),s="xAxis",a=Fe(u=>C0(u,s,e,i)),o=Fe(u=>gY(u,s,e,i)),l=Fe(u=>uY(u,e)),A=Fe(u=>hCe(u,e));if(l==null||A==null)return null;var c=Fq(n,WPe);return B.createElement(gd,zk({},c,{scale:a,x:A.x,y:A.y,width:l.width,height:l.height,className:gt("recharts-".concat(s," ").concat(s),t),viewBox:r,ticks:o}))},e2e=n=>{var e,t,r,i,s;return B.createElement(JPe,{interval:(e=n.interval)!==null&&e!==void 0?e:"preserveEnd",id:n.xAxisId,scale:n.scale,type:n.type,padding:n.padding,allowDataOverflow:n.allowDataOverflow,domain:n.domain,dataKey:n.dataKey,allowDuplicatedCategory:n.allowDuplicatedCategory,allowDecimals:n.allowDecimals,tickCount:n.tickCount,includeHidden:(t=n.includeHidden)!==null&&t!==void 0?t:!1,reversed:n.reversed,ticks:n.ticks,height:n.height,orientation:n.orientation,mirror:n.mirror,hide:n.hide,unit:n.unit,name:n.name,angle:(r=n.angle)!==null&&r!==void 0?r:0,minTickGap:(i=n.minTickGap)!==null&&i!==void 0?i:5,tick:(s=n.tick)!==null&&s!==void 0?s:!0,tickFormatter:n.tickFormatter},B.createElement(ZPe,n))};class Uu extends B.Component{render(){return B.createElement(e2e,this.props)}}Pq(Uu,"displayName","XAxis");Pq(Uu,"defaultProps",{allowDataOverflow:Zi.allowDataOverflow,allowDecimals:Zi.allowDecimals,allowDuplicatedCategory:Zi.allowDuplicatedCategory,height:Zi.height,hide:!1,mirror:Zi.mirror,orientation:Zi.orientation,padding:Zi.padding,reversed:Zi.reversed,scale:Zi.scale,tickCount:Zi.tickCount,type:Zi.type,xAxisId:0});var t2e=n=>{var{ticks:e,label:t,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=n,a=0;if(e){e.forEach(c=>{if(c){var u=c.getBoundingClientRect();u.width>a&&(a=u.width)}});var o=t?t.getBoundingClientRect().width:0,l=i+s,A=a+l+o+(t?r:0);return Math.round(A)}return 0},n2e=["dangerouslySetInnerHTML","ticks"];function kq(n,e,t){return(e=r2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r2e(n){var e=i2e(n,"string");return typeof e=="symbol"?e:e+""}function i2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Wk(){return Wk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wk.apply(null,arguments)}function s2e(n,e){if(n==null)return{};var t,r,i=a2e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function a2e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function o2e(n){var e=mn();return B.useEffect(()=>(e(VPe(n)),()=>{e(KPe(n))}),[n,e]),null}var l2e=n=>{var e,{yAxisId:t,className:r,width:i,label:s}=n,a=B.useRef(null),o=B.useRef(null),l=Fe(m7),A=Xi(),c=mn(),u="yAxis",h=Fe(v=>C0(v,u,t,A)),g=Fe(v=>dY(v,t)),p=Fe(v=>fCe(v,t)),m=Fe(v=>gY(v,u,t,A));if(B.useLayoutEffect(()=>{var v;if(!(i!=="auto"||!g||oM(s)||B.isValidElement(s))){var b=a.current,x=b==null||(v=b.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:E,tickMargin:I}=b.props,P=t2e({ticks:x,label:o.current,labelGapWithTick:5,tickSize:E,tickMargin:I});Math.round(g.width)!==Math.round(P)&&c($Pe({id:t,width:P}))}},[a,a==null||(e=a.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,g==null?void 0:g.width,g,c,s,t,i]),g==null||p==null)return null;var w=s2e(n,n2e);return B.createElement(gd,Wk({},w,{ref:a,labelRef:o,scale:h,x:p.x,y:p.y,width:g.width,height:g.height,className:gt("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:m}))},A2e=n=>{var e,t,r,i,s;return B.createElement(B.Fragment,null,B.createElement(o2e,{interval:(e=n.interval)!==null&&e!==void 0?e:"preserveEnd",id:n.yAxisId,scale:n.scale,type:n.type,domain:n.domain,allowDataOverflow:n.allowDataOverflow,dataKey:n.dataKey,allowDuplicatedCategory:n.allowDuplicatedCategory,allowDecimals:n.allowDecimals,tickCount:n.tickCount,padding:n.padding,includeHidden:(t=n.includeHidden)!==null&&t!==void 0?t:!1,reversed:n.reversed,ticks:n.ticks,width:n.width,orientation:n.orientation,mirror:n.mirror,hide:n.hide,unit:n.unit,name:n.name,angle:(r=n.angle)!==null&&r!==void 0?r:0,minTickGap:(i=n.minTickGap)!==null&&i!==void 0?i:5,tick:(s=n.tick)!==null&&s!==void 0?s:!0,tickFormatter:n.tickFormatter}),B.createElement(l2e,n))},c2e={allowDataOverflow:es.allowDataOverflow,allowDecimals:es.allowDecimals,allowDuplicatedCategory:es.allowDuplicatedCategory,hide:!1,mirror:es.mirror,orientation:es.orientation,padding:es.padding,reversed:es.reversed,scale:es.scale,tickCount:es.tickCount,type:es.type,width:es.width,yAxisId:0};class Ru extends B.Component{render(){return B.createElement(A2e,this.props)}}kq(Ru,"displayName","YAxis");kq(Ru,"defaultProps",c2e);var u2e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx=B;function d2e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var h2e=typeof Object.is=="function"?Object.is:d2e,f2e=Lx.useSyncExternalStore,g2e=Lx.useRef,p2e=Lx.useEffect,m2e=Lx.useMemo,y2e=Lx.useDebugValue;u2e.useSyncExternalStoreWithSelector=function(n,e,t,r,i){var s=g2e(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=m2e(function(){function l(g){if(!A){if(A=!0,c=g,g=r(g),i!==void 0&&a.hasValue){var p=a.value;if(i(p,g))return u=p}return u=g}if(p=u,h2e(c,g))return p;var m=r(g);return i!==void 0&&i(p,m)?(c=g,p):(c=g,u=m)}var A=!1,c,u,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,r,i]);var o=f2e(n,s[0],s[1]);return p2e(function(){a.hasValue=!0,a.value=o},[o]),y2e(o),o};function v2e(n){n()}function w2e(){let n=null,e=null;return{clear(){n=null,e=null},notify(){v2e(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let r=n;for(;r;)t.push(r),r=r.next;return t},subscribe(t){let r=!0;const i=e={callback:t,next:null,prev:e};return i.prev?i.prev.next=i:n=i,function(){!r||n===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:n=i.next)}}}}var xV={notify(){},get:()=>[]};function b2e(n,e){let t,r=xV,i=0,s=!1;function a(m){c();const w=r.subscribe(m);let v=!1;return()=>{v||(v=!0,w(),u())}}function o(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function A(){return s}function c(){i++,t||(t=n.subscribe(l),r=w2e())}function u(){i--,t&&i===0&&(t(),t=void 0,r.clear(),r=xV)}function h(){s||(s=!0,c())}function g(){s&&(s=!1,u())}const p={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:A,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>r};return p}var x2e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B2e=x2e(),E2e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",C2e=E2e(),_2e=()=>B2e||C2e?B.useLayoutEffect:B.useEffect,S2e=_2e(),JP=Symbol.for("react-redux-context"),ZP=typeof globalThis<"u"?globalThis:{};function I2e(){if(!B.createContext)return{};const n=ZP[JP]??(ZP[JP]=new Map);let e=n.get(B.createContext);return e||(e=B.createContext(null),n.set(B.createContext,e)),e}var T2e=I2e();function P2e(n){const{children:e,context:t,serverState:r,store:i}=n,s=B.useMemo(()=>{const l=b2e(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),a=B.useMemo(()=>i.getState(),[i]);S2e(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=t||T2e;return B.createElement(o.Provider,{value:s},e)}var F2e=P2e,k2e=(n,e)=>e,SM=Y([k2e,lt,HX,ir,PY,VA,v1e,nr],E1e),IM=n=>{var e=n.currentTarget.getBoundingClientRect(),t=e.width/n.currentTarget.offsetWidth,r=e.height/n.currentTarget.offsetHeight;return{chartX:Math.round((n.clientX-e.left)/t),chartY:Math.round((n.clientY-e.top)/r)}},Nq=xa("mouseClick"),Dq=_x();Dq.startListening({actionCreator:Nq,effect:(n,e)=>{var t=n.payload,r=SM(e.getState(),IM(t));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(SCe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Xk=xa("mouseMove"),Oq=_x();Oq.startListening({actionCreator:Xk,effect:(n,e)=>{var t=n.payload,r=e.getState(),i=qR(r,r.tooltip.settings.shared),s=SM(r,IM(t));i==="axis"&&((s==null?void 0:s.activeIndex)!=null?e.dispatch(BY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(xY()))}});function N2e(n,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var BV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Uq=Qs({name:"rootProps",initialState:BV,reducers:{updateOptions:(n,e)=>{var t;n.accessibilityLayer=e.payload.accessibilityLayer,n.barCategoryGap=e.payload.barCategoryGap,n.barGap=(t=e.payload.barGap)!==null&&t!==void 0?t:BV.barGap,n.barSize=e.payload.barSize,n.maxBarSize=e.payload.maxBarSize,n.stackOffset=e.payload.stackOffset,n.syncId=e.payload.syncId,n.syncMethod=e.payload.syncMethod,n.className=e.payload.className}}}),D2e=Uq.reducer,{updateOptions:O2e}=Uq.actions,Rq=Qs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(n,e)=>e.payload}}),{updatePolarOptions:U2e}=Rq.actions,R2e=Rq.reducer,Mq=xa("keyDown"),Lq=xa("focus"),TM=_x();TM.startListening({actionCreator:Mq,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip,s=n.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(JR(i,S0(t))),o=VA(t);if(s==="Enter"){var l=m_(t,"axis","hover",String(i.index));e.dispatch(Qk({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:l}));return}var A=yCe(t),c=A==="left-to-right"?1:-1,u=s==="ArrowRight"?1:-1,h=a+u*c;if(!(o==null||h>=o.length||h<0)){var g=m_(t,"axis","hover",String(h));e.dispatch(Qk({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});TM.startListening({actionCreator:Lq,effect:(n,e)=>{var t=e.getState(),r=t.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=t.tooltip;if(!i.active&&i.index==null){var s="0",a=m_(t,"axis","hover",String(s));e.dispatch(Qk({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var zs=xa("externalEvent"),Qq=_x();Qq.startListening({actionCreator:zs,effect:(n,e)=>{if(n.payload.handler!=null){var t=e.getState(),r={activeCoordinate:A1e(t),activeDataKey:DY(t),activeIndex:qu(t),activeLabel:NY(t),activeTooltipIndex:qu(t),isTooltipActive:c1e(t)};n.payload.handler(r,n.payload.reactEvent)}}});var M2e=Y([_0],n=>n.tooltipItemPayloads),L2e=Y([M2e,Ux,(n,e,t)=>e,(n,e,t)=>t],(n,e,t,r)=>{var i=n.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,t);return a}}}),jq=xa("touchMove"),Hq=_x();Hq.startListening({actionCreator:jq,effect:(n,e)=>{var t=n.payload,r=e.getState(),i=qR(r,r.tooltip.settings.shared);if(i==="axis"){var s=SM(r,IM({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY,currentTarget:t.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(BY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=t.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var A=l.getAttribute(g7),c=(a=l.getAttribute(p7))!==null&&a!==void 0?a:void 0,u=L2e(e.getState(),A,c);e.dispatch(bY({activeDataKey:c,activeIndex:A,activeCoordinate:u}))}}});var Q2e=j9({brush:ETe,cartesianAxis:GPe,chartData:L1e,errorBars:SIe,graphicalItems:OSe,layout:Ive,legend:gwe,options:D1e,polarAxis:rSe,polarOptions:R2e,referenceElements:kTe,rootProps:D2e,tooltip:ICe}),j2e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Zye({reducer:Q2e,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([Dq.middleware,Oq.middleware,TM.middleware,Qq.middleware,Hq.middleware]),devTools:{serialize:{replacer:N2e},name:"recharts-".concat(t)}})};function Vq(n){var{preloadedState:e,children:t,reduxStoreName:r}=n,i=Xi(),s=B.useRef(null);if(i)return t;s.current==null&&(s.current=j2e(e,r));var a=LU;return B.createElement(F2e,{context:a,store:s.current},t)}function Kq(n){var{layout:e,width:t,height:r,margin:i}=n,s=mn(),a=Xi();return B.useEffect(()=>{a||(s(Cve(e)),s(_ve({width:t,height:r})),s(Eve(i)))},[s,a,e,t,r,i]),null}function $q(n){var e=mn();return B.useEffect(()=>{e(O2e(n))},[e,n]),null}var H2e=["children"];function V2e(n,e){if(n==null)return{};var t,r,i=K2e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function K2e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function E_(){return E_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E_.apply(null,arguments)}var $2e={width:"100%",height:"100%"},G2e=B.forwardRef((n,e)=>{var t=YU(),r=qU(),i=x7();if(!e0(t)||!e0(r))return null;var{children:s,otherAttributes:a,title:o,desc:l}=n,A,c;return typeof a.tabIndex=="number"?A=a.tabIndex:A=i?0:void 0,typeof a.role=="string"?c=a.role:c=i?"application":void 0,B.createElement(CU,E_({},a,{title:o,desc:l,role:c,tabIndex:A,width:t,height:r,style:$2e,ref:e}),s)}),z2e=n=>{var{children:e}=n,t=Fe(NI);if(!t)return null;var{width:r,height:i,y:s,x:a}=t;return B.createElement(CU,{width:r,height:i,x:a,y:s},e)},EV=B.forwardRef((n,e)=>{var{children:t}=n,r=V2e(n,H2e),i=Xi();return i?B.createElement(z2e,null,t):B.createElement(G2e,E_({ref:e},r),t)});function W2e(){var n=mn(),[e,t]=B.useState(null),r=Fe(rwe);return B.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Rs(s)&&s!==r&&n(Sve(s))}},[e,n,r]),t}function CV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function X2e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(t),!0).forEach(function(r){Y2e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):CV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Y2e(n,e,t){return(e=q2e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q2e(n){var e=J2e(n,"string");return typeof e=="symbol"?e:e+""}function J2e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}var Z2e=B.forwardRef((n,e)=>{var{children:t,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:A,onMouseLeave:c,onMouseMove:u,onMouseUp:h,onTouchEnd:g,onTouchMove:p,onTouchStart:m,style:w,width:v}=n,b=mn(),[x,E]=B.useState(null),[I,P]=B.useState(null);H1e();var _=W2e(),T=B.useCallback(ie=>{_(ie),typeof e=="function"&&e(ie),E(ie),P(ie)},[_,e,E,P]),k=B.useCallback(ie=>{b(Nq(ie)),b(zs({handler:s,reactEvent:ie}))},[b,s]),O=B.useCallback(ie=>{b(Xk(ie)),b(zs({handler:A,reactEvent:ie}))},[b,A]),U=B.useCallback(ie=>{b(xY()),b(zs({handler:c,reactEvent:ie}))},[b,c]),L=B.useCallback(ie=>{b(Xk(ie)),b(zs({handler:u,reactEvent:ie}))},[b,u]),R=B.useCallback(()=>{b(Lq())},[b]),re=B.useCallback(ie=>{b(Mq(ie.key))},[b]),he=B.useCallback(ie=>{b(zs({handler:a,reactEvent:ie}))},[b,a]),te=B.useCallback(ie=>{b(zs({handler:o,reactEvent:ie}))},[b,o]),ee=B.useCallback(ie=>{b(zs({handler:l,reactEvent:ie}))},[b,l]),Z=B.useCallback(ie=>{b(zs({handler:h,reactEvent:ie}))},[b,h]),ae=B.useCallback(ie=>{b(zs({handler:m,reactEvent:ie}))},[b,m]),fe=B.useCallback(ie=>{b(jq(ie)),b(zs({handler:p,reactEvent:ie}))},[b,p]),Ue=B.useCallback(ie=>{b(zs({handler:g,reactEvent:ie}))},[b,g]);return B.createElement(QY.Provider,{value:x},B.createElement(WW.Provider,{value:I},B.createElement("div",{className:gt("recharts-wrapper",r),style:X2e({position:"relative",cursor:"default",width:v,height:i},w),onClick:k,onContextMenu:he,onDoubleClick:te,onFocus:R,onKeyDown:re,onMouseDown:ee,onMouseEnter:O,onMouseLeave:U,onMouseMove:L,onMouseUp:Z,onTouchEnd:Ue,onTouchMove:fe,onTouchStart:ae,ref:T},t)))}),eFe=["children","className","width","height","style","compact","title","desc"];function tFe(n,e){if(n==null)return{};var t,r,i=nFe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function nFe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var Gq=B.forwardRef((n,e)=>{var{children:t,className:r,width:i,height:s,style:a,compact:o,title:l,desc:A}=n,c=tFe(n,eFe),u=MA(c);return o?B.createElement(EV,{otherAttributes:u,title:l,desc:A},t):B.createElement(Z2e,{className:r,style:a,width:i,height:s,onClick:n.onClick,onMouseLeave:n.onMouseLeave,onMouseEnter:n.onMouseEnter,onMouseMove:n.onMouseMove,onMouseDown:n.onMouseDown,onMouseUp:n.onMouseUp,onContextMenu:n.onContextMenu,onDoubleClick:n.onDoubleClick,onTouchStart:n.onTouchStart,onTouchMove:n.onTouchMove,onTouchEnd:n.onTouchEnd},B.createElement(EV,{otherAttributes:u,title:l,desc:A,ref:e},B.createElement(DTe,null,t)))}),rFe=["width","height"];function Yk(){return Yk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yk.apply(null,arguments)}function iFe(n,e){if(n==null)return{};var t,r,i=sFe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function sFe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var aFe={top:5,right:5,bottom:5,left:5},oFe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:aFe,reverseStackOrder:!1,syncMethod:"index"},zq=B.forwardRef(function(e,t){var r,i=js(e.categoricalChartProps,oFe),{width:s,height:a}=i,o=iFe(i,rFe);if(!e0(s)||!e0(a))return null;var{chartName:l,defaultTooltipEventType:A,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,categoricalChartProps:h}=e,g={chartName:l,defaultTooltipEventType:A,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return B.createElement(Vq,{preloadedState:{options:g},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:l},B.createElement(wq,{chartData:h.data}),B.createElement(Kq,{width:s,height:a,layout:i.layout,margin:i.margin}),B.createElement($q,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),B.createElement(Gq,Yk({},o,{width:s,height:a,ref:t})))}),lFe=["axis"],PM=B.forwardRef((n,e)=>B.createElement(zq,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lFe,tooltipPayloadSearcher:aM,categoricalChartProps:n,ref:e})),AFe=["axis","item"],qk=B.forwardRef((n,e)=>B.createElement(zq,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:AFe,tooltipPayloadSearcher:aM,categoricalChartProps:n,ref:e}));function cFe(n){var e=mn();return B.useEffect(()=>{e(U2e(n))},[e,n]),null}var uFe=["width","height","layout"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jk.apply(null,arguments)}function dFe(n,e){if(n==null)return{};var t,r,i=hFe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function hFe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}var fFe={top:5,right:5,bottom:5,left:5},gFe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:fFe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},pFe=B.forwardRef(function(e,t){var r,i=js(e.categoricalChartProps,gFe),{width:s,height:a,layout:o}=i,l=dFe(i,uFe);if(!e0(s)||!e0(a))return null;var{chartName:A,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,g={chartName:A,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return B.createElement(Vq,{preloadedState:{options:g},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:A},B.createElement(wq,{chartData:i.data}),B.createElement(Kq,{width:s,height:a,layout:o,margin:i.margin}),B.createElement($q,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),B.createElement(cFe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),B.createElement(Gq,Jk({width:s,height:a},l,{ref:t})))}),mFe=["item"],yFe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Wq=B.forwardRef((n,e)=>{var t=js(n,yFe);return B.createElement(pFe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:mFe,tooltipPayloadSearcher:aM,categoricalChartProps:t,ref:e})});const co=["7-11 新街門市","A21 環北站","7-11 高萱門市","A18 桃園高鐵站","A16 橫山站","大園農會","不搭車"],_V={"A21 環北站":{name:"A21 環北站",originalPrice:65,monthlyPass:{30:1260,90:3564,120:3888}},"A19 體育園區站":{name:"A19 體育園區站",originalPrice:40,monthlyPass:{30:735,90:2079,120:2268}},"7-11 高萱門市":{name:"A19 體育園區站",originalPrice:40,monthlyPass:{30:735,90:2079,120:2268}},"A18 桃園高鐵站":{name:"A18 桃園高鐵站",originalPrice:35,monthlyPass:{30:630,90:1782,120:1944}}},vFe={name:"TPass 799",price:799,days:30,description:"A7-A22 無限搭乘 30天"},e2={K:"早",L:"中",Y:"晚",月休:"休",SS:"特",R:"休",KK:"早",YY:"晚",早班:"早",中班:"中",晚班:"晚"},vE=(n=[])=>{const e=[],t=new Date,r=t.getFullYear(),i=t.getMonth()+1,s=`${r}-${i.toString().padStart(2,"0")}`;return n.length>0?n.sort((o,l)=>l.key.localeCompare(o.key)).forEach(o=>{let l=o.label;o.key===s&&(l+=" (當月)"),e.push({key:o.key,label:l,year:parseInt(o.key.split("-")[0]),month:parseInt(o.key.split("-")[1]),lastUpdated:o.lastUpdated})}):e.push({key:s,label:`${r}年${i}月 (當月)`,year:r,month:i}),e},wFe=()=>{const n=[],e=new Date;for(let s=12;s>=1;s--){const a=new Date(e.getFullYear(),e.getMonth()-s,1),o=a.getFullYear(),l=a.getMonth()+1,A=`${o}-${l.toString().padStart(2,"0")}`,c=`${o}年${l}月`;n.push({key:A,label:c,year:o,month:l})}const t=e.getFullYear(),r=e.getMonth()+1,i=`${t}-${r.toString().padStart(2,"0")}`;n.push({key:i,label:`${t}年${r}月 (當月)`,year:t,month:r});for(let s=1;s<=6;s++){const a=new Date(e.getFullYear(),e.getMonth()+s,1),o=a.getFullYear(),l=a.getMonth()+1,A=`${o}-${l.toString().padStart(2,"0")}`;let c=`${o}年${l}月`;s===1&&(c+=" (下個月)"),n.push({key:A,label:c,year:o,month:l})}return n};function bFe(){const[n,e]=B.useState("display"),[t,r]=B.useState({}),[i,s]=B.useState({}),[a,o]=B.useState(()=>{const H=new Date,K=H.getFullYear(),oe=H.getMonth()+1;return`${K}-${oe.toString().padStart(2,"0")}`}),[l,A]=B.useState({}),[c,u]=B.useState({}),[h,g]=B.useState([]);B.useState(!1);const[p,m]=B.useState({}),[w,v]=B.useState({}),[b,x]=B.useState("date"),[E,I]=B.useState("all"),[P,_]=B.useState(null),[T,k]=B.useState("week1"),[O,U]=B.useState(null),[L,R]=B.useState(null),[re,he]=B.useState([]),[te,ee]=B.useState({start:1,end:31}),[Z,ae]=B.useState([]),[fe,Ue]=B.useState("charts"),[ie,we]=B.useState("chart"),[Ye,j]=B.useState(null),[G,Q]=B.useState(""),[ne,V]=B.useState(null),[X,J]=B.useState("");B.useState("current");const[$,De]=B.useState(""),[ke,Je]=B.useState("import"),[At,kn]=B.useState({id:"",name:"",pickupLocation:co[0]});B.useEffect(()=>{KA(),T0()},[]),B.useEffect(()=>{if(h.length>0){const H=new Date,K=H.getFullYear(),oe=H.getMonth()+1,le=`${K}-${oe.toString().padStart(2,"0")}`;if(h.some(me=>me.key===le))o(le);else{const me=h[0];me&&o(me.key)}}},[h]),B.useEffect(()=>{fe==="charts"?R(null):fe==="overlap"&&U(null)},[fe]),B.useEffect(()=>{const H=aw(No(gr,"schedule","currentMonth"),oe=>{if(oe.exists()){const le=oe.data();r(le),A(Ae=>({...Ae,current:le._lastUpdated}))}}),K=aw(No(gr,"schedule","nextMonth"),oe=>{if(oe.exists()){const le=oe.data();s(le),A(Ae=>({...Ae,next:le._lastUpdated}))}});return()=>{H(),K()}},[]);const KA=async()=>{try{const H=await bv(vv(gr,"schedule")),K={},oe=[];H.forEach(Ae=>{const me=Ae.data();K[Ae.id]=me,Ae.id.match(/^\d{4}-\d{2}$/)&&oe.push({key:Ae.id,label:`${Ae.id.split("-")[0]}年${Ae.id.split("-")[1]}月`,lastUpdated:me._lastUpdated})}),u(K),g(oe.sort((Ae,me)=>me.key.localeCompare(Ae.key)));const le={};K.currentMonth&&(r(K.currentMonth),le.current=K.currentMonth._lastUpdated),K.nextMonth&&(s(K.nextMonth),le.next=K.nextMonth._lastUpdated),oe.forEach(Ae=>{le[Ae.key]=Ae.lastUpdated}),A(le)}catch(H){console.error("載入班表資料失敗:",H)}},T0=async()=>{try{const H=await bv(vv(gr,"names")),K={};H.forEach(Ae=>{K[Ae.id]=Ae.data().name}),m(K);const oe=await bv(vv(gr,"pickupLocations")),le={};oe.forEach(Ae=>{le[Ae.id]=Ae.data().location}),v(le)}catch(H){console.error("載入同事資料失敗:",H)}},P0=async()=>{try{for(const[H,K]of Object.entries(p))await Kd(No(gr,"names",H),{name:K});for(const[H,K]of Object.entries(w))await Kd(No(gr,"pickupLocations",H),{location:K});alert("同事資料已儲存")}catch(H){console.error("儲存同事資料失敗:",H),alert("儲存失敗")}},Gx=()=>{confirm("確定要清空所有同事資料嗎？")&&(m({}),v({}))},aT=()=>{const{id:H,name:K,pickupLocation:oe}=At;if(!H||!K){alert("請填寫職員編號和姓名");return}if(p[H]){alert("職員編號已存在");return}m(le=>({...le,[H]:K})),v(le=>({...le,[H]:oe})),kn({id:"",name:"",pickupLocation:co[0]})},F0=H=>{confirm(`確定要刪除 ${p[H]} 嗎？`)&&(m(K=>{const oe={...K};return delete oe[H],oe}),v(K=>{const oe={...K};return delete oe[H],oe}))},k0=(H,K)=>{m(oe=>({...oe,[H]:K}))},zx=(H,K)=>{v(oe=>({...oe,[H]:K}))},ar=()=>{if(!G.trim()){J("請輸入資料");return}try{const H=G.trim().split(`
`),K={};let oe=null,le=0;for(const Ae of H){if(le++,!Ae.trim())continue;console.log(`處理第 ${le} 行:`,Ae);const me=Ae.split("	");if(console.log("分割後的欄位:",me),le<=2){console.log("跳過標題行或日期行");continue}const je=me[0].trim(),ct=me[1].trim();if(je&&ct&&je.match(/^A\d+$/)&&(console.log("發現同事資料行:",je,ct),me[2]&&me[2].trim()==="班別排班")){oe={id:je,name:ct,schedule:[]};const $e=me.slice(3);console.log("班表資料:",$e);const Me=$e.map(Ai=>{const Lt=Ai.trim();return Lt?e2[Lt]?e2[Lt]:Lt:""});console.log("處理後的班表:",Me);const Nt=ct.replace(/\d+/g,"").trim();K[je]={name:Nt,schedule:Me}}}V(K),J("")}catch{J("解析資料時發生錯誤")}},br=async()=>{if(!ne){alert("請先解析資料");return}if(!$){alert("請選擇要儲存的月份");return}try{const H={};for(const[K,oe]of Object.entries(ne)){if(!K||K.trim()===""){console.warn("跳過空的職員編號");continue}H[K]={},oe.schedule.forEach((le,Ae)=>{const me=`${Ae+1}`;le&&le.trim()&&(H[K][me]=le)}),console.log(`同事 ${K}: ${Object.keys(H[K]).length} 個班次`)}H._lastUpdated=new Date().toISOString(),console.log("準備上傳資料:",H),console.log("資料結構檢查:");for(const[K,oe]of Object.entries(H))K!=="_lastUpdated"&&console.log(`- ${K}: ${Object.keys(oe).length} 個班次`);await Kd(No(gr,"schedule",$),H),console.log("班表上傳成功");for(const[K,oe]of Object.entries(ne))if(!p[K])try{await Kd(No(gr,"names",K),{name:oe.name}),console.log(`同事 ${K} 姓名已更新`)}catch(le){console.warn(`更新同事 ${K} 姓名失敗:`,le)}await KA(),alert(`班表已成功儲存到 ${$}！`),Q(""),V(null),De("")}catch(H){console.error("上傳班表失敗:",H);let K="上傳失敗";H.code==="permission-denied"?K="權限不足，請檢查 Firebase 安全規則":H.code==="unavailable"?K="網路連線問題，請檢查網路連線":H.message&&(K=`上傳失敗: ${H.message}`),alert(K)}},$A=()=>{let H;a==="current"?H=t:a==="next"?H=i:H=c[a]||{};const K=Object.keys(H).filter(Ae=>Ae!=="_lastUpdated"),oe=(Ae,me)=>{var $e,Me;const je=parseInt((($e=Ae.match(/\d+/))==null?void 0:$e[0])||"0"),ct=parseInt(((Me=me.match(/\d+/))==null?void 0:Me[0])||"0");return je-ct};let le=K;return P?le=[P]:Z.length>0&&(le=Z),le.sort(oe)},Mt=()=>a==="current"?t:a==="next"?i:c[a]||{},Wx=H=>{if(!H)return null;const K={totalMonths:0,totalShifts:0,earlyShifts:0,midShifts:0,nightShifts:0,restDays:0,specialShifts:0,averageShiftsPerMonth:0,averageEarlyPerMonth:0,averageMidPerMonth:0,averageNightPerMonth:0,averageRestPerMonth:0,averageSpecialPerMonth:0};return Object.keys(c).forEach(oe=>{if(oe==="_lastUpdated")return;const Ae=c[oe][H];Ae&&(K.totalMonths++,Object.keys(Ae).forEach(me=>{if(me==="_lastUpdated")return;const je=Ae[me];if(je)switch(K.totalShifts++,je){case"早":K.earlyShifts++;break;case"中":K.midShifts++;break;case"晚":K.nightShifts++;break;case"休":K.restDays++;break;case"特":K.specialShifts++;break}}))}),K.totalMonths>0&&(K.averageShiftsPerMonth=Math.round(K.totalShifts/K.totalMonths),K.averageEarlyPerMonth=Math.round(K.earlyShifts/K.totalMonths),K.averageMidPerMonth=Math.round(K.midShifts/K.totalMonths),K.averageNightPerMonth=Math.round(K.nightShifts/K.totalMonths),K.averageRestPerMonth=Math.round(K.restDays/K.totalMonths),K.averageSpecialPerMonth=Math.round(K.specialShifts/K.totalMonths)),K},oT=()=>new Date().getDate(),GA=H=>{const K=new Date,oe=[];for(let le=0;le<H;le++){const Ae=new Date(K);Ae.setDate(K.getDate()+le),oe.push(Ae.getDate())}return oe},pd=()=>{switch(E){case"today":return[oT()];case"3days":return GA(3);case"7days":return GA(7);case"custom":return Array.from({length:te.end-te.start+1},(le,Ae)=>te.start+Ae);default:let H,K;if(a==="current"){const le=new Date;H=le.getFullYear(),K=le.getMonth()+1}else if(a==="next"){const le=new Date;H=le.getFullYear(),K=le.getMonth()+2}else{const[le,Ae]=a.split("-");H=parseInt(le),K=parseInt(Ae)}const oe=new Date(H,K,0).getDate();return Array.from({length:oe},(le,Ae)=>Ae+1)}},Xx=H=>{const K=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),oe=1,le=K;if(!H||!w[H])return null;const Ae=w[H];if(Ae==="不搭車"||!_V[Ae])return null;const je=Mt()[H];if(!je)return null;let ct=0,$e=0;for(let md=oe;md<=le;md++){const ci=je[md];ci&&ci!=="休"&&ci!=="特"&&($e++,ci==="早"?ct+=1:(ci==="中"||ci==="晚")&&(ct+=2))}if(ct===0)return null;const Me=_V[Ae],Nt=ct*Me.originalPrice,Ai=Math.ceil(Nt*.7),Lt=[];Object.entries(Me.monthlyPass).forEach(([md,ci])=>{const O0=parseInt(md),qf=ci,Jf=ci/(O0/30);Lt.push({days:O0,price:ci,totalCost:qf,averagePricePerMonth:Jf,savings:Nt-qf})});const Hs=vFe.price,Yf=Hs/30,xr=Math.ceil((Hs-Nt)/Me.originalPrice),cT=()=>Nt>=Hs?{type:"recommended",text:"TPass比原價划算，強烈推薦！"}:xr<=5?{type:"consider",text:`只需額外搭乘${xr}次即可回本，建議考慮`}:xr<=10?{type:"maybe",text:`需要額外搭乘${xr}次才回本，可考慮其他方案`}:{type:"not-recommended",text:`需要額外搭乘${xr}次才回本，不建議`};return{employeeId:H,employeeName:p[H]||H,location:Ae,workDays:$e,totalTrips:ct,originalTotal:Nt,citizenCardTotal:Ai,monthlyPassOptions:Lt,tpassTotal:Hs,tpassDailyCost:Yf,breakEvenTrips:xr,tpassRecommendation:cT(),recommendations:[]}},N0=()=>{const H=qx();H&&(document.body.appendChild(H),setTimeout(()=>{LW(H,{backgroundColor:"#ffffff",scale:2,useCORS:!0,allowTaint:!0}).then(K=>{const oe=document.createElement("a");oe.download=`乘車表_${a==="current"?"當月":"下個月"}_${new Date().toISOString().split("T")[0]}.png`,oe.href=K.toDataURL(),oe.click(),document.body.removeChild(H)}).catch(K=>{console.error("匯出失敗:",K),document.body.removeChild(H)})},500))},lT=()=>{const H=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),K=[];for(let oe=1;oe<=Math.ceil(H/7);oe++){const le=(oe-1)*7+1,Ae=Math.min(oe*7,H);K.push(f.jsxs("option",{value:`week${oe}`,children:[new Date().getMonth()+1,"月",le,"日 - ",new Date().getMonth()+1,"月",Ae,"日"]},`week${oe}`))}return K},AT=()=>{const H=Mt(),K=parseInt(T.replace("week","")),oe=(K-1)*7+1,le=Math.min(K*7,new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate());let Ae="";for(let me=oe;me<=le;me++){const je={};Object.keys(H).forEach(ct=>{var Nt;if(ct==="_lastUpdated")return;const $e=w[ct];if(!$e||$e==="不搭車")return;((Nt=H[ct])==null?void 0:Nt[me])==="早"&&(je[$e]=(je[$e]||0)+1)}),Ae+=`${new Date().getMonth()+1}/${me}
`,Object.keys(je).length>0&&["A21 環北站","7-11 高萱門市","7-11 新街門市","A18 桃園高鐵站"].forEach($e=>{je[$e]&&(Ae+=`${$e}${je[$e]}人
`)}),Ae+=`
`}navigator.clipboard.writeText(Ae.trim()).then(()=>{alert("Line 群文字已複製到剪貼簿！")}).catch(()=>{prompt("請複製以下文字：",Ae.trim())})},D0=()=>{const H=Mt(),K={};Object.keys(H).forEach(le=>{le!=="_lastUpdated"&&(K[le]={})});const oe=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();for(let le=1;le<=oe;le++){const Ae={};Object.keys(H).forEach(me=>{var ct;if(me==="_lastUpdated")return;const je=(ct=H[me])==null?void 0:ct[le];je&&je!=="休"&&(Ae[je]||(Ae[je]=[]),Ae[je].push(me))}),Object.keys(Ae).forEach(me=>{const je=Ae[me];for(let ct=0;ct<je.length;ct++)for(let $e=ct+1;$e<je.length;$e++){const Me=je[ct],Nt=je[$e];K[Me][Nt]||(K[Me][Nt]=0),K[Nt][Me]||(K[Nt][Me]=0),K[Me][Nt]++,K[Nt][Me]++}}),Ae.早&&Ae.中&&Ae.早.forEach(me=>{Ae.中.forEach(je=>{K[me][je]||(K[me][je]=0),K[je][me]||(K[je][me]=0),K[me][je]++,K[je][me]++})}),Ae.中&&Ae.晚&&Ae.中.forEach(me=>{Ae.晚.forEach(je=>{K[me][je]||(K[me][je]=0),K[je][me]||(K[je][me]=0),K[me][je]++,K[je][me]++})})}return K},Yx=H=>{const oe=D0()[H]||{};return Object.entries(oe).map(([le,Ae])=>({employeeId:le,name:p[le]||le,count:Ae})).sort((le,Ae)=>Ae.count-le.count).filter(le=>le.count>0)},qx=()=>{const H=Mt(),K=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),oe={};for(let $e=1;$e<=K;$e++)oe[$e]={},co.forEach(Me=>{oe[$e][Me]=0});Object.keys(H).forEach($e=>{var Nt;if($e==="_lastUpdated")return;const Me=w[$e];if(!(!Me||Me==="不搭車"))for(let Ai=1;Ai<=K;Ai++)((Nt=H[$e])==null?void 0:Nt[Ai])==="早"&&oe[Ai][Me]++});const le=document.createElement("div");le.style.cssText=`
      position: fixed;
      top: -9999px;
      left: -9999px;
      width: 1200px;
      background: white;
      padding: 40px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: #333;
    `;const Ae=document.createElement("h1");Ae.textContent=`${new Date().getFullYear()}年${new Date().getMonth()+1}月 乘車統計表`,Ae.style.cssText=`
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 30px;
      color: #2c3e50;
    `,le.appendChild(Ae);const me=document.createElement("div");me.style.cssText=`
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-top: 20px;
    `,["日","一","二","三","四","五","六"].forEach($e=>{const Me=document.createElement("div");Me.textContent=$e,Me.style.cssText=`
        text-align: center;
        font-weight: bold;
        font-size: 18px;
        padding: 15px 10px;
        background: #f8f9fa;
        border-radius: 8px;
        color: #495057;
      `,me.appendChild(Me)});const ct=new Date(new Date().getFullYear(),new Date().getMonth(),1).getDay();for(let $e=0;$e<ct;$e++){const Me=document.createElement("div");Me.style.cssText=`
        height: 120px;
        background: #f8f9fa;
        border-radius: 8px;
      `,me.appendChild(Me)}for(let $e=1;$e<=K;$e++){const Me=document.createElement("div");Me.style.cssText=`
        height: 120px;
        border: 2px solid #e9ecef;
        border-radius: 8px;
        padding: 8px;
        background: white;
        position: relative;
      `;const Nt=document.createElement("div");if(Nt.textContent=$e,Nt.style.cssText=`
        font-size: 16px;
        font-weight: bold;
        color: #495057;
        margin-bottom: 8px;
        text-align: center;
      `,Me.appendChild(Nt),co.some(Lt=>{var Hs;return Lt!=="不搭車"&&((Hs=oe[$e])==null?void 0:Hs[Lt])>0}))co.filter(Lt=>Lt!=="不搭車").forEach(Lt=>{var Yf;const Hs=((Yf=oe[$e])==null?void 0:Yf[Lt])||0;if(Hs>0){const xr=document.createElement("div");xr.style.cssText=`
               font-size: 12px;
               margin: 2px 0;
               color: #333;
               text-align: center;
             `,xr.textContent=`${Lt}: ${Hs}人`,Me.appendChild(xr)}});else{const Lt=document.createElement("div");Lt.textContent="無乘車",Lt.style.cssText=`
           font-size: 12px;
           color: #6c757d;
           text-align: center;
           margin-top: 20px;
         `,Me.appendChild(Lt)}me.appendChild(Me)}return le.appendChild(me),le};return f.jsxs("div",{className:"container-custom py-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"班表管理工具"}),f.jsx("p",{className:"text-center text-text-secondary",children:"早班好"})]}),f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"bg-surface/40 rounded-xl p-1 border border-white/10 w-full max-w-4xl",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-1",children:[f.jsxs("button",{onClick:()=>e("display"),className:`px-3 py-3 md:px-6 rounded-lg transition-all text-sm md:text-base ${n==="display"?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 text-blue-400 border border-blue-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Bv,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-1 md:mr-2"}),f.jsx("span",{className:"hidden sm:inline",children:"顯示班表"}),f.jsx("span",{className:"sm:hidden",children:"班表"})]}),f.jsxs("button",{onClick:()=>e("transport"),className:`px-3 py-3 md:px-6 rounded-lg transition-all text-sm md:text-base ${n==="transport"?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-400 border border-yellow-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Xue,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-1 md:mr-2"}),f.jsx("span",{className:"hidden sm:inline",children:"交通及車費試算"}),f.jsx("span",{className:"sm:hidden",children:"交通"})]}),f.jsxs("button",{onClick:()=>e("statistics"),className:`px-3 py-3 md:px-6 rounded-lg transition-all text-sm md:text-base ${n==="statistics"?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-400 border border-purple-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Nz,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-1 md:mr-2"}),f.jsx("span",{className:"hidden sm:inline",children:"統計功能"}),f.jsx("span",{className:"sm:hidden",children:"統計"})]}),f.jsxs("button",{onClick:()=>e("import"),className:`px-3 py-3 md:px-6 rounded-lg transition-all text-sm md:text-base ${n==="import"?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 text-green-400 border border-green-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Ty,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-1 md:mr-2"}),f.jsx("span",{className:"hidden sm:inline",children:"匯入與轉換班表"}),f.jsx("span",{className:"sm:hidden",children:"匯入"})]})]})})}),n==="display"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-4 md:p-6 lg:p-8 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-blue-300 group-hover:text-blue-200 transition-colors",children:"月份"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:a,onChange:H=>o(H.target.value),className:"w-full px-3 py-2 md:px-4 md:py-3 bg-white/10 border border-white/20 rounded-xl focus:border-blue-400/50 focus:bg-white/20 focus:ring-2 focus:ring-blue-400/20 transition-all duration-200 appearance-none cursor-pointer text-sm md:text-base",children:vE(h).map(H=>f.jsx("option",{value:H.key,children:H.label},H.key))}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-purple-300 group-hover:text-purple-200 transition-colors",children:"顯示模式"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:b,onChange:H=>x(H.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-purple-400/50 focus:bg-white/20 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200 appearance-none cursor-pointer",children:[f.jsx("option",{value:"date",children:"日期視圖"}),f.jsx("option",{value:"employee",children:"同事視圖"}),f.jsx("option",{value:"partner",children:"搭班視圖"})]}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-green-300 group-hover:text-green-200 transition-colors",children:"篩選"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:E,onChange:H=>I(H.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-green-400/50 focus:bg-white/20 focus:ring-2 focus:ring-green-400/20 transition-all duration-200 appearance-none cursor-pointer",children:[f.jsx("option",{value:"all",children:"全部"}),f.jsx("option",{value:"today",children:"今天"}),f.jsx("option",{value:"3days",children:"接下來 3 天"}),f.jsx("option",{value:"7days",children:"接下來 7 天"}),f.jsx("option",{value:"custom",children:"自定義範圍"})]}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-orange-300 group-hover:text-orange-200 transition-colors",children:"選擇同事"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:P||"",onChange:H=>_(H.target.value||null),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-orange-400/50 focus:bg-white/20 focus:ring-2 focus:ring-orange-400/20 transition-all duration-200 appearance-none cursor-pointer",children:[f.jsx("option",{value:"",children:"顯示所有同事"}),Object.keys(Mt()).filter(H=>H!=="_lastUpdated").sort((H,K)=>{var Ae,me;const oe=parseInt(((Ae=H.match(/\d+/))==null?void 0:Ae[0])||"0"),le=parseInt(((me=K.match(/\d+/))==null?void 0:me[0])||"0");return oe-le}).map(H=>f.jsx("option",{value:H,children:p[H]||H},H))]}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-orange-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),l[a]&&f.jsx("div",{className:"mt-6 flex items-center justify-center",children:f.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-surface/30 rounded-full border border-white/10",children:[f.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsxs("span",{className:"text-sm text-gray-300",children:["最後更新：",new Date(l[a]).toLocaleString()]})]})})]}),(E==="custom"||re.length>0||Z.length>0)&&f.jsxs("div",{className:"bg-gradient-to-br from-surface/50 to-surface/30 rounded-2xl p-4 md:p-6 border border-white/15 shadow-lg backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-semibold mb-4 text-cyan-300",children:"進階篩選"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[E==="custom"&&f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-cyan-300",children:"日期範圍"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"number",min:"1",max:"31",value:te.start,onChange:H=>ee(K=>({...K,start:parseInt(H.target.value)})),className:"w-1/2 px-3 py-2 bg-white/10 border border-white/20 rounded-lg focus:border-cyan-400/50 focus:bg-white/20 text-sm",placeholder:"開始日期"}),f.jsx("span",{className:"text-gray-400 self-center",children:"至"}),f.jsx("input",{type:"number",min:"1",max:"31",value:te.end,onChange:H=>ee(K=>({...K,end:parseInt(H.target.value)})),className:"w-1/2 px-3 py-2 bg-white/10 border border-white/20 rounded-lg focus:border-cyan-400/50 focus:bg-white/20 text-sm",placeholder:"結束日期"})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-pink-300",children:"班次篩選"}),f.jsx("div",{className:"flex flex-wrap gap-2",children:["早","中","晚","休","特"].map(H=>f.jsx("button",{onClick:()=>{re.includes(H)?he(K=>K.filter(oe=>oe!==H)):he(K=>[...K,H])},className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${re.includes(H)?"bg-pink-500 text-white border border-pink-400":"bg-white/10 text-gray-300 border border-white/20 hover:bg-white/20"}`,children:H},H))})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-orange-300",children:"多同事選擇"}),f.jsx("div",{className:"max-h-32 overflow-y-auto",children:Object.keys(Mt()).filter(H=>H!=="_lastUpdated").sort((H,K)=>{var Ae,me;const oe=parseInt(((Ae=H.match(/\d+/))==null?void 0:Ae[0])||"0"),le=parseInt(((me=K.match(/\d+/))==null?void 0:me[0])||"0");return oe-le}).map(H=>f.jsxs("label",{className:"flex items-center gap-2 mb-1 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:Z.includes(H),onChange:K=>{K.target.checked?ae(oe=>[...oe,H]):ae(oe=>oe.filter(le=>le!==H))},className:"w-4 h-4 text-orange-500 bg-white/10 border-white/20 rounded focus:ring-orange-400/50"}),f.jsx("span",{className:"text-sm text-gray-300",children:p[H]||H})]},H))})]})]}),f.jsx("div",{className:"mt-4 flex justify-end",children:f.jsx("button",{onClick:()=>{he([]),ae([]),ee({start:1,end:31}),I("all")},className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 text-red-300 rounded-lg transition-all text-sm",children:"清除所有篩選"})})]}),f.jsx("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:b==="date"?f.jsx(xFe,{schedule:Mt(),names:p,displayDates:pd(),filteredEmployees:$A(),selectedShifts:re}):b==="employee"?f.jsx(BFe,{schedule:Mt(),names:p,displayDates:pd(),filteredEmployees:$A(),selectedShifts:re}):b==="partner"?f.jsx(RFe,{schedule:Mt(),names:p,displayDates:pd(),selectedEmployee:P}):f.jsx(PFe,{schedule:Mt(),names:p,displayDates:pd(),filteredEmployees:$A(),selectedShifts:re})})]}),n==="transport"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-surface/60 rounded-2xl p-2 border border-white/20",children:f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>we("chart"),className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${ie==="chart"?"bg-blue-500 text-white shadow-lg":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:"乘車表"}),f.jsx("button",{onClick:()=>we("fare"),className:`flex-1 px-4 py-3 rounded-xl font-medium transition-all ${ie==="fare"?"bg-purple-500 text-white shadow-lg":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:"車費試算"})]})}),ie==="chart"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-8 border border-white/20 shadow-xl backdrop-blur-sm",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-yellow-300 group-hover:text-yellow-200 transition-colors",children:"月份"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:a,onChange:H=>o(H.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-yellow-400/50 focus:bg-white/20 focus:ring-2 focus:ring-yellow-400/20 transition-all duration-200 appearance-none cursor-pointer",children:vE(h).map(H=>f.jsx("option",{value:H.key,children:H.label},H.key))}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-yellow-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-orange-300 group-hover:text-orange-200 transition-colors",children:"匯出"}),f.jsxs("button",{onClick:()=>N0(),className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 border border-blue-400/30 text-blue-300 rounded-xl transition-all duration-200 font-medium",children:[f.jsx(Ty,{className:"w-4 h-4 inline mr-2"}),"匯出乘車表"]})]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-green-300 group-hover:text-green-200 transition-colors",children:"乘車文字生成 (一週)"}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("select",{value:T,onChange:H=>k(H.target.value),className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-green-400/50 focus:bg-white/20 focus:ring-2 focus:ring-green-400/20 transition-all duration-200 appearance-none cursor-pointer",children:lT()}),f.jsxs("button",{onClick:()=>AT(),className:"px-6 py-3 bg-gradient-to-r from-green-500/20 to-teal-500/20 hover:from-green-500/30 hover:to-teal-500/30 border border-green-400/30 text-green-300 rounded-xl transition-all duration-200 font-medium whitespace-nowrap",children:[f.jsx(Dz,{className:"w-4 h-4 inline mr-2"}),"生成"]})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300 group-hover:text-gray-200 transition-colors",children:"更新時間"}),f.jsx("div",{className:"px-4 py-3 bg-surface/30 rounded-xl border border-white/10",children:f.jsx("span",{className:"text-sm text-gray-300",children:l[a]?new Date(l[a]).toLocaleString():"無資料"})})]})]})]})}),f.jsx("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:f.jsx(EFe,{schedule:Mt(),names:p,pickupLocations:w})})]}),ie==="fare"&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-8 border border-white/20 shadow-xl backdrop-blur-sm",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-purple-300 group-hover:text-purple-200 transition-colors",children:"月份"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:a,onChange:H=>o(H.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-purple-400/50 focus:bg-white/20 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200 appearance-none cursor-pointer",children:vE(h).map(H=>f.jsx("option",{value:H.key,children:H.label},H.key))}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-blue-300 group-hover:text-blue-200 transition-colors",children:"選擇同事"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:Ye||"",onChange:H=>j(H.target.value||null),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-blue-400/50 focus:bg-white/20 focus:ring-2 focus:ring-blue-400/20 transition-all duration-200 appearance-none cursor-pointer",children:[f.jsx("option",{value:"",children:"請選擇同事"}),Object.keys(Mt()).filter(H=>H!=="_lastUpdated").sort((H,K)=>{var Ae,me;const oe=parseInt(((Ae=H.match(/\d+/))==null?void 0:Ae[0])||"0"),le=parseInt(((me=K.match(/\d+/))==null?void 0:me[0])||"0");return oe-le}).map(H=>f.jsx("option",{value:H,children:p[H]||H},H))]}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})}),f.jsx("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:f.jsx(UFe,{schedule:Mt(),names:p,pickupLocations:w,selectedEmployee:Ye,calculateFare:Xx})})]})]}),n==="statistics"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-8 border border-white/20 shadow-xl backdrop-blur-sm",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-purple-300 group-hover:text-purple-200 transition-colors",children:"月份"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:a,onChange:H=>o(H.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-purple-400/50 focus:bg-white/20 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200 appearance-none cursor-pointer",children:vE(h).map(H=>f.jsx("option",{value:H.key,children:H.label},H.key))}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-blue-300 group-hover:text-blue-200 transition-colors",children:"統計類型"}),f.jsx("div",{className:"bg-surface/40 rounded-xl p-1 border border-white/10",children:f.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[f.jsx("button",{onClick:()=>Ue("charts"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${fe==="charts"?"bg-green-500/20 text-green-300 border border-green-400/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"圖表分析"}),f.jsx("button",{onClick:()=>Ue("overlap"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${fe==="overlap"?"bg-blue-500/20 text-blue-300 border border-blue-400/30":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:"搭班統計表"})]})})]}),f.jsxs("div",{className:"group",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-300 group-hover:text-gray-200 transition-colors",children:"更新時間"}),f.jsx("div",{className:"px-4 py-3 bg-surface/30 rounded-xl border border-white/10",children:f.jsx("span",{className:"text-sm text-gray-300",children:l[a]?new Date(l[a]).toLocaleString():"無資料"})})]})]})}),fe==="overlap"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-4 md:p-6 lg:p-8 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center justify-center mb-6 md:mb-8",children:[f.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 lg:w-12 lg:h-12 rounded-full bg-blue-500/20 border border-blue-400/30 flex items-center justify-center mr-2 md:mr-3",children:f.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 lg:w-6 lg:h-6 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),f.jsx("h3",{className:"text-lg md:text-xl lg:text-2xl font-bold text-blue-300",children:"搭班統計表"})]}),f.jsx(CFe,{schedule:Mt(),names:p,onEmployeeClick:R})]}),L&&f.jsx(_Fe,{employeeId:L,employeeName:p[L]||L,ranking:Yx(L),onClose:()=>R(null)})]}),fe==="charts"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-4 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center justify-center mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-500/20 border border-pink-400/30 flex items-center justify-center mr-3",children:f.jsx("svg",{className:"w-5 h-5 text-pink-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),f.jsx("h3",{className:"text-lg font-bold text-pink-300",children:"早班統計"})]}),f.jsx(IFe,{schedule:Mt(),names:p})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-4 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center justify-center mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 border border-blue-400/30 flex items-center justify-center mr-3",children:f.jsx("svg",{className:"w-5 h-5 text-blue-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),f.jsx("h3",{className:"text-lg font-bold text-blue-300",children:"晚班統計"})]}),f.jsx(TFe,{schedule:Mt(),names:p})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-4 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsxs("div",{className:"flex items-center justify-center mb-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 border border-orange-400/30 flex items-center justify-center mr-3",children:f.jsx("svg",{className:"w-5 h-5 text-orange-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),f.jsx("h3",{className:"text-lg font-bold text-orange-300",children:"連續上班統計"})]}),f.jsx(SFe,{schedule:Mt(),names:p,allSchedules:c,selectedMonth:a})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[f.jsx(NFe,{schedule:Mt()}),f.jsx(DFe,{schedule:Mt(),names:p})]}),f.jsx(FFe,{schedule:Mt(),names:p}),f.jsx(kFe,{schedule:Mt(),names:p}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300 text-center",children:"個人統計儀表板"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("label",{className:"block text-sm font-semibold mb-3 text-purple-300",children:"選擇同事"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{value:O||"",onChange:H=>U(H.target.value||null),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:border-purple-400/50 focus:bg-white/20 focus:ring-2 focus:ring-purple-400/20 transition-all duration-200 appearance-none cursor-pointer",children:[f.jsx("option",{value:"",children:"請選擇一個同事查看個人統計"}),Object.keys(Mt()).filter(H=>H!=="_lastUpdated").sort((H,K)=>{var Ae,me;const oe=parseInt(((Ae=H.match(/\d+/))==null?void 0:Ae[0])||"0"),le=parseInt(((me=K.match(/\d+/))==null?void 0:me[0])||"0");return oe-le}).map(H=>f.jsx("option",{value:H,children:p[H]||H},H))]}),f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:f.jsx("svg",{className:"w-4 h-4 text-purple-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),f.jsx(OFe,{schedule:Mt(),names:p,selectedEmployee:O,crossMonthStats:Wx(O),selectedMonth:a})]})]})]}),n==="import"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex justify-center mb-6",children:f.jsx("div",{className:"bg-surface/40 rounded-xl p-1 border border-white/10 w-full max-w-2xl",children:f.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[f.jsxs("button",{onClick:()=>Je("import"),className:`px-6 py-3 rounded-lg transition-all text-sm md:text-base ${ke==="import"?"bg-gradient-to-r from-green-500/20 to-emerald-500/20 text-green-400 border border-green-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Ty,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-2"}),"匯入班表"]}),f.jsxs("button",{onClick:()=>Je("manage"),className:`px-6 py-3 rounded-lg transition-all text-sm md:text-base ${ke==="manage"?"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-400 border border-blue-400/30":"text-text-secondary hover:text-white hover:bg-white/5"}`,children:[f.jsx(Bv,{className:"w-4 h-4 md:w-5 md:h-5 inline mr-2"}),"月份管理"]})]})})}),ke==="import"&&f.jsxs("div",{className:"bg-surface/60 rounded-xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-green-300",children:"匯入班表"}),f.jsxs("div",{className:"mb-6 p-4 bg-surface/40 rounded-lg border border-white/10",children:[f.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-300",children:"班別代碼說明"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:Object.entries(e2).map(([H,K])=>f.jsxs("div",{className:"flex items-center gap-2 p-2 bg-surface/20 rounded border border-white/10",children:[f.jsx("span",{className:"font-mono bg-white/10 px-2 py-1 rounded text-green-300 font-medium",children:H}),f.jsxs("span",{className:"text-gray-300 font-medium",children:["= ",K]})]},H))})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"目標月份"}),f.jsxs("select",{value:$,onChange:H=>De(H.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-green-400/50 focus:bg-white/10",children:[f.jsx("option",{value:"",children:"請選擇月份"}),wFe().map(H=>f.jsx("option",{value:H.key,children:H.label},H.key))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Excel 資料"}),f.jsx("textarea",{value:G,onChange:H=>Q(H.target.value),placeholder:"從 Excel 複製資料並貼上這裡...",className:"w-full h-32 px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-green-400/50 focus:bg-white/10 resize-none"})]})]}),X&&f.jsx("div",{className:"mt-6 p-4 bg-red-600/20 border border-red-500/30 rounded-xl text-red-300 font-medium",children:X}),f.jsxs("div",{className:"mt-4 flex gap-3",children:[f.jsx("button",{onClick:ar,className:"px-6 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-400/30 text-green-300 rounded-lg transition-all font-medium",children:"解析資料"}),ne&&f.jsx("button",{onClick:br,className:"px-6 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 text-blue-300 rounded-lg transition-all font-medium",children:"上傳班表"})]}),ne&&f.jsxs("div",{className:"bg-surface/60 rounded-xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-300",children:"預覽表格"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"collapse",borderSpacing:0,border:"none"},children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-surface/40 border-b border-white/20",children:[f.jsx("th",{className:"text-left p-3 text-blue-300 font-semibold",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:"職員編號"}),f.jsx("th",{className:"text-left p-3 text-purple-300 font-semibold",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:"姓名"}),Array.from({length:31},(H,K)=>f.jsx("th",{className:"text-center p-3 text-green-300 font-medium",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:K+1},K))]})}),f.jsx("tbody",{children:Object.entries(ne).sort(([H],[K])=>{var Ae,me;const oe=parseInt(((Ae=H.match(/\d+/))==null?void 0:Ae[0])||"0"),le=parseInt(((me=K.match(/\d+/))==null?void 0:me[0])||"0");return oe-le}).map(([H,K])=>f.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-all duration-200",children:[f.jsx("td",{className:"p-3 text-gray-400 font-medium",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:H}),f.jsx("td",{className:"p-3 text-white font-semibold",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:K.name}),K.schedule.map((oe,le)=>f.jsx("td",{className:"p-2 text-center",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:oe?f.jsx("div",{className:`
                                  px-3 py-2 rounded-lg text-center text-xs font-bold
                                  ${oe==="早"?"bg-pink-500 text-white":oe==="中"?"bg-cyan-500 text-white":oe==="晚"?"bg-blue-500 text-white":oe==="休"?"bg-gray-500 text-white":oe==="特"?"bg-orange-500 text-white":oe==="排"?"bg-yellow-500 text-white":"bg-gray-700 text-gray-300"}
                                `,children:oe}):f.jsx("div",{className:"w-full h-8 rounded-lg bg-surface/20 border border-white/10"})},le))]},H))})]})})]}),ke==="manage"&&f.jsxs("div",{className:"bg-surface/60 rounded-xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-300",children:"月份管理"}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-lg font-semibold mb-4 text-cyan-300",children:"已儲存的月份"}),h.length>0?f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(H=>f.jsxs("div",{className:"bg-surface/40 rounded-lg p-4 border border-white/10 hover:border-white/20 transition-all",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("h5",{className:"text-white font-semibold",children:H.label}),f.jsx("span",{className:"text-xs text-gray-400",children:H.lastUpdated?new Date(H.lastUpdated).toLocaleDateString():"未知"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{o(H.key),e("display")},className:"px-3 py-1 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 text-blue-300 rounded text-sm transition-all",children:"查看"}),f.jsx("button",{onClick:()=>{o(H.key),e("statistics")},className:"px-3 py-1 bg-purple-500/20 hover:bg-purple-500/30 border border-purple-400/30 text-purple-300 rounded text-sm transition-all",children:"分析"})]})]},H.key))}):f.jsx("div",{className:"text-center py-8 text-gray-400",children:"尚未儲存任何月份資料"})]}),f.jsxs("div",{className:"bg-surface/40 rounded-lg p-4 border border-white/10",children:[f.jsx("h4",{className:"text-lg font-semibold mb-4 text-orange-300",children:"快速操作"}),f.jsxs("div",{className:"flex flex-wrap gap-4",children:[f.jsxs("button",{onClick:KA,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 text-blue-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(Dj,{className:"w-4 h-4"}),"重新載入資料"]}),f.jsxs("button",{onClick:()=>{o("current"),e("display")},className:"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-400/30 text-green-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(Bv,{className:"w-4 h-4"}),"回到當月"]})]})]})]})]}),f.jsxs("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-400",children:"同事基本資料管理"}),f.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[f.jsxs("button",{onClick:T0,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 text-blue-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(Dj,{className:"w-4 h-4"}),"從 Firebase 讀取資料"]}),f.jsxs("button",{onClick:P0,className:"px-4 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-400/30 text-green-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(Ty,{className:"w-4 h-4"}),"儲存姓名與上車地點"]}),f.jsxs("button",{onClick:Gx,className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 text-red-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(Al,{className:"w-4 h-4"}),"清空所有資料"]})]}),f.jsxs("div",{className:"bg-surface/20 rounded-lg p-4 mb-6 border border-white/5",children:[f.jsx("h4",{className:"text-lg font-semibold mb-4 text-orange-400",children:"新增同事"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"職員編號"}),f.jsx("input",{type:"text",value:At.id,onChange:H=>kn(K=>({...K,id:H.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-orange-400/50 focus:bg-white/10",placeholder:"例如：A45"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"姓名"}),f.jsx("input",{type:"text",value:At.name,onChange:H=>kn(K=>({...K,name:H.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-orange-400/50 focus:bg-white/10",placeholder:"輸入姓名"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"上車地點"}),f.jsx("select",{value:At.pickupLocation,onChange:H=>kn(K=>({...K,pickupLocation:H.target.value})),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-orange-400/50 focus:bg-white/10",children:co.map(H=>f.jsx("option",{value:H,children:H},H))})]})]}),f.jsxs("button",{onClick:aT,className:"mt-4 px-6 py-2 bg-orange-500/20 hover:bg-orange-500/30 border border-orange-400/30 text-orange-400 rounded-lg transition-all flex items-center gap-2",children:[f.jsx(ll,{className:"w-4 h-4"}),"新增同事"]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-white/10",children:[f.jsx("th",{className:"text-left p-2 text-blue-400",children:"職員編號"}),f.jsx("th",{className:"text-left p-2 text-purple-400",children:"姓名"}),f.jsx("th",{className:"text-left p-2 text-green-400",children:"上車地點"}),f.jsx("th",{className:"text-center p-2 text-red-400",children:"操作"})]})}),f.jsx("tbody",{children:Object.keys(p).sort((H,K)=>{const oe=parseInt(H.replace(/\D/g,""))||0,le=parseInt(K.replace(/\D/g,""))||0;return oe-le}).map(H=>f.jsxs("tr",{className:"border-b border-white/5",children:[f.jsx("td",{className:"p-2 text-text-secondary",children:H}),f.jsx("td",{className:"p-2",children:f.jsx("input",{type:"text",value:p[H]||"",onChange:K=>k0(H,K.target.value),className:"w-full px-2 py-1 bg-white/5 border border-white/10 rounded focus:border-purple-400/50 focus:bg-white/10"})}),f.jsx("td",{className:"p-2",children:f.jsx("select",{value:w[H]||co[0],onChange:K=>zx(H,K.target.value),className:"w-full px-2 py-1 bg-white/5 border border-white/10 rounded focus:border-green-400/50 focus:bg-white/10",children:co.map(K=>f.jsx("option",{value:K,children:K},K))})}),f.jsx("td",{className:"p-2 text-center",children:f.jsx("button",{onClick:()=>F0(H),className:"px-3 py-1 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 text-red-400 rounded transition-all",children:f.jsx(Al,{className:"w-4 h-4"})})})]},H))})]})})]})]})]})}function xFe({schedule:n,names:e,displayDates:t,filteredEmployees:r,selectedShifts:i}){return f.jsx("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:f.jsx("div",{className:"bg-surface/60 rounded-xl shadow-xl border border-white/20 backdrop-blur-sm min-w-full",children:f.jsx("div",{className:"w-full",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-xs md:text-sm",style:{borderCollapse:"collapse",borderSpacing:0,border:"none"},children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-surface/40 border-b border-white/20",children:[f.jsx("th",{className:"text-center p-2 md:p-3 text-purple-300 font-semibold sticky left-0 z-10 bg-surface/95",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:"姓名"}),t.map(s=>{const a=s===new Date().getDate();return f.jsxs("th",{className:`text-center p-1 md:p-3 font-medium relative ${a?"text-primary":"text-green-300"}`,style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},title:a?"今天":void 0,"data-today":a?"true":void 0,children:[f.jsx("div",{className:`relative text-xs font-semibold inline-flex items-center justify-center w-7 h-7 rounded ${a?"bg-primary/20 ring-2 ring-primary":""}`,children:s}),f.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:["日","一","二","三","四","五","六"][new Date(new Date().getFullYear(),new Date().getMonth(),s).getDay()]})]},s)})]})}),f.jsx("tbody",{children:r.map((s,a)=>f.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-all duration-200 group","data-employee-id":s,"data-row-index":a,children:[f.jsx("td",{className:"p-2 md:p-3 text-white font-semibold text-xs md:text-sm sticky left-0 z-10 bg-surface/95 group-hover:bg-surface/100 text-center",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:f.jsx("span",{className:"group-hover:text-primary transition-colors",children:e[s]||s})}),t.map(o=>{var c;const l=(c=n[s])==null?void 0:c[o],A=o===new Date().getDate();return i&&i.length>0&&(!l||!i.includes(l))?f.jsx("td",{className:"p-1 md:p-2 text-center",style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:f.jsx("div",{className:`w-full h-6 md:h-8 rounded-lg border ${A?"bg-primary/5 border-primary/30":"bg-surface/10 border-white/5"} opacity-50`})},o):f.jsx("td",{className:`p-1 md:p-2 text-center ${A?"bg-primary/5":""}`,style:{border:"none !important",borderRight:"none !important",borderLeft:"none !important",borderTop:"none !important",borderBottom:"none !important"},children:l?f.jsx("div",{className:`
                                px-2 py-1 md:px-3 md:py-2 rounded-lg text-center text-xs font-bold
                                ${A?"ring-2 ring-primary/50 ":""}${l==="早"?"bg-pink-500 text-white":l==="中"?"bg-cyan-500 text-white":l==="晚"?"bg-blue-500 text-white":l==="休"?"bg-gray-500 text-white":l==="特"?"bg-orange-500 text-white":"bg-gray-700 text-gray-300"}
                              `,children:l}):f.jsx("div",{className:`w-full h-6 md:h-8 rounded-lg border ${A?"bg-primary/5 border-primary/30":"bg-surface/20 border-white/10"}`})},o)})]},s))})]})})})})})}function BFe({schedule:n,names:e,displayDates:t,filteredEmployees:r,selectedShifts:i}){const s=a=>{switch(a){case"早":return"bg-pink-500 text-white";case"中":return"bg-cyan-500 text-white";case"晚":return"bg-blue-500 text-white";case"休":return"bg-gray-500 text-white";case"特":return"bg-orange-500 text-white";default:return"bg-gray-700 text-gray-300"}};return f.jsx("div",{className:"space-y-6",children:r.map(a=>f.jsxs("div",{className:"bg-surface/60 rounded-xl p-6 border border-white/20 shadow-xl backdrop-blur-sm hover:shadow-2xl transition-all duration-300",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h4",{className:"text-lg font-semibold text-white mb-1",children:e[a]||a}),f.jsxs("p",{className:"text-sm text-gray-400",children:["職員編號：",a]})]}),f.jsx("div",{className:"grid grid-cols-7 gap-3",children:t.map(o=>{var A;const l=(A=n[a])==null?void 0:A[o];return i&&i.length>0&&(!l||!i.includes(l))?f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-gray-400 mb-2 font-medium",children:o}),f.jsx("div",{className:"w-full h-8 rounded-lg bg-surface/10 border border-white/5 opacity-50"})]},o):f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-xs text-gray-400 mb-2 font-medium",children:o}),l?f.jsx("div",{className:`
                      px-3 py-2 rounded-lg text-center text-xs font-bold
                      transition-all duration-200 hover:shadow-lg hover:scale-105
                      ${s(l)}
                    `,children:l}):f.jsx("div",{className:"w-full h-8 rounded-lg bg-surface/20 border border-white/10"})]},o)})})]},a))})}function EFe({schedule:n,names:e,pickupLocations:t}){const r=()=>{const o=new Date,l=o.getFullYear(),A=o.getMonth()+1;return new Date(l,A,0).getDate()},s=(()=>{const o=r(),l={};for(let A=1;A<=o;A++)l[A]={},co.forEach(c=>{l[A][c]=0});return Object.keys(n).forEach(A=>{var u;if(A==="_lastUpdated")return;const c=t[A];if(!(!c||c==="不搭車"))for(let h=1;h<=o;h++)((u=n[A])==null?void 0:u[h])==="早"&&l[h][c]++}),l})(),a=r();return f.jsxs("div",{id:"transport-chart",className:"bg-surface/60 rounded-xl p-6 border border-white/20",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-yellow-300 text-center",children:"當月乘車統計表"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"collapse",borderSpacing:0},children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-surface/40 border-b border-white/20",children:[f.jsx("th",{className:"text-left p-3 text-yellow-300 font-semibold",style:{border:"none !important"},children:"上車地點"}),Array.from({length:a},(o,l)=>l+1).map(o=>f.jsxs("th",{className:"text-center p-2 text-green-300 font-medium",style:{border:"none !important"},children:[f.jsx("div",{className:"text-xs font-semibold",children:o}),f.jsx("div",{className:"text-xs text-gray-400",children:["日","一","二","三","四","五","六"][new Date(new Date().getFullYear(),new Date().getMonth(),o).getDay()]})]},o))]})}),f.jsx("tbody",{children:co.filter(o=>o!=="不搭車").map(o=>f.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-all duration-200",children:[f.jsx("td",{className:"p-3 text-white font-semibold",style:{border:"none !important"},children:o}),Array.from({length:a},(l,A)=>A+1).map(l=>{var c;const A=((c=s[l])==null?void 0:c[o])||0;return f.jsx("td",{className:"p-2 text-center",style:{border:"none !important"},children:A>0?f.jsx("div",{className:"px-3 py-2 rounded-lg text-center text-xs font-bold bg-yellow-500/20 border border-yellow-400/30 text-yellow-300",children:A}):f.jsx("div",{className:"w-full h-8 rounded-lg bg-surface/20 border border-white/10"})},l)})]},o))})]})})]})}function CFe({schedule:n,names:e,onEmployeeClick:t}){const r=()=>{const c={},u={};Object.keys(n).forEach(g=>{g!=="_lastUpdated"&&(c[g]={},u[g]={})});const h=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();for(let g=1;g<=h;g++){const p={};Object.keys(n).forEach(m=>{var v;if(m==="_lastUpdated")return;const w=(v=n[m])==null?void 0:v[g];w&&w!=="休"&&(p[w]||(p[w]=[]),p[w].push(m))}),Object.keys(p).forEach(m=>{const w=p[m];for(let v=0;v<w.length;v++)for(let b=v+1;b<w.length;b++){const x=w[v],E=w[b];c[x][E]||(c[x][E]=0),c[E][x]||(c[E][x]=0),u[x][E]||(u[x][E]=[]),u[E][x]||(u[E][x]=[]),c[x][E]++,c[E][x]++,u[x][E].push({day:g,shift:m}),u[E][x].push({day:g,shift:m})}}),p.早&&p.中&&p.早.forEach(m=>{p.中.forEach(w=>{c[m][w]||(c[m][w]=0),c[w][m]||(c[w][m]=0),u[m][w]||(u[m][w]=[]),u[w][m]||(u[w][m]=[]),c[m][w]++,c[w][m]++,u[m][w].push({day:g,shift:"早-中"}),u[w][m].push({day:g,shift:"中-早"})})}),p.中&&p.晚&&p.中.forEach(m=>{p.晚.forEach(w=>{c[m][w]||(c[m][w]=0),c[w][m]||(c[w][m]=0),u[m][w]||(u[m][w]=[]),u[w][m]||(u[w][m]=[]),c[m][w]++,c[w][m]++,u[m][w].push({day:g,shift:"中-晚"}),u[w][m].push({day:g,shift:"晚-中"})})})}return{overlapStats:c,overlapDetails:u}},{overlapStats:i,overlapDetails:s}=r(),a=Object.keys(n).filter(c=>c!=="_lastUpdated").sort((c,u)=>{var p,m;const h=parseInt(((p=c.match(/\d+/))==null?void 0:p[0])||"0"),g=parseInt(((m=u.match(/\d+/))==null?void 0:m[0])||"0");return h-g}),l=(()=>{let c=0,u=0,h=0;return a.forEach(g=>{a.forEach(p=>{var m;if(g!==p){const w=((m=i[g])==null?void 0:m[p])||0;w>0&&(c+=w,u=Math.max(u,w),h++)}})}),{totalOverlaps:c,maxOverlap:u,averageOverlap:h>0?(c/h).toFixed(1):0,totalPairs:h}})(),A=(c,u)=>{if(c===0)return"bg-surface/20 border-white/10 text-gray-400";const h=Math.min(c/u,1);return h>.7?"bg-purple-500/40 border-purple-400/50 text-purple-200":h>.4?"bg-purple-500/30 border-purple-400/40 text-purple-300":"bg-purple-500/20 border-purple-400/30 text-purple-300"};return f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-purple-300 text-center",children:"搭班統計表"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",style:{borderCollapse:"collapse",borderSpacing:0},children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-surface/40 border-b border-white/20",children:[f.jsx("th",{className:"text-left p-3 text-purple-300 font-semibold",style:{border:"none !important"},children:"同事"}),a.map(c=>f.jsx("th",{className:"text-center p-3 text-purple-300 font-medium",style:{border:"none !important"},children:e[c]||c},c))]})}),f.jsx("tbody",{children:a.map(c=>f.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-all duration-200",children:[f.jsx("td",{className:"p-3 text-white font-semibold cursor-pointer hover:text-purple-300 transition-colors",style:{border:"none !important"},onClick:()=>t(c),children:e[c]||c}),a.map(u=>{var g;const h=((g=i[c])==null?void 0:g[u])||0;return f.jsx("td",{className:"p-3 text-center",style:{border:"none !important"},children:c===u?f.jsx("div",{className:"w-8 h-8 rounded-lg bg-surface/20 border border-white/10 flex items-center justify-center text-gray-400",children:"-"}):h>0?f.jsx("div",{className:`px-3 py-2 rounded-lg text-center text-xs font-bold border cursor-pointer hover:scale-105 transition-all ${A(h,l.maxOverlap)}`,title:`${e[c]||c} 與 ${e[u]||u} 搭班 ${h} 次`,children:h}):f.jsx("div",{className:"w-8 h-8 rounded-lg bg-surface/10 border border-white/5 flex items-center justify-center text-gray-500 opacity-50",children:"-"})},u)})]},c))})]})})]})}function _Fe({employeeId:n,employeeName:e,ranking:t,onClose:r}){const[i,s]=B.useState(null),o=(()=>{const l=t.reduce((u,h)=>u+h.count,0),A=t.length>0?(l/t.length).toFixed(1):0,c=t.length>0?t[0].count:0;return{totalOverlaps:l,avgOverlaps:A,maxOverlaps:c}})();return f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:f.jsxs("div",{className:"bg-surface/95 rounded-2xl p-8 border border-white/20 shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-xl font-bold text-purple-300",children:[e," 的搭班詳情"]}),f.jsx("button",{onClick:r,className:"p-2 hover:bg-surface/30 rounded-lg text-gray-300 hover:text-white transition-all duration-200",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-surface/40 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-2xl font-bold text-purple-300",children:o.totalOverlaps}),f.jsx("div",{className:"text-sm text-gray-400",children:"總搭班次數"})]}),f.jsxs("div",{className:"bg-surface/40 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-2xl font-bold text-blue-300",children:o.avgOverlaps}),f.jsx("div",{className:"text-sm text-gray-400",children:"平均搭班次數"})]}),f.jsxs("div",{className:"bg-surface/40 rounded-lg p-4 border border-white/10",children:[f.jsx("div",{className:"text-2xl font-bold text-green-300",children:o.maxOverlaps}),f.jsx("div",{className:"text-sm text-gray-400",children:"最高搭班次數"})]})]}),t.length>0?f.jsxs("div",{className:"space-y-3",children:[f.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-4",children:"搭班排行"}),t.map((l,A)=>f.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border cursor-pointer transition-all hover:scale-105 ${i===l.employeeId?"bg-purple-500/30 border-purple-400/50":"bg-surface/20 border-white/10 hover:bg-surface/30"}`,onClick:()=>s(i===l.employeeId?null:l.employeeId),children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("div",{className:`w-8 h-8 rounded-full border flex items-center justify-center font-bold text-sm ${A===0?"bg-yellow-500/20 border-yellow-400/30 text-yellow-300":A===1?"bg-gray-500/20 border-gray-400/30 text-gray-300":A===2?"bg-orange-500/20 border-orange-400/30 text-orange-300":"bg-purple-500/20 border-purple-400/30 text-purple-300"}`,children:A+1}),f.jsx("div",{children:f.jsx("span",{className:"text-white font-medium",children:l.name})})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("div",{className:"text-purple-300 font-bold",children:[l.count," 次"]}),f.jsxs("div",{className:"text-xs text-gray-400",children:[(l.count/o.totalOverlaps*100).toFixed(1),"%"]})]})]},l.employeeId))]}):f.jsx("div",{className:"text-center py-8 text-gray-400",children:"本月無搭班記錄"})]})})}function SFe({schedule:n,names:e,allSchedules:t,selectedMonth:r}){const s=(()=>{const a={};let o,l;if(r==="current"){const m=new Date;o=m.getFullYear(),l=m.getMonth()+1}else if(r==="next"){const m=new Date;o=m.getFullYear(),l=m.getMonth()+2}else{const[m,w]=r.split("-");o=parseInt(m),l=parseInt(w)}const A=new Date(o,l-2,1),c=A.getFullYear(),u=A.getMonth()+1,h=`${c}-${u.toString().padStart(2,"0")}`,g=t[h]||{},p=new Date(c,u,0).getDate();return Object.keys(n).forEach(m=>{var E,I;if(m==="_lastUpdated")return;let w=0,v=0;const b=7;for(let P=Math.max(1,p-b+1);P<=p;P++){const _=(E=g[m])==null?void 0:E[P];_&&_!=="休"?v++:v=0}const x=new Date(o,l,0).getDate();for(let P=1;P<=x;P++){const _=(I=n[m])==null?void 0:I[P];_&&_!=="休"?(v++,w=Math.max(w,v)):v=0}w>0&&(a[m]={name:e[m]||m,maxConsecutive:w})}),Object.values(a).sort((m,w)=>w.maxConsecutive-m.maxConsecutive)})();return f.jsx("div",{className:"space-y-3",children:s.slice(0,5).map((a,o)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface/20 rounded-lg border border-white/10",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-500/20 border border-orange-400/30 flex items-center justify-center text-orange-300 font-bold text-xs",children:o+1}),f.jsx("span",{className:"text-white font-medium",children:a.name})]}),f.jsxs("div",{className:"text-orange-300 font-bold",children:[a.maxConsecutive," 天"]})]},a.name))})}function IFe({schedule:n,names:e}){const r=(()=>{const i={},s=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();return Object.keys(n).forEach(a=>{var l;if(a==="_lastUpdated")return;let o=0;for(let A=1;A<=s;A++)((l=n[a])==null?void 0:l[A])==="早"&&o++;o>0&&(i[a]={name:e[a]||a,earlyCount:o})}),Object.values(i).sort((a,o)=>o.earlyCount-a.earlyCount)})();return f.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((i,s)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface/20 rounded-lg border border-white/10",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-pink-500/20 border border-pink-400/30 flex items-center justify-center text-pink-300 font-bold text-xs",children:s+1}),f.jsx("span",{className:"text-white font-medium",children:i.name})]}),f.jsxs("div",{className:"text-pink-300 font-bold",children:[i.earlyCount," 次"]})]},i.name))})}function TFe({schedule:n,names:e}){const r=(()=>{const i={},s=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();return Object.keys(n).forEach(a=>{var l;if(a==="_lastUpdated")return;let o=0;for(let A=1;A<=s;A++)((l=n[a])==null?void 0:l[A])==="晚"&&o++;o>0&&(i[a]={name:e[a]||a,nightCount:o})}),Object.values(i).sort((a,o)=>o.nightCount-a.nightCount)})();return f.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((i,s)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface/20 rounded-lg border border-white/10",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-500/20 border border-blue-400/30 flex items-center justify-center text-blue-300 font-bold text-xs",children:s+1}),f.jsx("span",{className:"text-white font-medium",children:i.name})]}),f.jsxs("div",{className:"text-blue-300 font-bold",children:[i.nightCount," 次"]})]},i.name))})}function PFe({schedule:n,names:e,displayDates:t,filteredEmployees:r,selectedShifts:i}){const s=a=>{switch(a){case"早":return"bg-pink-500 text-white";case"中":return"bg-cyan-500 text-white";case"晚":return"bg-blue-500 text-white";case"休":return"bg-gray-500 text-white";case"特":return"bg-orange-500 text-white";default:return"bg-gray-700 text-gray-300"}};return f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"3D 班表視圖"}),f.jsx("p",{className:"text-gray-400",children:"立體展示班次安排"})]}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(a=>f.jsx("div",{className:"group perspective-1000",children:f.jsx("div",{className:"relative transform-style-preserve-3d transition-all duration-500 group-hover:rotate-y-12",children:f.jsxs("div",{className:"bg-gradient-to-br from-surface/80 to-surface/60 rounded-2xl p-6 border border-white/20 shadow-2xl backdrop-blur-sm transform-style-preserve-3d",children:[f.jsxs("div",{className:"transform-style-preserve-3d",children:[f.jsxs("div",{className:"mb-6 text-center",children:[f.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:e[a]||a}),f.jsxs("p",{className:"text-sm text-gray-400",children:["職員編號：",a]})]}),f.jsx("div",{className:"grid grid-cols-7 gap-2",children:t.map((o,l)=>{var c;const A=(c=n[a])==null?void 0:c[o];return i&&i.length>0&&(!A||!i.includes(A))?f.jsxs("div",{className:"relative group/item",children:[f.jsx("div",{className:"w-full h-16 rounded-lg bg-surface/10 border border-white/5 opacity-50 transform transition-all duration-300 group-hover/item:scale-110 group-hover/item:rotate-y-6"}),f.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-xs text-gray-500",children:f.jsx("span",{children:o})})]},o):f.jsx("div",{className:"relative group/item",children:f.jsx("div",{className:`
                            w-full h-16 rounded-lg text-center text-xs font-bold
                            transform transition-all duration-300 
                            group-hover/item:scale-110 group-hover/item:rotate-y-6 group-hover/item:shadow-xl
                            ${A?s(A):"bg-surface/20 border border-white/10"}
                          `,children:f.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[f.jsx("span",{className:"text-xs opacity-75",children:o}),f.jsx("span",{className:"font-bold",children:A||""})]})})},o)})})]}),f.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})})},a))})]})}function FFe({schedule:n,names:e}){const r=(()=>{const i={},s=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();return Object.keys(n).forEach(a=>{var l;if(a==="_lastUpdated")return;const o=e[a]||a;i[o]={name:o,early:0,middle:0,night:0,rest:0,special:0,total:0};for(let A=1;A<=s;A++){const c=(l=n[a])==null?void 0:l[A];if(c)switch(i[o].total++,c){case"早":i[o].early++;break;case"中":i[o].middle++;break;case"晚":i[o].night++;break;case"休":i[o].rest++;break;case"特":i[o].special++;break}}}),Object.values(i).filter(a=>a.total>0).sort((a,o)=>{var h,g;const l=Object.keys(e).find(p=>e[p]===a.name)||a.name,A=Object.keys(e).find(p=>e[p]===o.name)||o.name,c=parseInt(((h=l.match(/\d+/))==null?void 0:h[0])||"0"),u=parseInt(((g=A.match(/\d+/))==null?void 0:g[0])||"0");return c-u})})();return f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-purple-300 text-center",children:"各同事班次分布"}),f.jsx(pu,{width:"100%",height:400,children:f.jsxs(qk,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(hf,{strokeDasharray:"3 3",stroke:"#ffffff20"}),f.jsx(Uu,{dataKey:"name",stroke:"#ffffff80"}),f.jsx(Ru,{stroke:"#ffffff80"}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"}}),f.jsx(Tf,{}),f.jsx(hc,{dataKey:"early",stackId:"a",fill:"#ec4899",name:"早班"}),f.jsx(hc,{dataKey:"middle",stackId:"a",fill:"#06b6d4",name:"中班"}),f.jsx(hc,{dataKey:"night",stackId:"a",fill:"#3b82f6",name:"晚班"}),f.jsx(hc,{dataKey:"rest",stackId:"a",fill:"#6b7280",name:"休假"}),f.jsx(hc,{dataKey:"special",stackId:"a",fill:"#f97316",name:"特休"})]})})]})}function kFe({schedule:n,names:e}){const r=(()=>{const i={},s=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();let a={early:0,middle:0,night:0,rest:0,special:0};Object.keys(n).forEach(A=>{var c;if(A!=="_lastUpdated")for(let u=1;u<=s;u++){const h=(c=n[A])==null?void 0:c[u];if(h)switch(h){case"早":a.early++;break;case"中":a.middle++;break;case"晚":a.night++;break;case"休":a.rest++;break;case"特":a.special++;break}}});const o=Object.keys(n).filter(A=>A!=="_lastUpdated").length,l={early:a.early/o,middle:a.middle/o,night:a.night/o,rest:a.rest/o,special:a.special/o};return Object.keys(n).forEach(A=>{var g;if(A==="_lastUpdated")return;const c=e[A]||A,u={early:0,middle:0,night:0,rest:0,special:0};for(let p=1;p<=s;p++){const m=(g=n[A])==null?void 0:g[p];if(m)switch(m){case"早":u.early++;break;case"中":u.middle++;break;case"晚":u.night++;break;case"休":u.rest++;break;case"特":u.special++;break}}const h={name:c,earlyBias:((u.early-l.early)/l.early*100).toFixed(1),middleBias:((u.middle-l.middle)/l.middle*100).toFixed(1),nightBias:((u.night-l.night)/l.night*100).toFixed(1),restBias:((u.rest-l.rest)/l.rest*100).toFixed(1),specialBias:((u.special-l.special)/l.special*100).toFixed(1)};i[c]=h}),Object.values(i).sort((A,c)=>{var m,w;const u=Object.keys(e).find(v=>e[v]===A.name)||A.name,h=Object.keys(e).find(v=>e[v]===c.name)||c.name,g=parseInt(((m=u.match(/\d+/))==null?void 0:m[0])||"0"),p=parseInt(((w=h.match(/\d+/))==null?void 0:w[0])||"0");return g-p})})();return f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-orange-300 text-center",children:"班次分配偏差度分析"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-white/20",children:[f.jsx("th",{className:"text-left p-3 text-white font-semibold",children:"同事"}),f.jsx("th",{className:"text-center p-3 text-pink-300 font-semibold",children:"早班偏差"}),f.jsx("th",{className:"text-center p-3 text-cyan-300 font-semibold",children:"中班偏差"}),f.jsx("th",{className:"text-center p-3 text-blue-300 font-semibold",children:"晚班偏差"}),f.jsx("th",{className:"text-center p-3 text-gray-300 font-semibold",children:"休假偏差"}),f.jsx("th",{className:"text-center p-3 text-orange-300 font-semibold",children:"特休偏差"})]})}),f.jsx("tbody",{children:r.map((i,s)=>f.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5",children:[f.jsx("td",{className:"p-3 text-white font-medium",children:i.name}),f.jsxs("td",{className:`p-3 text-center font-bold ${parseFloat(i.earlyBias)>0?"text-green-400":"text-red-400"}`,children:[i.earlyBias,"%"]}),f.jsxs("td",{className:`p-3 text-center font-bold ${parseFloat(i.middleBias)>0?"text-green-400":"text-red-400"}`,children:[i.middleBias,"%"]}),f.jsxs("td",{className:`p-3 text-center font-bold ${parseFloat(i.nightBias)>0?"text-green-400":"text-red-400"}`,children:[i.nightBias,"%"]}),f.jsxs("td",{className:`p-3 text-center font-bold ${parseFloat(i.restBias)>0?"text-green-400":"text-red-400"}`,children:[i.restBias,"%"]}),f.jsxs("td",{className:`p-3 text-center font-bold ${parseFloat(i.specialBias)>0?"text-green-400":"text-red-400"}`,children:[i.specialBias,"%"]})]},s))})]})})]})}function NFe({schedule:n}){const t=(()=>{const r={early:0,middle:0,night:0,rest:0,special:0},i=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();return Object.keys(n).forEach(s=>{var a;if(s!=="_lastUpdated")for(let o=1;o<=i;o++){const l=(a=n[s])==null?void 0:a[o];if(l)switch(l){case"早":r.early++;break;case"中":r.middle++;break;case"晚":r.night++;break;case"休":r.rest++;break;case"特":r.special++;break}}}),[{name:"早班",value:r.early,color:"#ec4899"},{name:"中班",value:r.middle,color:"#06b6d4"},{name:"晚班",value:r.night,color:"#3b82f6"},{name:"休假",value:r.rest,color:"#6b7280"},{name:"特休",value:r.special,color:"#f97316"}].filter(s=>s.value>0)})();return f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-green-300 text-center",children:"班次類型分布"}),f.jsx(pu,{width:"100%",height:300,children:f.jsxs(Wq,{children:[f.jsx(wM,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:i})=>`${r} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((r,i)=>f.jsx(I0,{fill:r.color},`cell-${i}`))}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"}})]})})]})}function DFe({schedule:n,names:e}){const[t,r]=B.useState(["early","middle","night"]),s=(()=>{const c=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),u=[];for(let h=1;h<=c;h++){let g=0,p=0,m=0,w=0,v=0;Object.keys(n).forEach(b=>{var E;if(b==="_lastUpdated")return;switch((E=n[b])==null?void 0:E[h]){case"早":g++;break;case"中":p++;break;case"晚":m++;break;case"休":w++;break;case"特":v++;break}}),u.push({date:`${h}日`,day:h,early:g,middle:p,night:m,rest:w,special:v})}return u})(),a=s.reduce((c,u)=>(c.early+=u.early,c.middle+=u.middle,c.night+=u.night,c.rest+=u.rest,c.special+=u.special,c),{early:0,middle:0,night:0,rest:0,special:0}),o=Object.entries(a).filter(([c,u])=>u>0).map(([c])=>c),l=c=>{switch(c){case"early":return"#ec4899";case"middle":return"#06b6d4";case"night":return"#3b82f6";case"rest":return"#6b7280";case"special":return"#f97316";default:return"#9ca3af"}},A=c=>{switch(c){case"early":return"早班";case"middle":return"中班";case"night":return"晚班";case"rest":return"休假";case"special":return"特休";default:return c}};return f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-6 text-blue-300 text-center",children:"班次趨勢變化"}),f.jsx("div",{className:"mb-6",children:f.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:o.map(c=>f.jsx("button",{onClick:()=>{t.includes(c)?r(u=>u.filter(h=>h!==c)):r(u=>[...u,c])},className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${t.includes(c)?"bg-blue-500 text-white border border-blue-400":"bg-white/10 text-gray-300 border border-white/20 hover:bg-white/20"}`,style:{borderColor:t.includes(c)?l(c):void 0},children:A(c)},c))})}),f.jsx(pu,{width:"100%",height:400,children:f.jsxs(PM,{data:s,margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(hf,{strokeDasharray:"3 3",stroke:"#ffffff20"}),f.jsx(Uu,{dataKey:"date",stroke:"#ffffff80",interval:Math.ceil(s.length/10),tick:{fontSize:12}}),f.jsx(Ru,{stroke:"#ffffff80",tick:{fontSize:12},allowDecimals:!1}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"},formatter:(c,u)=>[`${c}人`,A(u)],labelFormatter:c=>`${c}`}),f.jsx(Tf,{formatter:c=>A(c),wrapperStyle:{fontSize:"12px"}}),t.map(c=>f.jsx(mu,{type:"monotone",dataKey:c,stroke:l(c),strokeWidth:2,name:c,dot:{fill:l(c),strokeWidth:2,r:3},activeDot:{r:5,stroke:l(c),strokeWidth:2}},c))]})}),f.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-5 gap-4",children:o.map(c=>f.jsxs("div",{className:"text-center p-3 bg-surface/20 rounded-lg border border-white/10",children:[f.jsx("div",{className:"text-sm text-gray-400 mb-1",children:A(c)}),f.jsx("div",{className:"text-lg font-bold",style:{color:l(c)},children:a[c]}),f.jsx("div",{className:"text-xs text-gray-500",children:"總次數"})]},c))})]})}function OFe({schedule:n,names:e,selectedEmployee:t,crossMonthStats:r,selectedMonth:i}){if(!t)return f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-300 text-center",children:"個人統計儀表板"}),f.jsx("p",{className:"text-center text-gray-400",children:"請選擇一個同事查看個人統計"})]});const a=(()=>{var m;const g={name:e[t]||t,early:0,middle:0,night:0,rest:0,special:0,total:0},p=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();for(let w=1;w<=p;w++){const v=(m=n[t])==null?void 0:m[w];if(v)switch(v){case"早":g.early++,g.total++;break;case"中":g.middle++,g.total++;break;case"晚":g.night++,g.total++;break;case"休":g.rest++;break;case"特":g.special++,g.total++;break}}return g})(),o=[{name:"早班",value:a.early,color:"#ec4899"},{name:"中班",value:a.middle,color:"#06b6d4"},{name:"晚班",value:a.night,color:"#3b82f6"},{name:"休假",value:a.rest,color:"#6b7280"},{name:"特休",value:a.special,color:"#f97316"}].filter(g=>g.value>0),l=()=>{var v;const g=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),p=[];let m=0,w=0;for(let b=1;b<=g;b++){const x=(v=n[t])==null?void 0:v[b];x&&x!=="休"?m++:(m>0&&(w++,p.push({period:`期間${w}`,consecutiveDays:m,trend:m>=6?"高":m>=4?"中":"低"})),m=0)}return m>0&&(w++,p.push({period:`期間${w}`,consecutiveDays:m,trend:m>=6?"高":m>=4?"中":"低"})),p},A=()=>{var m;const g=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),p=[];for(let w=1;w<=g;w++){let v=0,b=0;for(let x=1;x<=w;x++){const E=(m=n[t])==null?void 0:m[x];E&&E!=="休"?v++:(v>0&&(v>=7?b=3:v>=5?b=2:b=1),v=0)}v>0&&(v>=7?b=3:v>=5?b=2:b=1),p.push({date:`${w}日`,consecutiveDays:v,riskLevel:b})}return p},c=()=>{var m,w;const g=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),p={};for(let v=1;v<g;v++){const b=(m=n[t])==null?void 0:m[v],x=(w=n[t])==null?void 0:w[v+1];if(b&&x){const E=`${b}→${x}`;p[E]=(p[E]||0)+1}}return Object.entries(p).sort(([,v],[,b])=>b-v).slice(0,10).map(([v,b])=>({transition:v,value:b}))},u=()=>{var m,w;const g=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate(),p={};for(let v=1;v<g;v++){const b=(m=n[t])==null?void 0:m[v],x=(w=n[t])==null?void 0:w[v+1];if(b&&x){const E=`${b}→${x}`;if(!p[E]){const[I,P]=E.split("→");p[E]={from:I,to:P,count:0}}p[E].count++}}return Object.values(p).sort((v,b)=>b.count-v.count)},h=g=>{switch(g){case"早":return"#ec4899";case"中":return"#06b6d4";case"晚":return"#3b82f6";case"休":return"#6b7280";case"特":return"#f97316";default:return"#9ca3af"}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[f.jsxs("div",{className:"text-center p-4 bg-pink-500/20 rounded-lg border border-pink-400/30",children:[f.jsx("div",{className:"text-2xl font-bold text-pink-300",children:a.early}),f.jsx("div",{className:"text-sm text-pink-200",children:"早班"})]}),f.jsxs("div",{className:"text-center p-4 bg-cyan-500/20 rounded-lg border border-cyan-400/30",children:[f.jsx("div",{className:"text-2xl font-bold text-cyan-300",children:a.middle}),f.jsx("div",{className:"text-sm text-cyan-200",children:"中班"})]}),f.jsxs("div",{className:"text-center p-4 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[f.jsx("div",{className:"text-2xl font-bold text-blue-300",children:a.night}),f.jsx("div",{className:"text-sm text-blue-200",children:"晚班"})]}),f.jsxs("div",{className:"text-center p-4 bg-gray-500/20 rounded-lg border border-gray-400/30",children:[f.jsx("div",{className:"text-2xl font-bold text-gray-300",children:a.rest}),f.jsx("div",{className:"text-sm text-gray-200",children:"休假"})]}),f.jsxs("div",{className:"text-center p-4 bg-orange-500/20 rounded-lg border border-orange-400/30",children:[f.jsx("div",{className:"text-2xl font-bold text-orange-300",children:a.special}),f.jsx("div",{className:"text-sm text-orange-200",children:"特休"})]})]}),f.jsxs("div",{className:"text-center p-4 bg-surface/40 rounded-lg border border-white/10",children:[f.jsxs("div",{className:"text-lg font-semibold text-white",children:["總工作天數：",a.total," 天"]}),f.jsxs("div",{className:"text-sm text-gray-400",children:["工作率：",(a.total/31*100).toFixed(1),"%"]})]}),r&&r.totalMonths>0&&f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-green-300 text-center",children:"跨月份平均值統計"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-4",children:[f.jsxs("div",{className:"text-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[f.jsx("div",{className:"text-lg font-bold text-blue-300",children:r.totalMonths}),f.jsx("div",{className:"text-xs text-blue-200",children:"統計月份"})]}),(()=>{const g={early:a.early,middle:a.middle,night:a.night,rest:a.rest},p=(x,E)=>{const I=x-E;return{value:I,isPositive:I>0,isZero:I===0}},m=p(g.early,r.averageEarlyPerMonth),w=p(g.middle,r.averageMidPerMonth),v=p(g.night,r.averageNightPerMonth),b=p(g.rest,r.averageRestPerMonth);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-center p-3 bg-pink-500/20 rounded-lg border border-pink-400/30",children:[f.jsx("div",{className:"text-lg font-bold text-pink-300",children:r.averageEarlyPerMonth}),f.jsx("div",{className:"text-xs text-pink-200",children:"平均早班/月"}),f.jsxs("div",{className:`text-xs mt-1 ${m.isPositive?"text-green-400":m.isZero?"text-gray-400":"text-red-400"}`,children:[m.isPositive?"+":"",m.value," vs 本月"]})]}),f.jsxs("div",{className:"text-center p-3 bg-cyan-500/20 rounded-lg border border-cyan-400/30",children:[f.jsx("div",{className:"text-lg font-bold text-cyan-300",children:r.averageMidPerMonth}),f.jsx("div",{className:"text-xs text-cyan-200",children:"平均中班/月"}),f.jsxs("div",{className:`text-xs mt-1 ${w.isPositive?"text-green-400":w.isZero?"text-gray-400":"text-red-400"}`,children:[w.isPositive?"+":"",w.value," vs 本月"]})]}),f.jsxs("div",{className:"text-center p-3 bg-blue-500/20 rounded-lg border border-blue-400/30",children:[f.jsx("div",{className:"text-lg font-bold text-blue-300",children:r.averageNightPerMonth}),f.jsx("div",{className:"text-xs text-blue-200",children:"平均晚班/月"}),f.jsxs("div",{className:`text-xs mt-1 ${v.isPositive?"text-green-400":v.isZero?"text-gray-400":"text-red-400"}`,children:[v.isPositive?"+":"",v.value," vs 本月"]})]}),f.jsxs("div",{className:"text-center p-3 bg-gray-500/20 rounded-lg border border-gray-400/30",children:[f.jsx("div",{className:"text-lg font-bold text-gray-300",children:r.averageRestPerMonth}),f.jsx("div",{className:"text-xs text-gray-200",children:"平均休假/月"}),f.jsxs("div",{className:`text-xs mt-1 ${b.isPositive?"text-green-400":b.isZero?"text-gray-400":"text-red-400"}`,children:[b.isPositive?"+":"",b.value," vs 本月"]})]})]})})()]}),f.jsxs("div",{className:"text-center text-sm text-gray-400",children:["基於 ",r.totalMonths," 個月份的資料計算 | ",f.jsx("span",{className:"text-green-400",children:"綠色"})," = 高於平均值 | ",f.jsx("span",{className:"text-red-400",children:"紅色"})," = 低於平均值"]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-purple-300 text-center",children:"班次佔比"}),f.jsx(pu,{width:"100%",height:300,children:f.jsxs(Wq,{children:[f.jsx(wM,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:({name:g,percent:p})=>`${g} ${(p*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:o.map((g,p)=>f.jsx(I0,{fill:g.color},`cell-${p}`))}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"}})]})})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-blue-300 text-center",children:"每日班次分布"}),f.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["日","一","二","三","四","五","六"].map(g=>f.jsx("div",{className:"text-center text-sm font-semibold text-gray-400 py-2",children:g},g))}),f.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:new Date(new Date().getFullYear(),new Date().getMonth(),1).getDay()},(g,p)=>f.jsx("div",{className:"h-8 bg-surface/20 rounded border border-white/5"},`empty-${p}`)),Array.from({length:new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()},(g,p)=>{var x;const m=p+1,w=(x=n[t])==null?void 0:x[m],v=E=>{switch(E){case"早":return"bg-pink-500 text-white";case"中":return"bg-cyan-500 text-white";case"晚":return"bg-blue-500 text-white";case"休":return"bg-gray-500 text-white";case"特":return"bg-orange-500 text-white";default:return"bg-surface/20 text-gray-400 border border-white/10"}},b=E=>{switch(E){case"早":return"早班";case"中":return"中班";case"晚":return"晚班";case"休":return"休假";case"特":return"特休";default:return"無班次"}};return f.jsx("div",{className:`h-8 rounded border flex items-center justify-center text-xs font-bold transition-all hover:scale-110 cursor-pointer ${v(w)}`,title:`${m}日 - ${b(w)}`,children:m},m)})]}),f.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-3 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded"}),f.jsx("span",{className:"text-gray-300",children:"早班"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded"}),f.jsx("span",{className:"text-gray-300",children:"中班"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),f.jsx("span",{className:"text-gray-300",children:"晚班"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded"}),f.jsx("span",{className:"text-gray-300",children:"休假"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded"}),f.jsx("span",{className:"text-gray-300",children:"特休"})]})]})]})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-orange-300 text-center",children:"連續上班天數分析"}),f.jsx(pu,{width:"100%",height:300,children:f.jsxs(qk,{data:l(),margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(hf,{strokeDasharray:"3 3",stroke:"#ffffff20"}),f.jsx(Uu,{dataKey:"period",stroke:"#ffffff80"}),f.jsx(Ru,{stroke:"#ffffff80"}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"},formatter:(g,p)=>[g,{highRisk:"高 (≥6天)",mediumRisk:"中 (4-5天)",lowRisk:"低 (1-3天)"}[p]||p]}),f.jsx(Tf,{}),f.jsx(hc,{dataKey:"consecutiveDays",fill:"#f97316",name:"連續天數"})]})}),f.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{className:"flex items-center justify-center p-2 bg-red-500/20 rounded-lg border border-red-400/30",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),f.jsx("span",{className:"text-red-300",children:"高 (≥6天)"})]}),f.jsxs("div",{className:"flex items-center justify-center p-2 bg-orange-500/20 rounded-lg border border-orange-400/30",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500 mr-2"}),f.jsx("span",{className:"text-orange-300",children:"中 (4-5天)"})]}),f.jsxs("div",{className:"flex items-center justify-center p-2 bg-green-500/20 rounded-lg border border-green-400/30",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),f.jsx("span",{className:"text-green-300",children:"低 (1-3天)"})]})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-blue-300 text-center",children:"連續上班頻率趨勢"}),f.jsx(pu,{width:"100%",height:300,children:f.jsxs(PM,{data:A(),margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(hf,{strokeDasharray:"3 3",stroke:"#ffffff20"}),f.jsx(Uu,{dataKey:"date",stroke:"#ffffff80"}),f.jsx(Ru,{stroke:"#ffffff80",domain:[0,6]}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"}}),f.jsx(Tf,{}),f.jsx(mu,{type:"monotone",dataKey:"consecutiveDays",stroke:"#8b5cf6",strokeWidth:3,name:"連續天數"}),f.jsx(mu,{type:"monotone",dataKey:"riskLevel",stroke:"#ef4444",strokeWidth:2,name:"等級"})]})})]})]}),f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-gradient-to-br from-surface/60 to-surface/40 rounded-2xl p-6 border border-white/20 shadow-xl backdrop-blur-sm",children:[f.jsx("h4",{className:"text-lg font-bold mb-4 text-purple-300 text-center",children:"班次轉換關係圖"}),f.jsx(pu,{width:"100%",height:300,children:f.jsxs(qk,{data:c(),margin:{top:20,right:30,left:20,bottom:5},children:[f.jsx(hf,{strokeDasharray:"3 3",stroke:"#ffffff20"}),f.jsx(Uu,{dataKey:"transition",stroke:"#ffffff80"}),f.jsx(Ru,{stroke:"#ffffff80"}),f.jsx(gu,{contentStyle:{backgroundColor:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#ffffff"},formatter:(g,p,m)=>[`${m.payload.transition}: ${g}次`,"轉換次數"]}),f.jsx(hc,{dataKey:"value",fill:"#8b5cf6"})]})}),f.jsx("div",{className:"mt-4 grid grid-cols-2 lg:grid-cols-4 gap-4",children:u().slice(0,8).map((g,p)=>f.jsxs("div",{className:"flex items-center justify-between p-3 bg-surface/20 rounded-lg border border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:h(g.from)},children:g.from}),f.jsx("span",{className:"text-gray-400",children:"→"}),f.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:h(g.to)},children:g.to})]}),f.jsx("div",{className:"text-purple-300 font-bold",children:g.count})]},p))})]})})]})}function UFe({schedule:n,names:e,pickupLocations:t,selectedEmployee:r,calculateFare:i}){const[s,a]=B.useState(!1),[o,l]=B.useState(null);if(B.useEffect(()=>{r?(a(!0),setTimeout(()=>{const g=i(r);l(g),a(!1)},500)):l(null)},[r,i]),!r)return f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"text-gray-400 text-lg mb-4",children:"請選擇一位同事來計算車費"}),f.jsx("div",{className:"text-gray-500 text-sm",children:"選擇同事後，將顯示該同事的車費分析"})]});if(s)return f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),f.jsx("div",{className:"text-gray-400 text-lg",children:"正在計算車費..."})]});if(!o)return f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"text-gray-400 text-lg mb-4",children:"無法計算車費"}),f.jsx("div",{className:"text-gray-500 text-sm",children:"該同事可能不搭車或沒有班表資料"})]});const A=[{name:"原價",cost:o.originalTotal,type:"original"},{name:"桃園市民卡 7折",cost:o.citizenCardTotal,type:"citizen"},...o.monthlyPassOptions.map(g=>({name:`${g.days}天定期票`,cost:g.averagePricePerMonth,type:"monthly",days:g.days,savings:g.savings,averagePricePerMonth:g.averagePricePerMonth,price:g.price,originalPrice:g.totalCost})),{name:"TPass 799",cost:o.tpassTotal,type:"tpass"}],u=((g,p)=>{const m={bestValue:null,mostFlexible:null,bestForFrequent:null,bestForOccasional:null};return m.bestValue=p.reduce((w,v)=>v.cost<w.cost?v:w),m.mostFlexible=p.find(w=>w.type==="original"||w.type==="citizen")||m.bestValue,g.totalTrips>20?m.bestForFrequent=p.find(w=>w.type==="tpass")||m.bestValue:g.totalTrips<10?m.bestForOccasional=p.find(w=>w.type==="original"||w.type==="citizen")||m.bestValue:(m.bestForFrequent=m.bestValue,m.bestForOccasional=m.bestValue),m})(o,A),h=u.bestValue;return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-xl p-6 border border-blue-400/30",children:[f.jsx("h3",{className:"text-xl font-bold text-blue-300 mb-4",children:"車費試算結果"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-white",children:o.employeeName}),f.jsx("div",{className:"text-sm text-gray-400",children:"同事"})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-green-300",children:o.location}),f.jsx("div",{className:"text-sm text-gray-400",children:"上車地點"})]}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-purple-300",children:[o.totalTrips," 次"]}),f.jsx("div",{className:"text-sm text-gray-400",children:"總搭乘次數"})]})]})]}),f.jsxs("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/20",children:[f.jsx("h4",{className:"text-lg font-semibold text-purple-300 mb-4",children:"車費方案比較"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:A.map((g,p)=>{var m,w,v;return f.jsxs("div",{className:`p-3 sm:p-4 rounded-lg border transition-all duration-300 relative transform hover:scale-105 hover:shadow-lg animate-fade-in-up ${g.cost===h.cost?"bg-green-500/20 border-green-400/50 text-green-300 ring-2 ring-green-400/30":"bg-surface/20 border-white/20 text-white hover:bg-surface/30"}`,style:{animationDelay:`${p*100}ms`,animationFillMode:"both"},children:[f.jsxs("div",{className:"absolute -top-2 -right-2 flex flex-col gap-1",children:[g.cost===h.cost&&f.jsx("div",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg animate-pulse",children:"🏆 最划算"}),g.cost===((m=u.mostFlexible)==null?void 0:m.cost)&&g.type!=="original"&&f.jsx("div",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg",children:"🎯 最靈活"}),g.cost===((w=u.bestForFrequent)==null?void 0:w.cost)&&o.totalTrips>20&&f.jsx("div",{className:"bg-purple-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg",children:"⚡ 常搭推薦"}),g.cost===((v=u.bestForOccasional)==null?void 0:v.cost)&&o.totalTrips<10&&f.jsx("div",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg",children:"💡 偶爾搭"})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.type==="original"&&f.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),g.type==="citizen"&&f.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V4a2 2 0 114 0v2m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),g.type==="monthly"&&f.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),g.type==="tpass"&&f.jsx("svg",{className:"w-5 h-5 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),f.jsx("span",{className:"font-semibold text-sm",children:g.name})]}),f.jsxs("div",{className:"text-xl sm:text-2xl font-bold mb-2 transition-all duration-300 animate-price-change",children:["$",g.cost]}),g.type==="monthly"&&f.jsx("div",{className:"text-xs text-gray-400 mb-1",children:f.jsxs("span",{className:"text-xs text-gray-500",children:["票券原價 $",g.originalPrice]})}),g.type==="tpass"&&f.jsx("div",{className:"text-xs text-gray-400",children:"A22-A7 坐到哭"})]},p)})})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl p-6 border border-indigo-400/30",children:[f.jsx("h4",{className:"text-xl font-bold text-indigo-300 mb-6",children:"車費分析儀表板"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",Math.min(...A.map(g=>g.cost))]}),f.jsx("div",{className:"text-sm text-gray-400",children:"最低費用"})]}),f.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["$",Math.max(...A.map(g=>g.cost))]}),f.jsx("div",{className:"text-sm text-gray-400",children:"最高費用"})]}),f.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg text-center",children:[f.jsxs("div",{className:"text-2xl font-bold text-orange-400",children:["$",o.originalTotal-Math.min(...A.map(g=>g.cost))]}),f.jsx("div",{className:"text-sm text-gray-400",children:"最大節省"})]}),f.jsxs("div",{className:"bg-surface/30 p-4 rounded-lg text-center",children:[f.jsx("div",{className:"text-2xl font-bold text-blue-400",children:A.length}),f.jsx("div",{className:"text-sm text-gray-400",children:"方案數量"})]})]})]}),f.jsxs("div",{className:"bg-gradient-to-br from-emerald-500/10 via-teal-500/5 to-cyan-500/10 rounded-xl p-6 border border-emerald-400/20 shadow-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[f.jsx("h5",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-emerald-300 to-teal-300 bg-clip-text text-transparent",children:"搭乘次數 vs 費用效益分析"}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[f.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-emerald-400"}),f.jsx("span",{className:"hidden sm:inline",children:"即時分析"})]})]}),f.jsx(pu,{width:"100%",height:200,className:"sm:h-[250px]",children:f.jsxs(PM,{data:Array.from({length:40},(g,p)=>{const m=p+1,w=m*o.originalTotal/o.totalTrips,v=Math.ceil(w*.7),b=799,x=o.monthlyPassOptions.find(I=>I.days===120),E=x?x.averagePricePerMonth:486;return{trips:m,原價:Math.round(w),市民卡:v,TPass:b,"120天票":Math.round(E)}}),children:[f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"originalGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.8}),f.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.1})]}),f.jsxs("linearGradient",{id:"citizenGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),f.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]}),f.jsxs("linearGradient",{id:"tpassGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.8}),f.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:.1})]}),f.jsxs("linearGradient",{id:"monthlyGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),f.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:.1})]})]}),f.jsx(hf,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),f.jsx(Uu,{dataKey:"trips",stroke:"#9ca3af",fontSize:10,className:"sm:text-xs",tickLine:!1,axisLine:{stroke:"#4b5563",strokeWidth:1},interval:"preserveStartEnd",label:{value:"搭乘次數",position:"insideBottom",offset:-5,style:{textAnchor:"middle",fill:"#9ca3af",fontSize:"11px",fontWeight:"500"}}}),f.jsx(Ru,{stroke:"#9ca3af",fontSize:10,className:"sm:text-xs",tickLine:!1,axisLine:{stroke:"#4b5563",strokeWidth:1},tickFormatter:g=>`$${g}`,width:50,label:{value:"費用",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#9ca3af",fontSize:"11px",fontWeight:"500"}}}),f.jsx(gu,{formatter:(g,p)=>[`$${g}`,p],labelFormatter:g=>`搭乘 ${g} 次`,contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"12px",color:"#fff",boxShadow:"0 10px 25px rgba(0,0,0,0.3)",padding:"12px"},cursor:{stroke:"#6b7280",strokeWidth:1,strokeDasharray:"3 3"}}),f.jsx(mu,{type:"monotone",dataKey:"原價",stroke:"#ef4444",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#ef4444",strokeWidth:1,fill:"#fff"}}),f.jsx(mu,{type:"monotone",dataKey:"市民卡",stroke:"#3b82f6",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#3b82f6",strokeWidth:1,fill:"#fff"}}),f.jsx(mu,{type:"monotone",dataKey:"TPass",stroke:"#f59e0b",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#f59e0b",strokeWidth:1,fill:"#fff"}}),f.jsx(mu,{type:"monotone",dataKey:"120天票",stroke:"#10b981",strokeWidth:2,dot:!1,activeDot:{r:4,stroke:"#10b981",strokeWidth:1,fill:"#fff"}})]})}),f.jsx("div",{className:"mt-4 sm:mt-6 p-3 sm:p-4 bg-surface/20 rounded-lg border border-emerald-400/10",children:f.jsxs("div",{className:"text-xs sm:text-sm text-gray-300 leading-relaxed",children:["此圖顯示不同搭乘次數下各方案的費用變化，幫助您了解在什麼情況下哪種方案最划算。",f.jsx("span",{className:"text-emerald-300 font-medium",children:"交叉點"}),"表示方案間的轉換時機。"]})})]})]})]})}function RFe({schedule:n,names:e,displayDates:t,selectedEmployee:r}){if(!r)return f.jsxs("div",{className:"text-center py-12",children:[f.jsx("div",{className:"text-gray-400 text-lg mb-4",children:"請選擇一位同事來查看搭班情況"}),f.jsx("div",{className:"text-gray-500 text-sm",children:"在左側選擇同事後，將顯示該同事每天的搭班同事"})]});const i=o=>{var u;const l=(u=n[r])==null?void 0:u[o];if(!l||l==="休")return[];const A=[];Object.keys(n).forEach(h=>{var p;if(h==="_lastUpdated"||h===r)return;const g=(p=n[h])==null?void 0:p[o];!g||g==="休"||(g===l?A.push({id:h,name:e[h]||h,shift:g,type:"同班"}):(l==="早"&&g==="中"||l==="中"&&g==="晚"||l==="中"&&g==="早"||l==="晚"&&g==="中")&&A.push({id:h,name:e[h]||h,shift:g,type:"跨班"}))});const c={早:1,中:2,晚:3};return A.sort((h,g)=>{const p=c[h.shift]||999,m=c[g.shift]||999;return p-m}),A},s=o=>{switch(o){case"早":return"bg-pink-500 text-white";case"中":return"bg-cyan-500 text-white";case"晚":return"bg-blue-500 text-white";case"休":return"bg-gray-500 text-white";case"特":return"bg-orange-500 text-white";default:return"bg-gray-700 text-gray-300"}},a=o=>{switch(o){case"同班":return"bg-green-500/20 border-green-400/30 text-green-300";case"跨班":return"bg-purple-500/20 border-purple-400/30 text-purple-300";default:return"bg-gray-500/20 border-gray-400/30 text-gray-300"}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-purple-500/20 to-blue-500/20 rounded-xl p-4 sm:p-6 border border-purple-400/30",children:[f.jsx("h3",{className:"text-lg sm:text-xl font-bold text-purple-300 mb-2",children:"每日搭班視圖"}),f.jsx("div",{className:"flex items-center gap-2 sm:gap-4",children:f.jsxs("div",{className:"text-white font-semibold text-sm sm:text-base",children:["同事：",f.jsx("span",{className:"text-purple-300",children:e[r]||r})]})})]}),f.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-2 sm:gap-3 md:gap-4",children:t.map(o=>{var u;const l=o===new Date().getDate(),A=(u=n[r])==null?void 0:u[o],c=i(o);return f.jsxs("div",{className:`bg-surface/60 rounded-xl p-2 sm:p-3 md:p-4 border transition-all duration-200 ${l?"border-primary/50 bg-primary/10 ring-2 ring-primary/30":"border-white/20 hover:border-white/30"}`,children:[f.jsxs("div",{className:"text-center mb-2 sm:mb-3",children:[f.jsx("div",{className:`text-sm sm:text-base md:text-lg font-bold ${l?"text-primary":"text-white"}`,children:o}),f.jsx("div",{className:"text-xs text-gray-400 hidden sm:block",children:["日","一","二","三","四","五","六"][new Date(new Date().getFullYear(),new Date().getMonth(),o).getDay()]})]}),f.jsxs("div",{className:"mb-2 sm:mb-3",children:[f.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"我的班次"}),A?f.jsx("div",{className:`px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center text-xs sm:text-sm font-bold ${s(A)}`,children:A}):f.jsx("div",{className:"px-2 sm:px-3 py-1 sm:py-2 rounded-lg text-center text-xs sm:text-sm text-gray-400 bg-surface/20 border border-white/10",children:"無班次"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-xs text-gray-400 mb-1 sm:mb-2",children:["搭班同事 (",c.length,")"]}),c.length>0?f.jsx("div",{className:"space-y-1 sm:space-y-2",children:c.map(h=>f.jsxs("div",{className:`p-1 sm:p-2 rounded-lg border text-xs ${a(h.type)}`,children:[f.jsx("div",{className:"font-medium mb-0.5 sm:mb-1 text-xs sm:text-xs truncate",children:h.name}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs opacity-80 hidden sm:inline",children:h.type}),f.jsx("div",{className:`px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs font-bold ${s(h.shift)}`,children:h.shift})]})]},h.id))}):f.jsx("div",{className:"text-xs text-gray-500 text-center py-1 sm:py-2",children:A&&A!=="休"?"無搭班同事":"休息日"})]})]},o)})})]})}function MFe(){const[n,e]=B.useState(""),[t,r]=B.useState(""),i=()=>{if(!n.trim()){r("請輸入測試資料");return}const s=n.trim().split(`
`);let a=`資料格式分析結果：

`;a+=`總行數: ${s.length}

`,s.forEach((o,l)=>{if(!o.trim()){a+=`第 ${l+1} 行: 空白行
`;return}a+=`第 ${l+1} 行: "${o}"
`;const A=o.split("	"),c=o.split(/\s+/);a+=`  Tab 分隔: ${A.length} 個欄位
`,a+=`  空格分隔: ${c.length} 個欄位
`,A.length>=2?(a+=`  職員編號: "${A[0].trim()}"
`,a+=`  姓名: "${A[1].trim()}"
`,a+=`  班表欄位數: ${A.length-2}
`):c.length>=2?(a+=`  職員編號: "${c[0].trim()}"
`,a+=`  姓名: "${c[1].trim()}"
`,a+=`  班表欄位數: ${c.length-2}
`):a+=`  ❌ 格式錯誤：欄位數不足
`,a+=`
`}),r(a)};return f.jsxs("div",{className:"container-custom py-8",children:[f.jsxs("div",{className:"mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"資料格式測試工具"}),f.jsx("p",{className:"text-center text-text-secondary",children:"檢查 Excel 資料格式是否正確"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-blue-400",children:"輸入測試資料"}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm font-semibold mb-2",children:"從 Excel 複製的資料"}),f.jsx("textarea",{value:n,onChange:s=>e(s.target.value),placeholder:"請從 Excel 複製資料並貼上這裡...",className:"w-full h-64 px-4 py-2 bg-white/5 border border-white/10 rounded-lg focus:border-blue-400/50 focus:bg-white/10 resize-none"})]}),f.jsx("button",{onClick:i,className:"px-6 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 text-blue-400 rounded-lg transition-all",children:"分析資料格式"})]}),f.jsxs("div",{className:"bg-surface/40 rounded-xl p-6 border border-white/10",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-green-400",children:"分析結果"}),f.jsx("div",{className:"bg-surface/20 rounded-lg p-4 border border-white/5",children:f.jsx("pre",{className:"text-sm text-text-secondary whitespace-pre-wrap font-mono",children:t||"請輸入資料並點擊「分析資料格式」"})})]})]}),f.jsxs("div",{className:"mt-8 bg-surface/40 rounded-xl p-6 border border-white/10",children:[f.jsx("h3",{className:"text-xl font-bold mb-4 text-purple-400",children:"正確的資料格式"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-semibold mb-2 text-orange-400",children:"Excel 格式要求"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-text-secondary",children:[f.jsx("li",{children:"第一欄：職員編號（如 A45、A51）"}),f.jsx("li",{children:"第二欄：姓名（如 林小余、黃紅葉）"}),f.jsx("li",{children:"第三欄開始：每日班表（如 K、Y、L、月休）"}),f.jsx("li",{children:"欄位之間用 Tab 鍵分隔"}),f.jsx("li",{children:"每行代表一位同仁的完整班表"})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-semibold mb-2 text-green-400",children:"範例資料"}),f.jsx("div",{className:"bg-surface/20 rounded-lg p-4 border border-white/5",children:f.jsx("pre",{className:"text-sm text-text-secondary font-mono",children:`A45	林小余	K	K	Y	L	月休	Y
A51	黃紅葉	K	K	Y	L	K	Y
A60	李Ashley	Y	L	K	Y	L	K`})})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-lg font-semibold mb-2 text-red-400",children:"常見問題"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-text-secondary",children:[f.jsx("li",{children:"複製時沒有包含 Tab 分隔符"}),f.jsx("li",{children:"職員編號或姓名為空"}),f.jsx("li",{children:"資料行數不足"}),f.jsx("li",{children:"包含多餘的空格或特殊字符"})]})]})]})]})]})}const yi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Zk=[.001,0,0,.001,0,0],t2=1.35,vs={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},fc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xq="pdfjs_internal_editor_",Ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},st={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},LFe={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Er={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},aC={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Dn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Eg={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ZI={ERRORS:0,WARNINGS:1,INFOS:5},Bw={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},wE={moveTo:0,lineTo:1,curveTo:2,closePath:3},QFe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let eT=ZI.WARNINGS;function jFe(n){Number.isInteger(n)&&(eT=n)}function HFe(){return eT}function tT(n){eT>=ZI.INFOS&&console.log(`Info: ${n}`)}function Ge(n){eT>=ZI.WARNINGS&&console.log(`Warning: ${n}`)}function Ft(n){throw new Error(n)}function Ln(n,e){n||Ft(e)}function VFe(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Yq(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=WFe(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return VFe(r)?r:null}function qq(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&Yq(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function et(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Wf=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class SV extends Wf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class n2 extends Wf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class eN extends Wf{constructor(e){super(e,"InvalidPDFException")}}class C_ extends Wf{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class KFe extends Wf{constructor(e){super(e,"FormatError")}}class Ju extends Wf{constructor(e){super(e,"AbortException")}}function Jq(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ft("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=n.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Qx(n){typeof n!="string"&&Ft("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function $Fe(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function GFe(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function zFe(){try{return new Function(""),!0}catch{return!1}}class Vr{static get isLittleEndian(){return et(this,"isLittleEndian",GFe())}static get isEvalSupported(){return et(this,"isEvalSupported",zFe())}static get isOffscreenCanvasSupported(){return et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return et(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return et(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const r2=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var yA,oC,tN;class Te{static makeHexColor(e,t,r){return`#${r2[e]}${r2[t]}${r2[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],s=e[r+1];e[r]=i*t[0]+s*t[2]+t[4],e[r+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],A=t[5];for(let c=0;c<6;c+=2){const u=e[r+c],h=e[r+c+1];e[r+c]=u*i+h*a+l,e[r+c+1]=u*s+h*o+A}}static applyInverseTransform(e,t){const r=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,r){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],A=t[5],c=e[0],u=e[1],h=e[2],g=e[3];let p=i*c+l,m=p,w=i*h+l,v=w,b=o*u+A,x=b,E=o*g+A,I=E;if(s!==0||a!==0){const P=s*c,_=s*h,T=a*u,k=a*g;p+=T,v+=T,w+=k,m+=k,b+=P,I+=P,E+=_,x+=_}r[0]=Math.min(r[0],p,w,m,v),r[1]=Math.min(r[1],b,E,x,I),r[2]=Math.max(r[2],p,w,m,v),r[3]=Math.max(r[3],b,E,x,I)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],s=e[2],a=e[3],o=r**2+i**2,l=r*s+i*a,A=s**2+a**2,c=(o+A)/2,u=Math.sqrt(c**2-(o*A-l**2));t[0]=Math.sqrt(c+u||1),t[1]=Math.sqrt(c-u||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[r,s,i,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,r,i,s,a,o,l,A){A[0]=Math.min(A[0],e,o),A[1]=Math.min(A[1],t,l),A[2]=Math.max(A[2],e,o),A[3]=Math.max(A[3],t,l),D(this,yA,tN).call(this,e,r,s,o,t,i,a,l,3*(-e+3*(r-s)+o),6*(e-2*r+s),3*(r-e),A),D(this,yA,tN).call(this,e,r,s,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),A)}}yA=new WeakSet,oC=function(e,t,r,i,s,a,o,l,A,c){if(A<=0||A>=1)return;const u=1-A,h=A*A,g=h*A,p=u*(u*(u*e+3*A*t)+3*h*r)+g*i,m=u*(u*(u*s+3*A*a)+3*h*o)+g*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)},tN=function(e,t,r,i,s,a,o,l,A,c,u,h){if(Math.abs(A)<1e-12){Math.abs(c)>=1e-12&&D(this,yA,oC).call(this,e,t,r,i,s,a,o,l,-u/c,h);return}const g=c**2-4*u*A;if(g<0)return;const p=Math.sqrt(g),m=2*A;D(this,yA,oC).call(this,e,t,r,i,s,a,o,l,(-c+p)/m,h),D(this,yA,oC).call(this,e,t,r,i,s,a,o,l,(-c-p)/m,h)},N(Te,yA);function WFe(n){return decodeURIComponent(escape(n))}let i2=null,IV=null;function XFe(n){return i2||(i2=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,IV=new Map([["ﬅ","ſt"]])),n.replaceAll(i2,(e,t,r)=>t?t.normalize("NFKC"):IV.get(r))}function Zq(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Jq(n)}const FM="pdfjs_internal_id_";function YFe(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...s]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function vi(n,e,t){return Math.min(Math.max(n,e),t)}function eJ(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Jq(n))}function qFe(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Qx(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const il="http://www.w3.org/2000/svg",Md=class Md{};ce(Md,"CSS",96),ce(Md,"PDF",72),ce(Md,"PDF_TO_CSS_UNITS",Md.CSS/Md.PDF);let Zu=Md;async function jx(n,e="text"){if(Ly(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Hx{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=t;const l=(e[2]+e[0])/2,A=(e[3]+e[1])/2;let c,u,h,g;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,h=0,g=1;break;case 90:c=0,u=1,h=1,g=0;break;case 270:c=0,u=-1,h=-1,g=0;break;case 0:c=1,u=0,h=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,g=-g);let p,m,w,v;c===0?(p=Math.abs(A-e[1])*r+s,m=Math.abs(l-e[0])*r+a,w=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(p=Math.abs(l-e[0])*r+s,m=Math.abs(A-e[1])*r+a,w=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[c*r,u*r,h*r,g*r,p-c*r*l-h*r*A,m-u*r*l-g*r*A],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return et(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Hx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const r=[e,t];return Te.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];Te.applyTransform(t,this.transform);const r=[e[2],e[3]];return Te.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return Te.applyInverseTransform(r,this.transform),r}}class kM extends Wf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function nT(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function NM(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function JFe(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function ZFe(n,e="document.pdf"){if(typeof n!="string")return e;if(nT(n))return Ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(s.test(a))return i(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const A of o)if(s.test(A))return i(A);const l=Array.from(r.searchParams.keys()).reverse();for(const A of l)if(s.test(A))return i(A)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class TV{constructor(){ce(this,"started",Object.create(null));ce(this,"times",[])}time(e){e in this.started&&Ge(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ge(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Ly(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Ea(n){n.preventDefault()}function Un(n){n.preventDefault(),n.stopPropagation()}function eke(n){console.log("Deprecated API usage: "+n)}var Sw;class __{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;d(this,Sw)||S(this,Sw,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,Sw).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const A=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,A==="-"?(a+=c,o+=u):A==="+"&&(a-=c,o-=u),new Date(Date.UTC(r,i,s,a,o,l))}}Sw=new WeakMap,N(__,Sw);function tke(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new Hx({viewBox:s,userUnit:1,scale:e,rotation:t})}function rT(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ge(`Not a valid color format: "${n}"`),[0,0,0])}function nke(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,rT(r))}e.remove()}function dn(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform();return[e,t,r,i,s,a]}function ao(n){const{a:e,b:t,c:r,d:i,e:s,f:a}=n.getTransform().invertSelf();return[e,t,r,i,s,a]}function kf(n,e,t=!1,r=!0){if(e instanceof Hx){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=n,o=Vr.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,A=`var(--total-scale-factor) * ${s}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,u=o?`round(down, ${A}, var(--scale-round-y))`:`calc(${A})`;!t||e.rotation%180===0?(a.width=c,a.height=u):(a.width=u,a.height=c)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Wo{constructor(){const{pixelRatio:e}=Wo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,s=-1){let a=1/0,o=1/0,l=1/0;r=Wo.capPixels(r,s),r>0&&(a=Math.sqrt(r/(e*t))),i!==-1&&(o=i/e,l=i/t);const A=Math.min(a,o,l);return this.sx>A||this.sy>A?(this.sx=A,this.sy=A,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const nN=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var gc,pc,Xs,hl,Iw,hp,fp,Tw,U_,tJ,Qr,nJ,rJ,Cg,Qy;const cl=class cl{constructor(e){N(this,Qr);N(this,gc,null);N(this,pc,null);N(this,Xs);N(this,hl,null);N(this,Iw,null);N(this,hp,null);N(this,fp,null);S(this,Xs,e),d(cl,Tw)||S(cl,Tw,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,gc,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,Xs)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ea,{signal:t}),e.addEventListener("pointerdown",D(cl,U_,tJ),{signal:t}));const r=S(this,hl,document.createElement("div"));r.className="buttons",e.append(r);const i=d(this,Xs).toolbarPosition;if(i){const{style:s}=e,a=d(this,Xs)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,gc)}hide(){var e;d(this,gc).classList.add("hidden"),(e=d(this,pc))==null||e.hideDropdown()}show(){var e,t;d(this,gc).classList.remove("hidden"),(e=d(this,Iw))==null||e.shown(),(t=d(this,hp))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,Xs),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",d(cl,Tw)[e]),D(this,Qr,Cg).call(this,r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),d(this,hl).append(r)}async addAltText(e){const t=await e.render();D(this,Qr,Cg).call(this,t),d(this,hl).append(t,d(this,Qr,Qy)),S(this,Iw,e)}addComment(e){if(d(this,hp))return;const t=e.render();t&&(D(this,Qr,Cg).call(this,t),d(this,hl).append(t,d(this,Qr,Qy)),S(this,hp,e),e.toolbar=this)}addColorPicker(e){if(d(this,pc))return;S(this,pc,e);const t=e.renderButton();D(this,Qr,Cg).call(this,t),d(this,hl).append(t,d(this,Qr,Qy))}async addEditSignatureButton(e){const t=S(this,fp,await e.renderEditButton(d(this,Xs)));D(this,Qr,Cg).call(this,t),d(this,hl).append(t,d(this,Qr,Qy))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){d(this,fp)&&(d(this,fp).title=e)}remove(){var e;d(this,gc).remove(),(e=d(this,pc))==null||e.destroy(),S(this,pc,null)}};gc=new WeakMap,pc=new WeakMap,Xs=new WeakMap,hl=new WeakMap,Iw=new WeakMap,hp=new WeakMap,fp=new WeakMap,Tw=new WeakMap,U_=new WeakSet,tJ=function(e){e.stopPropagation()},Qr=new WeakSet,nJ=function(e){d(this,Xs)._focusEventsAllowed=!1,Un(e)},rJ=function(e){d(this,Xs)._focusEventsAllowed=!0,Un(e)},Cg=function(e){const t=d(this,Xs)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",D(this,Qr,nJ).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",D(this,Qr,rJ).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ea,{signal:t}),!0)},Qy=function(){const e=document.createElement("div");return e.className="divider",e},N(cl,U_),N(cl,Tw,null);let rN=cl;var Pw,qd,fl,NA,iJ,sJ,iN;class rke{constructor(e){N(this,NA);N(this,Pw,null);N(this,qd,null);N(this,fl);S(this,fl,e)}show(e,t,r){const[i,s]=D(this,NA,sJ).call(this,t,r),{style:a}=d(this,qd)||S(this,qd,D(this,NA,iJ).call(this));e.append(d(this,qd)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,qd).remove()}}Pw=new WeakMap,qd=new WeakMap,fl=new WeakMap,NA=new WeakSet,iJ=function(){const e=S(this,qd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=d(this,fl)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ea,{signal:t});const r=S(this,Pw,document.createElement("div"));return r.className="buttons",e.append(r),d(this,fl).hasCommentManager()&&D(this,NA,iN).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{d(this,fl).commentSelection("floating_button")}),D(this,NA,iN).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{d(this,fl).highlightSelection("floating_button")}),e},sJ=function(e,t){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const o=s.x+(t?s.width:0);if(a>r){i=o,r=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,r]},iN=function(e,t,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",r);const o=d(this,fl)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",Ea,{signal:o}),s.addEventListener("click",i,{signal:o})),d(this,Pw).append(s)};function aJ(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var R_;class ike{constructor(){N(this,R_,0)}get id(){return`${Xq}${Vn(this,R_)._++}`}}R_=new WeakMap;var gp,Fw,Jr,pp,lC;const jM=class jM{constructor(){N(this,pp);N(this,gp,Zq());N(this,Fw,0);N(this,Jr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return et(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return D(this,pp,lC).call(this,`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return D(this,pp,lC).call(this,e,e)}async getFromBlob(e,t){const r=await t;return D(this,pp,lC).call(this,e,r)}async getFromId(e){d(this,Jr)||S(this,Jr,new Map);const t=d(this,Jr).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Jr)||S(this,Jr,new Map);let r=d(this,Jr).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${d(this,gp)}_${Vn(this,Fw)._++}`,refCounter:1,isSvg:!1},d(this,Jr).set(e,r),d(this,Jr).set(r.id,r),r}getSvgUrl(e){const t=d(this,Jr).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;d(this,Jr)||S(this,Jr,new Map);const t=d(this,Jr).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,gp)}_`)}};gp=new WeakMap,Fw=new WeakMap,Jr=new WeakMap,pp=new WeakSet,lC=async function(e,t){d(this,Jr)||S(this,Jr,new Map);let r=d(this,Jr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${d(this,gp)}_${Vn(this,Fw)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await jx(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=jM._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((A,c)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,A()},a.onload=async()=>{const u=r.svgUrl=a.result;o.src=await s?`${u}#svgView(preserveAspectRatio(none))`:u},o.onerror=a.onerror=c});a.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Ge(i),r=null}return d(this,Jr).set(e,r),r&&d(this,Jr).set(r.id,r),r};let sN=jM;var Cn,mc,kw,cn;class ske{constructor(e=128){N(this,Cn,[]);N(this,mc,!1);N(this,kw);N(this,cn,-1);S(this,kw,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),d(this,mc))return;const l={cmd:e,undo:t,post:r,type:s};if(d(this,cn)===-1){d(this,Cn).length>0&&(d(this,Cn).length=0),S(this,cn,0),d(this,Cn).push(l);return}if(a&&d(this,Cn)[d(this,cn)].type===s){o&&(l.undo=d(this,Cn)[d(this,cn)].undo),d(this,Cn)[d(this,cn)]=l;return}const A=d(this,cn)+1;A===d(this,kw)?d(this,Cn).splice(0,1):(S(this,cn,A),A<d(this,Cn).length&&d(this,Cn).splice(A)),d(this,Cn).push(l)}undo(){if(d(this,cn)===-1)return;S(this,mc,!0);const{undo:e,post:t}=d(this,Cn)[d(this,cn)];e(),t==null||t(),S(this,mc,!1),S(this,cn,d(this,cn)-1)}redo(){if(d(this,cn)<d(this,Cn).length-1){S(this,cn,d(this,cn)+1),S(this,mc,!0);const{cmd:e,post:t}=d(this,Cn)[d(this,cn)];e(),t==null||t(),S(this,mc,!1)}}hasSomethingToUndo(){return d(this,cn)!==-1}hasSomethingToRedo(){return d(this,cn)<d(this,Cn).length-1}cleanType(e){if(d(this,cn)!==-1){for(let t=d(this,cn);t>=0;t--)if(d(this,Cn)[t].type!==e){d(this,Cn).splice(t+1,d(this,cn)-t),S(this,cn,t);return}d(this,Cn).length=0,S(this,cn,-1)}}destroy(){S(this,Cn,null)}}Cn=new WeakMap,mc=new WeakMap,kw=new WeakMap,cn=new WeakMap;var M_,oJ;class Vx{constructor(e){N(this,M_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Vr.platform;for(const[r,i,s={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(D(this,M_,oJ).call(this,t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(i.bind(e,...a,t)(),s||Un(t))}}M_=new WeakSet,oJ=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const L_=class L_{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return nke(e),et(this,"_colors",e)}convert(e){const t=rT(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,a)=>s===t[a]))return L_._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?Te.makeHexColor(...t):e}};ce(L_,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let aN=L_;var mp,ns,yp,zn,Cr,vp,gl,wp,Ys,pl,yc,vc,bp,Jd,uo,qs,Zd,Nw,Dw,xp,Ow,ho,wc,Bp,bc,fo,Q_,xc,Ep,Uw,Bc,eh,Cp,Ec,Rw,Wn,bt,ml,Cc,_c,Mw,_p,Lw,Sc,go,yl,Qw,jw,Js,pe,AC,oN,lJ,AJ,jy,cJ,uJ,dJ,lN,hJ,AN,cN,fJ,ui,sl,gJ,pJ,uN,mJ,Hy,dN;const qg=class qg{constructor(e,t,r,i,s,a,o,l,A,c,u,h,g,p,m,w){N(this,pe);N(this,mp,new AbortController);N(this,ns,null);N(this,yp,null);N(this,zn,new Map);N(this,Cr,new Map);N(this,vp,null);N(this,gl,null);N(this,wp,null);N(this,Ys,new ske);N(this,pl,null);N(this,yc,null);N(this,vc,null);N(this,bp,0);N(this,Jd,new Set);N(this,uo,null);N(this,qs,null);N(this,Zd,new Set);ce(this,"_editorUndoBar",null);N(this,Nw,!1);N(this,Dw,!1);N(this,xp,!1);N(this,Ow,null);N(this,ho,null);N(this,wc,null);N(this,Bp,null);N(this,bc,!1);N(this,fo,null);N(this,Q_,new ike);N(this,xc,!1);N(this,Ep,!1);N(this,Uw,!1);N(this,Bc,null);N(this,eh,null);N(this,Cp,null);N(this,Ec,null);N(this,Rw,null);N(this,Wn,Ve.NONE);N(this,bt,new Set);N(this,ml,null);N(this,Cc,null);N(this,_c,null);N(this,Mw,null);N(this,_p,null);N(this,Lw,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});N(this,Sc,[0,0]);N(this,go,null);N(this,yl,null);N(this,Qw,null);N(this,jw,null);N(this,Js,null);const v=this._signal=d(this,mp).signal;S(this,yl,e),S(this,Qw,t),S(this,jw,r),S(this,vp,i),S(this,pl,s),S(this,Cc,a),S(this,_p,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{S(this,Ep,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{S(this,Ep,!1)},{capture:!0,signal:v}),D(this,pe,cJ).call(this),D(this,pe,fJ).call(this),D(this,pe,lN).call(this),S(this,gl,l.annotationStorage),S(this,Ow,l.filterFactory),S(this,_c,A),S(this,Bp,c||null),S(this,Nw,u),S(this,Dw,h),S(this,xp,g),S(this,Rw,p||null),this.viewParameters={realScale:Zu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=qg.prototype,t=a=>d(a,yl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return et(this,"_keyboardManager",new Vx([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,yl).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,yl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,r,i,s,a,o,l,A;(e=d(this,Js))==null||e.resolve(),S(this,Js,null),(t=d(this,mp))==null||t.abort(),S(this,mp,null),this._signal=null;for(const c of d(this,Cr).values())c.destroy();d(this,Cr).clear(),d(this,zn).clear(),d(this,Zd).clear(),(r=d(this,Ec))==null||r.clear(),S(this,ns,null),d(this,bt).clear(),d(this,Ys).destroy(),(i=d(this,vp))==null||i.destroy(),(s=d(this,pl))==null||s.destroy(),(a=d(this,Cc))==null||a.destroy(),(o=d(this,fo))==null||o.hide(),S(this,fo,null),(l=d(this,Cp))==null||l.destroy(),S(this,Cp,null),S(this,yp,null),d(this,ho)&&(clearTimeout(d(this,ho)),S(this,ho,null)),d(this,go)&&(clearTimeout(d(this,go)),S(this,go,null)),(A=this._editorUndoBar)==null||A.destroy(),S(this,_p,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,Rw)}get useNewAltTextFlow(){return d(this,Dw)}get useNewAltTextWhenAddingImage(){return d(this,xp)}get hcmFilter(){return et(this,"hcmFilter",d(this,_c)?d(this,Ow).addHCMFilter(d(this,_c).foreground,d(this,_c).background):"none")}get direction(){return et(this,"direction",getComputedStyle(d(this,yl)).direction)}get _highlightColors(){return et(this,"_highlightColors",d(this,Bp)?new Map(d(this,Bp).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return et(this,"highlightColors",null);const t=new Map,r=!!d(this,_c);for(const[i,s]of e){const a=i.endsWith("_HCM");if(r&&a){t.set(i.replace("_HCM",""),s);continue}!r&&!a&&t.set(i,s)}return et(this,"highlightColors",t)}get highlightColorNames(){return et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,vc,e)}setMainHighlightColorPicker(e){S(this,Cp,e)}editAltText(e,t=!1){var r;(r=d(this,vp))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!d(this,pl)}editComment(e,t){var r;(r=d(this,pl))==null||r.open(this,e,t)}getSignature(e){var t;(t=d(this,Cc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Cc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,xp,t);break}}onPageChanging({pageNumber:e}){S(this,bp,e-1)}focusMainContainer(){d(this,yl).focus()}findParent(e,t){for(const r of d(this,Cr).values()){const{x:i,y:s,width:a,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+o)return r}return null}disableUserSelect(e=!1){d(this,Qw).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,Zd).add(e)}removeShouldRescale(e){d(this,Zd).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Zu.PDF_TO_CSS_UNITS;for(const r of d(this,Zd))r.onScaleChanging();(t=d(this,vc))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=r,l=r.toString(),c=D(this,pe,AC).call(this,r).closest(".textLayer"),u=this.getSelectionBoxes(c);if(!u)return;r.empty();const h=D(this,pe,oN).call(this,c),g=d(this,Wn)===Ve.NONE,p=()=>{const m=h==null?void 0:h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:u,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});g&&this.showAllEditors("highlight",!0,!0),t&&(m==null||m.editComment())};if(g){this.switchToMode(Ve.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}addToAnnotationStorage(e){!e.isEmpty()&&d(this,gl)&&!d(this,gl).has(e.id)&&d(this,gl).setValue(e.id,e)}a11yAlert(e,t=null){const r=d(this,jw);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,bc)&&(S(this,bc,!1),D(this,pe,jy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,bt))if(t.div.contains(e)){S(this,eh,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,eh))return;const[e,t]=d(this,eh);S(this,eh,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){D(this,pe,lN).call(this),D(this,pe,AN).call(this)}removeEditListeners(){D(this,pe,hJ).call(this),D(this,pe,cN).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of d(this,qs))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of d(this,qs))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=d(this,ns))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of d(this,bt)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of d(this,qs))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Ge(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const A=await i.deserialize(l);if(!A)return;s.push(A)}const a=()=>{for(const l of s)D(this,pe,uN).call(this,l);D(this,pe,dN).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){Ge(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Wn)!==Ve.NONE&&!this.isEditorHandlingKeyboard&&qg._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,bc)&&(S(this,bc,!1),D(this,pe,jy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(D(this,pe,uJ).call(this),D(this,pe,AN).call(this),D(this,pe,ui).call(this,{isEditing:d(this,Wn)!==Ve.NONE,isEmpty:D(this,pe,Hy).call(this),hasSomethingToUndo:d(this,Ys).hasSomethingToUndo(),hasSomethingToRedo:d(this,Ys).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,pe,dJ).call(this),D(this,pe,cN).call(this),D(this,pe,ui).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,qs)){S(this,qs,e);for(const t of d(this,qs))D(this,pe,sl).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,Q_).id}get currentLayer(){return d(this,Cr).get(d(this,bp))}getLayer(e){return d(this,Cr).get(e)}get currentPageIndex(){return d(this,bp)}addLayer(e){d(this,Cr).set(e.pageIndex,e),d(this,xc)?e.enable():e.disable()}removeLayer(e){d(this,Cr).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,s=!1){var a,o,l,A,c;if(d(this,Wn)!==e&&!(d(this,Js)&&(await d(this,Js).promise,!d(this,Js)))){if(S(this,Js,Promise.withResolvers()),(a=d(this,vc))==null||a.commitOrRemove(),d(this,Wn)===Ve.POPUP&&((o=d(this,pl))==null||o.hideSidebar()),S(this,Wn,e),e===Ve.NONE){this.setEditingState(!1),D(this,pe,pJ).call(this),(l=this._editorUndoBar)==null||l.hide(),d(this,Js).resolve();return}e===Ve.SIGNATURE&&await((A=d(this,Cc))==null?void 0:A.loadSignatures()),e===Ve.POPUP&&(d(this,yp)||S(this,yp,await d(this,_p).getAnnotationsByType(new Set(d(this,qs).map(u=>u._editorType)))),(c=d(this,pl))==null||c.showSidebar(d(this,yp))),this.setEditingState(!0),await D(this,pe,gJ).call(this),this.unselectAll();for(const u of d(this,Cr).values())u.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),d(this,Js).resolve();return}for(const u of d(this,zn).values())u.annotationElementId===t||u.id===t?(this.setSelected(u),s?u.editComment():i&&u.enterInEditMode()):u.unselect();d(this,Js).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,Wn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(d(this,qs)){switch(e){case st.CREATE:this.currentLayer.addNewEditor(t);return;case st.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,Mw)||S(this,Mw,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of d(this,bt))r.updateParams(e,t);else for(const r of d(this,qs))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var s;for(const a of d(this,zn).values())a.editorType===e&&a.show(t);(((s=d(this,Mw))==null?void 0:s.get(st.HIGHLIGHT_SHOW_ALL))??!0)!==t&&D(this,pe,sl).call(this,[[st.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,Uw)!==e){S(this,Uw,e);for(const t of d(this,Cr).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of d(this,zn).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return d(this,zn).get(e)}addEditor(e){d(this,zn).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(d(this,ho)&&clearTimeout(d(this,ho)),S(this,ho,setTimeout(()=>{this.focusMainContainer(),S(this,ho,null)},0))),d(this,zn).delete(e.id),e.annotationElementId&&((t=d(this,Ec))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,Jd).has(e.annotationElementId))&&((r=d(this,gl))==null||r.remove(e.id))}addDeletedAnnotationElement(e){d(this,Jd).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,Jd).has(e)}removeDeletedAnnotationElement(e){d(this,Jd).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,ns)!==e&&(S(this,ns,e),e&&D(this,pe,sl).call(this,e.propertiesToUpdate))}updateUI(e){d(this,pe,mJ)===e&&D(this,pe,sl).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){D(this,pe,sl).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,bt).has(e)){d(this,bt).delete(e),e.unselect(),D(this,pe,ui).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,bt).add(e),e.select(),D(this,pe,sl).call(this,e.propertiesToUpdate),D(this,pe,ui).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,vc))==null||t.commitOrRemove();for(const r of d(this,bt))r!==e&&r.unselect();d(this,bt).clear(),d(this,bt).add(e),e.select(),D(this,pe,sl).call(this,e.propertiesToUpdate),D(this,pe,ui).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,bt).has(e)}get firstSelectedEditor(){return d(this,bt).values().next().value}unselect(e){e.unselect(),d(this,bt).delete(e),D(this,pe,ui).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,bt).size!==0}get isEnterHandled(){return d(this,bt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Ys).undo(),D(this,pe,ui).call(this,{hasSomethingToUndo:d(this,Ys).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,pe,Hy).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Ys).redo(),D(this,pe,ui).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Ys).hasSomethingToRedo(),isEmpty:D(this,pe,Hy).call(this)})}addCommands(e){d(this,Ys).add(e),D(this,pe,ui).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,pe,Hy).call(this)})}cleanUndoStack(e){d(this,Ys).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,bt)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)D(this,pe,uN).call(this,a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=d(this,ns))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,ns)||this.hasSelection}selectAll(){for(const e of d(this,bt))e.commit();D(this,pe,dN).call(this,d(this,zn).values())}unselectAll(){var e;if(!(d(this,ns)&&(d(this,ns).commitOrRemove(),d(this,Wn)!==Ve.NONE))&&!((e=d(this,vc))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,bt))t.unselect();d(this,bt).clear(),D(this,pe,ui).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;d(this,Sc)[0]+=e,d(this,Sc)[1]+=t;const[i,s]=d(this,Sc),a=[...d(this,bt)],o=1e3;d(this,go)&&clearTimeout(d(this,go)),S(this,go,setTimeout(()=>{S(this,go,null),d(this,Sc)[0]=d(this,Sc)[1]=0,this.addCommands({cmd:()=>{for(const l of a)d(this,zn).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)d(this,zn).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,uo,new Map);for(const e of d(this,bt))d(this,uo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,uo))return!1;this.disableUserSelect(!1);const e=d(this,uo);S(this,uo,null);let t=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,t||(t=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(i,s,a,o)=>{if(d(this,zn).has(i.id)){const l=d(this,Cr).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)r(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)r(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,uo))for(const r of d(this,uo).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,bt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,ns)===e}getActive(){return d(this,ns)}getMode(){return d(this,Wn)}get imageManager(){return et(this,"imageManager",new sN)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let A=0,c=t.rangeCount;A<c;A++)if(!e.contains(t.getRangeAt(A).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(A,c,u,h)=>({x:(c-i)/a,y:1-(A+u-r)/s,width:h/a,height:u/s});break;case"180":o=(A,c,u,h)=>({x:1-(A+u-r)/s,y:1-(c+h-i)/a,width:u/s,height:h/a});break;case"270":o=(A,c,u,h)=>({x:1-(c+h-i)/a,y:(A-r)/s,width:h/a,height:u/s});break;default:o=(A,c,u,h)=>({x:(A-r)/s,y:(c-i)/a,width:u/s,height:h/a});break}const l=[];for(let A=0,c=t.rangeCount;A<c;A++){const u=t.getRangeAt(A);if(!u.collapsed)for(const{x:h,y:g,width:p,height:m}of u.getClientRects())p===0||m===0||l.push(o(h,g,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,wp)||S(this,wp,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,wp))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=d(this,wp))==null?void 0:i.get(e.data.id);if(!t)return;const r=d(this,gl).getRawValue(t);r&&(d(this,Wn)===Ve.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var s;const i=(s=d(this,Ec))==null?void 0:s.get(e);i&&(i.setCanvas(t,r),d(this,Ec).delete(e))}addMissingCanvas(e,t){(d(this,Ec)||S(this,Ec,new Map)).set(e,t)}};mp=new WeakMap,ns=new WeakMap,yp=new WeakMap,zn=new WeakMap,Cr=new WeakMap,vp=new WeakMap,gl=new WeakMap,wp=new WeakMap,Ys=new WeakMap,pl=new WeakMap,yc=new WeakMap,vc=new WeakMap,bp=new WeakMap,Jd=new WeakMap,uo=new WeakMap,qs=new WeakMap,Zd=new WeakMap,Nw=new WeakMap,Dw=new WeakMap,xp=new WeakMap,Ow=new WeakMap,ho=new WeakMap,wc=new WeakMap,Bp=new WeakMap,bc=new WeakMap,fo=new WeakMap,Q_=new WeakMap,xc=new WeakMap,Ep=new WeakMap,Uw=new WeakMap,Bc=new WeakMap,eh=new WeakMap,Cp=new WeakMap,Ec=new WeakMap,Rw=new WeakMap,Wn=new WeakMap,bt=new WeakMap,ml=new WeakMap,Cc=new WeakMap,_c=new WeakMap,Mw=new WeakMap,_p=new WeakMap,Lw=new WeakMap,Sc=new WeakMap,go=new WeakMap,yl=new WeakMap,Qw=new WeakMap,jw=new WeakMap,Js=new WeakMap,pe=new WeakSet,AC=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},oN=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of d(this,Cr).values())if(r.hasTextLayer(e))return r;return null},lJ=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=D(this,pe,AC).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(d(this,fo)||S(this,fo,new rke(this)),d(this,fo).show(r,i,this.direction==="ltr"))},AJ=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){d(this,ml)&&((s=d(this,fo))==null||s.hide(),S(this,ml,null),D(this,pe,ui).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,ml))return;const i=D(this,pe,AC).call(this,e).closest(".textLayer");if(!i){d(this,ml)&&((a=d(this,fo))==null||a.hide(),S(this,ml,null),D(this,pe,ui).call(this,{hasSelectedText:!1}));return}if((o=d(this,fo))==null||o.hide(),S(this,ml,t),D(this,pe,ui).call(this,{hasSelectedText:!0}),!(d(this,Wn)!==Ve.HIGHLIGHT&&d(this,Wn)!==Ve.NONE)&&(d(this,Wn)===Ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,bc,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Wn)===Ve.HIGHLIGHT?D(this,pe,oN).call(this,i):null;if(l==null||l.toggleDrawing(),d(this,Ep)){const A=new AbortController,c=this.combinedSignal(A),u=h=>{h.type==="pointerup"&&h.button!==0||(A.abort(),l==null||l.toggleDrawing(!0),h.type==="pointerup"&&D(this,pe,jy).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else l==null||l.toggleDrawing(!0),D(this,pe,jy).call(this,"main_toolbar")}},jy=function(e=""){d(this,Wn)===Ve.HIGHLIGHT?this.highlightSelection(e):d(this,Nw)&&D(this,pe,lJ).call(this)},cJ=function(){document.addEventListener("selectionchange",D(this,pe,AJ).bind(this),{signal:this._signal})},uJ=function(){if(d(this,wc))return;S(this,wc,new AbortController);const e=this.combinedSignal(d(this,wc));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},dJ=function(){var e;(e=d(this,wc))==null||e.abort(),S(this,wc,null)},lN=function(){if(d(this,Bc))return;S(this,Bc,new AbortController);const e=this.combinedSignal(d(this,Bc));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},hJ=function(){var e;(e=d(this,Bc))==null||e.abort(),S(this,Bc,null)},AN=function(){if(d(this,yc))return;S(this,yc,new AbortController);const e=this.combinedSignal(d(this,yc));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},cN=function(){var e;(e=d(this,yc))==null||e.abort(),S(this,yc,null)},fJ=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ui=function(e){Object.entries(e).some(([r,i])=>d(this,Lw)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Lw),e)}),d(this,Wn)===Ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&D(this,pe,sl).call(this,[[st.HIGHLIGHT_FREE,!0]]))},sl=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},gJ=async function(){if(!d(this,xc)){S(this,xc,!0);const e=[];for(const t of d(this,Cr).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,zn).values())t.enable()}},pJ=function(){if(this.unselectAll(),d(this,xc)){S(this,xc,!1);for(const e of d(this,Cr).values())e.disable();for(const e of d(this,zn).values())e.disable()}},uN=function(e){const t=d(this,Cr).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},mJ=function(){let e=null;for(e of d(this,bt));return e},Hy=function(){if(d(this,zn).size===0)return!0;if(d(this,zn).size===1)for(const e of d(this,zn).values())return e.isEmpty();return!1},dN=function(e){for(const t of d(this,bt))t.unselect();d(this,bt).clear();for(const t of e)t.isEmpty()||(d(this,bt).add(t),t.select());D(this,pe,ui).call(this,{hasSelectedEditor:this.hasSelection})},ce(qg,"TRANSLATE_SMALL",1),ce(qg,"TRANSLATE_BIG",10);let Nf=qg;var lr,po,Na,Sp,mo,rs,Ip,yo,Di,vl,th,vo,Ic,Xa,Vy,cC;const di=class di{constructor(e){N(this,Xa);N(this,lr,null);N(this,po,!1);N(this,Na,null);N(this,Sp,null);N(this,mo,null);N(this,rs,null);N(this,Ip,!1);N(this,yo,null);N(this,Di,null);N(this,vl,null);N(this,th,null);N(this,vo,!1);S(this,Di,e),S(this,vo,e._uiManager.useNewAltTextFlow),d(di,Ic)||S(di,Ic,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){di._l10n??(di._l10n=e)}async render(){const e=S(this,Na,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,Sp,document.createElement("span"));e.append(t),d(this,vo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(di,Ic).missing),t.setAttribute("data-l10n-id",d(di,Ic)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=d(this,Di)._uiManager._signal;e.addEventListener("contextmenu",Ea,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),d(this,Di)._uiManager.editAltText(d(this,Di)),d(this,vo)&&d(this,Di)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Xa,Vy)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,Ip,!0),i(s))},{signal:r}),await D(this,Xa,cC).call(this),e}finish(){d(this,Na)&&(d(this,Na).focus({focusVisible:d(this,Ip)}),S(this,Ip,!1))}isEmpty(){return d(this,vo)?d(this,lr)===null:!d(this,lr)&&!d(this,po)}hasData(){return d(this,vo)?d(this,lr)!==null||!!d(this,vl):this.isEmpty()}get guessedText(){return d(this,vl)}async setGuessedText(e){d(this,lr)===null&&(S(this,vl,e),S(this,th,await di._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),D(this,Xa,cC).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,vo)||d(this,lr)){(t=d(this,yo))==null||t.remove(),S(this,yo,null);return}if(!d(this,yo)){const r=S(this,yo,document.createElement("div"));r.className="noAltTextBadge",d(this,Di).div.append(r)}d(this,yo).classList.toggle("hidden",!e)}serialize(e){let t=d(this,lr);return!e&&d(this,vl)===t&&(t=d(this,th)),{altText:t,decorative:d(this,po),guessedText:d(this,vl),textWithDisclaimer:d(this,th)}}get data(){return{altText:d(this,lr),decorative:d(this,po)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(S(this,vl,r),S(this,th,i)),!(d(this,lr)===e&&d(this,po)===t)&&(s||(S(this,lr,e),S(this,po,t)),D(this,Xa,cC).call(this))}toggle(e=!1){d(this,Na)&&(!e&&d(this,rs)&&(clearTimeout(d(this,rs)),S(this,rs,null)),d(this,Na).disabled=!e)}shown(){d(this,Di)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Xa,Vy)}})}destroy(){var e,t;(e=d(this,Na))==null||e.remove(),S(this,Na,null),S(this,Sp,null),S(this,mo,null),(t=d(this,yo))==null||t.remove(),S(this,yo,null)}};lr=new WeakMap,po=new WeakMap,Na=new WeakMap,Sp=new WeakMap,mo=new WeakMap,rs=new WeakMap,Ip=new WeakMap,yo=new WeakMap,Di=new WeakMap,vl=new WeakMap,th=new WeakMap,vo=new WeakMap,Ic=new WeakMap,Xa=new WeakSet,Vy=function(){return d(this,lr)&&"added"||d(this,lr)===null&&this.guessedText&&"review"||"missing"},cC=async function(){var i,s,a;const e=d(this,Na);if(!e)return;if(d(this,vo)){if(e.classList.toggle("done",!!d(this,lr)),e.setAttribute("data-l10n-id",d(di,Ic)[d(this,Xa,Vy)]),(i=d(this,Sp))==null||i.setAttribute("data-l10n-id",d(di,Ic)[`${d(this,Xa,Vy)}-label`]),!d(this,lr)){(s=d(this,mo))==null||s.remove();return}}else{if(!d(this,lr)&&!d(this,po)){e.classList.remove("done"),(a=d(this,mo))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,mo);if(!t){S(this,mo,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,Di).id}`;const o=100,l=d(this,Di)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,rs)),S(this,rs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,rs,setTimeout(()=>{S(this,rs,null),d(this,mo).classList.add("show"),d(this,Di)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var A;d(this,rs)&&(clearTimeout(d(this,rs)),S(this,rs,null)),(A=d(this,mo))==null||A.classList.remove("show")},{signal:l})}d(this,po)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,lr)),t.parentNode||e.append(t);const r=d(this,Di).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},N(di,Ic,null),ce(di,"_l10n",null);let S_=di;var wo,nh,Da,Hw,wl,Tp,Tc;class bE{constructor(e){N(this,wo,null);N(this,nh,!1);N(this,Da,null);N(this,Hw,null);N(this,wl,null);N(this,Tp,null);N(this,Tc,!1);S(this,Da,e),this.toolbar=null}render(){if(!d(this,Da)._uiManager.hasCommentManager())return null;const e=S(this,wo,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=d(this,Da)._uiManager._signal;if(!(t instanceof AbortSignal)||t.aborted)return e;e.addEventListener("contextmenu",Ea,{signal:t}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:t});const r=i=>{i.preventDefault(),this.edit()};return e.addEventListener("click",r,{capture:!0,signal:t}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,nh,!0),r(i))},{signal:t}),e}edit(){const{bottom:e,left:t,right:r}=d(this,Da).getClientDimensions(),i={top:e};d(this,Da)._uiManager.direction==="ltr"?i.right=r:i.left=t,d(this,Da)._uiManager.editComment(d(this,Da),i)}finish(){d(this,wo)&&(d(this,wo).focus({focusVisible:d(this,nh)}),S(this,nh,!1))}isDeleted(){return d(this,Tc)||d(this,wl)===""}hasBeenEdited(){return this.isDeleted()||d(this,wl)!==d(this,Hw)}serialize(){return this.data}get data(){return{text:d(this,wl),date:d(this,Tp),deleted:d(this,Tc)}}set data(e){if(e===null){S(this,wl,""),S(this,Tc,!0);return}S(this,wl,e),S(this,Tp,new Date),S(this,Tc,!1)}setInitialText(e){S(this,Hw,e),this.data=e}toggle(e=!1){d(this,wo)&&(d(this,wo).disabled=!e)}shown(){}destroy(){var e;(e=d(this,wo))==null||e.remove(),S(this,wo,null),S(this,wl,""),S(this,Tp,null),S(this,Da,null),S(this,nh,!1),S(this,Tc,!1)}}wo=new WeakMap,nh=new WeakMap,Da=new WeakMap,Hw=new WeakMap,wl=new WeakMap,Tp=new WeakMap,Tc=new WeakMap;var Pp,rh,Vw,Kw,$w,Gw,zw,bl,ih,xl,sh,Bl,ed,yJ,vJ,wJ;const HM=class HM{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){N(this,ed);N(this,Pp);N(this,rh,!1);N(this,Vw,null);N(this,Kw);N(this,$w);N(this,Gw);N(this,zw);N(this,bl,null);N(this,ih);N(this,xl,null);N(this,sh);N(this,Bl,null);S(this,Pp,e),S(this,Vw,r),S(this,Kw,t),S(this,$w,i),S(this,Gw,s),S(this,zw,a),S(this,sh,new AbortController),S(this,ih,AbortSignal.any([o,d(this,sh).signal])),e.addEventListener("touchstart",D(this,ed,yJ).bind(this),{passive:!1,signal:d(this,ih)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wo.pixelRatio}destroy(){var e,t;(e=d(this,sh))==null||e.abort(),S(this,sh,null),(t=d(this,bl))==null||t.abort(),S(this,bl,null)}};Pp=new WeakMap,rh=new WeakMap,Vw=new WeakMap,Kw=new WeakMap,$w=new WeakMap,Gw=new WeakMap,zw=new WeakMap,bl=new WeakMap,ih=new WeakMap,xl=new WeakMap,sh=new WeakMap,Bl=new WeakMap,ed=new WeakSet,yJ=function(e){var i,s,a;if((i=d(this,Kw))!=null&&i.call(this))return;if(e.touches.length===1){if(d(this,bl))return;const o=S(this,bl,new AbortController),l=AbortSignal.any([d(this,ih),o.signal]),A=d(this,Pp),c={capture:!0,signal:l,passive:!1},u=h=>{var g;h.pointerType==="touch"&&((g=d(this,bl))==null||g.abort(),S(this,bl,null))};A.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Un(h),u(h))},c),A.addEventListener("pointerup",u,c),A.addEventListener("pointercancel",u,c);return}if(!d(this,Bl)){S(this,Bl,new AbortController);const o=AbortSignal.any([d(this,ih),d(this,Bl).signal]),l=d(this,Pp),A={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",D(this,ed,vJ).bind(this),A);const c=D(this,ed,wJ).bind(this);l.addEventListener("touchend",c,A),l.addEventListener("touchcancel",c,A),A.capture=!0,l.addEventListener("pointerdown",Un,A),l.addEventListener("pointermove",Un,A),l.addEventListener("pointercancel",Un,A),l.addEventListener("pointerup",Un,A),(s=d(this,$w))==null||s.call(this)}if(Un(e),e.touches.length!==2||(a=d(this,Vw))!=null&&a.call(this)){S(this,xl,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),S(this,xl,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},vJ=function(e){var E;if(!d(this,xl)||e.touches.length!==2)return;Un(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:a,screenY:o}=r,l=d(this,xl),{touch0X:A,touch0Y:c,touch1X:u,touch1Y:h}=l,g=u-A,p=h-c,m=a-i,w=o-s,v=Math.hypot(m,w)||1,b=Math.hypot(g,p)||1;if(!d(this,rh)&&Math.abs(b-v)<=HM.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!d(this,rh)){S(this,rh,!0);return}const x=[(i+a)/2,(s+o)/2];(E=d(this,Gw))==null||E.call(this,x,b,v)},wJ=function(e){var t;e.touches.length>=2||(d(this,Bl)&&(d(this,Bl).abort(),S(this,Bl,null),(t=d(this,zw))==null||t.call(this)),d(this,xl)&&(Un(e),S(this,xl,null),S(this,rh,!1)))};let I_=HM;var ah,Oa,Jt,_r,Fp,Pc,Ww,oh,Sr,lh,El,Fc,Xw,Ah,is,Yw,ch,Cl,bo,kp,Np,Zs,uh,qw,j_,Qe,hN,Jw,fN,uC,bJ,xJ,gN,dC,pN,BJ,EJ,CJ,mN,_J,yN,SJ,IJ,TJ,vN,Ky;const Xe=class Xe{constructor(e){N(this,Qe);N(this,ah,null);N(this,Oa,null);N(this,Jt,null);N(this,_r,null);N(this,Fp,!1);N(this,Pc,null);N(this,Ww,"");N(this,oh,!1);N(this,Sr,null);N(this,lh,null);N(this,El,null);N(this,Fc,null);N(this,Xw,"");N(this,Ah,!1);N(this,is,null);N(this,Yw,!1);N(this,ch,!1);N(this,Cl,!1);N(this,bo,null);N(this,kp,0);N(this,Np,0);N(this,Zs,null);N(this,uh,null);ce(this,"isSelected",!1);ce(this,"_isCopy",!1);ce(this,"_editToolbar",null);ce(this,"_initialOptions",Object.create(null));ce(this,"_initialData",null);ce(this,"_isVisible",!0);ce(this,"_uiManager",null);ce(this,"_focusEventsAllowed",!0);N(this,qw,!1);N(this,j_,Xe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Xe.prototype._resizeWithKeyboard,t=Nf.TRANSLATE_SMALL,r=Nf.TRANSLATE_BIG;return et(this,"_resizerKeyboardManager",new Vx([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Xe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new ake({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Xe._l10n??(Xe._l10n=e),Xe._l10nResizer||(Xe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Xe._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Xe._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ft("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,qw)}set _isDraggable(e){var t;S(this,qw,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,j_)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):D(this,Qe,Ky).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Ah)?S(this,Ah,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){D(this,Qe,hN).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,is)||S(this,is,[this.x,this.y,this.width,this.height]),D(this,Qe,hN).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,is)||S(this,is,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,A]=this.getBaseTranslation();a+=l,o+=A;const{style:c}=r;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,is)&&(d(this,is)[0]!==this.x||d(this,is)[1]!==this.y)}get _hasBeenResized(){return!!d(this,is)&&(d(this,is)[2]!==this.width||d(this,is)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Xe,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=r,l*=i,s*=r,a*=i,this._mustFixPosition)switch(e){case 0:s=vi(s,0,r-o),a=vi(a,0,i-l);break;case 90:s=vi(s,0,r-l),a=vi(a,o,i);break;case 180:s=vi(s,o,r),a=vi(a,l,i);break;case 270:s=vi(s,l,r),a=vi(a,0,i-o);break}this.x=s/=r,this.y=a/=i;const[A,c]=this.getBaseTranslation();s+=A,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return D(r=Xe,Jw,fN).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return D(r=Xe,Jw,fN).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/r).toFixed(2)}%`,d(this,oh)||(s.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,i=r.endsWith("%"),s=!d(this,oh)&&t.endsWith("%");if(i&&s)return;const[a,o]=this.parentDimensions;i||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!d(this,oh)&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,Jt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,ch))return this._editToolbar;this._editToolbar=new rN(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,Jt))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,Jt)||(S_.initialize(Xe._l10n),S(this,Jt,new S_(this)),d(this,ah)&&(d(this,Jt).data=d(this,ah),S(this,ah,null))),d(this,Jt)}get altTextData(){var e;return(e=d(this,Jt))==null?void 0:e.data}set altTextData(e){d(this,Jt)&&(d(this,Jt).data=e)}get guessedAltText(){var e;return(e=d(this,Jt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,Jt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,Jt))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,Jt)&&!d(this,Jt).isEmpty()}hasAltTextData(){var e;return((e=d(this,Jt))==null?void 0:e.hasData())??!1}addCommentButton(){return d(this,_r)?d(this,_r):S(this,_r,new bE(this))}get commentColor(){return null}get comment(){const e=d(this,_r);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){d(this,_r)||S(this,_r,new bE(this)),d(this,_r).data=e}setCommentData(e){d(this,_r)||S(this,_r,new bE(this)),d(this,_r).setInitialText(e)}get hasEditedComment(){var e;return(e=d(this,_r))==null?void 0:e.hasBeenEdited()}async editComment(){d(this,_r)||S(this,_r,new bE(this)),d(this,_r).edit()}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,A=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,A,i]}}}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,Fp)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),D(this,Qe,yN).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),aJ(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,uh)||S(this,uh,new I_({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,Qe,BJ).bind(this),onPinching:D(this,Qe,EJ).bind(this),onPinchEnd:D(this,Qe,CJ).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Vr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Ah,!0),this._isDraggable){D(this,Qe,_J).call(this,e);return}D(this,Qe,mN).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,bo)&&clearTimeout(d(this,bo)),S(this,bo,setTimeout(()=>{var e;S(this,bo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,A=e/i,c=t/i,u=this.x*s,h=this.y*a,g=this.width*s,p=this.height*a;switch(r){case 0:return[u+A+o,a-h-c-p+l,u+A+g+o,a-h-c+l];case 90:return[u+c+o,a-h+A+l,u+c+p+o,a-h+A+g+l];case 180:return[u-A-g+o,a-h+c+l,u-A+o,a-h+c+p+l];case 270:return[u-c-p+o,a-h-A-g+l,u-c+o,a-h-A+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,a]=e,o=s-r,l=a-i;switch(this.rotation){case 0:return[r,t-a,o,l];case 90:return[r,t-i,l,o];case 180:return[s,t-i,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,ch,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,ch,!1),!0):!1}isInEditMode(){return d(this,ch)}shouldGetKeyboardEvents(){return d(this,Cl)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&r>0}rebuild(){D(this,Qe,yN).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ft("An editor must be serializable")}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});i.rotation=e.rotation,S(i,ah,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,A,c]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=A/s,i.height=c/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Fc))==null||e.abort(),S(this,Fc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,bo)&&(clearTimeout(d(this,bo)),S(this,bo,null)),D(this,Qe,Ky).call(this),this.removeEditToolbar(),d(this,Zs)){for(const r of d(this,Zs).values())clearTimeout(r);S(this,Zs,null)}this.parent=null,(t=d(this,uh))==null||t.destroy(),S(this,uh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,Qe,bJ).call(this),d(this,Sr).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,El,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,Sr).children;if(!d(this,Oa)){S(this,Oa,Array.from(t));const a=D(this,Qe,SJ).bind(this),o=D(this,Qe,IJ).bind(this),l=this._uiManager._signal;for(const A of d(this,Oa)){const c=A.getAttribute("data-resizer-name");A.setAttribute("role","spinbutton"),A.addEventListener("keydown",a,{signal:l}),A.addEventListener("blur",o,{signal:l}),A.addEventListener("focus",D(this,Qe,TJ).bind(this,c),{signal:l}),A.setAttribute("data-l10n-id",Xe._l10nResizer[c])}}const r=d(this,Oa)[0];let i=0;for(const a of t){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(d(this,Oa).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)d(this,Sr).append(d(this,Sr).firstChild);else if(s>i)for(let o=0;o<s-i;o++)d(this,Sr).firstChild.before(d(this,Sr).lastChild);let a=0;for(const o of t){const A=d(this,Oa)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Xe._l10nResizer[A])}}D(this,Qe,vN).call(this,0),S(this,Cl,!0),d(this,Sr).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,Cl)&&D(this,Qe,pN).call(this,d(this,Xw),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Qe,Ky).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(r=d(this,Jt))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,i,s;this.isSelected&&(this.isSelected=!1,(e=d(this,Sr))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=d(this,Jt))==null||s.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,Yw)}set isEditing(e){S(this,Yw,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,oh,!0);const r=e/t,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,Zs)||S(this,Zs,new Map);const{action:r}=e;let i=d(this,Zs).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),d(this,Zs).delete(r),d(this,Zs).size===0&&S(this,Zs,null)},Xe._telemetryTimeout),d(this,Zs).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Fp,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Fp,!0)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ah=new WeakMap,Oa=new WeakMap,Jt=new WeakMap,_r=new WeakMap,Fp=new WeakMap,Pc=new WeakMap,Ww=new WeakMap,oh=new WeakMap,Sr=new WeakMap,lh=new WeakMap,El=new WeakMap,Fc=new WeakMap,Xw=new WeakMap,Ah=new WeakMap,is=new WeakMap,Yw=new WeakMap,ch=new WeakMap,Cl=new WeakMap,bo=new WeakMap,kp=new WeakMap,Np=new WeakMap,Zs=new WeakMap,uh=new WeakMap,qw=new WeakMap,j_=new WeakMap,Qe=new WeakSet,hN=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Jw=new WeakSet,fN=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},uC=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},bJ=function(){if(d(this,Sr))return;S(this,Sr,document.createElement("div")),d(this,Sr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");d(this,Sr).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",D(this,Qe,xJ).bind(this,r),{signal:t}),i.addEventListener("contextmenu",Ea,{signal:t}),i.tabIndex=-1}this.div.prepend(d(this,Sr))},xJ=function(e,t){var c;t.preventDefault();const{isMac:r}=Vr.platform;if(t.button!==0||t.ctrlKey&&r)return;(c=d(this,Jt))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,S(this,lh,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,Qe,pN).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Un,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ea,{signal:a}),S(this,El,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const A=()=>{var u;s.abort(),this.parent.togglePointerEvents(!0),(u=d(this,Jt))==null||u.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,D(this,Qe,dC).call(this)};window.addEventListener("pointerup",A,{signal:a}),window.addEventListener("blur",A,{signal:a})},gN=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*r,a*i),this.fixAndSetPosition(),this._onResized()},dC=function(){if(!d(this,El))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=d(this,El);S(this,El,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===r&&l===i||this.addCommands({cmd:D(this,Qe,gN).bind(this,s,a,o,l),undo:D(this,Qe,gN).bind(this,e,t,r,i),mustExec:!0})},pN=function(e,t){const[r,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,A=Xe.MIN_SIZE/r,c=Xe.MIN_SIZE/i,u=D(this,Qe,uC).call(this,this.rotation),h=(te,ee)=>[u[0]*te+u[2]*ee,u[1]*te+u[3]*ee],g=D(this,Qe,uC).call(this,360-this.rotation),p=(te,ee)=>[g[0]*te+g[2]*ee,g[1]*te+g[3]*ee];let m,w,v=!1,b=!1;switch(e){case"topLeft":v=!0,m=(te,ee)=>[0,0],w=(te,ee)=>[te,ee];break;case"topMiddle":m=(te,ee)=>[te/2,0],w=(te,ee)=>[te/2,ee];break;case"topRight":v=!0,m=(te,ee)=>[te,0],w=(te,ee)=>[0,ee];break;case"middleRight":b=!0,m=(te,ee)=>[te,ee/2],w=(te,ee)=>[0,ee/2];break;case"bottomRight":v=!0,m=(te,ee)=>[te,ee],w=(te,ee)=>[0,0];break;case"bottomMiddle":m=(te,ee)=>[te/2,ee],w=(te,ee)=>[te/2,0];break;case"bottomLeft":v=!0,m=(te,ee)=>[0,ee],w=(te,ee)=>[te,0];break;case"middleLeft":b=!0,m=(te,ee)=>[0,ee/2],w=(te,ee)=>[te,ee/2];break}const x=m(o,l),E=w(o,l);let I=h(...E);const P=Xe._round(s+I[0]),_=Xe._round(a+I[1]);let T=1,k=1,O,U;if(t.fromKeyboard)({deltaX:O,deltaY:U}=t);else{const{screenX:te,screenY:ee}=t,[Z,ae]=d(this,lh);[O,U]=this.screenToPageTranslation(te-Z,ee-ae),d(this,lh)[0]=te,d(this,lh)[1]=ee}if([O,U]=p(O/r,U/i),v){const te=Math.hypot(o,l);T=k=Math.max(Math.min(Math.hypot(E[0]-x[0]-O,E[1]-x[1]-U)/te,1/o,1/l),A/o,c/l)}else b?T=vi(Math.abs(E[0]-x[0]-O),A,1)/o:k=vi(Math.abs(E[1]-x[1]-U),c,1)/l;const L=Xe._round(o*T),R=Xe._round(l*k);I=h(...w(L,R));const re=P-I[0],he=_-I[1];d(this,is)||S(this,is,[this.x,this.y,this.width,this.height]),this.width=L,this.height=R,this.x=re,this.y=he,this.setDims(r*L,i*R),this.fixAndSetPosition(),this._onResizing()},BJ=function(){var e;S(this,El,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,Jt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},EJ=function(e,t,r){let s=.7*(r/t)+1-.7;if(s===1)return;const a=D(this,Qe,uC).call(this,this.rotation),o=(P,_)=>[a[0]*P+a[2]*_,a[1]*P+a[3]*_],[l,A]=this.parentDimensions,c=this.x,u=this.y,h=this.width,g=this.height,p=Xe.MIN_SIZE/l,m=Xe.MIN_SIZE/A;s=Math.max(Math.min(s,1/h,1/g),p/h,m/g);const w=Xe._round(h*s),v=Xe._round(g*s);if(w===h&&v===g)return;d(this,is)||S(this,is,[c,u,h,g]);const b=o(h/2,g/2),x=Xe._round(c+b[0]),E=Xe._round(u+b[1]),I=o(w/2,v/2);this.x=x-I[0],this.y=E-I[1],this.width=w,this.height=v,this.setDims(l*w,A*v),this.fixAndSetPosition(),this._onResizing()},CJ=function(){var e;(e=d(this,Jt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),D(this,Qe,dC).call(this)},mN=function(e){const{isMac:t}=Vr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},_J=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=A=>{i.abort(),S(this,Pc,null),S(this,Ah,!1),this._uiManager.endDragSession()||D(this,Qe,mN).call(this,A),r&&this._onStopDragging()};t&&(S(this,kp,e.clientX),S(this,Np,e.clientY),S(this,Pc,e.pointerId),S(this,Ww,e.pointerType),window.addEventListener("pointermove",A=>{r||(r=!0,this._onStartDragging());const{clientX:c,clientY:u,pointerId:h}=A;if(h!==d(this,Pc)){Un(A);return}const[g,p]=this.screenToPageTranslation(c-d(this,kp),u-d(this,Np));S(this,kp,c),S(this,Np,u),this._uiManager.dragSelectedEditors(g,p)},a),window.addEventListener("touchmove",Un,a),window.addEventListener("pointerdown",A=>{A.pointerType===d(this,Ww)&&(d(this,uh)||A.isPrimary)&&o(A),Un(A)},a));const l=A=>{if(!d(this,Pc)||d(this,Pc)===A.pointerId){o(A);return}Un(A)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},yN=function(){if(d(this,Fc)||!this.div)return;S(this,Fc,new AbortController);const e=this._uiManager.combinedSignal(d(this,Fc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},SJ=function(e){Xe._resizerKeyboardManager.exec(this,e)},IJ=function(e){var t;d(this,Cl)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,Sr)&&D(this,Qe,Ky).call(this)},TJ=function(e){S(this,Xw,d(this,Cl)?e:"")},vN=function(e){if(d(this,Oa))for(const t of d(this,Oa))t.tabIndex=e},Ky=function(){S(this,Cl,!1),D(this,Qe,vN).call(this,-1),D(this,Qe,dC).call(this)},N(Xe,Jw),ce(Xe,"_l10n",null),ce(Xe,"_l10nResizer",null),ce(Xe,"_borderLineWidth",-1),ce(Xe,"_colorManager",new aN),ce(Xe,"_zIndex",1),ce(Xe,"_telemetryTimeout",1e3);let Vt=Xe;class ake extends Vt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const PV=3285377520,$s=4294901760,oo=65535;class PJ{constructor(e){this.h1=e?e&4294967295:PV,this.h2=e?e&4294967295:PV}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,w=e.length;m<w;m++){const v=e.charCodeAt(m);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,A=this.h1,c=this.h2;const u=3432918353,h=461845907,g=u&oo,p=h&oo;for(let m=0;m<i;m++)m&1?(o=a[m],o=o*u&$s|o*g&oo,o=o<<15|o>>>17,o=o*h&$s|o*p&oo,A^=o,A=A<<13|A>>>19,A=A*5+3864292196):(l=a[m],l=l*u&$s|l*g&oo,l=l<<15|l>>>17,l=l*h&$s|l*p&oo,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,s){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*u&$s|o*g&oo,o=o<<15|o>>>17,o=o*h&$s|o*p&oo,i&1?A^=o:c^=o}this.h1=A,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&$s|e*36045&oo,t=t*4283543511&$s|((t<<16|e>>>16)*2950163797&$s)>>>16,e^=t>>>1,e=e*444984403&$s|e*60499&oo,t=t*3301882366&$s|((t<<16|e>>>16)*3120437893&$s)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const wN=Object.freeze({map:null,hash:"",transfer:void 0});var dh,hh,Ir,H_,FJ;class DM{constructor(){N(this,H_);N(this,dh,!1);N(this,hh,null);N(this,Ir,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=d(this,Ir).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return d(this,Ir).get(e)}remove(e){if(d(this,Ir).delete(e),d(this,Ir).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,Ir).values())if(t instanceof Vt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=d(this,Ir).get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(t))r[s]!==a&&(i=!0,r[s]=a);else i=!0,d(this,Ir).set(e,t);i&&D(this,H_,FJ).call(this),t instanceof Vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,Ir).has(e)}get size(){return d(this,Ir).size}resetModified(){d(this,dh)&&(S(this,dh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new kJ(this)}get serializable(){if(d(this,Ir).size===0)return wN;const e=new Map,t=new PJ,r=[],i=Object.create(null);let s=!1;for(const[a,o]of d(this,Ir)){const l=o instanceof Vt?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:wN}get editorStats(){let e=null;const t=new Map;for(const r of d(this,Ir).values()){if(!(r instanceof Vt))continue;const i=r.telemetryFinalData;if(!i)continue;const{type:s}=i;t.has(s)||t.set(s,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,l]of Object.entries(i)){if(o==="type")continue;let A=a.get(o);A||(A=new Map,a.set(o,A));const c=A.get(l)??0;A.set(l,c+1)}}for(const[r,i]of t)e[r]=i.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){S(this,hh,null)}get modifiedIds(){if(d(this,hh))return d(this,hh);const e=[];for(const t of d(this,Ir).values())!(t instanceof Vt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,hh,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,Ir).entries()}}dh=new WeakMap,hh=new WeakMap,Ir=new WeakMap,H_=new WeakSet,FJ=function(){d(this,dh)||(S(this,dh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Zw;class kJ extends DM{constructor(t){super();N(this,Zw);const{map:r,hash:i,transfer:s}=t.serializable,a=structuredClone(r,s?{transfer:s}:null);S(this,Zw,{map:a,hash:i,transfer:s})}get print(){Ft("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Zw)}get modifiedIds(){return et(this,"modifiedIds",{ids:new Set,hash:""})}}Zw=new WeakMap;var Dp;class oke{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){N(this,Dp,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Dp).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||d(this,Dp).has(e.loadedName))){if(Ln(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),d(this,Dp).add(i),r==null||r(e)}catch{Ge(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ft("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Ge(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return et(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return et(this,"isSyncFontLoadingSupported",yi||Vr.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ln(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return et(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,I){return E.charCodeAt(I)<<24|E.charCodeAt(I+1)<<16|E.charCodeAt(I+2)<<8|E.charCodeAt(I+3)&255}function i(E,I,P,_){const T=E.substring(0,I),k=E.substring(I+P);return T+_+k}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let A=0;function c(E,I){if(++A>30){Ge("Load test font never loaded."),I();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(c.bind(null,E,I))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,u.length,u);const p=16,m=1482184792;let w=r(h,p);for(s=0,a=u.length-3;s<a;s+=4)w=w-m+r(u,s)|0;s<u.length&&(w=w-m+r(u+"XXX",s)|0),h=i(h,p,4,$Fe(w));const v=`url(data:font/opentype;base64,${btoa(h)});`,b=`@font-face {font-family:"${u}";src:${v}}`;this.insertRule(b);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const E of[e.loadedName,u]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=E,x.append(I)}this._document.body.append(x),c(u,()=>{x.remove(),t.complete()})}}Dp=new WeakMap;class lke{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${eJ(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(a){Ge(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}}function Ake(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(yi)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cke(n){if(yi&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Qx(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xE(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const bN=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,uke=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",dke=YFe.bind(null,bN,uke);var _l,V_;class hke{constructor(){N(this,_l,new Map);N(this,V_,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};d(this,V_).then(()=>{for(const[i]of d(this,_l))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){Ge("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}d(this,_l).set(t,i)}removeEventListener(e,t){const r=d(this,_l).get(t);r==null||r(),d(this,_l).delete(t)}terminate(){for(const[,e]of d(this,_l))e==null||e();d(this,_l).clear()}}_l=new WeakMap,V_=new WeakMap;const BE={DATA:1,ERROR:2},Nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function FV(){}function ki(n){if(n instanceof Ju||n instanceof eN||n instanceof SV||n instanceof C_||n instanceof n2)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ft('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ju(n.message);case"InvalidPDFException":return new eN(n.message);case"PasswordException":return new SV(n.message,n.code);case"ResponseException":return new C_(n.message,n.status,n.missing);case"UnknownErrorException":return new n2(n.message,n.details)}return new n2(n.message,n.toString())}var Op,va,NJ,DJ,OJ,hC;class $y{constructor(e,t,r){N(this,va);N(this,Op,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",D(this,va,NJ).bind(this),{signal:d(this,Op).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:A=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:A,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:A.desiredSize},i),c.promise},pull:A=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:Nn.PULL,streamId:s,desiredSize:A.desiredSize}),c.promise},cancel:A=>{Ln(A instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Nn.CANCEL,streamId:s,reason:ki(A)}),c.promise}},r)}destroy(){var e;(e=d(this,Op))==null||e.abort(),S(this,Op,null)}}Op=new WeakMap,va=new WeakSet,NJ=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){D(this,va,OJ).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===BE.DATA)i.resolve(e.data);else if(e.callback===BE.ERROR)i.reject(ki(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:BE.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:BE.ERROR,callbackId:e.callbackId,reason:ki(a)})});return}if(e.streamId){D(this,va,DJ).call(this,e);return}t(e.data)},DJ=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(A,c=1,u){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=c,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Nn.ENQUEUE,streamId:t,chunk:A},u)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Nn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(A){Ln(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Nn.ERROR,streamId:t,reason:ki(A)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Nn.START_COMPLETE,streamId:t,success:!0})},function(A){s.postMessage({sourceName:r,targetName:i,stream:Nn.START_COMPLETE,streamId:t,reason:ki(A)})})},OJ=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Nn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ki(e.reason));break;case Nn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ki(e.reason));break;case Nn.PULL:if(!o){s.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||FV).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:t,success:!0})},function(A){s.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:t,reason:ki(A)})});break;case Nn.ENQUEUE:if(Ln(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Nn.CLOSE:if(Ln(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),D(this,va,hC).call(this,a,t);break;case Nn.ERROR:Ln(a,"error should have stream controller"),a.controller.error(ki(e.reason)),D(this,va,hC).call(this,a,t);break;case Nn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ki(e.reason)),D(this,va,hC).call(this,a,t);break;case Nn.CANCEL:if(!o)break;const l=ki(e.reason);Promise.try(o.onCancel||FV,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Nn.CANCEL_COMPLETE,streamId:t,success:!0})},function(A){s.postMessage({sourceName:r,targetName:i,stream:Nn.CANCEL_COMPLETE,streamId:t,reason:ki(A)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},hC=async function(e,t){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var eb;class UJ{constructor({enableHWA:e=!1}){N(this,eb,!1);S(this,eb,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!d(this,eb)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ft("Abstract method `_createCanvas` called.")}}eb=new WeakMap;class fke extends UJ{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class RJ{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ft("Abstract method `_fetch` called.")}}class kV extends RJ{async _fetch(e){const t=await jx(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Qx(t)}}class MJ{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}var fh,Up,Sl,Il,Zr,gh,ph,xe,qr,Gy,_g,fC,Sg,LJ,xN,Ig,zy,Wy,BN,Xy;class gke extends MJ{constructor({docId:t,ownerDocument:r=globalThis.document}){super();N(this,xe);N(this,fh);N(this,Up);N(this,Sl);N(this,Il);N(this,Zr);N(this,gh);N(this,ph,0);S(this,Il,t),S(this,Zr,r)}addFilter(t){if(!t)return"none";let r=d(this,xe,qr).get(t);if(r)return r;const[i,s,a]=D(this,xe,fC).call(this,t),o=t.length===1?i:`${i}${s}${a}`;if(r=d(this,xe,qr).get(o),r)return d(this,xe,qr).set(t,r),r;const l=`g_${d(this,Il)}_transfer_map_${Vn(this,ph)._++}`,A=D(this,xe,Sg).call(this,l);d(this,xe,qr).set(t,A),d(this,xe,qr).set(o,A);const c=D(this,xe,Ig).call(this,l);return D(this,xe,Wy).call(this,i,s,a,c),A}addHCMFilter(t,r){var p;const i=`${t}-${r}`,s="base";let a=d(this,xe,Gy).get(s);if((a==null?void 0:a.key)===i||(a?((p=a.filter)==null||p.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},d(this,xe,Gy).set(s,a)),!t||!r))return a.url;const o=D(this,xe,Xy).call(this,t);t=Te.makeHexColor(...o);const l=D(this,xe,Xy).call(this,r);if(r=Te.makeHexColor(...l),d(this,xe,_g).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const A=new Array(256);for(let m=0;m<=255;m++){const w=m/255;A[m]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const c=A.join(","),u=`g_${d(this,Il)}_hcm_filter`,h=a.filter=D(this,xe,Ig).call(this,u);D(this,xe,Wy).call(this,c,c,c,h),D(this,xe,xN).call(this,h);const g=(m,w)=>{const v=o[m]/255,b=l[m]/255,x=new Array(w+1);for(let E=0;E<=w;E++)x[E]=v+E/w*(b-v);return x.join(",")};return D(this,xe,Wy).call(this,g(0,5),g(1,5),g(2,5),h),a.url=D(this,xe,Sg).call(this,u),a.url}addAlphaFilter(t){let r=d(this,xe,qr).get(t);if(r)return r;const[i]=D(this,xe,fC).call(this,[t]),s=`alpha_${i}`;if(r=d(this,xe,qr).get(s),r)return d(this,xe,qr).set(t,r),r;const a=`g_${d(this,Il)}_alpha_map_${Vn(this,ph)._++}`,o=D(this,xe,Sg).call(this,a);d(this,xe,qr).set(t,o),d(this,xe,qr).set(s,o);const l=D(this,xe,Ig).call(this,a);return D(this,xe,BN).call(this,i,l),o}addLuminosityFilter(t){let r=d(this,xe,qr).get(t||"luminosity");if(r)return r;let i,s;if(t?([i]=D(this,xe,fC).call(this,[t]),s=`luminosity_${i}`):s="luminosity",r=d(this,xe,qr).get(s),r)return d(this,xe,qr).set(t,r),r;const a=`g_${d(this,Il)}_luminosity_map_${Vn(this,ph)._++}`,o=D(this,xe,Sg).call(this,a);d(this,xe,qr).set(t,o),d(this,xe,qr).set(s,o);const l=D(this,xe,Ig).call(this,a);return D(this,xe,LJ).call(this,l),t&&D(this,xe,BN).call(this,i,l),o}addHighlightHCMFilter(t,r,i,s,a){var b;const o=`${r}-${i}-${s}-${a}`;let l=d(this,xe,Gy).get(t);if((l==null?void 0:l.key)===o||(l?((b=l.filter)==null||b.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},d(this,xe,Gy).set(t,l)),!r||!i))return l.url;const[A,c]=[r,i].map(D(this,xe,Xy).bind(this));let u=Math.round(.2126*A[0]+.7152*A[1]+.0722*A[2]),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[g,p]=[s,a].map(D(this,xe,Xy).bind(this));h<u&&([u,h,g,p]=[h,u,p,g]),d(this,xe,_g).style.color="";const m=(x,E,I)=>{const P=new Array(256),_=(h-u)/I,T=x/255,k=(E-x)/(255*I);let O=0;for(let U=0;U<=I;U++){const L=Math.round(u+U*_),R=T+U*k;for(let re=O;re<=L;re++)P[re]=R;O=L+1}for(let U=O;U<256;U++)P[U]=P[O-1];return P.join(",")},w=`g_${d(this,Il)}_hcm_${t}_filter`,v=l.filter=D(this,xe,Ig).call(this,w);return D(this,xe,xN).call(this,v),D(this,xe,Wy).call(this,m(g[0],p[0],5),m(g[1],p[1],5),m(g[2],p[2],5),v),l.url=D(this,xe,Sg).call(this,w),l.url}destroy(t=!1){var r,i,s,a;t&&((r=d(this,gh))!=null&&r.size)||((i=d(this,Sl))==null||i.parentNode.parentNode.remove(),S(this,Sl,null),(s=d(this,Up))==null||s.clear(),S(this,Up,null),(a=d(this,gh))==null||a.clear(),S(this,gh,null),S(this,ph,0))}}fh=new WeakMap,Up=new WeakMap,Sl=new WeakMap,Il=new WeakMap,Zr=new WeakMap,gh=new WeakMap,ph=new WeakMap,xe=new WeakSet,qr=function(){return d(this,Up)||S(this,Up,new Map)},Gy=function(){return d(this,gh)||S(this,gh,new Map)},_g=function(){if(!d(this,Sl)){const t=d(this,Zr).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=d(this,Zr).createElementNS(il,"svg");i.setAttribute("width",0),i.setAttribute("height",0),S(this,Sl,d(this,Zr).createElementNS(il,"defs")),t.append(i),i.append(d(this,Sl)),d(this,Zr).body.append(t)}return d(this,Sl)},fC=function(t){if(t.length===1){const A=t[0],c=new Array(256);for(let h=0;h<256;h++)c[h]=A[h]/255;const u=c.join(",");return[u,u,u]}const[r,i,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let A=0;A<256;A++)a[A]=r[A]/255,o[A]=i[A]/255,l[A]=s[A]/255;return[a.join(","),o.join(","),l.join(",")]},Sg=function(t){if(d(this,fh)===void 0){S(this,fh,"");const r=d(this,Zr).URL;r!==d(this,Zr).baseURI&&(nT(r)?Ge('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,fh,qq(r,"")))}return`url(${d(this,fh)}#${t})`},LJ=function(t){const r=d(this,Zr).createElementNS(il,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},xN=function(t){const r=d(this,Zr).createElementNS(il,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Ig=function(t){const r=d(this,Zr).createElementNS(il,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),d(this,xe,_g).append(r),r},zy=function(t,r,i){const s=d(this,Zr).createElementNS(il,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},Wy=function(t,r,i,s){const a=d(this,Zr).createElementNS(il,"feComponentTransfer");s.append(a),D(this,xe,zy).call(this,a,"feFuncR",t),D(this,xe,zy).call(this,a,"feFuncG",r),D(this,xe,zy).call(this,a,"feFuncB",i)},BN=function(t,r){const i=d(this,Zr).createElementNS(il,"feComponentTransfer");r.append(i),D(this,xe,zy).call(this,i,"feFuncA",t)},Xy=function(t){return d(this,xe,_g).style.color=t,rT(getComputedStyle(d(this,xe,_g)).getPropertyValue("color"))};class QJ{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ft("Abstract method `_fetch` called.")}}class NV extends QJ{async _fetch(e){const t=await jx(e,"arraybuffer");return new Uint8Array(t)}}class jJ{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ft("Abstract method `_fetch` called.")}}class DV extends jJ{async _fetch(e){const t=await jx(e,"arraybuffer");return new Uint8Array(t)}}yi&&Ge("Please use the `legacy` build in Node.js environments.");async function OM(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class pke extends MJ{}class mke extends UJ{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class yke extends RJ{async _fetch(e){return OM(e)}}class vke extends QJ{async _fetch(e){return OM(e)}}class wke extends jJ{async _fetch(e){return OM(e)}}const pg="__forcedDependency";var ss,hi,Rp,xo,Mp,Tl,xt,_t,Pl,as,kc,Lp,Nc,Dc;class bke{constructor(e){N(this,ss,{__proto__:null});N(this,hi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[pg]:[]});N(this,Rp,new Map);N(this,xo,[]);N(this,Mp,[]);N(this,Tl,[[1,0,0,1,0,0]]);N(this,xt,[-1/0,-1/0,1/0,1/0]);N(this,_t,new Float64Array([1/0,1/0,-1/0,-1/0]));N(this,Pl,-1);N(this,as,new Set);N(this,kc,new Map);N(this,Lp,new Map);N(this,Nc);N(this,Dc);S(this,Nc,e.width),S(this,Dc,e.height)}save(e){return S(this,ss,{__proto__:d(this,ss)}),S(this,hi,{__proto__:d(this,hi),transform:{__proto__:d(this,hi).transform},moveText:{__proto__:d(this,hi).moveText},sameLineText:{__proto__:d(this,hi).sameLineText},[pg]:{__proto__:d(this,hi)[pg]}}),S(this,xt,{__proto__:d(this,xt)}),d(this,xo).push([e,null]),this}restore(e){const t=Object.getPrototypeOf(d(this,ss));if(t===null)return this;S(this,ss,t),S(this,hi,Object.getPrototypeOf(d(this,hi))),S(this,xt,Object.getPrototypeOf(d(this,xt)));const r=d(this,xo).pop();return r!==void 0&&(r[1]=e),this}recordOpenMarker(e){return d(this,xo).push([e,null]),this}getOpenMarker(){return d(this,xo).length===0?null:d(this,xo).at(-1)[0]}recordCloseMarker(e){const t=d(this,xo).pop();return t!==void 0&&(t[1]=e),this}beginMarkedContent(e){return d(this,Mp).push([e,null]),this}endMarkedContent(e){const t=d(this,Mp).pop();return t!==void 0&&(t[1]=e),this}pushBaseTransform(e){return d(this,Tl).push(Te.multiplyByDOMMatrix(d(this,Tl).at(-1),e.getTransform())),this}popBaseTransform(){return d(this,Tl).length>1&&d(this,Tl).pop(),this}recordSimpleData(e,t){return d(this,ss)[e]=t,this}recordIncrementalData(e,t){return d(this,hi)[e].push(t),this}resetIncrementalData(e,t){return d(this,hi)[e].length=0,this}recordNamedData(e,t){return d(this,Rp).set(e,t),this}recordFutureForcedDependency(e,t){return this.recordIncrementalData(pg,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in d(this,ss)&&this.recordFutureForcedDependency(t,d(this,ss)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of d(this,as))this.recordFutureForcedDependency(pg,e);return this}resetBBox(e){return S(this,Pl,e),d(this,_t)[0]=1/0,d(this,_t)[1]=1/0,d(this,_t)[2]=-1/0,d(this,_t)[3]=-1/0,this}get hasPendingBBox(){return d(this,Pl)!==-1}recordClipBox(e,t,r,i,s,a){const o=Te.multiplyByDOMMatrix(d(this,Tl).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];Te.axialAlignedBoundingBox([r,s,i,a],o,l);const A=Te.intersect(d(this,xt),l);return A?(d(this,xt)[0]=A[0],d(this,xt)[1]=A[1],d(this,xt)[2]=A[2],d(this,xt)[3]=A[3]):(d(this,xt)[0]=d(this,xt)[1]=1/0,d(this,xt)[2]=d(this,xt)[3]=-1/0),this}recordBBox(e,t,r,i,s,a){const o=d(this,xt);if(o[0]===1/0)return this;const l=Te.multiplyByDOMMatrix(d(this,Tl).at(-1),t.getTransform());if(o[0]===-1/0)return Te.axialAlignedBoundingBox([r,s,i,a],l,d(this,_t)),this;const A=[1/0,1/0,-1/0,-1/0];return Te.axialAlignedBoundingBox([r,s,i,a],l,A),d(this,_t)[0]=Math.min(d(this,_t)[0],Math.max(A[0],o[0])),d(this,_t)[1]=Math.min(d(this,_t)[1],Math.max(A[1],o[1])),d(this,_t)[2]=Math.max(d(this,_t)[2],Math.min(A[2],o[2])),d(this,_t)[3]=Math.max(d(this,_t)[3],Math.min(A[3],o[3])),this}recordCharacterBBox(e,t,r,i=1,s=0,a=0,o){const l=r.bbox;let A,c;if(l&&(A=l[2]!==l[0]&&l[3]!==l[1]&&d(this,Lp).get(r),A!==!1&&(c=[0,0,0,0],Te.axialAlignedBoundingBox(l,r.fontMatrix,c),(i!==1||s!==0||a!==0)&&Te.scaleMinMax([i,0,0,-i,s,a],c),A)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const u=o();return l&&c&&A===void 0&&(A=c[0]<=s-u.actualBoundingBoxLeft&&c[2]>=s+u.actualBoundingBoxRight&&c[1]<=a-u.actualBoundingBoxAscent&&c[3]>=a+u.actualBoundingBoxDescent,d(this,Lp).set(r,A),A)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-u.actualBoundingBoxLeft,s+u.actualBoundingBoxRight,a-u.actualBoundingBoxAscent,a+u.actualBoundingBoxDescent)}recordFullPageBBox(e){return d(this,_t)[0]=Math.max(0,d(this,xt)[0]),d(this,_t)[1]=Math.max(0,d(this,xt)[1]),d(this,_t)[2]=Math.min(d(this,Nc),d(this,xt)[2]),d(this,_t)[3]=Math.min(d(this,Dc),d(this,xt)[3]),this}getSimpleIndex(e){return d(this,ss)[e]}recordDependencies(e,t){const r=d(this,as),i=d(this,ss),s=d(this,hi);for(const a of t)a in d(this,ss)?r.add(i[a]):a in s&&s[a].forEach(r.add,r);return this}copyDependenciesFromIncrementalOperation(e,t){const r=d(this,kc),i=d(this,as);for(const s of d(this,hi)[t])r.get(s).dependencies.forEach(i.add,i.add(s));return this}recordNamedDependency(e,t){return d(this,Rp).has(t)&&d(this,as).add(d(this,Rp).get(t)),this}recordOperation(e,t=!1){this.recordDependencies(e,[pg]);const r=new Set(d(this,as)),i=d(this,xo).concat(d(this,Mp)),s=d(this,Pl)===e?{minX:d(this,_t)[0],minY:d(this,_t)[1],maxX:d(this,_t)[2],maxY:d(this,_t)[3]}:null;return d(this,kc).set(e,{bbox:s,pairs:i,dependencies:r}),t||S(this,Pl,-1),d(this,as).clear(),this}bboxToClipBoxDropOperation(e){return d(this,Pl)!==-1&&(S(this,Pl,-1),d(this,xt)[0]=Math.max(d(this,xt)[0],d(this,_t)[0]),d(this,xt)[1]=Math.max(d(this,xt)[1],d(this,_t)[1]),d(this,xt)[2]=Math.min(d(this,xt)[2],d(this,_t)[2]),d(this,xt)[3]=Math.min(d(this,xt)[3],d(this,_t)[3])),d(this,as).clear(),this}_takePendingDependencies(){const e=d(this,as);return S(this,as,new Set),e}_extractOperation(e){const t=d(this,kc).get(e);return d(this,kc).delete(e),t}_pushPendingDependencies(e){for(const t of e)d(this,as).add(t)}take(){return d(this,Lp).clear(),Array.from(d(this,kc),([e,{bbox:t,pairs:r,dependencies:i}])=>(r.forEach(s=>s.forEach(i.add,i)),i.delete(e),{minX:((t==null?void 0:t.minX)??0)/d(this,Nc),maxX:((t==null?void 0:t.maxX)??d(this,Nc))/d(this,Nc),minY:((t==null?void 0:t.minY)??0)/d(this,Dc),maxY:((t==null?void 0:t.maxY)??d(this,Dc))/d(this,Dc),dependencies:Array.from(i).sort((s,a)=>s-a),idx:e}))}}ss=new WeakMap,hi=new WeakMap,Rp=new WeakMap,xo=new WeakMap,Mp=new WeakMap,Tl=new WeakMap,xt=new WeakMap,_t=new WeakMap,Pl=new WeakMap,as=new WeakMap,kc=new WeakMap,Lp=new WeakMap,Nc=new WeakMap,Dc=new WeakMap;var yt,un,Qp,Oc,jp;const VM=class VM{constructor(e,t){N(this,yt);N(this,un);N(this,Qp,0);N(this,Oc);N(this,jp,0);if(e instanceof VM)return e;S(this,yt,e),S(this,Oc,e._takePendingDependencies()),S(this,un,t)}save(e){return Vn(this,jp)._++,d(this,yt).save(d(this,un)),this}restore(e){return d(this,jp)>0&&(d(this,yt).restore(d(this,un)),Vn(this,jp)._--),this}recordOpenMarker(e){return Vn(this,Qp)._++,this}getOpenMarker(){return d(this,Qp)>0?d(this,un):d(this,yt).getOpenMarker()}recordCloseMarker(e){return Vn(this,Qp)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return d(this,yt).pushBaseTransform(e),this}popBaseTransform(){return d(this,yt).popBaseTransform(),this}recordSimpleData(e,t){return d(this,yt).recordSimpleData(e,d(this,un)),this}recordIncrementalData(e,t){return d(this,yt).recordIncrementalData(e,d(this,un)),this}resetIncrementalData(e,t){return d(this,yt).resetIncrementalData(e,d(this,un)),this}recordNamedData(e,t){return this}recordFutureForcedDependency(e,t){return d(this,yt).recordFutureForcedDependency(e,d(this,un)),this}inheritSimpleDataAsFutureForcedDependencies(e){return d(this,yt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return d(this,yt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return d(this,yt).hasPendingBBox||d(this,yt).resetBBox(d(this,un)),this}get hasPendingBBox(){return d(this,yt).hasPendingBBox}recordClipBox(e,t,r,i,s,a){return d(this,yt).recordClipBox(d(this,un),t,r,i,s,a),this}recordBBox(e,t,r,i,s,a){return d(this,yt).recordBBox(d(this,un),t,r,i,s,a),this}recordCharacterBBox(e,t,r,i,s,a,o){return d(this,yt).recordCharacterBBox(d(this,un),t,r,i,s,a,o),this}recordFullPageBBox(e){return d(this,yt).recordFullPageBBox(d(this,un)),this}getSimpleIndex(e){return d(this,yt).getSimpleIndex(e)}recordDependencies(e,t){return d(this,yt).recordDependencies(d(this,un),t),this}copyDependenciesFromIncrementalOperation(e,t){return d(this,yt).copyDependenciesFromIncrementalOperation(d(this,un),t),this}recordNamedDependency(e,t){return d(this,yt).recordNamedDependency(d(this,un),t),this}recordOperation(e){d(this,yt).recordOperation(d(this,un),!0);const t=d(this,yt)._extractOperation(d(this,un));for(const r of t.dependencies)d(this,Oc).add(r);return d(this,Oc).delete(d(this,un)),d(this,Oc).delete(null),this}bboxToClipBoxDropOperation(e){return d(this,yt).bboxToClipBoxDropOperation(d(this,un)),this}recordNestedDependencies(){d(this,yt)._pushPendingDependencies(d(this,Oc))}take(){throw new Error("Unreachable")}};yt=new WeakMap,un=new WeakMap,Qp=new WeakMap,Oc=new WeakMap,jp=new WeakMap;let T_=VM;const Gs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Rr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function EN(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class UM{isModifyingCurrentTransform(){return!1}getPattern(){Ft("Abstract method `getPattern` called.")}}class xke extends UM{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Rr.STROKE||i===Rr.FILL){const a=t.current.getClippedPathBoundingBox(i,dn(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,A=t.cachedCanvases.getCanvas("pattern",o,l),c=A.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),r=Te.transform(r,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),EN(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(A.canvas,"no-repeat");const u=new DOMMatrix(r);s.setTransform(u)}else EN(e,this._bbox),s=this._createGradient(e);return s}}function s2(n,e,t,r,i,s,a,o){const l=e.coords,A=e.colors,c=n.data,u=n.width*4;let h;l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=a,a=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=a,a=o,o=h),l[t+1]>l[r+1]&&(h=t,t=r,r=h,h=s,s=a,a=h);const g=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,b=(l[i+1]+e.offsetY)*e.scaleY;if(p>=b)return;const x=A[s],E=A[s+1],I=A[s+2],P=A[a],_=A[a+1],T=A[a+2],k=A[o],O=A[o+1],U=A[o+2],L=Math.round(p),R=Math.round(b);let re,he,te,ee,Z,ae,fe,Ue;for(let ie=L;ie<=R;ie++){if(ie<w){const Q=ie<p?0:(p-ie)/(p-w);re=g-(g-m)*Q,he=x-(x-P)*Q,te=E-(E-_)*Q,ee=I-(I-T)*Q}else{let Q;ie>b?Q=1:w===b?Q=0:Q=(w-ie)/(w-b),re=m-(m-v)*Q,he=P-(P-k)*Q,te=_-(_-O)*Q,ee=T-(T-U)*Q}let we;ie<p?we=0:ie>b?we=1:we=(p-ie)/(p-b),Z=g-(g-v)*we,ae=x-(x-k)*we,fe=E-(E-O)*we,Ue=I-(I-U)*we;const Ye=Math.round(Math.min(re,Z)),j=Math.round(Math.max(re,Z));let G=u*ie+Ye*4;for(let Q=Ye;Q<=j;Q++)we=(re-Q)/(re-Z),we<0?we=0:we>1&&(we=1),c[G++]=he-(he-ae)*we|0,c[G++]=te-(te-fe)*we|0,c[G++]=ee-(ee-Ue)*we|0,c[G++]=255}}function Bke(n,e,t){const r=e.coords,i=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,A=o-1;for(s=0;s<l;s++){let c=s*o;for(let u=0;u<A;u++,c++)s2(n,t,r[c],r[c+1],r[c+o],i[c],i[c+1],i[c+o]),s2(n,t,r[c+o+1],r[c+1],r[c+o],i[c+o+1],i[c+1],i[c+o])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)s2(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class Eke extends UM{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),A=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,u=Math.min(Math.ceil(Math.abs(A*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),g=A/u,p=c/h,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/g,scaleY:1/p},w=u+2*2,v=h+2*2,b=r.getCanvas("mesh",w,v),x=b.context,E=x.createImageData(u,h);if(t){const P=E.data;for(let _=0,T=P.length;_<T;_+=4)P[_]=t[0],P[_+1]=t[1],P[_+2]=t[2],P[_+3]=255}for(const P of this._figures)Bke(E,P,m);return x.putImageData(E,2,2),{canvas:b.canvas,offsetX:o-2*g,offsetY:l-2*p,scaleX:g,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){EN(e,this._bbox);const s=new Float32Array(2);if(i===Rr.SHADING)Te.singularValueDecompose2dScale(dn(e),s);else if(this.matrix){Te.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;Te.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=l}else Te.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,i===Rr.SHADING?null:this._background,t.cachedCanvases);return i!==Rr.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Cke extends UM{getPattern(){return"hotpink"}}function _ke(n){switch(n[0]){case"RadialAxial":return new xke(n);case"Mesh":return new Eke(n);case"Dummy":return new Cke}throw new Error(`Unknown IR type: ${n[0]}`)}const OV={COLORED:1,UNCOLORED:2},K_=class K_{constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e){var Z,ae,fe,Ue;const{bbox:t,operatorList:r,paintType:i,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:A}=this;l=Math.abs(l),A=Math.abs(A),tT("TilingType: "+s);const c=t[0],u=t[1],h=t[2],g=t[3],p=h-c,m=g-u,w=new Float32Array(2);Te.singularValueDecompose2dScale(this.matrix,w);const[v,b]=w;Te.singularValueDecompose2dScale(this.baseTransform,w);const x=v*w[0],E=b*w[1];let I=p,P=m,_=!1,T=!1;const k=Math.ceil(l*x),O=Math.ceil(A*E),U=Math.ceil(p*x),L=Math.ceil(m*E);k>=U?I=l:_=!0,O>=L?P=A:T=!0;const R=this.getSizeAndScale(I,this.ctx.canvas.width,x),re=this.getSizeAndScale(P,this.ctx.canvas.height,E),he=e.cachedCanvases.getCanvas("pattern",R.size,re.size),te=he.context,ee=o.createCanvasGraphics(te);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,i,a),te.translate(-R.scale*c,-re.scale*u),ee.transform(0,R.scale,0,0,re.scale,0,0),te.save(),(Z=ee.dependencyTracker)==null||Z.save(),this.clipBbox(ee,c,u,h,g),ee.baseTransform=dn(ee.ctx),ee.executeOperatorList(r),ee.endDrawing(),(Ue=(ae=ee.dependencyTracker)==null?void 0:(fe=ae.restore()).recordNestedDependencies)==null||Ue.call(fe),te.restore(),_||T){const ie=he.canvas;_&&(I=l),T&&(P=A);const we=this.getSizeAndScale(I,this.ctx.canvas.width,x),Ye=this.getSizeAndScale(P,this.ctx.canvas.height,E),j=we.size,G=Ye.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",j,G),ne=Q.context,V=_?Math.floor(p/l):0,X=T?Math.floor(m/A):0;for(let J=0;J<=V;J++)for(let $=0;$<=X;$++)ne.drawImage(ie,j*J,G*$,j,G,0,0,j,G);return{canvas:Q.canvas,scaleX:we.scale,scaleY:Ye.scale,offsetX:c,offsetY:u}}return{canvas:he.canvas,scaleX:R.scale,scaleY:re.scale,offsetX:c,offsetY:u}}getSizeAndScale(e,t,r){const i=Math.max(K_.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const a=i-t,o=s-r;e.ctx.rect(t,r,a,o),Te.axialAlignedBoundingBox([t,r,i,s],dn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case OV.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case OV.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new KFe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i){let s=r;i!==Rr.SHADING&&(s=Te.transform(s,t.baseTransform),this.matrix&&(s=Te.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};ce(K_,"MAX_PATTERN_SIZE",3e3);let CN=K_;function Ske({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Vr.isLittleEndian?4278190080:255,[l,A]=a?[s,o]:[o,s],c=r>>3,u=r&7,h=n.length;t=new Uint32Array(t.buffer);let g=0;for(let p=0;p<i;p++){for(const w=e+c;e<w;e++){const v=e<h?n[e]:255;t[g++]=v&128?A:l,t[g++]=v&64?A:l,t[g++]=v&32?A:l,t[g++]=v&16?A:l,t[g++]=v&8?A:l,t[g++]=v&4?A:l,t[g++]=v&2?A:l,t[g++]=v&1?A:l}if(u===0)continue;const m=e<h?n[e++]:255;for(let w=0;w<u;w++)t[g++]=m&1<<7-w?A:l}return{srcPos:e,destPos:g}}const UV=16,RV=100,Ike=15,MV=10,Mi=16,a2=new DOMMatrix,xs=new Float32Array(2),Yg=new Float32Array([1/0,1/0,-1/0,-1/0]);function Tke(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,s,a,o){e.transform(t,r,i,s,a,o),this.__originalTransform(t,r,i,s,a,o)},n.setTransform=function(t,r,i,s,a,o){e.setTransform(t,r,i,s,a,o),this.__originalSetTransform(t,r,i,s,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,a,o){e.bezierCurveTo(t,r,i,s,a,o),this.__originalBezierCurveTo(t,r,i,s,a,o)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Pke{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function EE(n,e,t,r,i,s,a,o,l,A){const[c,u,h,g,p,m]=dn(n);if(u===0&&h===0){const b=a*c+p,x=Math.round(b),E=o*g+m,I=Math.round(E),P=(a+l)*c+p,_=Math.abs(Math.round(P)-x)||1,T=(o+A)*g+m,k=Math.abs(Math.round(T)-I)||1;return n.setTransform(Math.sign(c),0,0,Math.sign(g),x,I),n.drawImage(e,t,r,i,s,0,0,_,k),n.setTransform(c,u,h,g,p,m),[_,k]}if(c===0&&g===0){const b=o*h+p,x=Math.round(b),E=a*u+m,I=Math.round(E),P=(o+A)*h+p,_=Math.abs(Math.round(P)-x)||1,T=(a+l)*u+m,k=Math.abs(Math.round(T)-I)||1;return n.setTransform(0,Math.sign(u),Math.sign(h),0,x,I),n.drawImage(e,t,r,i,s,0,0,k,_),n.setTransform(c,u,h,g,p,m),[k,_]}n.drawImage(e,t,r,i,s,a,o,l,A);const w=Math.hypot(c,u),v=Math.hypot(h,g);return[w*l,v*A]}class LV{constructor(e,t,r){ce(this,"alphaIsShape",!1);ce(this,"fontSize",0);ce(this,"fontSizeScale",1);ce(this,"textMatrix",null);ce(this,"textMatrixScale",1);ce(this,"fontMatrix",Zk);ce(this,"leading",0);ce(this,"x",0);ce(this,"y",0);ce(this,"lineX",0);ce(this,"lineY",0);ce(this,"charSpacing",0);ce(this,"wordSpacing",0);ce(this,"textHScale",1);ce(this,"textRenderingMode",Er.FILL);ce(this,"textRise",0);ce(this,"fillColor","#000000");ce(this,"strokeColor","#000000");ce(this,"patternFill",!1);ce(this,"patternStroke",!1);ce(this,"fillAlpha",1);ce(this,"strokeAlpha",1);ce(this,"lineWidth",1);ce(this,"activeSMask",null);ce(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Yg.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Rr.FILL,t=null){const r=this.minMax.slice();if(e===Rr.STROKE){t||Ft("Stroke bounding box must include transform."),Te.singularValueDecompose2dScale(t,xs);const i=xs[0]*this.lineWidth/2,s=xs[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=Te.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Yg,0)}getClippedPathBoundingBox(e=Rr.FILL,t=null){return Te.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function QV(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Mi,s=(t-i)/Mi,a=i===0?s:s+1,o=n.createImageData(r,Mi);let l=0,A;const c=e.data,u=o.data;let h,g,p,m;if(e.kind===aC.GRAYSCALE_1BPP){const w=c.byteLength,v=new Uint32Array(u.buffer,0,u.byteLength>>2),b=v.length,x=r+7>>3,E=4294967295,I=Vr.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(p=h<s?Mi:i,A=0,g=0;g<p;g++){const P=w-l;let _=0;const T=P>x?r:P*8-7,k=T&-8;let O=0,U=0;for(;_<k;_+=8)U=c[l++],v[A++]=U&128?E:I,v[A++]=U&64?E:I,v[A++]=U&32?E:I,v[A++]=U&16?E:I,v[A++]=U&8?E:I,v[A++]=U&4?E:I,v[A++]=U&2?E:I,v[A++]=U&1?E:I;for(;_<T;_++)O===0&&(U=c[l++],O=128),v[A++]=U&O?E:I,O>>=1}for(;A<b;)v[A++]=0;n.putImageData(o,0,h*Mi)}}else if(e.kind===aC.RGBA_32BPP){for(g=0,m=r*Mi*4,h=0;h<s;h++)u.set(c.subarray(l,l+m)),l+=m,n.putImageData(o,0,g),g+=Mi;h<a&&(m=r*i*4,u.set(c.subarray(l,l+m)),n.putImageData(o,0,g))}else if(e.kind===aC.RGB_24BPP)for(p=Mi,m=r*p,h=0;h<a;h++){for(h>=s&&(p=i,m=r*p),A=0,g=m;g--;)u[A++]=c[l++],u[A++]=c[l++],u[A++]=c[l++],u[A++]=255;n.putImageData(o,0,h*Mi)}else throw new Error(`bad image kind: ${e.kind}`)}function jV(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Mi,s=(t-i)/Mi,a=i===0?s:s+1,o=n.createImageData(r,Mi);let l=0;const A=e.data,c=o.data;for(let u=0;u<a;u++){const h=u<s?Mi:i;({srcPos:l}=Ske({src:A,srcPos:l,dest:c,width:r,height:h,nonBlackColor:0})),n.putImageData(o,0,u*Mi)}}function gy(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function CE(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function HV(n,e){if(e)return!0;Te.singularValueDecompose2dScale(n,xs);const t=Math.fround(Wo.pixelRatio*Zu.PDF_TO_CSS_UNITS);return xs[0]<=t&&xs[1]<=t}const Fke=["butt","round","square"],kke=["miter","round","bevel"],Nke={},VV={};var eo,_N,SN,IN;const KM=class KM{constructor(e,t,r,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,A,c){N(this,eo);this.ctx=e,this.current=new LV(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Pke(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=A,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,r=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...dn(this.compositeCtx))}this.ctx.save(),CE(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=dn(this.ctx)}executeOperatorList(e,t,r,i,s){var v;const a=e.argsArray,o=e.fnArray;let l=t||0;const A=a.length;if(A===l)return l;const c=A-l>MV&&typeof r=="function",u=c?Date.now()+Ike:0;let h=0;const g=this.commonObjs,p=this.objs;let m,w;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s.has(l))if(m=o[l],w=a[l]??null,m!==Bw.dependency)w===null?this[m](l):this[m](l,...w);else for(const b of w){(v=this.dependencyTracker)==null||v.recordNamedData(b,l);const x=b.startsWith("g_")?g:p;if(!x.has(b))return x.get(b,r),l}if(l++,l===A)return l;if(c&&++h>MV){if(Date.now()>u)return r(),l;h=0}}}endDrawing(){D(this,eo,_N).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),D(this,eo,SN).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=i,A="prescale1",c,u;for(;s>2&&o>1||a>2&&l>1;){let h=o,g=l;s>2&&o>1&&(h=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/h),a>2&&l>1&&(g=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/g),c=this.cachedCanvases.getCanvas(A,h,g),u=c.context,u.clearRect(0,0,h,g),u.drawImage(e,0,0,o,l,0,0,h,g),e=c.canvas,o=h,l=g,A=A==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var O,U;const r=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=dn(r);let A,c,u,h;if((t.bitmap||t.data)&&t.count>1){const L=t.bitmap||t.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),a]),A=this._cachedBitmapsMap.get(L),A||(A=new Map,this._cachedBitmapsMap.set(L,A));const R=A.get(c);if(R&&!o){const re=Math.round(Math.min(l[0],l[2])+l[4]),he=Math.round(Math.min(l[1],l[3])+l[5]);return(O=this.dependencyTracker)==null||O.recordDependencies(e,Gs.transformAndFill),{canvas:R,offsetX:re,offsetY:he}}u=R}u||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),jV(h.context,t));let g=Te.transform(l,[1/i,0,0,-1/s,0,0]);g=Te.transform(g,[1,0,0,1,0,-s]);const p=Yg.slice();Te.axialAlignedBoundingBox([0,0,i,s],g,p);const[m,w,v,b]=p,x=Math.round(v-m)||1,E=Math.round(b-w)||1,I=this.cachedCanvases.getCanvas("fillCanvas",x,E),P=I.context,_=m,T=w;P.translate(-_,-T),P.transform(...g),u||(u=this._scaleImage(h.canvas,ao(P)),u=u.img,A&&o&&A.set(c,u)),P.imageSmoothingEnabled=HV(dn(P),t.interpolate),EE(P,u,0,0,u.width,u.height,0,0,i,s),P.globalCompositeOperation="source-in";const k=Te.transform(ao(P),[1,0,0,1,-_,-T]);return P.fillStyle=o?a.getPattern(r,this,k,Rr.FILL):a,P.fillRect(0,0,i,s),A&&!o&&(this.cachedCanvases.delete("fillCanvas"),A.set(c,I.canvas)),(U=this.dependencyTracker)==null||U.recordDependencies(e,Gs.transformAndFill),{canvas:I.canvas,offsetX:Math.round(_),offsetY:Math.round(T)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=Fke[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=kke[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,i,s,a,o;for(const[l,A]of t)switch(l){case"LW":this.setLineWidth(e,A);break;case"LC":this.setLineCap(e,A);break;case"LJ":this.setLineJoin(e,A);break;case"ML":this.setMiterLimit(e,A);break;case"D":this.setDash(e,A[0],A[1]);break;case"RI":this.setRenderingIntent(e,A);break;case"FL":this.setFlatness(e,A);break;case"Font":this.setFont(e,A[0],A[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=A;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=A;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=A;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=A?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(A);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),gy(this.suspendedCtx,a),Tke(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gy(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,a,o,l,A,c,u){let h=e.canvas,g=l-c,p=A-u;if(a)if(g<0||p<0||g+r>h.width||p+i>h.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,i),v=w.context;v.drawImage(h,-g,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",h=w.canvas,g=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(g,p,r,i),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(g,p,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,A,r,i),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(h,g,p,r,i,l,A,r,i),t.restore()}save(e){var r;this.inSMaskMode&&gy(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gy(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===Bw.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const a=r[0]=new Path2D;for(let o=0,l=s.length;o<l;)switch(s[o++]){case wE.moveTo:a.moveTo(s[o++],s[o++]);break;case wE.lineTo:a.lineTo(s[o++],s[o++]);break;case wE.curveTo:a.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case wE.closePath:a.closePath();break;default:Ge(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=a}Te.axialAlignedBoundingBox(i,dn(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,ao(i),Rr.STROKE),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Gs.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Rr.STROKE,dn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var A,c,u;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const h=s.isModifyingCurrentTransform()?i.getTransform():null;if((A=this.dependencyTracker)==null||A.save(e),i.save(),i.fillStyle=s.getPattern(i,this,ao(i),Rr.FILL),h){const g=new Path2D;g.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=g}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(c=this.dependencyTracker)==null||c.recordDependencies(e,Gs.fill),o&&(i.restore(),(u=this.dependencyTracker)==null||u.restore(e)),r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,Gs.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Nke}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=VV}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:A,path:c}of t)c&&i.addPath(c,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(A,-A));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var u,h;(u=this.dependencyTracker)==null||u.recordSimpleData("font",e).recordNamedDependency(e,t);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||Zk,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ge("Invalid font matrix for font "+t),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const A=i.italic?"italic":"normal";let c=r;r<UV?c=UV:r>RV&&(c=RV),this.current.fontSizeScale=r/c,this.ctx.font=`${A} ${l} ${c}px ${o}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,i,s,a){var v,b,x,E;const o=this.ctx,l=this.current,A=l.font,c=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,h=c&Er.FILL_STROKE_MASK,g=!!(c&Er.ADD_TO_PATH_FLAG),p=l.patternFill&&!A.missingFile,m=l.patternStroke&&!A.missingFile;let w;if((A.disableFontFace||g||p||m)&&!A.missingFile&&(w=A.getPathGenerator(this.commonObjs,t)),w&&(A.disableFontFace||p||m)){o.save(),o.translate(r,i),o.scale(u,-u),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,A);let I;if(h===Er.FILL||h===Er.FILL_STROKE)if(s){I=o.getTransform(),o.setTransform(...s);const P=D(this,eo,IN).call(this,w,I,s);o.fill(P)}else o.fill(w);if(h===Er.STROKE||h===Er.FILL_STROKE)if(a){I||(I=o.getTransform()),o.setTransform(...a);const{a:P,b:_,c:T,d:k}=I,O=Te.inverseTransform(a),U=Te.transform([P,_,T,k,0,0],O);Te.singularValueDecompose2dScale(U,xs),o.lineWidth*=Math.max(xs[0],xs[1])/u,o.stroke(D(this,eo,IN).call(this,w,I,a))}else o.lineWidth/=u,o.stroke(w);o.restore()}else(h===Er.FILL||h===Er.FILL_STROKE)&&(o.fillText(t,r,i),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,A,u,r,i,()=>o.measureText(t))),(h===Er.STROKE||h===Er.FILL_STROKE)&&(this.dependencyTracker&&((x=this.dependencyTracker)==null||x.recordCharacterBBox(e,o,A,u,r,i,()=>o.measureText(t)).recordDependencies(e,Gs.stroke)),o.strokeText(t,r,i));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:dn(o),x:r,y:i,fontSize:u,path:w}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,o,A,u,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return et(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var T,k,O,U;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Gs.showText).copyDependenciesFromIncrementalOperation(e,"sameLineText").resetBBox(e),this.current.textRenderingMode&Er.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),(T=this.dependencyTracker)==null||T.recordOperation(e).recordIncrementalData("sameLineText",e);return}const s=r.fontSize;if(s===0){(k=this.dependencyTracker)==null||k.recordOperation(e);return}const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,A=r.wordSpacing,c=r.fontDirection,u=r.textHScale*c,h=t.length,g=i.vertical,p=g?1:-1,m=i.defaultVMetrics,w=s*r.fontMatrix[0],v=r.textRenderingMode===Er.FILL&&!i.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),c>0?a.scale(u,-1):a.scale(u,1);let b,x;if(r.patternFill){a.save();const L=r.fillColor.getPattern(a,this,ao(a),Rr.FILL);b=dn(a),a.restore(),a.fillStyle=L}if(r.patternStroke){a.save();const L=r.strokeColor.getPattern(a,this,ao(a),Rr.STROKE);x=dn(a),a.restore(),a.strokeStyle=L}let E=r.lineWidth;const I=r.textMatrixScale;if(I===0||E===0){const L=r.textRenderingMode&Er.FILL_STROKE_MASK;(L===Er.STROKE||L===Er.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=I;if(o!==1&&(a.scale(o,o),E/=o),a.lineWidth=E,i.isInvalidPDFjsFont){const L=[];let R=0;for(const he of t)L.push(he.unicode),R+=he.width;const re=L.join("");if(a.fillText(re,0,0),this.dependencyTracker!==null){const he=a.measureText(re);this.dependencyTracker.recordBBox(e,this.ctx,-he.actualBoundingBoxLeft,he.actualBoundingBoxRight,-he.actualBoundingBoxAscent,he.actualBoundingBoxDescent).recordOperation(e).recordIncrementalData("sameLineText",e)}r.x+=R*w*u,a.restore(),this.compose();return}let P=0,_;for(_=0;_<h;++_){const L=t[_];if(typeof L=="number"){P+=p*L*s/1e3;continue}let R=!1;const re=(L.isSpace?A:0)+l,he=L.fontChar,te=L.accent;let ee,Z,ae=L.width;if(g){const ie=L.vmetric||m,we=-(L.vmetric?ie[1]:ae*.5)*w,Ye=ie[2]*w;ae=ie?-ie[0]:ae,ee=we/o,Z=(P+Ye)/o}else ee=P/o,Z=0;let fe;if(i.remeasure&&ae>0){fe=a.measureText(he);const ie=fe.width*1e3/s*o;if(ae<ie&&this.isFontSubpixelAAEnabled){const we=ae/ie;R=!0,a.save(),a.scale(we,1),ee/=we}else ae!==ie&&(ee+=(ae-ie)/2e3*s/o)}if(this.contentVisible&&(L.isInFont||i.missingFile)){if(v&&!te)a.fillText(he,ee,Z),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,a,fe?{bbox:null}:i,s/o,ee,Z,()=>fe??a.measureText(he));else if(this.paintChar(e,he,ee,Z,b,x),te){const ie=ee+s*te.offset.x/o,we=Z-s*te.offset.y/o;this.paintChar(e,te.fontChar,ie,we,b,x)}}const Ue=g?ae*w-re*c:ae*w+re*c;P+=Ue,R&&a.restore()}g?r.y-=P:r.x+=P*u,a.restore(),this.compose(),(U=this.dependencyTracker)==null||U.recordOperation(e).recordIncrementalData("sameLineText",e)}showType3Text(e,t){const r=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,A=i.charSpacing,c=i.wordSpacing,u=i.textHScale*o,h=i.fontMatrix||Zk,g=t.length,p=i.textRenderingMode===Er.INVISIBLE;let m,w,v,b;if(p||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(u,o);const x=this.dependencyTracker;for(this.dependencyTracker=x?new T_(x,e):null,m=0;m<g;++m){if(w=t[m],typeof w=="number"){b=l*w*a/1e3,this.ctx.translate(b,0),i.x+=b*u;continue}const E=(w.isSpace?c:0)+A,I=s.charProcOperatorList[w.operatorListId];I?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...h),this.executeOperatorList(I),this.restore()):Ge(`Type3 character "${w.operatorListId}" is not available.`);const P=[w.width,0];Te.applyTransform(P,h),v=P[0]*a+E,r.translate(v,0),i.x+=v*u}r.restore(),x&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=x)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,s,a,o){var A;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(A=this.dependencyTracker)==null||A.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||dn(this.ctx),s={createCanvasGraphics:a=>new KM(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new T_(this.dependencyTracker,e):null)};r=new CN(t,this.ctx,s,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=_ke(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){var a;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,ao(r),Rr.SHADING);const s=ao(r);{const{width:o,height:l}=r.canvas,A=Yg.slice();Te.axialAlignedBoundingBox([0,0,o,l],s,A);const[c,u,h,g]=A;this.ctx.fillRect(c,u,h-c,g-u)}(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Gs.transform).recordDependencies(e,Gs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Ft("Should not call beginInlineImage")}beginImageData(){Ft("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=dn(this.ctx),r)){Te.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,a,o,l]=r,A=new Path2D;A.rect(s,a,o-s,l-a),this.ctx.clip(A),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var x;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||tT("TODO: Support non-isolated groups."),t.knockout&&Ge("Knockout groups not supported.");const i=dn(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Yg.slice();Te.axialAlignedBoundingBox(t.bbox,dn(r),s);const a=[0,0,r.canvas.width,r.canvas.height];s=Te.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),A=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,A,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,A,c),g=h.context;g.translate(-o,-l),g.transform(...i);let p=new Path2D;const[m,w,v,b]=t.bbox;if(p.rect(m,w,v-m,b-w),t.matrix){const E=new Path2D;E.addPath(p,new DOMMatrix(t.matrix)),p=E}g.clip(p),t.smask&&this.smaskStack.push({canvas:h.canvas,context:g,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),gy(r,g),this.ctx=g,(x=this.dependencyTracker)==null||x.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=dn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=Yg.slice();Te.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,r,i,s,a){if(D(this,eo,_N).call(this),CE(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,Te.singularValueDecompose2dScale(dn(this.ctx),xs);const{viewportScale:A}=this,c=Math.ceil(o*this.outputScaleX*A),u=Math.ceil(l*this.outputScaleY*A);this.annotationCanvas=this.canvasFactory.create(c,u);const{canvas:h,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(xs[0],0,0,-xs[1],0,l*xs[1]),CE(this.ctx)}else{CE(this.ctx),this.endPath(e);const A=new Path2D;A.rect(r[0],r[1],o,l),this.ctx.clip(A)}}this.current=new LV(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),D(this,eo,SN).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,s=0,a,o){var u,h,g;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const A=dn(l);l.transform(r,i,s,a,0,0);const c=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,c.offsetX-A[4],c.offsetY-A[5]),(u=this.dependencyTracker)==null||u.resetBBox(e);for(let p=0,m=o.length;p<m;p+=2){const w=Te.transform(A,[r,i,s,a,o[p],o[p+1]]);l.drawImage(c.canvas,w[4],w[5]),(h=this.dependencyTracker)==null||h.recordBBox(e,this.ctx,w[4],w[4]+c.canvas.width,w[5],w[5]+c.canvas.height)}l.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Gs.transformAndFill);for(const A of t){const{data:c,width:u,height:h,transform:g}=A,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),m=p.context;m.save();const w=this.getObject(e,c,A);jV(m,w),m.globalCompositeOperation="source-in",m.fillStyle=s?i.getPattern(m,this,ao(r),Rr.FILL):i,m.fillRect(0,0,u,h),m.restore(),r.save(),r.transform(...g),r.scale(1,-1),EE(r,p.canvas,0,0,u,h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,u,0,h),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){Ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Ge("Dependent image isn't ready yet");return}const o=a.width,l=a.height,A=[];for(let c=0,u=s.length;c<u;c+=2)A.push({transform:[r,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,A)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var A;if(!this.contentVisible)return;const r=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/r,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",r,i).context;QV(u,t),o=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(o,ao(s));s.imageSmoothingEnabled=HV(dn(s),t.interpolate),(A=this.dependencyTracker)==null||A.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,Gs.imageXObject).recordOperation(e),EE(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const A=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",A,c).context;QV(h,t),s=this.applyTransferMapsToCanvas(h)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const A of r)i.save(),i.transform(...A.transform),i.scale(1,-1),EE(i,s,A.x,A.y,A.w,A.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Gs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===VV?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=dn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let a,o;if(r===0&&i===0){const l=Math.abs(t),A=Math.abs(s);if(l===A)if(e===0)a=o=1/l;else{const c=l*e;a=o=c<1?1/c:1}else if(e===0)a=1/l,o=1/A;else{const c=l*e,u=A*e;a=c<1?1/c:1,o=u<1?1/u:1}}else{const l=Math.abs(t*s-r*i),A=Math.hypot(t,r),c=Math.hypot(i,s);if(e===0)a=c/l,o=A/l;else{const u=e*l;a=c>u?c/u:1,o=A>u?A/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){r.lineWidth=(i||1)*s,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(s,a),a2.a=1/s,a2.d=1/a;const l=new Path2D;if(l.addPath(e,a2),o.length>0){const A=Math.max(s,a);r.setLineDash(o.map(c=>c/A)),r.lineDashOffset/=A}r.lineWidth=i||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};eo=new WeakSet,_N=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},SN=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},IN=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let dp=KM;for(const n in Bw)dp.prototype[n]!==void 0&&(dp.prototype[Bw[n]]=dp.prototype[n]);var tb,nb;class Oo{static get workerPort(){return d(this,tb)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,tb,e)}static get workerSrc(){return d(this,nb)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,nb,e)}}tb=new WeakMap,nb=new WeakMap,N(Oo,tb,null),N(Oo,nb,"");var Hp,rb;class Dke{constructor({parsedData:e,rawData:t}){N(this,Hp);N(this,rb);S(this,Hp,e),S(this,rb,t)}getRaw(){return d(this,rb)}get(e){return d(this,Hp).get(e)??null}[Symbol.iterator](){return d(this,Hp).entries()}}Hp=new WeakMap,rb=new WeakMap;const Tg=Symbol("INTERNAL");var ib,sb,ab,Vp;class Oke{constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){N(this,ib,!1);N(this,sb,!1);N(this,ab,!1);N(this,Vp,!0);S(this,ib,!!(e&vs.DISPLAY)),S(this,sb,!!(e&vs.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(d(this,ab))return d(this,Vp);if(!d(this,Vp))return!1;const{print:e,view:t}=this.usage;return d(this,ib)?(t==null?void 0:t.viewState)!=="OFF":d(this,sb)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Tg&&Ft("Internal method `_setVisible` called."),S(this,ab,r),S(this,Vp,t)}}ib=new WeakMap,sb=new WeakMap,ab=new WeakMap,Vp=new WeakMap;var Uc,St,Kp,$p,ob,TN;class Uke{constructor(e,t=vs.DISPLAY){N(this,ob);N(this,Uc,null);N(this,St,new Map);N(this,Kp,null);N(this,$p,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,$p,e.order);for(const r of e.groups)d(this,St).set(r.id,new Oke(t,r));if(e.baseState==="OFF")for(const r of d(this,St).values())r._setVisible(Tg,!1);for(const r of e.on)d(this,St).get(r)._setVisible(Tg,!0);for(const r of e.off)d(this,St).get(r)._setVisible(Tg,!1);S(this,Kp,this.getHash())}}isVisible(e){if(d(this,St).size===0)return!0;if(!e)return tT("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,St).has(e.id)?d(this,St).get(e.id).visible:(Ge(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return D(this,ob,TN).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,St).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(d(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,St).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(!d(this,St).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,St).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(!d(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,St).has(t))return Ge(`Optional content group not found: ${t}`),!0;if(d(this,St).get(t).visible)return!1}return!0}return Ge(`Unknown optional content policy ${e.policy}.`),!0}return Ge(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var s;const i=d(this,St).get(e);if(!i){Ge(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=d(this,St).get(o))==null||s._setVisible(Tg,!1,!0));i._setVisible(Tg,!!t,!0),S(this,Uc,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=d(this,St).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}S(this,Uc,null)}get hasInitialVisibility(){return d(this,Kp)===null||this.getHash()===d(this,Kp)}getOrder(){return d(this,St).size?d(this,$p)?d(this,$p).slice():[...d(this,St).keys()]:null}getGroup(e){return d(this,St).get(e)||null}getHash(){if(d(this,Uc)!==null)return d(this,Uc);const e=new PJ;for(const[t,r]of d(this,St))e.update(`${t}:${r.visible}`);return S(this,Uc,e.hexdigest())}[Symbol.iterator](){return d(this,St).entries()}}Uc=new WeakMap,St=new WeakMap,Kp=new WeakMap,$p=new WeakMap,ob=new WeakSet,TN=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=D(this,ob,TN).call(this,s);else if(d(this,St).has(s))a=d(this,St).get(s).visible;else return Ge(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class Rke{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Ln(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,A)=>{this._onReceiveData({begin:l,chunk:A})}),e.addProgressListener((l,A)=>{this._onProgress({loaded:l,total:A})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});Ln(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,s;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ln(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Mke(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Lke(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class Mke{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=NM(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Lke{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Qke(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=A(c),s(c)}if(t=a(n),t){const c=A(t);return s(c)}if(t=r("filename","i").exec(n),t){t=t[1];let c=o(t);return c=A(c),s(c)}function r(c,u){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function i(c,u){if(c){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const h=new TextDecoder(c,{fatal:!0}),g=Qx(u);u=h.decode(g),e=!1}catch{}}return u}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function a(c){const u=[];let h;const g=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=g.exec(c))!==null;){let[,m,w,v]=h;if(m=parseInt(m,10),m in u){if(m===0)break;continue}u[m]=[w,v]}const p=[];for(let m=0;m<u.length&&m in u;++m){let[w,v]=u[m];v=o(v),w&&(v=unescape(v),m===0&&(v=l(v))),p.push(v)}return p.join("")}function o(c){if(c.startsWith('"')){const u=c.slice(1).split('\\"');for(let h=0;h<u.length;++h){const g=u[h].indexOf('"');g!==-1&&(u[h]=u[h].slice(0,g),u.length=h+1),u[h]=u[h].replaceAll(/\\(.)/g,"$1")}c=u.join('"')}return c}function l(c){const u=c.indexOf("'");if(u===-1)return c;const h=c.slice(0,u),p=c.slice(u+1).replace(/^[^']*'/,"");return i(h,p)}function A(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,h,g,p){if(g==="q"||g==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,w){return String.fromCharCode(parseInt(w,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function HJ(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function iT(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function VJ({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function KJ(n){const e=n.get("Content-Disposition");if(e){let t=Qke(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(NM(t))return t}return null}function Kx(n,e){return new C_(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function $J(n){return n===200||n===206}function GJ(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function zJ(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ge(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class jke{constructor(e){ce(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=HJ(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Hke(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Vke(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Hke{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,GJ(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=iT(s.url),!$J(s.status))throw Kx(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=VJ({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=KJ(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ju("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:zJ(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Vke{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const a=i.url;fetch(a,GJ(s,this._withCredentials,this._abortController)).then(o=>{const l=iT(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!$J(o.status))throw Kx(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:zJ(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const o2=200,l2=206;function Kke(n){const e=n.response;return typeof e!="string"?e:Qx(e).buffer}class $ke{constructor({url:e,httpHeaders:t,withCredentials:r}){ce(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=HJ(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=l2):i.expectedStatus=o2,t.responseType="arraybuffer",Ln(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||o2;if(!(s===o2&&r.expectedStatus===l2)&&s!==r.expectedStatus){r.onError(i.status);return}const o=Kke(i);if(s===l2){const l=i.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);A?r.onDone({begin:parseInt(A[1],10),chunk:o}):(Ge('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Gke{constructor(e){this._source=e,this._manager=new $ke(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ln(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new zke(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new Wke(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class zke{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=iT(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...A]=o.split(": ");return[l,A.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=VJ({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=KJ(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Kx(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Wke{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=iT((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Kx(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Xke=/^[a-z][a-z0-9\-+.]+:/i;function Yke(n){if(Xke.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class qke{constructor(e){this.source=e,this.url=Yke(e.url),Ln(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ln(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Jke(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new Zke(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Jke{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Kx(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ju("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Zke{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const py=Symbol("INITIAL_DATA");var os,lb,PN;class WJ{constructor(){N(this,lb);N(this,os,Object.create(null))}get(e,t=null){if(t){const i=D(this,lb,PN).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=d(this,os)[e];if(!r||r.data===py)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=d(this,os)[e];return!!t&&t.data!==py}delete(e){const t=d(this,os)[e];return!t||t.data===py?!1:(delete d(this,os)[e],!0)}resolve(e,t=null){const r=D(this,lb,PN).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in d(this,os)){const{data:r}=d(this,os)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}S(this,os,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,os)){const{data:t}=d(this,os)[e];t!==py&&(yield[e,t])}}}os=new WeakMap,lb=new WeakSet,PN=function(e){var t;return(t=d(this,os))[e]||(t[e]={...Promise.withResolvers(),data:py})};const eNe=1e5,KV=30;var WV,Rc,Oi,Ab,cb,mh,Fl,ub,db,yh,Gp,zp,Mc,Wp,hb,Xp,vh,fb,gb,Yp,wh,pb,Lc,qp,DA,XJ,YJ,FN,Fs,gC,kN,qJ,JJ;const $n=class $n{constructor({textContentSource:e,container:t,viewport:r}){N(this,DA);N(this,Rc,Promise.withResolvers());N(this,Oi,null);N(this,Ab,!1);N(this,cb,!!((WV=globalThis.FontInspector)!=null&&WV.enabled));N(this,mh,null);N(this,Fl,null);N(this,ub,0);N(this,db,0);N(this,yh,null);N(this,Gp,null);N(this,zp,0);N(this,Mc,0);N(this,Wp,Object.create(null));N(this,hb,[]);N(this,Xp,null);N(this,vh,[]);N(this,fb,new WeakMap);N(this,gb,null);var l;if(e instanceof ReadableStream)S(this,Xp,e);else if(typeof e=="object")S(this,Xp,new ReadableStream({start(A){A.enqueue(e),A.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Oi,S(this,Gp,t)),S(this,Mc,r.scale*Wo.pixelRatio),S(this,zp,r.rotation),S(this,Fl,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=r.rawDims;S(this,gb,[1,0,0,-1,-a,o+s]),S(this,db,i),S(this,ub,s),D(l=$n,Fs,qJ).call(l),kf(t,r),d(this,Rc).promise.finally(()=>{d($n,qp).delete(this),S(this,Fl,null),S(this,Wp,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Vr.platform;return et(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,yh).read().then(({value:t,done:r})=>{if(r){d(this,Rc).resolve();return}d(this,mh)??S(this,mh,t.lang),Object.assign(d(this,Wp),t.styles),D(this,DA,XJ).call(this,t.items),e()},d(this,Rc).reject)};return S(this,yh,d(this,Xp).getReader()),d($n,qp).add(this),e(),d(this,Rc).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*Wo.pixelRatio,i=e.rotation;if(i!==d(this,zp)&&(t==null||t(),S(this,zp,i),kf(d(this,Gp),{rotation:i})),r!==d(this,Mc)){t==null||t(),S(this,Mc,r);const a={div:null,properties:null,ctx:D(s=$n,Fs,gC).call(s,d(this,mh))};for(const o of d(this,vh))a.properties=d(this,fb).get(o),a.div=o,D(this,DA,FN).call(this,a)}}cancel(){var t;const e=new Ju("TextLayer task cancelled.");(t=d(this,yh))==null||t.cancel(e).catch(()=>{}),S(this,yh,null),d(this,Rc).reject(e)}get textDivs(){return d(this,vh)}get textContentItemsStr(){return d(this,hb)}static cleanup(){if(!(d(this,qp).size>0)){d(this,Yp).clear();for(const{canvas:e}of d(this,wh).values())e.remove();d(this,wh).clear()}}};Rc=new WeakMap,Oi=new WeakMap,Ab=new WeakMap,cb=new WeakMap,mh=new WeakMap,Fl=new WeakMap,ub=new WeakMap,db=new WeakMap,yh=new WeakMap,Gp=new WeakMap,zp=new WeakMap,Mc=new WeakMap,Wp=new WeakMap,hb=new WeakMap,Xp=new WeakMap,vh=new WeakMap,fb=new WeakMap,gb=new WeakMap,Yp=new WeakMap,wh=new WeakMap,pb=new WeakMap,Lc=new WeakMap,qp=new WeakMap,DA=new WeakSet,XJ=function(e){var i,s;if(d(this,Ab))return;(s=d(this,Fl)).ctx??(s.ctx=D(i=$n,Fs,gC).call(i,d(this,mh)));const t=d(this,vh),r=d(this,hb);for(const a of e){if(t.length>eNe){Ge("Ignoring additional textDivs for performance reasons."),S(this,Ab,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=d(this,Oi);S(this,Oi,document.createElement("span")),d(this,Oi).classList.add("markedContent"),a.id&&d(this,Oi).setAttribute("id",`${a.id}`),o.append(d(this,Oi))}else a.type==="endMarkedContent"&&S(this,Oi,d(this,Oi).parentNode);continue}r.push(a.str),D(this,DA,YJ).call(this,a)}},YJ=function(e){var m;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,vh).push(t);const i=Te.transform(d(this,gb),e.transform);let s=Math.atan2(i[1],i[0]);const a=d(this,Wp)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=d(this,cb)&&a.fontSubstitution||a.fontFamily;o=$n.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),A=l*D(m=$n,Fs,JJ).call(m,o,a,d(this,mh));let c,u;s===0?(c=i[4],u=i[5]-A):(c=i[4]+A*Math.sin(s),u=i[5]-A*Math.cos(s));const h="calc(var(--total-scale-factor) *",g=t.style;d(this,Oi)===d(this,Gp)?(g.left=`${(100*c/d(this,db)).toFixed(2)}%`,g.top=`${(100*u/d(this,ub)).toFixed(2)}%`):(g.left=`${h}${c.toFixed(2)}px)`,g.top=`${h}${u.toFixed(2)}px)`),g.fontSize=`${h}${(d($n,Lc)*l).toFixed(2)}px)`,g.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,cb)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(p=!0)}if(p&&(r.canvasWidth=a.vertical?e.height:e.width),d(this,fb).set(t,r),d(this,Fl).div=t,d(this,Fl).properties=r,D(this,DA,FN).call(this,d(this,Fl)),r.hasText&&d(this,Oi).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),d(this,Oi).append(w)}},FN=function(e){var o;const{div:t,properties:r,ctx:i}=e,{style:s}=t;let a="";if(d($n,Lc)>1&&(a=`scale(${1/d($n,Lc)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:A,fontSize:c}=r;D(o=$n,Fs,kN).call(o,i,c*d(this,Mc),l);const{width:u}=i.measureText(t.textContent);u>0&&(a=`scaleX(${A*d(this,Mc)/u}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Fs=new WeakSet,gC=function(e=null){let t=d(this,wh).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,wh).set(e,t),d(this,pb).set(t,{size:0,family:""})}return t},kN=function(e,t,r){const i=d(this,pb).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},qJ=function(){if(d(this,Lc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Lc,e.getBoundingClientRect().height),e.remove()},JJ=function(e,t,r){const i=d(this,Yp).get(e);if(i)return i;const s=D(this,Fs,gC).call(this,r);s.canvas.width=s.canvas.height=KV,D(this,Fs,kN).call(this,s,KV,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let A=.8;return o?A=o/(o+l):(Vr.platform.isFirefox&&Ge("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?A=t.ascent:t.descent&&(A=1+t.descent)),d(this,Yp).set(e,A),A},N($n,Fs),N($n,Yp,new Map),N($n,wh,new Map),N($n,pb,new WeakMap),N($n,Lc,null),N($n,qp,new Set);let Ew=$n;class Cw{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(Cw.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const A of s.children)i(A)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const tNe=100;function ZJ(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new NN,{docId:t}=e,r=n.url?Ake(n.url):null,i=n.data?cke(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof eZ?n.range:null,A=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let c=n.worker instanceof _w?n.worker:null;const u=n.verbosity,h=typeof n.docBaseUrl=="string"&&!nT(n.docBaseUrl)?n.docBaseUrl:null,g=xE(n.cMapUrl),p=n.cMapPacked!==!1,m=n.CMapReaderFactory||(yi?yke:kV),w=xE(n.iccUrl),v=xE(n.standardFontDataUrl),b=n.StandardFontDataFactory||(yi?vke:NV),x=xE(n.wasmUrl),E=n.WasmFactory||(yi?wke:DV),I=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,T=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!yi,k=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!yi&&(Vr.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,U=typeof n.disableFontFace=="boolean"?n.disableFontFace:yi,L=n.fontExtraProperties===!0,R=n.enableXfa===!0,re=n.ownerDocument||globalThis.document,he=n.disableRange===!0,te=n.disableStream===!0,ee=n.disableAutoFetch===!0,Z=n.pdfBug===!0,ae=n.CanvasFactory||(yi?mke:fke),fe=n.FilterFactory||(yi?pke:gke),Ue=n.enableHWA===!0,ie=n.useWasm!==!1,we=l?l.length:n.length??NaN,Ye=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!yi&&!U,j=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===kV&&b===NV&&E===DV&&g&&v&&x&&Ly(g,document.baseURI)&&Ly(v,document.baseURI)&&Ly(x,document.baseURI)),G=null;jFe(u);const Q={canvasFactory:new ae({ownerDocument:re,enableHWA:Ue}),filterFactory:new fe({docId:t,ownerDocument:re}),cMapReaderFactory:j?null:new m({baseUrl:g,isCompressed:p}),standardFontDataFactory:j?null:new b({baseUrl:v}),wasmFactory:j?null:new E({baseUrl:x})};c||(c=_w.create({verbosity:u,port:Oo.workerPort}),e._worker=c);const ne={docId:t,apiVersion:"5.4.149",data:i,password:o,disableAutoFetch:ee,rangeChunkSize:A,length:we,docBaseUrl:h,enableXfa:R,evaluatorOptions:{maxImageSize:P,disableFontFace:U,ignoreErrors:I,isEvalSupported:_,isOffscreenCanvasSupported:T,isImageDecoderSupported:k,canvasMaxAreaInBytes:O,fontExtraProperties:L,useSystemFonts:Ye,useWasm:ie,useWorkerFetch:j,cMapUrl:g,iccUrl:w,standardFontDataUrl:v,wasmUrl:x}},V={ownerDocument:re,pdfBug:Z,styleElement:G,loadingParams:{disableAutoFetch:ee,enableXfa:R}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const X=c.messageHandler.sendWithPromise("GetDocRequest",ne,i?[i.buffer]:null);let J;if(l)J=new Rke(l,{disableRange:he,disableStream:te});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const $=Ly(r)?jke:yi?qke:Gke;J=new $({url:r,length:we,httpHeaders:s,withCredentials:a,rangeChunkSize:A,disableRange:he,disableStream:te})}return X.then($=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const De=new $y(t,$,c.port),ke=new iNe(De,e,J,V,Q,Ue);e._transport=ke,De.send("Ready",null)})}).catch(e._capability.reject),e}var $_;const G_=class G_{constructor(){ce(this,"_capability",Promise.withResolvers());ce(this,"_transport",null);ce(this,"_worker",null);ce(this,"docId",`d${Vn(G_,$_)._++}`);ce(this,"destroyed",!1);ce(this,"onPassword",null);ce(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};$_=new WeakMap,N(G_,$_,0);let NN=G_;var bh,mb,yb,vb,wb;class eZ{constructor(e,t,r=!1,i=null){N(this,bh,Promise.withResolvers());N(this,mb,[]);N(this,yb,[]);N(this,vb,[]);N(this,wb,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){d(this,wb).push(e)}addProgressListener(e){d(this,vb).push(e)}addProgressiveReadListener(e){d(this,yb).push(e)}addProgressiveDoneListener(e){d(this,mb).push(e)}onDataRange(e,t){for(const r of d(this,wb))r(e,t)}onDataProgress(e,t){d(this,bh).promise.then(()=>{for(const r of d(this,vb))r(e,t)})}onDataProgressiveRead(e){d(this,bh).promise.then(()=>{for(const t of d(this,yb))t(e)})}onDataProgressiveDone(){d(this,bh).promise.then(()=>{for(const e of d(this,mb))e()})}transportReady(){d(this,bh).resolve()}requestDataRange(e,t){Ft("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}bh=new WeakMap,mb=new WeakMap,yb=new WeakMap,vb=new WeakMap,wb=new WeakMap;class nNe{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var kl,xh,Yy;class rNe{constructor(e,t,r,i=!1){N(this,xh);N(this,kl,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new TV:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new WJ,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new Hx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:s=fc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:A=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:h=!1,recordOperations:g=!1,filteredOperationIndexes:p=null}){var T,k,O;(T=this._stats)==null||T.time("Overall");const m=this._transport.getRenderingIntent(i,s,u,h),{renderingIntent:w,cacheKey:v}=m;S(this,kl,!1),l||(l=this._transport.getOptionalContentConfig(w));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const x=!!(w&vs.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(k=this._stats)==null||k.time("Page Request"),this._pumpOperatorList(m));const E=!this.recordedGroups&&(g||this._pdfBug&&((O=globalThis.StepperManager)==null?void 0:O.enabled)),I=U=>{var L,R,re;if(b.renderTasks.delete(P),E){const he=(L=P.gfx)==null?void 0:L.dependencyTracker.take();he?((R=P.stepper)==null||R.setOperatorGroups(he),g&&(this.recordedGroups=he)):g&&(this.recordedGroups=[])}x&&S(this,kl,!0),D(this,xh,Yy).call(this),U?(P.capability.reject(U),this._abortOperatorList({intentState:b,reason:U instanceof Error?U:new Error(U)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(re=globalThis.Stats)!=null&&re.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new DN({callback:I,params:{canvas:t,canvasContext:e,dependencyTracker:E?new bke(t):null,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:A,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,filteredOperationIndexes:p});(b.renderTasks||(b.renderTasks=new Set)).add(P);const _=P.task;return Promise.all([b.displayReadyCapability.promise,l]).then(([U,L])=>{var R;if(this.destroyed){I();return}if((R=this._stats)==null||R.time("Rendering"),!(L.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:U,optionalContentConfig:L}),P.operatorListChanged()}).catch(I),_}getOperatorList({intent:e="display",annotationMode:t=fc.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var A;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,r,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Cw.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:l,done:A}){if(A){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),S(this,kl,!1),Promise.all(e)}cleanup(e=!1){S(this,kl,!0);const t=D(this,xh,Yy).call(this);return e&&t&&this._stats&&(this._stats=new TV),t}_startRenderPage(e,t){var i,s;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&D(this,xh,Yy).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),A=this._intentStates.get(t);A.streamReader=l;const c=()=>{l.read().then(({value:u,done:h})=>{if(h){A.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(u,A),c())},u=>{if(A.streamReader=null,!this._transport.destroyed){if(A.operatorList){A.operatorList.lastChunk=!0;for(const h of A.renderTasks)h.operatorListChanged();D(this,xh,Yy).call(this)}if(A.displayReadyCapability)A.displayReadyCapability.reject(u);else if(A.opListReadCapability)A.opListReadCapability.reject(u);else throw u}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof kM){let i=tNe;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ju(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}kl=new WeakMap,xh=new WeakSet,Yy=function(){if(!d(this,kl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,kl,!1),!0};var Qc,Ua,Nl,Bh,z_,Eh,Ch,Bi,pC,tZ,nZ,qy,Jp,mC;const qt=class qt{constructor({name:e=null,port:t=null,verbosity:r=HFe()}={}){N(this,Bi);N(this,Qc,Promise.withResolvers());N(this,Ua,null);N(this,Nl,null);N(this,Bh,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(d(qt,Ch).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(qt,Ch).set(t,this),D(this,Bi,tZ).call(this,t)}else D(this,Bi,nZ).call(this)}get promise(){return d(this,Qc).promise}get port(){return d(this,Nl)}get messageHandler(){return d(this,Ua)}destroy(){var e,t;this.destroyed=!0,(e=d(this,Bh))==null||e.terminate(),S(this,Bh,null),d(qt,Ch).delete(d(this,Nl)),S(this,Nl,null),(t=d(this,Ua))==null||t.destroy(),S(this,Ua,null)}static create(e){const t=d(this,Ch).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new qt(e)}static get workerSrc(){if(Oo.workerSrc)return Oo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return et(this,"_setupFakeWorkerGlobal",(async()=>d(this,Jp,mC)?d(this,Jp,mC):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qc=new WeakMap,Ua=new WeakMap,Nl=new WeakMap,Bh=new WeakMap,z_=new WeakMap,Eh=new WeakMap,Ch=new WeakMap,Bi=new WeakSet,pC=function(){d(this,Qc).resolve(),d(this,Ua).send("configure",{verbosity:this.verbosity})},tZ=function(e){S(this,Nl,e),S(this,Ua,new $y("main","worker",e)),d(this,Ua).on("ready",()=>{}),D(this,Bi,pC).call(this)},nZ=function(){if(d(qt,Eh)||d(qt,Jp,mC)){D(this,Bi,qy).call(this);return}let{workerSrc:e}=qt;try{qt._isSameOrigin(window.location,e)||(e=qt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new $y("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?d(this,Qc).reject(new Error("Worker was destroyed")):D(this,Bi,qy).call(this)},s=new AbortController;t.addEventListener("error",()=>{d(this,Bh)||i()},{signal:s.signal}),r.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}S(this,Ua,r),S(this,Nl,t),S(this,Bh,t),D(this,Bi,pC).call(this)}),r.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{D(this,Bi,qy).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{tT("The worker has been disabled.")}D(this,Bi,qy).call(this)},qy=function(){d(qt,Eh)||(Ge("Setting up fake worker."),S(qt,Eh,!0)),qt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Qc).reject(new Error("Worker was destroyed"));return}const t=new hke;S(this,Nl,t);const r=`fake${Vn(qt,z_)._++}`,i=new $y(r+"_worker",r,t);e.setup(i,t),S(this,Ua,new $y(r,r+"_worker",t)),D(this,Bi,pC).call(this)}).catch(e=>{d(this,Qc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Jp=new WeakSet,mC=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},N(qt,Jp),N(qt,z_,0),N(qt,Eh,!1),N(qt,Ch,new WeakMap),yi&&(S(qt,Eh,!0),Oo.workerSrc||(Oo.workerSrc="./pdf.worker.mjs")),qt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},qt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},qt.fromPort=e=>{if(eke("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return qt.create(e)};let _w=qt;var Dl,Bo,Zp,em,Ol,_h,Jy;class iNe{constructor(e,t,r,i,s,a){N(this,_h);N(this,Dl,new Map);N(this,Bo,new Map);N(this,Zp,new Map);N(this,em,new Map);N(this,Ol,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new WJ,this.fontLoader=new oke({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return et(this,"annotationStorage",new DM)}getRenderingIntent(e,t=fc.ENABLE,r=null,i=!1,s=!1){let a=vs.DISPLAY,o=wN;switch(e){case"any":a=vs.ANY;break;case"display":break;case"print":a=vs.PRINT;break;default:Ge(`getRenderingIntent - invalid intent: ${e}`)}const l=a&vs.PRINT&&r instanceof kJ?r:this.annotationStorage;switch(t){case fc.DISABLE:a+=vs.ANNOTATIONS_DISABLE;break;case fc.ENABLE:break;case fc.ENABLE_FORMS:a+=vs.ANNOTATIONS_FORMS;break;case fc.ENABLE_STORAGE:a+=vs.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Ge(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=vs.IS_EDITING),s&&(a+=vs.OPLIST);const{ids:A,hash:c}=l.modifiedIds,u=[a,o.hash,c];return{renderingIntent:a,cacheKey:u.join("_"),annotationStorageSerializable:o,modifiedIds:A}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=d(this,Ol))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of d(this,Bo).values())e.push(i._destroy());d(this,Bo).clear(),d(this,Zp).clear(),d(this,em).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Dl).clear(),this.filterFactory.destroy(),Ew.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ju("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{Ln(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}Ln(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var A;(A=t.onProgress)==null||A.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{Ln(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}Ln(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new nNe(r,this))}),e.on("DocException",r=>{t._capability.reject(ki(r))}),e.on("PasswordRequest",r=>{S(this,Ol,Promise.withResolvers());try{if(!t.onPassword)throw ki(r);const i=s=>{s instanceof Error?d(this,Ol).reject(s):d(this,Ol).resolve({password:s})};t.onPassword(i,r.code)}catch(i){d(this,Ol).reject(i)}return d(this,Ol).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;d(this,Bo).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const c=s.error;Ge(`Error during font loading: ${c}`),this.commonObjs.resolve(r,c);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(c,u)=>globalThis.FontInspector.fontAdded(c,u):null,l=new lke(s,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"CopyLocalImage":const{imageRef:A}=s;Ln(A,"The imageRef must be defined.");for(const c of d(this,Bo).values())for(const[,u]of c.objs)if((u==null?void 0:u.ref)===A)return u.dataLen?(this.commonObjs.resolve(r,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{var l;if(this.destroyed)return;const o=d(this,Bo).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=d(this,Zp).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&d(this,em).set(s.refStr,e);const a=new rNe(t,s,this,this._params.pdfBug);return d(this,Bo).set(t,a),a});return d(this,Zp).set(t,i),i}getPageIndex(e){return bN(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return D(this,_h,Jy).call(this,"GetFieldObjects")}hasJSActions(){return D(this,_h,Jy).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return D(this,_h,Jy).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return D(this,_h,Jy).call(this,"GetOptionalContentConfig").then(t=>new Uke(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,Dl).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Dke(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return d(this,Dl).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,Bo).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Dl).clear(),this.filterFactory.destroy(!0),Ew.cleanup()}}cachedPageNumber(e){if(!bN(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,em).get(t)??null}}Dl=new WeakMap,Bo=new WeakMap,Zp=new WeakMap,em=new WeakMap,Ol=new WeakMap,_h=new WeakSet,Jy=function(e,t=null){const r=d(this,Dl).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return d(this,Dl).set(e,i),i};var jc;class sNe{constructor(e){N(this,jc,null);ce(this,"onContinue",null);ce(this,"onError",null);S(this,jc,e)}get promise(){return d(this,jc).capability.promise}cancel(e=0){d(this,jc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,jc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,jc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}jc=new WeakMap;var Hc,Sh;const Ld=class Ld{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:A,useRequestAnimationFrame:c=!1,pdfBug:u=!1,pageColors:h=null,enableHWA:g=!1,filteredOperationIndexes:p=null}){N(this,Hc,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=A,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new sNe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=g,this._dependencyTracker=t.dependencyTracker,this._filteredOperationIndexes=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,A;if(this.cancelled)return;if(this._canvas){if(d(Ld,Sh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(Ld,Sh).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new dp(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(A=this.graphicsReadyCallback)==null||A.call(this)}cancel(e=null,t=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),d(this,Hc)&&(window.cancelAnimationFrame(d(this,Hc)),S(this,Hc,null)),d(Ld,Sh).delete(this._canvas),e||(e=new kM(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Hc,window.requestAnimationFrame(()=>{S(this,Hc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(Ld,Sh).delete(this._canvas),this.callback())))}};Hc=new WeakMap,Sh=new WeakMap,N(Ld,Sh,new WeakSet);let DN=Ld;const aNe="5.4.149",oNe="9e2e9e209";var ls,Ih,tm,Xn,bb,nm,Ul,xb,Vc,Ra,Bb,It,ON,UN,RN,Pd,rZ,ic;const Ni=class Ni{constructor({editor:e=null,uiManager:t=null}){N(this,It);N(this,ls,null);N(this,Ih,null);N(this,tm);N(this,Xn,null);N(this,bb,!1);N(this,nm,!1);N(this,Ul,null);N(this,xb);N(this,Vc,null);N(this,Ra,null);var r,i;e?(S(this,nm,!1),S(this,Ul,e)):S(this,nm,!0),S(this,Ra,(e==null?void 0:e._uiManager)||t),S(this,xb,d(this,Ra)._eventBus),S(this,tm,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=d(this,Ra))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),d(Ni,Bb)||S(Ni,Bb,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return et(this,"_keyboardManager",new Vx([[["Escape","mac+Escape"],Ni.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ni.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ni.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ni.prototype._moveToPrevious],[["Home","mac+Home"],Ni.prototype._moveToBeginning],[["End","mac+End"],Ni.prototype._moveToEnd]]))}renderButton(){const e=S(this,ls,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,Ul)&&(e.ariaControls=`${d(this,Ul).id}_colorpicker_dropdown`);const t=d(this,Ra)._signal;e.addEventListener("click",D(this,It,Pd).bind(this),{signal:t}),e.addEventListener("keydown",D(this,It,RN).bind(this),{signal:t});const r=S(this,Ih,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=d(this,tm),e.append(r),e}renderMainDropdown(){const e=S(this,Xn,D(this,It,ON).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,ls)){D(this,It,Pd).call(this,e);return}const t=e.target.getAttribute("data-color");t&&D(this,It,UN).call(this,t,e)}_moveToNext(e){var t,r;if(!d(this,It,ic)){D(this,It,Pd).call(this,e);return}if(e.target===d(this,ls)){(t=d(this,Xn).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=d(this,Xn))==null?void 0:t.firstChild)||e.target===d(this,ls)){d(this,It,ic)&&this._hideDropdownFromKeyboard();return}d(this,It,ic)||D(this,It,Pd).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!d(this,It,ic)){D(this,It,Pd).call(this,e);return}(t=d(this,Xn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,It,ic)){D(this,It,Pd).call(this,e);return}(t=d(this,Xn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Xn))==null||e.classList.add("hidden"),d(this,ls).ariaExpanded="false",(t=d(this,Vc))==null||t.abort(),S(this,Vc,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,nm)){if(!d(this,It,ic)){(e=d(this,Ul))==null||e.unselect();return}this.hideDropdown(),d(this,ls).focus({preventScroll:!0,focusVisible:d(this,bb)})}}updateColor(e){if(d(this,Ih)&&(d(this,Ih).style.backgroundColor=e),!d(this,Xn))return;const t=d(this,Ra).highlightColors.values();for(const r of d(this,Xn).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,ls))==null||e.remove(),S(this,ls,null),S(this,Ih,null),(t=d(this,Xn))==null||t.remove(),S(this,Xn,null)}};ls=new WeakMap,Ih=new WeakMap,tm=new WeakMap,Xn=new WeakMap,bb=new WeakMap,nm=new WeakMap,Ul=new WeakMap,xb=new WeakMap,Vc=new WeakMap,Ra=new WeakMap,Bb=new WeakMap,It=new WeakSet,ON=function(){const e=document.createElement("div"),t=d(this,Ra)._signal;e.addEventListener("contextmenu",Ea,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,Ul)&&(e.id=`${d(this,Ul).id}_colorpicker_dropdown`);for(const[r,i]of d(this,Ra).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",d(Ni,Bb)[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===d(this,tm),s.addEventListener("click",D(this,It,UN).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",D(this,It,RN).bind(this),{signal:t}),e},UN=function(e,t){t.stopPropagation(),d(this,xb).dispatch("switchannotationeditorparams",{source:this,type:st.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},RN=function(e){Ni._keyboardManager.exec(this,e)},Pd=function(e){if(d(this,It,ic)){this.hideDropdown();return}if(S(this,bb,e.detail===0),d(this,Vc)||(S(this,Vc,new AbortController),window.addEventListener("pointerdown",D(this,It,rZ).bind(this),{signal:d(this,Ra).combinedSignal(d(this,Vc))})),d(this,ls).ariaExpanded="true",d(this,Xn)){d(this,Xn).classList.remove("hidden");return}const t=S(this,Xn,D(this,It,ON).call(this));d(this,ls).append(t)},rZ=function(e){var t;(t=d(this,Xn))!=null&&t.contains(e.target)||this.hideDropdown()},ic=function(){return d(this,Xn)&&!d(this,Xn).classList.contains("hidden")},N(Ni,Bb,null);let P_=Ni;var Eo,Eb,rm,Cb;const Qd=class Qd{constructor(e){N(this,Eo,null);N(this,Eb,null);N(this,rm,null);S(this,Eb,e),S(this,rm,e._uiManager),d(Qd,Cb)||S(Qd,Cb,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(d(this,Eo))return d(this,Eo);const{editorType:e,colorType:t,colorValue:r}=d(this,Eb),i=S(this,Eo,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",d(Qd,Cb)[e]),i.addEventListener("input",()=>{d(this,rm).updateParams(t,i.value)},{signal:d(this,rm)._signal}),i}update(e){d(this,Eo)&&(d(this,Eo).value=e)}destroy(){var e;(e=d(this,Eo))==null||e.remove(),S(this,Eo,null)}hideDropdown(){}};Eo=new WeakMap,Eb=new WeakMap,rm=new WeakMap,Cb=new WeakMap,N(Qd,Cb,null);let F_=Qd;function $V(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function my(n){return Math.max(0,Math.min(255,255*n))}class GV{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=my(e),[e,e,e]}static G_HTML([e]){const t=$V(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(my)}static RGB_HTML(e){return`#${e.map($V).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[my(1-Math.min(1,e+i)),my(1-Math.min(1,r+i)),my(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,a=1-r,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class lNe{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ft("Abstract method `_createSVG` called.")}}class k_ extends lNe{_createSVG(e){return document.createElementNS(il,e)}}class iZ{static setupStorage(e,t,r,i,s){const a=i.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,A=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:A})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,A]of Object.entries(a))if(A!=null)switch(l){case"class":A.length&&e.setAttribute(l,A.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",A);break;case"style":Object.assign(e.style,A);break;case"textContent":e.textContent=A;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,A)}o&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var u,h;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}o&&l.setAttribute("class","xfaLayer xfaFont");const A=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);a.append(g),o&&Cw.shouldBuildText(i.name)&&A.push(g)}return{textDivs:A}}const c=[[i,-1,a]];for(;c.length>0;){const[g,p,m]=c.at(-1);if(p+1===g.children.length){c.pop();continue}const w=g.children[++c.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const x=document.createTextNode(w.value);A.push(x),m.append(x);continue}const b=(u=w==null?void 0:w.attributes)!=null&&u.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(m.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:t,intent:s,linkService:r}),((h=w.children)==null?void 0:h.length)>0)c.push([w,-1,b]);else if(w.value){const x=document.createTextNode(w.value);o&&Cw.shouldBuildText(v)&&A.push(x),b.append(x)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:A}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ANe=9,Df=new WeakSet,cNe=new Date().getTimezoneOffset()*60*1e3;class zV{static create(e){switch(e.data.annotationType){case Dn.LINK:return new RM(e);case Dn.TEXT:return new uNe(e);case Dn.WIDGET:switch(e.data.fieldType){case"Tx":return new dNe(e);case"Btn":return e.data.radioButton?new lZ(e):e.data.checkBox?new fNe(e):new gNe(e);case"Ch":return new pNe(e);case"Sig":return new hNe(e)}return new Xf(e);case Dn.POPUP:return new LN(e);case Dn.FREETEXT:return new gZ(e);case Dn.LINE:return new yNe(e);case Dn.SQUARE:return new vNe(e);case Dn.CIRCLE:return new wNe(e);case Dn.POLYLINE:return new pZ(e);case Dn.CARET:return new xNe(e);case Dn.INK:return new MM(e);case Dn.POLYGON:return new bNe(e);case Dn.HIGHLIGHT:return new mZ(e);case Dn.UNDERLINE:return new BNe(e);case Dn.SQUIGGLY:return new ENe(e);case Dn.STRIKEOUT:return new CNe(e);case Dn.STAMP:return new yZ(e);case Dn.FILEATTACHMENT:return new _Ne(e);default:return new Pn(e)}}}var Th,im,Rl,Of,sZ,MN;const $M=class $M{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){N(this,Of);N(this,Th,null);N(this,im,!1);N(this,Rl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $M._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:e,rect:t}=this.data;let r=-1/0,i=-1/0;if((e==null?void 0:e.length)>=8){for(let s=0;s<e.length;s+=8)e[s+1]>i?(i=e[s+1],r=e[s+2]):e[s+1]===i&&(r=Math.max(r,e[s+2]));return[r,i]}return t?[t[2],t[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[e,t,r]=this.data.color,s=255*(1-(this.data.opacity??1));return D(this,Of,sZ).call(this,Math.min(e+s,255),Math.min(t+s,255),Math.min(r+s,255))}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-a)/i,e}updateEdited(e){var s;if(!this.container)return;e.rect&&(d(this,Th)||S(this,Th,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&D(this,Of,MN).call(this,t);let i=((s=d(this,Rl))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=d(this,Rl).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),S(this,Rl,null),this.popup=null))}resetEdited(){var e;d(this,Th)&&(D(this,Of,MN).call(this,d(this,Th).rect),(e=d(this,Rl))==null||e.popup.resetEdited(),S(this,Th,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof Xf)&&!(this instanceof RM)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof LN){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,s),s}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(m>0||w>0){const b=`calc(${m}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=b}else if(this instanceof lZ){const b=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=b}switch(t.borderStyle.style){case Eg.SOLID:a.borderStyle="solid";break;case Eg.DASHED:a.borderStyle="dashed";break;case Eg.BEVELED:Ge("Unimplemented border style: beveled");break;case Eg.INSET:Ge("Unimplemented border style: inset");break;case Eg.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(S(this,im,!0),a.borderColor=Te.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const A=Te.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:c,pageHeight:u,pageX:h,pageY:g}=i.rawDims;a.left=`${100*(A[0]-h)/c}%`,a.top=`${100*(A[1]-g)/u}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/u}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/r}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],a=s[0],o=s.slice(1);i.target.style[r]=GV[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:GV[`${a}_rgb`](o)})};return et(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||r[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const a=r[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,w,v,b]=e.subarray(2,6);if(i===m&&s===w&&t===v&&r===b)return}const{style:a}=this.container;let o;if(d(this,im)){const{borderColor:m,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=i-t,A=s-r,{svgFactory:c}=this,u=c.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0),u.role="none";const h=c.createElement("defs");u.append(h);const g=c.createElement("clipPath"),p=`clippath_${this.data.id}`;g.setAttribute("id",p),g.setAttribute("clipPathUnits","objectBoundingBox"),h.append(g);for(let m=2,w=e.length;m<w;m+=8){const v=e[m],b=e[m+1],x=e[m+2],E=e[m+3],I=c.createElement("rect"),P=(x-t)/l,_=(s-b)/A,T=(v-x)/l,k=(b-E)/A;I.setAttribute("x",P),I.setAttribute("y",_),I.setAttribute("width",T),I.setAttribute("height",k),g.append(I),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${_}" width="${T}" height="${k}"/>`)}d(this,im)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate);const s=S(this,Rl,new LN({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}get hasPopupElement(){return!!(d(this,Rl)||this.popup||this.data.popupRef)}render(){Ft("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,A=document.querySelector(`[data-element-id="${a}"]`);if(A&&!Df.has(A)){Ge(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:A})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&Df.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Th=new WeakMap,im=new WeakMap,Rl=new WeakMap,Of=new WeakSet,sZ=function(e,t,r){e/=255,t/=255,r/=255;const i=Math.max(e,t,r),s=Math.min(e,t,r),a=(i+s)/2,o=((1+Math.sqrt(a))/2*100).toFixed(2);if(i===s)return`hsl(0, 0%, ${o}%)`;const l=i-s;let A;i===e?A=(t-r)/l+(t<r?6:0):i===t?A=(r-e)/l+2:A=(e-t)/l+4,A=(A*60).toFixed(2);const c=(l/(1-Math.abs(2*a-1))*100).toFixed(2);return`hsl(${A}, ${c}%, ${o}%)`},MN=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Pn=$M;var Es,Fd,aZ,oZ;class RM extends Pn{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});N(this,Es);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(D(this,Es,aZ).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(D(this,Es,oZ).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,r,i=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&D(this,Es,Fd).call(this),i&&(t.title=i)}_bindNamedAction(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(t.title=i),D(this,Es,Fd).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const a=i.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),D(this,Es,Fd).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),D(this,Es,Fd).call(this),!this._fieldObjects){Ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var u;i==null||i();const{fields:s,refs:a,include:o}=r,l=[];if(s.length!==0||a.length!==0){const h=new Set(a);for(const g of s){const p=this._fieldObjects[g]||[];for(const{id:m}of p)h.add(m)}for(const g of Object.values(this._fieldObjects))for(const p of g)h.has(p.id)===o&&l.push(p)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const A=this.annotationStorage,c=[];for(const h of l){const{id:g}=h;switch(c.push(g),h.type){case"text":{const m=h.defaultValue||"";A.setValue(g,{value:m});break}case"checkbox":case"radiobutton":{const m=h.defaultValue===h.exportValues;A.setValue(g,{value:m});break}case"combobox":case"listbox":{const m=h.defaultValue||"";A.setValue(g,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${g}"]`);if(p){if(!Df.has(p)){Ge(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Es=new WeakSet,Fd=function(){this.container.setAttribute("data-internal-link","")},aZ=function(t,r,i="",s=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:i&&(t.title=i),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,s),!1},D(this,Es,Fd).call(this)},oZ=function(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(t.title=i),D(this,Es,Fd).call(this)};class uNe extends Pn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Xf extends Pn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Vr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,t,r,i){var s,a,o;for(const[l,A]of r)(A==="Action"||(s=this.data.actions)!=null&&s[A])&&((A==="Focus"||A==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,A,i),A==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):A==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Te.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||ANe,s=e.style;let a;const o=2,l=A=>Math.round(10*A)/10;if(this.data.multiLine){const A=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(A/(t2*i))||1,u=A/c;a=Math.min(i,l(u/t2))}else{const A=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(A/t2))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Te.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class dNe extends Xf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),s.setValue(a.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let A=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;A&&this.data.comb&&(A=A.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:A,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=A??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",A??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Df.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:g}=this.data,p=!!h&&this.enableScripting;u&&(r.title=u),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";r.value=c.userValue=v,c.formattedValue=null});let m=w=>{const{formattedValue:v}=c;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var x;if(c.focused)return;const{target:b}=v;if(p&&(b.type=h,g&&(b.step=g)),c.userValue){const E=c.userValue;if(p)if(h==="time"){const I=new Date(E),P=[I.getHours(),I.getMinutes(),I.getSeconds()];b.value=P.map(_=>_.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-cNe).toISOString().split(h==="date"?"T":".",1)[0];else b.value=E}c.lastCommittedValue=b.value,c.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(x){c.userValue=x.detail.value??"",p||e.setValue(t,{value:c.userValue.toString()}),x.target.value=c.userValue},formattedValue(x){const{formattedValue:E}=x.detail;c.formattedValue=E,E!=null&&x.target!==document.activeElement&&(x.target.value=E);const I={formattedValue:E};p&&(I.value=E),e.setValue(t,I)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var _;const{charLimit:E}=x.detail,{target:I}=x;if(E===0){I.removeAttribute("maxLength");return}I.setAttribute("maxLength",E);let P=c.userValue;!P||P.length<=E||(P=P.slice(0,E),I.value=c.userValue=P,e.setValue(t,{value:P}),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:I.selectionStart,selEnd:I.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),r.addEventListener("keydown",v=>{var E;c.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(c.commitKey=3),b===-1)return;const{value:x}=v.target;c.lastCommittedValue!==x&&(c.lastCommittedValue=x,c.userValue=x,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=m;m=null,r.addEventListener("blur",v=>{var E,I;if(!c.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(c.focused=!1);const{target:b}=v;let{value:x}=b;if(p){if(x&&h==="time"){const P=x.split(":").map(_=>parseInt(_,10));x=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),b.step=""}else x=new Date(x).valueOf();b.type="text"}c.userValue=x,c.lastCommittedValue!==x&&((I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",v=>{var k;c.lastCommittedValue=null;const{data:b,target:x}=v,{value:E,selectionStart:I,selectionEnd:P}=x;let _=I,T=P;switch(v.inputType){case"deleteWordBackward":{const O=E.substring(0,I).match(/\w*[^\w]*$/);O&&(_-=O[0].length);break}case"deleteWordForward":{const O=E.substring(I).match(/^[^\w]*\w*/);O&&(T+=O[0].length);break}case"deleteContentBackward":I===P&&(_-=1);break;case"deleteContentForward":I===P&&(T+=1);break}v.preventDefault(),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:_,selEnd:T}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class hNe extends Xf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class fNe extends Xf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Df.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const A of this._getElementsByName(o,r)){const c=l&&A.exportValue===t.exportValue;A.domElement&&(A.domElement.checked=c),e.setValue(A.id,{value:c})}e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class lZ extends Xf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Df.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const A of this._getElementsByName(o,r))e.setValue(A.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:A=>{const c=a===A.detail.value;for(const u of this._getElementsByName(A.target.name)){const h=c&&u.id===r;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class gNe extends RM{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class pNe extends Xf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Df.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const u=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===u});for(const c of this.data.options){const u=document.createElement("option");u.textContent=c.displayValue,u.value=c.exportValue,r.value.includes(c.exportValue)&&(u.setAttribute("selected",!0),s=!1),i.append(u)}let a=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),a=()=>{c.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=c=>{const u=c?"value":"textContent",{options:h,multiple:g}=i;return g?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[u]):h.selectedIndex===-1?null:h[h.selectedIndex][u]};let l=o(!1);const A=c=>{const u=c.target.options;return Array.prototype.map.call(u,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const u={value(h){a==null||a();const g=h.detail.value,p=new Set(Array.isArray(g)?g:[g]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(h){i.multiple=!0},remove(h){const g=i.options,p=h.detail.remove;g[p].selected=!1,i.remove(p),g.length>0&&Array.prototype.findIndex.call(g,w=>w.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:o(!0),items:A(h)}),l=o(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(h){const{index:g,displayValue:p,exportValue:m}=h.detail.insert,w=i.children[g],v=document.createElement("option");v.textContent=p,v.value=m,w?w.before(v):i.append(v),e.setValue(t,{value:o(!0),items:A(h)}),l=o(!1)},items(h){const{items:g}=h.detail;for(;i.length!==0;)i.remove(0);for(const p of g){const{displayValue:m,exportValue:w}=p,v=document.createElement("option");v.textContent=m,v.value=w,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:A(h)}),l=o(!1)},indices(h){const g=new Set(h.detail.indices);for(const p of h.target.options)p.selected=g.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(u,c)}),i.addEventListener("input",c=>{var g;const u=o(!0),h=o(!1);e.setValue(t,{value:u}),c.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class LN extends Pn{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Pn._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new mNe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),r=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${FM}${i}`).join(",")),this.container}}var Ph,W_,X_,Fh,sm,vn,Ml,Kc,Ll,_b,Sb,am,Co,As,Ql,jl,Ib,$c,om,Tb,Hl,lm,kh,Gc,it,yC,AZ,cZ,vC,QN,uZ,dZ,hZ,fZ,wC,bC,jN;class mNe{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:A,parentRect:c,open:u,eventBus:h=null}){N(this,it);N(this,Ph,D(this,it,hZ).bind(this));N(this,W_,D(this,it,jN).bind(this));N(this,X_,D(this,it,bC).bind(this));N(this,Fh,D(this,it,wC).bind(this));N(this,sm,null);N(this,vn,null);N(this,Ml,null);N(this,Kc,null);N(this,Ll,null);N(this,_b,null);N(this,Sb,null);N(this,am,null);N(this,Co,!1);N(this,As,null);N(this,Ql,null);N(this,jl,null);N(this,Ib,null);N(this,$c,null);N(this,om,null);N(this,Tb,null);N(this,Hl,null);N(this,lm,null);N(this,kh,null);N(this,Gc,!1);S(this,vn,e),S(this,lm,i),S(this,Ml,a),S(this,Hl,o),S(this,Sb,l),S(this,sm,t),S(this,Tb,A),S(this,am,c),S(this,Ll,r),S(this,_b,h),S(this,Kc,__.toDateObject(s)),this.trigger=r.flatMap(g=>g.getElementsToTriggerPopup()),D(this,it,yC).call(this),d(this,vn).hidden=!0,u&&D(this,it,wC).call(this)}render(){var i;if(d(this,As))return;const e=S(this,As,document.createElement("div"));if(e.className="popup",d(this,sm)){const s=e.style.outlineColor=Te.makeHexColor(...d(this,sm));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(i=d(this,lm))!=null&&i.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=d(this,lm)}if(e.append(t),d(this,Kc)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Kc).valueOf()})),s.dateTime=d(this,Kc).toISOString(),t.append(s)}const r=d(this,it,vC);if(r)iZ.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(d(this,Ml));e.append(s)}d(this,vn).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let s=0,a=i.length;s<a;++s){const o=i[s];r.append(document.createTextNode(o)),s<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popup:t,deleted:r}){var i;if(r||t!=null&&t.deleted){this.remove();return}D(this,it,yC).call(this),d(this,kh)||S(this,kh,{contentsObj:d(this,Ml),richText:d(this,Hl)}),e&&S(this,jl,null),t&&(S(this,Hl,D(this,it,dZ).call(this,t.text)),S(this,Kc,__.toDateObject(t.date)),S(this,Ml,null)),(i=d(this,As))==null||i.remove(),S(this,As,null)}resetEdited(){var e;d(this,kh)&&({contentsObj:Vn(this,Ml)._,richText:Vn(this,Hl)._}=d(this,kh),S(this,kh,null),(e=d(this,As))==null||e.remove(),S(this,As,null),S(this,jl,null))}remove(){var e,t;(e=d(this,Ql))==null||e.abort(),S(this,Ql,null),(t=d(this,As))==null||t.remove(),S(this,As,null),S(this,Gc,!1),S(this,Co,!1);for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){S(this,Gc,this.isVisible),d(this,Gc)&&(d(this,vn).hidden=!0)}maybeShow(){D(this,it,yC).call(this),d(this,Gc)&&(d(this,As)||D(this,it,bC).call(this),S(this,Gc,!1),d(this,vn).hidden=!1)}get isVisible(){return d(this,vn).hidden===!1}}Ph=new WeakMap,W_=new WeakMap,X_=new WeakMap,Fh=new WeakMap,sm=new WeakMap,vn=new WeakMap,Ml=new WeakMap,Kc=new WeakMap,Ll=new WeakMap,_b=new WeakMap,Sb=new WeakMap,am=new WeakMap,Co=new WeakMap,As=new WeakMap,Ql=new WeakMap,jl=new WeakMap,Ib=new WeakMap,$c=new WeakMap,om=new WeakMap,Tb=new WeakMap,Hl=new WeakMap,lm=new WeakMap,kh=new WeakMap,Gc=new WeakMap,it=new WeakSet,yC=function(){var t;if(d(this,Ql))return;S(this,Ql,new AbortController);const{signal:e}=d(this,Ql);for(const r of this.trigger)r.addEventListener("click",d(this,Fh),{signal:e}),r.addEventListener("mouseenter",d(this,X_),{signal:e}),r.addEventListener("mouseleave",d(this,W_),{signal:e}),r.classList.add("popupTriggerArea");for(const r of d(this,Ll))(t=r.container)==null||t.addEventListener("keydown",d(this,Ph),{signal:e});D(this,it,cZ).call(this)},AZ=function(){const e=d(this,Ll).find(t=>t.hasCommentButton);e&&(S(this,$c,e._normalizePoint(e.commentButtonPosition)),S(this,om,e.commentButtonColor))},cZ=function(){if(d(this,Ib)||(d(this,$c)||D(this,it,AZ).call(this),!d(this,$c)))return;const e=S(this,Ib,document.createElement("button"));e.className="annotationCommentButton";const t=d(this,Ll)[0].container;e.style.zIndex=t.style.zIndex+1,e.tabIndex=0;const{signal:r}=d(this,Ql);e.addEventListener("hover",d(this,Fh),{signal:r}),e.addEventListener("keydown",d(this,Ph),{signal:r}),e.addEventListener("click",()=>{var o;const[{data:{id:s},annotationEditorType:a}]=d(this,Ll);(o=d(this,_b))==null||o.dispatch("switchannotationeditormode",{source:this,editId:s,mode:a,editComment:!0})},{signal:r});const{style:i}=e;i.left=`calc(${d(this,$c)[0]}%)`,i.top=`calc(${d(this,$c)[1]}% - var(--comment-button-dim))`,d(this,om)&&(i.backgroundColor=d(this,om)),t.after(e)},vC=function(){const e=d(this,Hl),t=d(this,Ml);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,Hl).html||null},QN=function(){var e,t,r;return((r=(t=(e=d(this,it,vC))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},uZ=function(){var e,t,r;return((r=(t=(e=d(this,it,vC))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},dZ=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:d(this,it,uZ),fontSize:d(this,it,QN)?`calc(${d(this,it,QN)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r},hZ=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,Co))&&D(this,it,wC).call(this)},fZ=function(){if(d(this,jl)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=d(this,Sb);let a=!!d(this,am),o=a?d(this,am):d(this,Tb);for(const p of d(this,Ll))if(!o||Te.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=Te.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,u=l[0]+c,h=l[1];S(this,jl,[100*(u-i)/t,100*(h-s)/r]);const{style:g}=d(this,vn);g.left=`${d(this,jl)[0]}%`,g.top=`${d(this,jl)[1]}%`},wC=function(){S(this,Co,!d(this,Co)),d(this,Co)?(D(this,it,bC).call(this),d(this,vn).addEventListener("click",d(this,Fh)),d(this,vn).addEventListener("keydown",d(this,Ph))):(D(this,it,jN).call(this),d(this,vn).removeEventListener("click",d(this,Fh)),d(this,vn).removeEventListener("keydown",d(this,Ph)))},bC=function(){d(this,As)||this.render(),this.isVisible?d(this,Co)&&d(this,vn).classList.add("focused"):(D(this,it,fZ).call(this),d(this,vn).hidden=!1,d(this,vn).style.zIndex=parseInt(d(this,vn).style.zIndex)+1e3)},jN=function(){d(this,vn).classList.remove("focused"),!(d(this,Co)||!this.isVisible)&&(d(this,vn).hidden=!0,d(this,vn).style.zIndex=parseInt(d(this,vn).style.zIndex)-1e3)};class gZ extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pb;class yNe extends Pn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Pb,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=S(this,Pb,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Pb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pb=new WeakMap;var Fb;class vNe extends Pn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Fb,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=t.borderStyle.width,o=S(this,Fb,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Fb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fb=new WeakMap;var kb;class wNe extends Pn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,kb,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=t.borderStyle.width,o=S(this,kb,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,kb)}addHighlightArea(){this.container.classList.add("highlightArea")}}kb=new WeakMap;var Nb;class pZ extends Pn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Nb,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let A=[];for(let u=0,h=r.length;u<h;u+=2){const g=r[u]-t[0],p=t[3]-r[u+1];A.push(`${g},${p}`)}A=A.join(" ");const c=S(this,Nb,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",A),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Nb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nb=new WeakMap;class bNe extends pZ{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class xNe extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Db,Nh,Ob,HN;class MM extends Pn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Ob);N(this,Db,null);N(this,Nh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ve.HIGHLIGHT:Ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:A}=D(this,Ob,HN).call(this,r,t),c=this.svgFactory.create(l,A,!0),u=S(this,Db,this.svgFactory.createElement("svg:g"));c.append(u),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let h=0,g=i.length;h<g;h++){const p=this.svgFactory.createElement(this.svgElementName);d(this,Nh).push(p),p.setAttribute("points",i[h].join(",")),u.append(p)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:s}=t,a=d(this,Db);if(r>=0&&a.setAttribute("stroke-width",r||1),i)for(let o=0,l=d(this,Nh).length;o<l;o++)d(this,Nh)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:A}=D(this,Ob,HN).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${A}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return d(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:t,rect:r}=this.data;if((t==null?void 0:t.length)>=1){let i=-1/0,s=-1/0;for(const a of t)for(let o=0,l=a.length;o<l;o+=2)a[o+1]>s?(s=a[o+1],i=a[o]):a[o+1]===s&&(i=Math.max(i,a[o]));if(i!==1/0)return[i,s]}return r?[r[2],r[3]]:null}}Db=new WeakMap,Nh=new WeakMap,Ob=new WeakSet,HN=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class mZ extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ve.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class BNe extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class ENe extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class CNe extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class yZ extends Pn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ub,Rb,VN;class _Ne extends Pn{constructor(t){var i;super(t,{isRenderable:!0});N(this,Rb);N(this,Ub,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",D(this,Rb,VN).bind(this)),S(this,Ub,i);const{isMac:s}=Vr.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&D(this,Rb,VN).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return d(this,Ub)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ub=new WeakMap,Rb=new WeakSet,VN=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Mb,Dh,zc,Lb,td,$N,GN;const GM=class GM{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o}){N(this,td);N(this,Mb,null);N(this,Dh,null);N(this,zc,new Map);N(this,Lb,null);this.div=e,S(this,Mb,t),S(this,Dh,r),S(this,Lb,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return d(this,zc).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;kf(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new k_,annotationStorage:e.annotationStorage||new DM,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===Dn.POPUP;if(l){const u=i.get(o.id);if(!u)continue;s.elements=u}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;const A=zV.create(s);if(!A.isRenderable)continue;if(!l&&o.popupRef){const u=i.get(o.popupRef);u?u.push(A):i.set(o.popupRef,[A])}const c=A.render();o.hidden&&(c.style.visibility="hidden"),await D(this,td,$N).call(this,c,o.id,s.elements),A._isEditable&&(d(this,zc).set(A.data.id,A),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(A))}D(this,td,GN).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new k_,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=GM._defaultBorderStyle),r.data=i;const s=zV.create(r);if(!s.isRenderable)continue;const a=s.render();await D(this,td,$N).call(this,a,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,kf(t,{rotation:e.rotation}),D(this,td,GN).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,zc).values())}getEditableAnnotation(e){return d(this,zc).get(e)}static get _defaultBorderStyle(){return et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Eg.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Mb=new WeakMap,Dh=new WeakMap,zc=new WeakMap,Lb=new WeakMap,td=new WeakSet,$N=async function(e,t,r){var o,l;const i=e.firstChild||e,s=i.id=`${FM}${t}`,a=await((o=d(this,Lb))==null?void 0:o.getAriaAttributes(s));if(a)for(const[A,c]of a)i.setAttribute(A,c);r?r.at(-1).container.after(e):(this.div.append(e),(l=d(this,Mb))==null||l.moveElementInDOM(this.div,e,i,!1))},GN=function(){var t;if(!d(this,Dh))return;const e=this.div;for(const[r,i]of d(this,Dh)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=d(this,zc).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}d(this,Dh).clear()};let KN=GM;const _E=/\r\n?|\n/g;var ea,cs,Qb,Oh,us,Hn,vZ,wZ,bZ,xC,vA,BC,EC,xZ,WN,BZ;const Gt=class Gt extends Vt{constructor(t){super({...t,name:"freeTextEditor"});N(this,Hn);N(this,ea);N(this,cs,"");N(this,Qb,`${this.id}-editor`);N(this,Oh,null);N(this,us);ce(this,"_colorPicker",null);S(this,ea,t.color||Gt._defaultColor||Vt._defaultLineColor),S(this,us,t.fontSize||Gt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Gt.prototype,r=a=>a.isEmpty(),i=Nf.TRANSLATE_SMALL,s=Nf.TRANSLATE_BIG;return et(this,"_keyboardManager",new Vx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(t,r){Vt.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case st.FREETEXT_SIZE:Gt._defaultFontSize=r;break;case st.FREETEXT_COLOR:Gt._defaultColor=r;break}}updateParams(t,r){switch(t){case st.FREETEXT_SIZE:D(this,Hn,vZ).call(this,r);break;case st.FREETEXT_COLOR:D(this,Hn,wZ).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[st.FREETEXT_SIZE,Gt._defaultFontSize],[st.FREETEXT_COLOR,Gt._defaultColor||Vt._defaultLineColor]]}get propertiesToUpdate(){return[[st.FREETEXT_SIZE,d(this,us)],[st.FREETEXT_COLOR,d(this,ea)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new F_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return st.FREETEXT_COLOR}get colorValue(){return d(this,ea)}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-Gt._internalPadding*t,-(Gt._internalPadding+d(this,us))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Oh,new AbortController);const t=this._uiManager.combinedSignal(d(this,Oh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,Qb)),this._isDraggable=!0,(t=d(this,Oh))==null||t.abort(),S(this,Oh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,cs),r=S(this,cs,D(this,Hn,bZ).call(this).trimEnd());if(t===r)return;const i=s=>{if(S(this,cs,s),!s){this.remove();return}D(this,Hn,EC).call(this),this._uiManager.rebuild(this),D(this,Hn,xC).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),D(this,Hn,xC).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Gt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,Qb)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${d(this,us)}px * var(--total-scale-factor))`,i.color=d(this,ea),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,A]=this.getInitialTranslation();[l,A]=this.pageTranslationToScreen(l,A);const[c,u]=this.pageDimensions,[h,g]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=t+(o[0]-h)/c,m=r+this.height-(o[1]-g)/u;break;case 90:p=t+(o[0]-h)/c,m=r-(o[1]-g)/u,[l,A]=[A,-l];break;case 180:p=t-this.width+(o[0]-h)/c,m=r-(o[1]-g)/u,[l,A]=[-l,-A];break;case 270:p=t+(o[0]-h-this.height*u)/c,m=r+(o[1]-g-this.width*c)/u,[l,A]=[-A,l];break}this.setAt(p*s,m*a,l,A)}else this._moveAfterPaste(t,r);D(this,Hn,EC).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,m,w;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=D(p=Gt,vA,WN).call(p,r.getData("text")||"").replaceAll(_E,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:A}=o,c=[],u=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(u.push(l.nodeValue.slice(A).replaceAll(_E,"")),v!==this.editorDiv){let b=c;for(const x of this.editorDiv.childNodes){if(x===v){b=u;continue}b.push(D(m=Gt,vA,BC).call(m,x))}}c.push(l.nodeValue.slice(0,A).replaceAll(_E,""))}else if(l===this.editorDiv){let v=c,b=0;for(const x of this.editorDiv.childNodes)b++===A&&(v=u),v.push(D(w=Gt,vA,BC).call(w,x))}S(this,cs,`${c.join(`
`)}${s}${u.join(`
`)}`),D(this,Hn,EC).call(this);const h=new Range;let g=Math.sumPrecise(c.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(g<=b){h.setStart(v,g),h.setEnd(v,g);break}g-=b}a.removeAllRanges(),a.addRange(h)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Gt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,i){var o;let s=null;if(t instanceof gZ){const{data:{defaultAppearanceData:{fontSize:l,fontColor:A},rect:c,rotation:u,id:h,popupRef:g,contentsObj:p},textContent:m,textPosition:w,parent:{page:{pageNumber:v}}}=t;if(!m||m.length===0)return null;s=t={annotationType:Ve.FREETEXT,color:Array.from(A),fontSize:l,value:m.join(`
`),position:w,pageIndex:v-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:g,comment:(p==null?void 0:p.str)||null}}const a=await super.deserialize(t,r,i);return S(a,us,t.fontSize),S(a,ea,Te.makeHexColor(...t.color)),S(a,cs,D(o=Gt,vA,WN).call(o,t.value)),a._initialData=s,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=this.getPDFRect(),i=Vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,ea)),s={annotationType:Ve.FREETEXT,color:i,fontSize:d(this,us),value:D(this,Hn,xZ).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!D(this,Hn,BZ).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${d(this,us)}px * var(--total-scale-factor))`,i.color=d(this,ea),r.replaceChildren();for(const a of d(this,cs).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),r.append(o)}const s={rect:this.getPDFRect()};return s.popup=this.hasEditedComment?this.comment:{text:d(this,cs)},t.updateEdited(s),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ea=new WeakMap,cs=new WeakMap,Qb=new WeakMap,Oh=new WeakMap,us=new WeakMap,Hn=new WeakSet,vZ=function(t){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-d(this,us))*this.parentScale),S(this,us,s),D(this,Hn,xC).call(this)},i=d(this,us);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},wZ=function(t){const r=s=>{var a;S(this,ea,this.editorDiv.style.color=s),(a=this._colorPicker)==null||a.update(s)},i=d(this,ea);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bZ=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(D(i=Gt,vA,BC).call(i,s)),r=s);return t.join(`
`)},xC=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},vA=new WeakSet,BC=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(_E,"")},EC=function(){if(this.editorDiv.replaceChildren(),!!d(this,cs))for(const t of d(this,cs).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},xZ=function(){return d(this,cs).replaceAll(" "," ")},WN=function(t){return t.replaceAll(" "," ")},BZ=function(t){const{value:r,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},N(Gt,vA),ce(Gt,"_freeTextDefaultContent",""),ce(Gt,"_internalPadding",0),ce(Gt,"_defaultColor",null),ce(Gt,"_defaultFontSize",10),ce(Gt,"_type","freetext"),ce(Gt,"_editorType",Ve.FREETEXT);let zN=Gt;class Ce{toSVGPath(){Ft("Abstract method `toSVGPath` must be implemented.")}get box(){Ft("Abstract getter `box` must be implemented.")}serialize(e,t){Ft("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*i,a[o+1]=r+e[o+1]*s;return a}static _rescaleAndSwap(e,t,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*i,a[o+1]=r+e[o]*s;return a}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,s){switch(s){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,s,a){return[(e+5*r)/6,(t+5*i)/6,(5*r+s)/6,(5*i+a)/6,(r+s)/2,(i+a)/2]}}ce(Ce,"PRECISION",1e-4);var ds,Ma,Am,cm,_o,Ze,Uh,Rh,jb,Hb,um,dm,Wc,Vb,Y_,q_,Zn,Zy,EZ,CZ,_Z,SZ,IZ,TZ;const ul=class ul{constructor({x:e,y:t},r,i,s,a,o=0){N(this,Zn);N(this,ds);N(this,Ma,[]);N(this,Am);N(this,cm);N(this,_o,[]);N(this,Ze,new Float32Array(18));N(this,Uh);N(this,Rh);N(this,jb);N(this,Hb);N(this,um);N(this,dm);N(this,Wc,[]);S(this,ds,r),S(this,dm,s*i),S(this,cm,a),d(this,Ze).set([NaN,NaN,NaN,NaN,e,t],6),S(this,Am,o),S(this,Hb,d(ul,Vb)*i),S(this,jb,d(ul,q_)*i),S(this,um,i),d(this,Wc).push(e,t)}isEmpty(){return isNaN(d(this,Ze)[8])}add({x:e,y:t}){var k;S(this,Uh,e),S(this,Rh,t);const[r,i,s,a]=d(this,ds);let[o,l,A,c]=d(this,Ze).subarray(8,12);const u=e-A,h=t-c,g=Math.hypot(u,h);if(g<d(this,jb))return!1;const p=g-d(this,Hb),m=p/g,w=m*u,v=m*h;let b=o,x=l;o=A,l=c,A+=w,c+=v,(k=d(this,Wc))==null||k.push(e,t);const E=-v/p,I=w/p,P=E*d(this,dm),_=I*d(this,dm);return d(this,Ze).set(d(this,Ze).subarray(2,8),0),d(this,Ze).set([A+P,c+_],4),d(this,Ze).set(d(this,Ze).subarray(14,18),12),d(this,Ze).set([A-P,c-_],16),isNaN(d(this,Ze)[6])?(d(this,_o).length===0&&(d(this,Ze).set([o+P,l+_],2),d(this,_o).push(NaN,NaN,NaN,NaN,(o+P-r)/s,(l+_-i)/a),d(this,Ze).set([o-P,l-_],14),d(this,Ma).push(NaN,NaN,NaN,NaN,(o-P-r)/s,(l-_-i)/a)),d(this,Ze).set([b,x,o,l,A,c],6),!this.isEmpty()):(d(this,Ze).set([b,x,o,l,A,c],6),Math.abs(Math.atan2(x-l,b-o)-Math.atan2(v,w))<Math.PI/2?([o,l,A,c]=d(this,Ze).subarray(2,6),d(this,_o).push(NaN,NaN,NaN,NaN,((o+A)/2-r)/s,((l+c)/2-i)/a),[o,l,b,x]=d(this,Ze).subarray(14,18),d(this,Ma).push(NaN,NaN,NaN,NaN,((b+o)/2-r)/s,((x+l)/2-i)/a),!0):([b,x,o,l,A,c]=d(this,Ze).subarray(0,6),d(this,_o).push(((b+5*o)/6-r)/s,((x+5*l)/6-i)/a,((5*o+A)/6-r)/s,((5*l+c)/6-i)/a,((o+A)/2-r)/s,((l+c)/2-i)/a),[A,c,o,l,b,x]=d(this,Ze).subarray(12,18),d(this,Ma).push(((b+5*o)/6-r)/s,((x+5*l)/6-i)/a,((5*o+A)/6-r)/s,((5*l+c)/6-i)/a,((o+A)/2-r)/s,((l+c)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,_o),t=d(this,Ma);if(isNaN(d(this,Ze)[6])&&!this.isEmpty())return D(this,Zn,EZ).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);D(this,Zn,_Z).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return D(this,Zn,CZ).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,s,a){return new PZ(e,t,r,i,s,a)}getOutlines(){var u;const e=d(this,_o),t=d(this,Ma),r=d(this,Ze),[i,s,a,o]=d(this,ds),l=new Float32Array((((u=d(this,Wc))==null?void 0:u.length)??0)+2);for(let h=0,g=l.length-2;h<g;h+=2)l[h]=(d(this,Wc)[h]-i)/a,l[h+1]=(d(this,Wc)[h+1]-s)/o;if(l[l.length-2]=(d(this,Uh)-i)/a,l[l.length-1]=(d(this,Rh)-s)/o,isNaN(r[6])&&!this.isEmpty())return D(this,Zn,SZ).call(this,l);const A=new Float32Array(d(this,_o).length+24+d(this,Ma).length);let c=e.length;for(let h=0;h<c;h+=2){if(isNaN(e[h])){A[h]=A[h+1]=NaN;continue}A[h]=e[h],A[h+1]=e[h+1]}c=D(this,Zn,TZ).call(this,A,c);for(let h=t.length-6;h>=6;h-=6)for(let g=0;g<6;g+=2){if(isNaN(t[h+g])){A[c]=A[c+1]=NaN,c+=2;continue}A[c]=t[h+g],A[c+1]=t[h+g+1],c+=2}return D(this,Zn,IZ).call(this,A,c),this.newFreeDrawOutline(A,l,d(this,ds),d(this,um),d(this,Am),d(this,cm))}};ds=new WeakMap,Ma=new WeakMap,Am=new WeakMap,cm=new WeakMap,_o=new WeakMap,Ze=new WeakMap,Uh=new WeakMap,Rh=new WeakMap,jb=new WeakMap,Hb=new WeakMap,um=new WeakMap,dm=new WeakMap,Wc=new WeakMap,Vb=new WeakMap,Y_=new WeakMap,q_=new WeakMap,Zn=new WeakSet,Zy=function(){const e=d(this,Ze).subarray(4,6),t=d(this,Ze).subarray(16,18),[r,i,s,a]=d(this,ds);return[(d(this,Uh)+(e[0]-t[0])/2-r)/s,(d(this,Rh)+(e[1]-t[1])/2-i)/a,(d(this,Uh)+(t[0]-e[0])/2-r)/s,(d(this,Rh)+(t[1]-e[1])/2-i)/a]},EZ=function(){const[e,t,r,i]=d(this,ds),[s,a,o,l]=D(this,Zn,Zy).call(this);return`M${(d(this,Ze)[2]-e)/r} ${(d(this,Ze)[3]-t)/i} L${(d(this,Ze)[4]-e)/r} ${(d(this,Ze)[5]-t)/i} L${s} ${a} L${o} ${l} L${(d(this,Ze)[16]-e)/r} ${(d(this,Ze)[17]-t)/i} L${(d(this,Ze)[14]-e)/r} ${(d(this,Ze)[15]-t)/i} Z`},CZ=function(e){const t=d(this,Ma);e.push(`L${t[4]} ${t[5]} Z`)},_Z=function(e){const[t,r,i,s]=d(this,ds),a=d(this,Ze).subarray(4,6),o=d(this,Ze).subarray(16,18),[l,A,c,u]=D(this,Zn,Zy).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-r)/s} L${l} ${A} L${c} ${u} L${(o[0]-t)/i} ${(o[1]-r)/s}`)},SZ=function(e){const t=d(this,Ze),[r,i,s,a]=d(this,ds),[o,l,A,c]=D(this,Zn,Zy).call(this),u=new Float32Array(36);return u.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,A,c,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(u,e,d(this,ds),d(this,um),d(this,Am),d(this,cm))},IZ=function(e,t){const r=d(this,Ma);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},TZ=function(e,t){const r=d(this,Ze).subarray(4,6),i=d(this,Ze).subarray(16,18),[s,a,o,l]=d(this,ds),[A,c,u,h]=D(this,Zn,Zy).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,A,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],t),t+=24},N(ul,Vb,8),N(ul,Y_,2),N(ul,q_,d(ul,Vb)+d(ul,Y_));let N_=ul;var hm,Mh,Vl,Kb,hs,$b,_n,J_,FZ;class PZ extends Ce{constructor(t,r,i,s,a,o){super();N(this,J_);N(this,hm);N(this,Mh,new Float32Array(4));N(this,Vl);N(this,Kb);N(this,hs);N(this,$b);N(this,_n);S(this,_n,t),S(this,hs,r),S(this,hm,i),S(this,$b,s),S(this,Vl,a),S(this,Kb,o),this.lastPoint=[NaN,NaN],D(this,J_,FZ).call(this,o);const[l,A,c,u]=d(this,Mh);for(let h=0,g=t.length;h<g;h+=2)t[h]=(t[h]-l)/c,t[h+1]=(t[h+1]-A)/u;for(let h=0,g=r.length;h<g;h+=2)r[h]=(r[h]-l)/c,r[h+1]=(r[h+1]-A)/u}toSVGPath(){const t=[`M${d(this,_n)[4]} ${d(this,_n)[5]}`];for(let r=6,i=d(this,_n).length;r<i;r+=6){if(isNaN(d(this,_n)[r])){t.push(`L${d(this,_n)[r+4]} ${d(this,_n)[r+5]}`);continue}t.push(`C${d(this,_n)[r]} ${d(this,_n)[r+1]} ${d(this,_n)[r+2]} ${d(this,_n)[r+3]} ${d(this,_n)[r+4]} ${d(this,_n)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,s],a){const o=i-t,l=s-r;let A,c;switch(a){case 0:A=Ce._rescale(d(this,_n),t,s,o,-l),c=Ce._rescale(d(this,hs),t,s,o,-l);break;case 90:A=Ce._rescaleAndSwap(d(this,_n),t,r,o,l),c=Ce._rescaleAndSwap(d(this,hs),t,r,o,l);break;case 180:A=Ce._rescale(d(this,_n),i,r,-o,l),c=Ce._rescale(d(this,hs),i,r,-o,l);break;case 270:A=Ce._rescaleAndSwap(d(this,_n),i,s,-o,-l),c=Ce._rescaleAndSwap(d(this,hs),i,s,-o,-l);break}return{outline:Array.from(A),points:[Array.from(c)]}}get box(){return d(this,Mh)}newOutliner(t,r,i,s,a,o=0){return new N_(t,r,i,s,a,o)}getNewOutline(t,r){const[i,s,a,o]=d(this,Mh),[l,A,c,u]=d(this,hm),h=a*c,g=o*u,p=i*c+l,m=s*u+A,w=this.newOutliner({x:d(this,hs)[0]*h+p,y:d(this,hs)[1]*g+m},d(this,hm),d(this,$b),t,d(this,Kb),r??d(this,Vl));for(let v=2;v<d(this,hs).length;v+=2)w.add({x:d(this,hs)[v]*h+p,y:d(this,hs)[v+1]*g+m});return w.getOutlines()}}hm=new WeakMap,Mh=new WeakMap,Vl=new WeakMap,Kb=new WeakMap,hs=new WeakMap,$b=new WeakMap,_n=new WeakMap,J_=new WeakSet,FZ=function(t){const r=d(this,_n);let i=r[4],s=r[5];const a=[i,s,i,s];let o=i,l=s;const A=t?Math.max:Math.min;for(let u=6,h=r.length;u<h;u+=6){const g=r[u+4],p=r[u+5];if(isNaN(r[u]))Te.pointBoundingBox(g,p,a),l<p?(o=g,l=p):l===p&&(o=A(o,g));else{const m=[1/0,1/0,-1/0,-1/0];Te.bezierBoundingBox(i,s,...r.slice(u,u+6),m),Te.rectBoundingBox(...m,a),l<m[3]?(o=m[2],l=m[3]):l===m[3]&&(o=A(o,m[2]))}i=g,s=p}const c=d(this,Mh);c[0]=a[0]-d(this,Vl),c[1]=a[1]-d(this,Vl),c[2]=a[2]-a[0]+2*d(this,Vl),c[3]=a[3]-a[1]+2*d(this,Vl),this.lastPoint=[o,l]};var Gb,zb,Xc,La,Ti,kZ,CC,NZ,DZ,YN;class XN{constructor(e,t=0,r=0,i=!0){N(this,Ti);N(this,Gb);N(this,zb);N(this,Xc,[]);N(this,La,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:g,y:p,width:m,height:w}of e){const v=Math.floor((g-t)/a)*a,b=Math.ceil((g+m+t)/a)*a,x=Math.floor((p-t)/a)*a,E=Math.ceil((p+w+t)/a)*a,I=[v,x,E,!0],P=[b,x,E,!1];d(this,Xc).push(I,P),Te.rectBoundingBox(v,x,b,E,s)}const o=s[2]-s[0]+2*r,l=s[3]-s[1]+2*r,A=s[0]-r,c=s[1]-r,u=d(this,Xc).at(i?-1:-2),h=[u[0],u[2]];for(const g of d(this,Xc)){const[p,m,w]=g;g[0]=(p-A)/o,g[1]=(m-c)/l,g[2]=(w-c)/l}S(this,Gb,new Float32Array([A,c,o,l])),S(this,zb,h)}getOutlines(){d(this,Xc).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of d(this,Xc))t[3]?(e.push(...D(this,Ti,YN).call(this,t)),D(this,Ti,NZ).call(this,t)):(D(this,Ti,DZ).call(this,t),e.push(...D(this,Ti,YN).call(this,t)));return D(this,Ti,kZ).call(this,e)}}Gb=new WeakMap,zb=new WeakMap,Xc=new WeakMap,La=new WeakMap,Ti=new WeakSet,kZ=function(e){const t=[],r=new Set;for(const a of e){const[o,l,A]=a;t.push([o,l,a],[o,A,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],A=t[a+1][2];l.push(A),A.push(l),r.add(l),r.add(A)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[o,l,A,c,u]=a;r.delete(a);let h=o,g=l;for(s=[o,A],i.push(s);;){let p;if(r.has(c))p=c;else if(r.has(u))p=u;else break;r.delete(p),[o,l,A,c,u]=p,h!==o&&(s.push(h,g,o,g===l?l:A),h=o),g=g===l?A:l}s.push(h,g)}return new SNe(i,d(this,Gb),d(this,zb))},CC=function(e){const t=d(this,La);let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,a=t[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1},NZ=function([,e,t]){const r=D(this,Ti,CC).call(this,e);d(this,La).splice(r,0,[e,t])},DZ=function([,e,t]){const r=D(this,Ti,CC).call(this,e);for(let i=r;i<d(this,La).length;i++){const[s,a]=d(this,La)[i];if(s!==e)break;if(s===e&&a===t){d(this,La).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=d(this,La)[i];if(s!==e)break;if(s===e&&a===t){d(this,La).splice(i,1);return}}},YN=function(e){const[t,r,i]=e,s=[[t,r,i]],a=D(this,Ti,CC).call(this,i);for(let o=0;o<a;o++){const[l,A]=d(this,La)[o];for(let c=0,u=s.length;c<u;c++){const[,h,g]=s[c];if(!(A<=h||g<=l)){if(h>=l){if(g>A)s[c][1]=A;else{if(u===1)return[];s.splice(c,1),c--,u--}continue}s[c][2]=l,g>A&&s.push([t,A,g])}}}return s};var Wb,fm;class SNe extends Ce{constructor(t,r,i){super();N(this,Wb);N(this,fm);S(this,fm,t),S(this,Wb,r),this.lastPoint=i}toSVGPath(){const t=[];for(const r of d(this,fm)){let[i,s]=r;t.push(`M${i} ${s}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,r,i,s],a){const o=[],l=i-t,A=s-r;for(const c of d(this,fm)){const u=new Array(c.length);for(let h=0;h<c.length;h+=2)u[h]=t+c[h]*l,u[h+1]=s-c[h+1]*A;o.push(u)}return o}get box(){return d(this,Wb)}get classNamesForOutlining(){return["highlightOutline"]}}Wb=new WeakMap,fm=new WeakMap;class qN extends N_{newFreeDrawOutline(e,t,r,i,s,a){return new INe(e,t,r,i,s,a)}}class INe extends PZ{newOutliner(e,t,r,i,s,a=0){return new qN(e,t,r,i,s,a)}}var gm,Xb,Kl,Lh,Yb,Ui,qb,Jb,Qh,ta,fs,Tr,pm,$l,ei,mm,na,Zb,We,JN,_C,OZ,UZ,RZ,ZN,kd,la,Pg,MZ,SC,ev,LZ,QZ,jZ,HZ,VZ;const mt=class mt extends Vt{constructor(t){super({...t,name:"highlightEditor"});N(this,We);N(this,gm,null);N(this,Xb,0);N(this,Kl);N(this,Lh,null);N(this,Yb,null);N(this,Ui,null);N(this,qb,null);N(this,Jb,0);N(this,Qh,null);N(this,ta,null);N(this,fs,null);N(this,Tr,!1);N(this,pm,null);N(this,$l);N(this,ei,null);N(this,mm,"");N(this,na);N(this,Zb,"");this.color=t.color||mt._defaultColor,S(this,na,t.thickness||mt._defaultThickness),S(this,$l,t.opacity||mt._defaultOpacity),S(this,Kl,t.boxes||null),S(this,Zb,t.methodOfCreation||""),S(this,mm,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,Tr,!0),D(this,We,_C).call(this,t),D(this,We,kd).call(this)):d(this,Kl)&&(S(this,gm,t.anchorNode),S(this,Xb,t.anchorOffset),S(this,qb,t.focusNode),S(this,Jb,t.focusOffset),D(this,We,JN).call(this),D(this,We,kd).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=mt.prototype;return et(this,"_keyboardManager",new Vx([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Tr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:d(this,na),methodOfCreation:d(this,Zb)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;Vt.initialize(t,r),mt._defaultColor||(mt._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case st.HIGHLIGHT_COLOR:mt._defaultColor=r;break;case st.HIGHLIGHT_THICKNESS:mt._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return d(this,pm)}updateParams(t,r){switch(t){case st.HIGHLIGHT_COLOR:D(this,We,OZ).call(this,r);break;case st.HIGHLIGHT_THICKNESS:D(this,We,UZ).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[st.HIGHLIGHT_COLOR,mt._defaultColor],[st.HIGHLIGHT_THICKNESS,mt._defaultThickness]]}get propertiesToUpdate(){return[[st.HIGHLIGHT_COLOR,this.color||mt._defaultColor],[st.HIGHLIGHT_THICKNESS,d(this,na)||mt._defaultThickness],[st.HIGHLIGHT_FREE,d(this,Tr)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,Yb,new P_({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,We,ev).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,D(this,We,ev).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){D(this,We,ZN).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,We,kd).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?D(this,We,ZN).call(this):t&&(D(this,We,kd).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var s,a,o;const{drawLayer:r}=this.parent;let i;d(this,Tr)?(t=(t-this.rotation+360)%360,i=D(s=mt,la,Pg).call(s,d(this,ta).box,t)):i=D(a=mt,la,Pg).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(d(this,fs),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(d(this,ei),{bbox:D(o=mt,la,Pg).call(o,d(this,Ui).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,mm)&&(t.setAttribute("aria-label",d(this,mm)),t.setAttribute("role","mark")),d(this,Tr)?t.classList.add("free"):this.div.addEventListener("keydown",D(this,We,MZ).bind(this),{signal:this._uiManager._signal});const r=S(this,Qh,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=d(this,Lh);const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),aJ(this,d(this,Qh),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:D(this,We,SC).call(this,!0);break;case 1:case 3:D(this,We,SC).call(this,!1);break}}select(){var t;super.select(),d(this,ei)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,ei),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,ei)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,ei),{rootClass:{selected:!1}}),d(this,Tr)||D(this,We,SC).call(this,!1))}get _mustFixPosition(){return!d(this,Tr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,fs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,ei),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:s,y:a}){const{x:o,y:l,width:A,height:c}=i.getBoundingClientRect(),u=new AbortController,h=t.combinedSignal(u),g=p=>{u.abort(),D(this,la,HZ).call(this,t,p)};window.addEventListener("blur",g,{signal:h}),window.addEventListener("pointerup",g,{signal:h}),window.addEventListener("pointerdown",Un,{capture:!0,passive:!1,signal:h}),window.addEventListener("contextmenu",Ea,{signal:h}),i.addEventListener("pointermove",D(this,la,jZ).bind(this,t),{signal:h}),this._freeHighlight=new qN({x:s,y:a},[o,l,A,c],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var m,w,v,b;let s=null;if(t instanceof mZ){const{data:{quadPoints:x,rect:E,rotation:I,id:P,color:_,opacity:T,popupRef:k,contentsObj:O},parent:{page:{pageNumber:U}}}=t;s=t={annotationType:Ve.HIGHLIGHT,color:Array.from(_),opacity:T,quadPoints:x,boxes:null,pageIndex:U-1,rect:E.slice(0),rotation:I,annotationElementId:P,id:P,deleted:!1,popupRef:k,comment:(O==null?void 0:O.str)||null}}else if(t instanceof MM){const{data:{inkLists:x,rect:E,rotation:I,id:P,color:_,borderStyle:{rawWidth:T},popupRef:k,contentsObj:O},parent:{page:{pageNumber:U}}}=t;s=t={annotationType:Ve.HIGHLIGHT,color:Array.from(_),thickness:T,inkLists:x,boxes:null,pageIndex:U-1,rect:E.slice(0),rotation:I,annotationElementId:P,id:P,deleted:!1,popupRef:k,comment:(O==null?void 0:O.str)||null}}const{color:a,quadPoints:o,inkLists:l,opacity:A}=t,c=await super.deserialize(t,r,i);c.color=Te.makeHexColor(...a),S(c,$l,A||1),l&&S(c,na,t.thickness),c._initialData=s,t.comment&&c.setCommentData(t.comment);const[u,h]=c.pageDimensions,[g,p]=c.pageTranslation;if(o){const x=S(c,Kl,[]);for(let E=0;E<o.length;E+=8)x.push({x:(o[E]-g)/u,y:1-(o[E+1]-p)/h,width:(o[E+2]-o[E])/u,height:(o[E+1]-o[E+5])/h});D(m=c,We,JN).call(m),D(w=c,We,kd).call(w),c.rotate(c.rotation)}else if(l){S(c,Tr,!0);const x=l[0],E={x:x[0]-g,y:h-(x[1]-p)},I=new qN(E,[0,0,u,h],1,d(c,na)/2,!0,.001);for(let T=0,k=x.length;T<k;T+=2)E.x=x[T]-g,E.y=h-(x[T+1]-p),I.add(E);const{id:P,clipPathId:_}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);D(v=c,We,_C).call(v,{highlightOutlines:I.getOutlines(),highlightId:P,clipPathId:_}),D(b=c,We,kd).call(b),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getPDFRect(),i=Vt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s={annotationType:Ve.HIGHLIGHT,color:i,opacity:d(this,$l),thickness:d(this,na),quadPoints:D(this,We,LZ).call(this),outlines:D(this,We,QZ).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:D(this,We,ev).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(s),this.annotationElementId&&!D(this,We,VZ).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const r={rect:this.getPDFRect()};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}static canCreateNewEmptyEditor(){return!1}};gm=new WeakMap,Xb=new WeakMap,Kl=new WeakMap,Lh=new WeakMap,Yb=new WeakMap,Ui=new WeakMap,qb=new WeakMap,Jb=new WeakMap,Qh=new WeakMap,ta=new WeakMap,fs=new WeakMap,Tr=new WeakMap,pm=new WeakMap,$l=new WeakMap,ei=new WeakMap,mm=new WeakMap,na=new WeakMap,Zb=new WeakMap,We=new WeakSet,JN=function(){const t=new XN(d(this,Kl),.001);S(this,ta,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,ta).box;const r=new XN(d(this,Kl),.0025,.001,this._uiManager.direction==="ltr");S(this,Ui,r.getOutlines());const{lastPoint:i}=d(this,Ui);S(this,pm,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},_C=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var u,h;if(S(this,ta,t),S(this,Ui,t.getNewOutline(d(this,na)/2+1.5,.0025)),r>=0)S(this,fs,r),S(this,Lh,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,ei,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,Ui).box,path:{d:d(this,Ui).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,fs),{bbox:D(u=mt,la,Pg).call(u,d(this,ta).box,(g-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,ei),{bbox:D(h=mt,la,Pg).call(h,d(this,Ui).box,g),path:{d:d(this,Ui).toSVGPath()}})}const[a,o,l,A]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=A;break;case 90:{const[g,p]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*p/g,this.height=A*g/p;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=A;break;case 270:{const[g,p]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*p/g,this.height=A*g/p;break}}const{lastPoint:c}=d(this,Ui);S(this,pm,[(c[0]-a)/l,(c[1]-o)/A])},OZ=function(t){const r=(a,o)=>{var l,A;this.color=a,S(this,$l,o),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,fs),{root:{fill:a,"fill-opacity":o}}),(A=d(this,Yb))==null||A.updateColor(a)},i=this.color,s=d(this,$l);this.addCommands({cmd:r.bind(this,t,mt._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},UZ=function(t){const r=d(this,na),i=s=>{S(this,na,s),D(this,We,RZ).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:st.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},RZ=function(t){if(!d(this,Tr))return;D(this,We,_C).call(this,{highlightOutlines:d(this,ta).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)},ZN=function(){d(this,fs)===null||!this.parent||(this.parent.drawLayer.remove(d(this,fs)),S(this,fs,null),this.parent.drawLayer.remove(d(this,ei)),S(this,ei,null))},kd=function(t=this.parent){d(this,fs)===null&&({id:Vn(this,fs)._,clipPathId:Vn(this,Lh)._}=t.drawLayer.draw({bbox:d(this,ta).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,$l)},rootClass:{highlight:!0,free:d(this,Tr)},path:{d:d(this,ta).toSVGPath()}},!1,!0),S(this,ei,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Tr)},bbox:d(this,Ui).box,path:{d:d(this,Ui).toSVGPath()}},d(this,Tr))),d(this,Qh)&&(d(this,Qh).style.clipPath=d(this,Lh)))},la=new WeakSet,Pg=function([t,r,i,s],a){switch(a){case 90:return[1-r-s,t,s,i];case 180:return[1-t-i,1-r-s,i,s];case 270:return[r,1-t-i,s,i]}return[t,r,i,s]},MZ=function(t){mt._keyboardManager.exec(this,t)},SC=function(t){if(!d(this,gm))return;const r=window.getSelection();t?r.setPosition(d(this,gm),d(this,Xb)):r.setPosition(d(this,qb),d(this,Jb))},ev=function(){return d(this,Tr)?this.rotation:0},LZ=function(){if(d(this,Tr))return null;const[t,r]=this.pageDimensions,[i,s]=this.pageTranslation,a=d(this,Kl),o=new Float32Array(a.length*8);let l=0;for(const{x:A,y:c,width:u,height:h}of a){const g=A*t+i,p=(1-c)*r+s;o[l]=o[l+4]=g,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=g+u*t,o[l+5]=o[l+7]=p-h*r,l+=8}return o},QZ=function(t){return d(this,ta).serialize(t,D(this,We,ev).call(this))},jZ=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},HZ=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},VZ=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==r[s])},N(mt,la),ce(mt,"_defaultColor",null),ce(mt,"_defaultOpacity",1),ce(mt,"_defaultThickness",12),ce(mt,"_type","highlight"),ce(mt,"_editorType",Ve.HIGHLIGHT),ce(mt,"_freeHighlightId",-1),ce(mt,"_freeHighlight",null),ce(mt,"_freeHighlightClipId","");let D_=mt;var jh;class KZ{constructor(){N(this,jh,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){d(this,jh)[e]=t}toSVGProperties(){const e=d(this,jh);return S(this,jh,Object.create(null)),{root:e}}reset(){S(this,jh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ft("Not implemented")}}jh=new WeakMap;var gs,ym,Ar,Hh,Vh,Yc,qc,Jc,Kh,dt,eD,tD,nD,tv,$Z,IC,nv,Fg;const Ie=class Ie extends Vt{constructor(t){super(t);N(this,dt);N(this,gs,null);N(this,ym);ce(this,"_colorPicker",null);ce(this,"_drawId",null);S(this,ym,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(D(this,dt,eD).call(this,t),D(this,dt,tv).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[s,a]of Object.entries(r))i.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Ft("Not implemented")}static get typesMap(){Ft("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(d(Ie,Ar).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,r[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,r[s]]);return t}_updateProperty(t,r,i){const s=this._drawingOptions,a=s[r],o=l=>{var c,u;s.updateProperty(r,l);const A=d(this,gs).updateProperty(r,l);A&&D(this,dt,nv).call(this,A),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&((u=this._colorPicker)==null||u.update(l))};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(d(this,gs).getPathResizingSVGProperties(D(this,dt,IC).call(this)),{bbox:D(this,dt,Fg).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(d(this,gs).getPathResizedSVGProperties(D(this,dt,IC).call(this)),{bbox:D(this,dt,Fg).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:D(this,dt,Fg).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(d(this,gs).getPathTranslatedSVGProperties(D(this,dt,IC).call(this),this.parentDimensions),{bbox:D(this,dt,Fg).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,ym)&&(S(this,ym,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){D(this,dt,nD).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,dt,tv).call(this),D(this,dt,nv).call(this,d(this,gs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),D(this,dt,nD).call(this)):t&&(this._uiManager.addShouldRescale(this),D(this,dt,tv).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties({bbox:D(this,dt,Fg).call(this)},d(this,gs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,dt,nv).call(this,d(this,gs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,s,a){Ft("Not implemented")}static startDrawing(t,r,i,s){var w;const{target:a,offsetX:o,offsetY:l,pointerId:A,pointerType:c}=s;if(d(Ie,qc)&&d(Ie,qc)!==c)return;const{viewport:{rotation:u}}=t,{width:h,height:g}=a.getBoundingClientRect(),p=S(Ie,Hh,new AbortController),m=t.combinedSignal(p);if(d(Ie,Yc)||S(Ie,Yc,A),d(Ie,qc)??S(Ie,qc,c),window.addEventListener("pointerup",v=>{var b;d(Ie,Yc)===v.pointerId?this._endDraw(v):(b=d(Ie,Jc))==null||b.delete(v.pointerId)},{signal:m}),window.addEventListener("pointercancel",v=>{var b;d(Ie,Yc)===v.pointerId?this._currentParent.endDrawingSession():(b=d(Ie,Jc))==null||b.delete(v.pointerId)},{signal:m}),window.addEventListener("pointerdown",v=>{d(Ie,qc)===v.pointerType&&((d(Ie,Jc)||S(Ie,Jc,new Set)).add(v.pointerId),d(Ie,Ar).isCancellable()&&(d(Ie,Ar).removeLastElement(),d(Ie,Ar).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Ea,{signal:m}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),a.addEventListener("touchmove",v=>{v.timeStamp===d(Ie,Kh)&&Un(v)},{signal:m}),t.toggleDrawing(),(w=r._editorUndoBar)==null||w.hide(),d(Ie,Ar)){t.drawLayer.updateProperties(this._currentDrawId,d(Ie,Ar).startNew(o,l,h,g,u));return}r.updateUIForDefaultProperties(this),S(Ie,Ar,this.createDrawerInstance(o,l,h,g,u)),S(Ie,Vh,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(Ie,Vh).toSVGProperties(),d(Ie,Ar).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(S(Ie,Kh,-1),!d(Ie,Ar))return;const{offsetX:r,offsetY:i,pointerId:s}=t;if(d(Ie,Yc)===s){if(((a=d(Ie,Jc))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(Ie,Ar).add(r,i)),S(Ie,Kh,t.timeStamp),Un(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(Ie,Ar,null),S(Ie,Vh,null),S(Ie,qc,null),S(Ie,Kh,NaN)),d(Ie,Hh)&&(d(Ie,Hh).abort(),S(Ie,Hh,null),S(Ie,Yc,NaN),S(Ie,Jc,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,d(Ie,Ar).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=d(Ie,Ar),s=this._currentDrawId,a=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:st.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(st.DRAW_STEP),!d(Ie,Ar).isEmpty()){const{pageDimensions:[i,s],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(Ie,Ar).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:d(Ie,Vh),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,s,a,o){Ft("Not implemented")}static async deserialize(t,r,i){var u,h;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=r.viewport,A=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,r,i);return c.createDrawingOptions(t),D(u=c,dt,eD).call(u,{drawOutlines:A}),D(h=c,dt,tv).call(h),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[r,i]=this.pageTranslation,[s,a]=this.pageDimensions;return d(this,gs).serialize([r,i,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};gs=new WeakMap,ym=new WeakMap,Ar=new WeakMap,Hh=new WeakMap,Vh=new WeakMap,Yc=new WeakMap,qc=new WeakMap,Jc=new WeakMap,Kh=new WeakMap,dt=new WeakSet,eD=function({drawOutlines:t,drawId:r,drawingOptions:i}){S(this,gs,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=D(this,dt,tD).call(this,t,this.parent),D(this,dt,nv).call(this,t.box)},tD=function(t,r){const{id:i}=r.drawLayer.draw(Ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},nD=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},tv=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,dt,tD).call(this,d(this,gs),t)}},$Z=function([t,r,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-t,i*(o/a),s*(a/o)];case 180:return[1-t,1-r,i,s];case 270:return[1-r,t,i*(o/a),s*(a/o)];default:return[t,r,i,s]}},IC=function(){const{x:t,y:r,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,t,i*(a/o),s*(o/a)];case 180:return[1-t,1-r,i,s];case 270:return[r,1-t,i*(a/o),s*(o/a)];default:return[t,r,i,s]}},nv=function(t){if([this.x,this.y,this.width,this.height]=D(this,dt,$Z).call(this,t),this.div){this.fixAndSetPosition();const[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()},Fg=function(){const{x:t,y:r,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,A]}=this;switch((a*4+o)/90){case 1:return[1-r-s,t,s,i];case 2:return[1-t-i,1-r-s,i,s];case 3:return[r,1-t-i,s,i];case 4:return[t,r-i*(l/A),s*(A/l),i*(l/A)];case 5:return[1-r,t,i*(l/A),s*(A/l)];case 6:return[1-t-s*(A/l),1-r,s*(A/l),i*(l/A)];case 7:return[r-i*(l/A),1-t-s*(A/l),i*(l/A),s*(A/l)];case 8:return[t-i,r-s,i,s];case 9:return[1-r,t-i,s,i];case 10:return[1-t,1-r,i,s];case 11:return[r-s,1-t,s,i];case 12:return[t-s*(A/l),r,s*(A/l),i*(l/A)];case 13:return[1-r-i*(l/A),t-s*(A/l),i*(l/A),s*(A/l)];case 14:return[1-t,1-r-i*(l/A),s*(A/l),i*(l/A)];case 15:return[r,1-t,i*(l/A),s*(A/l)];default:return[t,r,i,s]}},ce(Ie,"_currentDrawId",-1),ce(Ie,"_currentParent",null),N(Ie,Ar,null),N(Ie,Hh,null),N(Ie,Vh,null),N(Ie,Yc,NaN),N(Ie,qc,null),N(Ie,Jc,null),N(Ie,Kh,NaN),ce(Ie,"_INNER_MARGIN",3);let O_=Ie;var So,cr,ur,$h,vm,fi,Pr,ra,Gh,zh,Wh,wm,TC;class TNe{constructor(e,t,r,i,s,a){N(this,wm);N(this,So,new Float64Array(6));N(this,cr);N(this,ur);N(this,$h);N(this,vm);N(this,fi);N(this,Pr,"");N(this,ra,0);N(this,Gh,new $x);N(this,zh);N(this,Wh);S(this,zh,r),S(this,Wh,i),S(this,$h,s),S(this,vm,a),[e,t]=D(this,wm,TC).call(this,e,t);const o=S(this,cr,[NaN,NaN,NaN,NaN,e,t]);S(this,fi,[e,t]),S(this,ur,[{line:o,points:d(this,fi)}]),d(this,So).set(o,0)}updateProperty(e,t){e==="stroke-width"&&S(this,vm,t)}isEmpty(){return!d(this,ur)||d(this,ur).length===0}isCancellable(){return d(this,fi).length<=10}add(e,t){[e,t]=D(this,wm,TC).call(this,e,t);const[r,i,s,a]=d(this,So).subarray(2,6),o=e-s,l=t-a;return Math.hypot(d(this,zh)*o,d(this,Wh)*l)<=2?null:(d(this,fi).push(e,t),isNaN(r)?(d(this,So).set([s,a,e,t],2),d(this,cr).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,So)[0])&&d(this,cr).splice(6,6),d(this,So).set([r,i,s,a,e,t],0),d(this,cr).push(...Ce.createBezierPoints(r,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(d(this,fi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){S(this,zh,r),S(this,Wh,i),S(this,$h,s),[e,t]=D(this,wm,TC).call(this,e,t);const a=S(this,cr,[NaN,NaN,NaN,NaN,e,t]);S(this,fi,[e,t]);const o=d(this,ur).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),d(this,ur).push({line:a,points:d(this,fi)}),d(this,So).set(a,0),S(this,ra,0),this.toSVGPath(),null}getLastElement(){return d(this,ur).at(-1)}setLastElement(e){return d(this,ur)?(d(this,ur).push(e),S(this,cr,e.line),S(this,fi,e.points),S(this,ra,0),{path:{d:this.toSVGPath()}}):d(this,Gh).setLastElement(e)}removeLastElement(){if(!d(this,ur))return d(this,Gh).removeLastElement();d(this,ur).pop(),S(this,Pr,"");for(let e=0,t=d(this,ur).length;e<t;e++){const{line:r,points:i}=d(this,ur)[e];S(this,cr,r),S(this,fi,i),S(this,ra,0),this.toSVGPath()}return{path:{d:d(this,Pr)}}}toSVGPath(){const e=Ce.svgRound(d(this,cr)[4]),t=Ce.svgRound(d(this,cr)[5]);if(d(this,fi).length===2)return S(this,Pr,`${d(this,Pr)} M ${e} ${t} Z`),d(this,Pr);if(d(this,fi).length<=6){const i=d(this,Pr).lastIndexOf("M");S(this,Pr,`${d(this,Pr).slice(0,i)} M ${e} ${t}`),S(this,ra,6)}if(d(this,fi).length===4){const i=Ce.svgRound(d(this,cr)[10]),s=Ce.svgRound(d(this,cr)[11]);return S(this,Pr,`${d(this,Pr)} L ${i} ${s}`),S(this,ra,12),d(this,Pr)}const r=[];d(this,ra)===0&&(r.push(`M ${e} ${t}`),S(this,ra,6));for(let i=d(this,ra),s=d(this,cr).length;i<s;i+=6){const[a,o,l,A,c,u]=d(this,cr).slice(i,i+6).map(Ce.svgRound);r.push(`C${a} ${o} ${l} ${A} ${c} ${u}`)}return S(this,Pr,d(this,Pr)+r.join(" ")),S(this,ra,d(this,cr).length),d(this,Pr)}getOutlines(e,t,r,i){const s=d(this,ur).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),d(this,Gh).build(d(this,ur),e,t,r,d(this,$h),d(this,vm),i),S(this,So,null),S(this,cr,null),S(this,ur,null),S(this,Pr,null),d(this,Gh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}So=new WeakMap,cr=new WeakMap,ur=new WeakMap,$h=new WeakMap,vm=new WeakMap,fi=new WeakMap,Pr=new WeakMap,ra=new WeakMap,Gh=new WeakMap,zh=new WeakMap,Wh=new WeakMap,wm=new WeakSet,TC=function(e,t){return Ce._normalizePoint(e,t,d(this,zh),d(this,Wh),d(this,$h))};var gi,ex,tx,ps,Io,To,bm,xm,Xh,Mr,al,GZ,zZ,WZ;class $x extends Ce{constructor(){super(...arguments);N(this,Mr);N(this,gi);N(this,ex,0);N(this,tx);N(this,ps);N(this,Io);N(this,To);N(this,bm);N(this,xm);N(this,Xh)}build(t,r,i,s,a,o,l){S(this,Io,r),S(this,To,i),S(this,bm,s),S(this,xm,a),S(this,Xh,o),S(this,tx,l??0),S(this,ps,t),D(this,Mr,zZ).call(this)}get thickness(){return d(this,Xh)}setLastElement(t){return d(this,ps).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,ps).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of d(this,ps)){if(t.push(`M${Ce.svgRound(r[4])} ${Ce.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Ce.svgRound(r[10])} ${Ce.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[a,o,l,A,c,u]=r.subarray(i,i+6).map(Ce.svgRound);t.push(`C${a} ${o} ${l} ${A} ${c} ${u}`)}}return t.join("")}serialize([t,r,i,s],a){const o=[],l=[],[A,c,u,h]=D(this,Mr,GZ).call(this);let g,p,m,w,v,b,x,E,I;switch(d(this,xm)){case 0:I=Ce._rescale,g=t,p=r+s,m=i,w=-s,v=t+A*i,b=r+(1-c-h)*s,x=t+(A+u)*i,E=r+(1-c)*s;break;case 90:I=Ce._rescaleAndSwap,g=t,p=r,m=i,w=s,v=t+c*i,b=r+A*s,x=t+(c+h)*i,E=r+(A+u)*s;break;case 180:I=Ce._rescale,g=t+i,p=r,m=-i,w=s,v=t+(1-A-u)*i,b=r+c*s,x=t+(1-A)*i,E=r+(c+h)*s;break;case 270:I=Ce._rescaleAndSwap,g=t+i,p=r+s,m=-i,w=-s,v=t+(1-c-h)*i,b=r+(1-A-u)*s,x=t+(1-c)*i,E=r+(1-A)*s;break}for(const{line:P,points:_}of d(this,ps))o.push(I(P,g,p,m,w,a?new Array(P.length):null)),l.push(I(_,g,p,m,w,a?new Array(_.length):null));return{lines:o,points:l,rect:[v,b,x,E]}}static deserialize(t,r,i,s,a,{paths:{lines:o,points:l},rotation:A,thickness:c}){const u=[];let h,g,p,m,w;switch(A){case 0:w=Ce._rescale,h=-t/i,g=r/s+1,p=1/i,m=-1/s;break;case 90:w=Ce._rescaleAndSwap,h=-r/s,g=-t/i,p=1/s,m=1/i;break;case 180:w=Ce._rescale,h=t/i+1,g=-r/s,p=-1/i,m=1/s;break;case 270:w=Ce._rescaleAndSwap,h=r/s+1,g=t/i+1,p=-1/s,m=-1/i;break}if(!o){o=[];for(const b of l){const x=b.length;if(x===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(x===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(x-2));o.push(E);let[I,P,_,T]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,I,P],0);for(let k=4;k<x;k+=2){const O=b[k],U=b[k+1];E.set(Ce.createBezierPoints(I,P,_,T,O,U),(k-2)*3),[I,P,_,T]=[_,T,O,U]}}}for(let b=0,x=o.length;b<x;b++)u.push({line:w(o[b].map(E=>E??NaN),h,g,p,m),points:w(l[b].map(E=>E??NaN),h,g,p,m)});const v=new this.prototype.constructor;return v.build(u,i,s,1,A,c,a),v}get box(){return d(this,gi)}updateProperty(t,r){return t==="stroke-width"?D(this,Mr,WZ).call(this,r):null}updateParentDimensions([t,r],i){const[s,a]=D(this,Mr,al).call(this);S(this,Io,t),S(this,To,r),S(this,bm,i);const[o,l]=D(this,Mr,al).call(this),A=o-s,c=l-a,u=d(this,gi);return u[0]-=A,u[1]-=c,u[2]+=2*A,u[3]+=2*c,u}updateRotation(t){return S(this,ex,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,gi).map(Ce.svgRound).join(" ")}get defaultProperties(){const[t,r]=d(this,gi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(t)} ${Ce.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=d(this,gi);let i=0,s=0,a=0,o=0,l=0,A=0;switch(d(this,ex)){case 90:s=r/t,a=-t/r,l=t;break;case 180:i=-1,o=-1,l=t,A=r;break;case 270:s=-r/t,a=t/r,A=r;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${Ce.svgRound(l)} ${Ce.svgRound(A)})`}getPathResizingSVGProperties([t,r,i,s]){const[a,o]=D(this,Mr,al).call(this),[l,A,c,u]=d(this,gi);if(Math.abs(c-a)<=Ce.PRECISION||Math.abs(u-o)<=Ce.PRECISION){const w=t+i/2-(l+c/2),v=r+s/2-(A+u/2);return{path:{"transform-origin":`${Ce.svgRound(t)} ${Ce.svgRound(r)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const h=(i-2*a)/(c-2*a),g=(s-2*o)/(u-2*o),p=c/i,m=u/s;return{path:{"transform-origin":`${Ce.svgRound(l)} ${Ce.svgRound(A)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Ce.svgRound(a)} ${Ce.svgRound(o)}) scale(${h} ${g}) translate(${Ce.svgRound(-a)} ${Ce.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,i,s]){const[a,o]=D(this,Mr,al).call(this),l=d(this,gi),[A,c,u,h]=l;if(l[0]=t,l[1]=r,l[2]=i,l[3]=s,Math.abs(u-a)<=Ce.PRECISION||Math.abs(h-o)<=Ce.PRECISION){const v=t+i/2-(A+u/2),b=r+s/2-(c+h/2);for(const{line:x,points:E}of d(this,ps))Ce._translate(x,v,b,x),Ce._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(t)} ${Ce.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*a)/(u-2*a),p=(s-2*o)/(h-2*o),m=-g*(A+a)+t+a,w=-p*(c+o)+r+o;if(g!==1||p!==1||m!==0||w!==0)for(const{line:v,points:b}of d(this,ps))Ce._rescale(v,m,w,g,p,v),Ce._rescale(b,m,w,g,p,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(t)} ${Ce.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[s,a]=i,o=d(this,gi),l=t-o[0],A=r-o[1];if(d(this,Io)===s&&d(this,To)===a)for(const{line:c,points:u}of d(this,ps))Ce._translate(c,l,A,c),Ce._translate(u,l,A,u);else{const c=d(this,Io)/s,u=d(this,To)/a;S(this,Io,s),S(this,To,a);for(const{line:h,points:g}of d(this,ps))Ce._rescale(h,l,A,c,u,h),Ce._rescale(g,l,A,c,u,g);o[2]*=c,o[3]*=u}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(t)} ${Ce.svgRound(r)}`}}}get defaultSVGProperties(){const t=d(this,gi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(t[0])} ${Ce.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}gi=new WeakMap,ex=new WeakMap,tx=new WeakMap,ps=new WeakMap,Io=new WeakMap,To=new WeakMap,bm=new WeakMap,xm=new WeakMap,Xh=new WeakMap,Mr=new WeakSet,al=function(t=d(this,Xh)){const r=d(this,tx)+t/2*d(this,bm);return d(this,xm)%180===0?[r/d(this,Io),r/d(this,To)]:[r/d(this,To),r/d(this,Io)]},GZ=function(){const[t,r,i,s]=d(this,gi),[a,o]=D(this,Mr,al).call(this,0);return[t+a,r+o,i-2*a,s-2*o]},zZ=function(){const t=S(this,gi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of d(this,ps)){if(s.length<=12){for(let l=4,A=s.length;l<A;l+=6)Te.pointBoundingBox(s[l],s[l+1],t);continue}let a=s[4],o=s[5];for(let l=6,A=s.length;l<A;l+=6){const[c,u,h,g,p,m]=s.subarray(l,l+6);Te.bezierBoundingBox(a,o,c,u,h,g,p,m,t),a=p,o=m}}const[r,i]=D(this,Mr,al).call(this);t[0]=vi(t[0]-r,0,1),t[1]=vi(t[1]-i,0,1),t[2]=vi(t[2]+r,0,1),t[3]=vi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},WZ=function(t){const[r,i]=D(this,Mr,al).call(this);S(this,Xh,t);const[s,a]=D(this,Mr,al).call(this),[o,l]=[s-r,a-i],A=d(this,gi);return A[0]-=o,A[1]-=l,A[2]+=2*o,A[3]+=2*l,A};class sT extends KZ{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new sT(this._viewParameters);return e.updateAll(this),e}}var Z_,XZ;const Jg=class Jg extends O_{constructor(t){super({...t,name:"inkEditor"});N(this,Z_);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){Vt.initialize(t,r),this._defaultDrawingOptions=new sT(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return et(this,"typesMap",new Map([[st.INK_THICKNESS,"stroke-width"],[st.INK_COLOR,"stroke"],[st.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,s,a){return new TNe(t,r,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,s,a,o){return $x.deserialize(t,r,i,s,a,o)}static async deserialize(t,r,i){let s=null;if(t instanceof MM){const{data:{inkLists:o,rect:l,rotation:A,id:c,color:u,opacity:h,borderStyle:{rawWidth:g},popupRef:p,contentsObj:m},parent:{page:{pageNumber:w}}}=t;s=t={annotationType:Ve.INK,color:Array.from(u),thickness:g,opacity:h,paths:{points:o},boxes:null,pageIndex:w-1,rect:l.slice(0),rotation:A,annotationElementId:c,id:c,deleted:!1,popupRef:p,comment:(m==null?void 0:m.str)||null}}const a=await super.deserialize(t,r,i);return a._initialData=s,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new F_(this)),[["colorPicker",this._colorPicker]]}get colorType(){return st.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=Jg.getDefaultDrawingOptions({stroke:Te.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,A={annotationType:Ve.INK,color:Vt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:i},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(A),t?(A.isCopy=!0,A):this.annotationElementId&&!D(this,Z_,XZ).call(this,A)?null:(A.id=this.annotationElementId,A)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1),s={rect:i,thickness:this._drawingOptions["stroke-width"],points:r};return this.hasEditedComment&&(s.popup=this.comment),t.updateEdited(s),null}};Z_=new WeakSet,XZ=function(t){const{color:r,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==a},ce(Jg,"_type","ink"),ce(Jg,"_editorType",Ve.INK),ce(Jg,"_defaultDrawingOptions",null);let rD=Jg;class iD extends $x{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const SE=8,yy=3;var Yh,wt,sD,Qa,YZ,qZ,aD,PC,JZ,ZZ,eee,oD,lD,tee;class rA{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},s,a,o,l){let A=new OffscreenCanvas(1,1),c=A.getContext("2d",{alpha:!1});const u=200,h=c.font=`${r} ${i} ${u}px ${t}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:x}=c.measureText(e),E=1.5,I=Math.ceil(Math.max(Math.abs(g)+Math.abs(p)||0,x)*E),P=Math.ceil(Math.max(Math.abs(m)+Math.abs(w)||u,Math.abs(v)+Math.abs(b)||u)*E);A=new OffscreenCanvas(I,P),c=A.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=h,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,I,P),c.fillStyle="black",c.fillText(e,I*(E-1)/2,P*(3-E)/2);const _=D(this,wt,oD).call(this,c.getImageData(0,0,I,P).data),T=D(this,wt,eee).call(this,_),k=D(this,wt,lD).call(this,T),O=D(this,wt,aD).call(this,_,I,P,k);return this.processDrawnLines({lines:{curves:O,width:I,height:P},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,s){const[a,o,l]=D(this,wt,tee).call(this,e),[A,c]=D(this,wt,ZZ).call(this,a,o,l,Math.hypot(o,l)*d(this,Yh).sigmaSFactor,d(this,Yh).sigmaR,d(this,Yh).kernelSize),u=D(this,wt,lD).call(this,c),h=D(this,wt,aD).call(this,A,o,l,u);return this.processDrawnLines({lines:{curves:h,width:o,height:l},pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([t,r]=[r,t]);const{curves:l,width:A,height:c}=e,u=e.thickness??0,h=[],g=Math.min(t/A,r/c),p=g/t,m=g/r,w=[];for(const{points:b}of l){const x=a?D(this,wt,JZ).call(this,b):b;if(!x)continue;w.push(x);const E=x.length,I=new Float32Array(E),P=new Float32Array(3*(E===2?2:E-2));if(h.push({line:P,points:I}),E===2){I[0]=x[0]*p,I[1]=x[1]*m,P.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[_,T,k,O]=x;_*=p,T*=m,k*=p,O*=m,I.set([_,T,k,O],0),P.set([NaN,NaN,NaN,NaN,_,T],0);for(let U=4;U<E;U+=2){const L=I[U]=x[U]*p,R=I[U+1]=x[U+1]*m;P.set(Ce.createBezierPoints(_,T,k,O,L,R),(U-2)*3),[_,T,k,O]=[k,O,L,R]}}if(h.length===0)return null;const v=o?new iD:new $x;return v.build(h,t,r,1,i,o?0:u,s),{outline:v,newCurves:w,areContours:o,thickness:u,width:A,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const x of e){l+=x.length;for(let E=2,I=x.length;E<I;E++){const P=x[E]-x[E-2];a=Math.min(a,P),o=Math.max(o,P)}}let A;a>=-128&&o<=127?A=Int8Array:a>=-32768&&o<=32767?A=Int16Array:A=Int32Array;const c=e.length,u=SE+yy*c,h=new Uint32Array(u);let g=0;h[g++]=u*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*A.BYTES_PER_ELEMENT,h[g++]=0,h[g++]=i,h[g++]=s,h[g++]=t?0:1,h[g++]=Math.max(0,Math.floor(r??0)),h[g++]=c,h[g++]=A.BYTES_PER_ELEMENT;for(const x of e)h[g++]=x.length-2,h[g++]=x[0],h[g++]=x[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(h);const w=A.prototype.constructor;for(const x of e){const E=new w(x.length-2);for(let I=2,P=x.length;I<P;I++)E[I-2]=x[I]-x[I-2];m.write(E)}m.close();const v=await new Response(p.readable).arrayBuffer(),b=new Uint8Array(v);return eJ(b)}static async decompressSignature(e){try{const t=qFe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const x of r)a||(a=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),a.set(x,o),o+=x.length;const l=new Uint32Array(a.buffer,0,a.length>>2),A=l[1];if(A!==0)throw new Error(`Invalid version: ${A}`);const c=l[2],u=l[3],h=l[4]===0,g=l[5],p=l[6],m=l[7],w=[],v=(SE+yy*p)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(m){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(a.buffer,v);break}o=0;for(let x=0;x<p;x++){const E=l[yy*x+SE],I=new Float32Array(E+2);w.push(I);for(let P=0;P<yy-1;P++)I[P]=l[yy*x+SE+P+1];for(let P=0;P<E;P++)I[P+2]=I[P]+b[o++]}return{areContours:h,thickness:g,outlines:w,width:c,height:u}}catch(t){return Ge(`decompressSignature: ${t}`),null}}}Yh=new WeakMap,wt=new WeakSet,sD=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},Qa=new WeakMap,YZ=function(e,t,r,i,s,a,o){const l=D(this,wt,sD).call(this,r,i,s,a);for(let A=0;A<8;A++){const c=(-A+l-o+16)%8,u=d(this,Qa)[2*c],h=d(this,Qa)[2*c+1];if(e[(r+u)*t+(i+h)]!==0)return c}return-1},qZ=function(e,t,r,i,s,a,o){const l=D(this,wt,sD).call(this,r,i,s,a);for(let A=0;A<8;A++){const c=(A+l+o+16)%8,u=d(this,Qa)[2*c],h=d(this,Qa)[2*c+1];if(e[(r+u)*t+(i+h)]!==0)return c}return-1},aD=function(e,t,r,i){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=i?1:0;for(let c=1;c<r-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*r-1-c]=0;let o=1,l;const A=[];for(let c=1;c<r-1;c++){l=1;for(let u=1;u<t-1;u++){const h=c*t+u,g=a[h];if(g===0)continue;let p=c,m=u;if(g===1&&a[h-1]===0)o+=1,m-=1;else if(g>=1&&a[h+1]===0)o+=1,m+=1,g>1&&(l=g);else{g!==1&&(l=Math.abs(g));continue}const w=[u,c],v=m===u+1,b={isHole:v,points:w,id:o,parent:0};A.push(b);let x;for(const U of A)if(U.id===l){x=U;break}x?x.isHole?b.parent=v?x.parent:l:b.parent=v?l:x.parent:b.parent=v?l:0;const E=D(this,wt,YZ).call(this,a,t,c,u,p,m,0);if(E===-1){a[h]=-o,a[h]!==1&&(l=Math.abs(a[h]));continue}let I=d(this,Qa)[2*E],P=d(this,Qa)[2*E+1];const _=c+I,T=u+P;p=_,m=T;let k=c,O=u;for(;;){const U=D(this,wt,qZ).call(this,a,t,k,O,p,m,1);I=d(this,Qa)[2*U],P=d(this,Qa)[2*U+1];const L=k+I,R=O+P;w.push(R,L);const re=k*t+O;if(a[re+1]===0?a[re]=-o:a[re]===1&&(a[re]=o),L===c&&R===u&&k===_&&O===T){a[h]!==1&&(l=Math.abs(a[h]));break}else p=k,m=O,k=L,O=R}}}return A},PC=function(e,t,r,i){if(r-t<=4){for(let _=t;_<r-2;_+=2)i.push(e[_],e[_+1]);return}const s=e[t],a=e[t+1],o=e[r-4]-s,l=e[r-3]-a,A=Math.hypot(o,l),c=o/A,u=l/A,h=c*a-u*s,g=l/o,p=1/A,m=Math.atan(g),w=Math.cos(m),v=Math.sin(m),b=p*(Math.abs(w)+Math.abs(v)),x=p*(1-b+b**2),E=Math.max(Math.atan(Math.abs(v+w)*x),Math.atan(Math.abs(v-w)*x));let I=0,P=t;for(let _=t+2;_<r-2;_+=2){const T=Math.abs(h-c*e[_+1]+u*e[_]);T>I&&(P=_,I=T)}I>(A*E)**2?(D(this,wt,PC).call(this,e,t,P+2,i),D(this,wt,PC).call(this,e,P,r,i)):i.push(s,a)},JZ=function(e){const t=[],r=e.length;return D(this,wt,PC).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},ZZ=function(e,t,r,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,A=a>>1;for(let m=0;m<a;m++){const w=(m-A)**2;for(let v=0;v<a;v++)o[m*a+v]=Math.exp((w+(v-A)**2)/l)}const c=new Float32Array(256),u=-2*s**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/u);const h=e.length,g=new Uint8Array(h),p=new Uint32Array(256);for(let m=0;m<r;m++)for(let w=0;w<t;w++){const v=m*t+w,b=e[v];let x=0,E=0;for(let P=0;P<a;P++){const _=m+P-A;if(!(_<0||_>=r))for(let T=0;T<a;T++){const k=w+T-A;if(k<0||k>=t)continue;const O=e[_*t+k],U=o[P*a+T]*c[Math.abs(O-b)];x+=O*U,E+=U}}const I=g[v]=Math.round(x/E);p[I]++}return[g,p]},eee=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},oD=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let o=0,l=r.length;o<l;o++){const A=r[o]=e[o<<2];i=Math.max(i,A),s=Math.min(s,A)}const a=255/(i-s);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-s)*a;return r},lD=function(e){let t,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(t=s;t<256;t++){const l=e[t];l>r&&(t-a>i&&(i=t-a,o=t-1),r=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},tee=function(e){const t=e,{width:r,height:i}=e,{maxDim:s}=d(this,Yh);let a=r,o=i;if(r>s||i>s){let h=r,g=i,p=Math.log2(Math.max(r,i)/s);const m=Math.floor(p);p=p===m?m-1:m;for(let v=0;v<p;v++){a=Math.ceil(h/2),o=Math.ceil(g/2);const b=new OffscreenCanvas(a,o);b.getContext("2d").drawImage(e,0,0,h,g,0,0,a,o),h=a,g=o,e!==t&&e.close(),e=b.transferToImageBitmap()}const w=Math.min(s/a,s/o);a=Math.round(a*w),o=Math.round(o*w)}const A=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});A.fillStyle="white",A.fillRect(0,0,a,o),A.filter="grayscale(1)",A.drawImage(e,0,0,e.width,e.height,0,0,a,o);const c=A.getImageData(0,0,a,o).data;return[D(this,wt,oD).call(this,c),a,o]},N(rA,wt),N(rA,Yh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),N(rA,Qa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class LM extends KZ{constructor(){super(),super.updateProperties({fill:Vt._defaultLineColor,"stroke-width":0})}clone(){const e=new LM;return e.updateAll(this),e}}class QM extends sT{constructor(e){super(e),super.updateProperties({stroke:Vt._defaultLineColor,"stroke-width":1})}clone(){const e=new QM(this._viewParameters);return e.updateAll(this),e}}var Zc,Po,eu,qh;const ts=class ts extends O_{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});N(this,Zc,!1);N(this,Po,null);N(this,eu,null);N(this,qh,null);this._willKeepAspectRatio=!0,S(this,eu,t.signatureData||null),S(this,Po,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){Vt.initialize(t,r),this._defaultDrawingOptions=new LM,this._defaultDrawnSignatureOptions=new QM(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Po)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(d(this,eu)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:A,heightInPage:c}=d(this,eu),{rawDims:{pageWidth:u,pageHeight:h},rotation:g}=this.parent.viewport,p=rA.processDrawnLines({lines:s,pageWidth:u,pageHeight:h,rotation:g,innerMargin:ts._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,c,l,A)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:d(this,Po)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){S(this,qh,t),this.addEditToolbar()}getUuid(){return d(this,qh)}get description(){return d(this,Po)}set description(t){S(this,Po,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:s,height:a}=d(this,eu),o=Math.max(s,a),l=rA.processDrawnLines({lines:{curves:t.map(A=>({points:A})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,i,s){const{x:a,y:o}=this,{outline:l}=S(this,eu,t);S(this,Zc,l instanceof iD),this.description=i;let A;d(this,Zc)?A=ts.getDefaultDrawingOptions():(A=ts._defaultDrawnSignatureOptions.clone(),A.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:A});const[c,u]=this.parentDimensions,[,h]=this.pageDimensions;let g=r/h;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(c*this.width,u*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return rA.process(t,r,i,s,ts._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return rA.extractContoursFromText(t,r,i,s,a,ts._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return rA.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:s,innerMargin:ts._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=ts.getDefaultDrawingOptions():(this._drawingOptions=ts._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i,rect:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:Ve.SIGNATURE,isSignature:!0,areContours:d(this,Zc),color:[0,0,0],thickness:d(this,Zc)?0:a,pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:r,points:i},o.uuid=d(this,qh),o.isCopy=!0):o.lines=r,d(this,Po)&&(o.accessibilityData={type:"Figure",alt:d(this,Po)}),o}static deserializeDraw(t,r,i,s,a,o){return o.areContours?iD.deserialize(t,r,i,s,a,o):$x.deserialize(t,r,i,s,a,o)}static async deserialize(t,r,i){var a;const s=await super.deserialize(t,r,i);return S(s,Zc,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",S(s,qh,t.uuid),s}};Zc=new WeakMap,Po=new WeakMap,eu=new WeakMap,qh=new WeakMap,ce(ts,"_type","signature"),ce(ts,"_editorType",Ve.SIGNATURE),ce(ts,"_defaultDrawingOptions",null);let AD=ts;var Zt,dr,tu,Gl,nu,Bm,zl,Jh,Fo,ms,Em,ht,rv,iv,FC,kC,NC,uD,DC,nee;class cD extends Vt{constructor(t){super({...t,name:"stampEditor"});N(this,ht);N(this,Zt,null);N(this,dr,null);N(this,tu,null);N(this,Gl,null);N(this,nu,null);N(this,Bm,"");N(this,zl,null);N(this,Jh,!1);N(this,Fo,null);N(this,ms,!1);N(this,Em,!1);S(this,Gl,t.bitmapUrl),S(this,nu,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){Vt.initialize(t,r)}static isHandlingMimeForPasting(t){return nN.includes(t)}static paste(t,r){r.pasteEditor({mode:Ve.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const A=l.output;return await this.setGuessedAltText(A),r&&!this.hasAltTextData()&&(this.altTextData={alt:A,decorative:!1}),A}remove(){var t;d(this,dr)&&(S(this,Zt,null),this._uiManager.imageManager.deleteId(d(this,dr)),(t=d(this,zl))==null||t.remove(),S(this,zl,null),d(this,Fo)&&(clearTimeout(d(this,Fo)),S(this,Fo,null))),super.remove()}rebuild(){if(!this.parent){d(this,dr)&&D(this,ht,FC).call(this);return}super.rebuild(),this.div!==null&&(d(this,dr)&&d(this,zl)===null&&D(this,ht,FC).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,tu)||d(this,Zt)||d(this,Gl)||d(this,nu)||d(this,dr)||d(this,Jh))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,Jh)||(d(this,Zt)?D(this,ht,kC).call(this):D(this,ht,FC).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(S(this,dr,i),s&&S(this,Zt,s),S(this,Jh,!1),D(this,ht,kC).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Fo)!==null&&clearTimeout(d(this,Fo)),S(this,Fo,setTimeout(()=>{S(this,Fo,null),D(this,ht,uD).call(this)},200))}copyCanvas(t,r,i=!1){var g;t||(t=224);const{width:s,height:a}=d(this,Zt),o=new Wo;let l=d(this,Zt),A=s,c=a,u=null;if(r){if(s>r||a>r){const T=Math.min(r/s,r/a);A=Math.floor(s*T),c=Math.floor(a*T)}u=document.createElement("canvas");const p=u.width=Math.ceil(A*o.sx),m=u.height=Math.ceil(c*o.sy);d(this,ms)||(l=D(this,ht,NC).call(this,p,m));const w=u.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",b="#42414d");const x=15,E=x*o.sx,I=x*o.sy,P=new OffscreenCanvas(E*2,I*2),_=P.getContext("2d");_.fillStyle=v,_.fillRect(0,0,E*2,I*2),_.fillStyle=b,_.fillRect(0,0,E,I),_.fillRect(E,I,E,I),w.fillStyle=w.createPattern(P,"repeat"),w.fillRect(0,0,p,m),w.drawImage(l,0,0,l.width,l.height,0,0,p,m)}let h=null;if(i){let p,m;if(o.symmetric&&l.width<t&&l.height<t)p=l.width,m=l.height;else if(l=d(this,Zt),s>t||a>t){const b=Math.min(t/s,t/a);p=Math.floor(s*b),m=Math.floor(a*b),d(this,ms)||(l=D(this,ht,NC).call(this,p,m))}const v=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,p,m),h={width:p,height:m,data:v.getImageData(0,0,p,m).data}}return{canvas:u,width:A,height:c,imageData:h}}static async deserialize(t,r,i){var w;let s=null,a=!1;if(t instanceof yZ){const{data:{rect:v,rotation:b,id:x,structParent:E,popupRef:I,contentsObj:P},container:_,parent:{page:{pageNumber:T}},canvas:k}=t;let O,U;k?(delete t.canvas,{id:O,bitmap:U}=i.imageManager.getFromCanvas(_.id,k),k.remove()):(a=!0,t._hasNoCanvas=!0);const L=((w=await r._structTree.getAriaAttributes(`${FM}${x}`))==null?void 0:w.get("aria-label"))||"";s=t={annotationType:Ve.STAMP,bitmapId:O,bitmap:U,pageIndex:T-1,rect:v.slice(0),rotation:b,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:E,popupRef:I,comment:(P==null?void 0:P.str)||null}}const o=await super.deserialize(t,r,i),{rect:l,bitmap:A,bitmapUrl:c,bitmapId:u,isSvg:h,accessibilityData:g}=t;a?(i.addMissingCanvas(t.id,o),S(o,Jh,!0)):u&&i.imageManager.isValidId(u)?(S(o,dr,u),A&&S(o,Zt,A)):S(o,Gl,c),S(o,ms,h);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,g&&(o.altTextData=g),o._initialData=s,t.comment&&o.setCommentData(t.comment),S(o,Em,!!s),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Ve.STAMP,bitmapId:d(this,dr),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:d(this,ms),structTreeParentId:this._structTreeParentId};if(this.addComment(i),t)return i.bitmapUrl=D(this,ht,DC).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=D(this,ht,nee).call(this,i);if(l.isSame)return null;l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,r===null)return i;r.stamps||(r.stamps=new Map);const o=d(this,ms)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(d(this,dr)))r.stamps.set(d(this,dr),{area:o,serialized:i}),i.bitmap=D(this,ht,DC).call(this,!1);else if(d(this,ms)){const l=r.stamps.get(d(this,dr));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=D(this,ht,DC).call(this,!1))}return i}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const r={rect:this.getPDFRect()};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}Zt=new WeakMap,dr=new WeakMap,tu=new WeakMap,Gl=new WeakMap,nu=new WeakMap,Bm=new WeakMap,zl=new WeakMap,Jh=new WeakMap,Fo=new WeakMap,ms=new WeakMap,Em=new WeakMap,ht=new WeakSet,rv=function(t,r=!1){if(!t){this.remove();return}S(this,Zt,t.bitmap),r||(S(this,dr,t.id),S(this,ms,t.isSvg)),t.file&&S(this,Bm,t.file.name),D(this,ht,kC).call(this)},iv=function(){if(S(this,tu,null),this._uiManager.enableWaiting(!1),!!d(this,zl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Zt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Zt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},FC=function(){if(d(this,dr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,dr)).then(i=>D(this,ht,rv).call(this,i,!0)).finally(()=>D(this,ht,iv).call(this));return}if(d(this,Gl)){const i=d(this,Gl);S(this,Gl,null),this._uiManager.enableWaiting(!0),S(this,tu,this._uiManager.imageManager.getFromUrl(i).then(s=>D(this,ht,rv).call(this,s)).finally(()=>D(this,ht,iv).call(this)));return}if(d(this,nu)){const i=d(this,nu);S(this,nu,null),this._uiManager.enableWaiting(!0),S(this,tu,this._uiManager.imageManager.getFromFile(i).then(s=>D(this,ht,rv).call(this,s)).finally(()=>D(this,ht,iv).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=nN.join(",");const r=this._uiManager._signal;S(this,tu,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,ht,rv).call(this,s)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>D(this,ht,iv).call(this))),t.click()},kC=function(){var u;const{div:t}=this;let{width:r,height:i}=d(this,Zt);const[s,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*s,i=this.height*a;else if(r>o*s||i>o*a){const h=Math.min(o*s/r,o*a/i);r*=h,i*=h}const[l,A]=this.parentDimensions;this.setDims(r*l/s,i*A/a),this._uiManager.enableWaiting(!1);const c=S(this,zl,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/s,this.height=i/a,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),D(this,ht,uD).call(this),d(this,Em)||(this.parent.addUndoableEditor(this),S(this,Em,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Bm)&&this.div.setAttribute("aria-description",d(this,Bm)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},NC=function(t,r){const{width:i,height:s}=d(this,Zt);let a=i,o=s,l=d(this,Zt);for(;a>2*t||o>2*r;){const A=a,c=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(a,o);u.getContext("2d").drawImage(l,0,0,A,c,0,0,a,o),l=u.transferToImageBitmap()}return l},uD=function(){const[t,r]=this.parentDimensions,{width:i,height:s}=this,a=new Wo,o=Math.ceil(i*t*a.sx),l=Math.ceil(s*r*a.sy),A=d(this,zl);if(!A||A.width===o&&A.height===l)return;A.width=o,A.height=l;const c=d(this,ms)?d(this,Zt):D(this,ht,NC).call(this,o,l),u=A.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,l)},DC=function(t){if(t){if(d(this,ms)){const s=this._uiManager.imageManager.getSvgUrl(d(this,dr));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=d(this,Zt),r.getContext("2d").drawImage(d(this,Zt),0,0),r.toDataURL()}if(d(this,ms)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*Zu.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Zu.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(d(this,Zt),0,0,d(this,Zt).width,d(this,Zt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(d(this,Zt))},nee=function(t){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},ce(cD,"_type","stamp"),ce(cD,"_editorType",Ve.STAMP);var Zh,Cm,ko,ru,Wl,ys,iu,_m,ef,ja,Xl,hr,Yl,su,Sm,Ne,au,en,ree,lo,hD,fD,OC;const Fa=class Fa{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:A,l10n:c}){N(this,en);N(this,Zh);N(this,Cm,!1);N(this,ko,null);N(this,ru,null);N(this,Wl,null);N(this,ys,new Map);N(this,iu,!1);N(this,_m,!1);N(this,ef,!1);N(this,ja,null);N(this,Xl,null);N(this,hr,null);N(this,Yl,null);N(this,su,null);N(this,Sm,-1);N(this,Ne);const u=[...d(Fa,au).values()];if(!Fa._initialized){Fa._initialized=!0;for(const h of u)h.initialize(c,e)}e.registerEditorTypes(u),S(this,Ne,e),this.pageIndex=t,this.div=r,S(this,Zh,s),S(this,ko,a),this.viewport=A,S(this,hr,l),this.drawLayer=o,this._structTree=i,d(this,Ne).addLayer(this)}get isEmpty(){return d(this,ys).size===0}get isInvisible(){return this.isEmpty&&d(this,Ne).getMode()===Ve.NONE}updateToolbar(e){d(this,Ne).updateToolbar(e)}updateMode(e=d(this,Ne).getMode()){switch(D(this,en,OC).call(this),e){case Ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of d(Fa,au).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,hr))==null?void 0:t.div)}setEditingState(e){d(this,Ne).setEditingState(e)}addCommands(e){d(this,Ne).addCommands(e)}cleanUndoStack(e){d(this,Ne).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,ko))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;S(this,ef,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=d(this,su))==null||r.abort(),S(this,su,null);const e=new Set;for(const i of d(this,ys).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(d(this,Ne).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!d(this,ko)){S(this,ef,!1);return}const t=d(this,ko).getEditableAnnotations();for(const i of t){if(i.hide(),d(this,Ne).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}S(this,ef,!1)}disable(){var i;if(S(this,_m,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,hr)&&!d(this,su)){S(this,su,new AbortController);const s=d(this,Ne).combinedSignal(d(this,su));d(this,hr).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:A,timeStamp:c}=a,u=d(this,Sm);if(c-u>500){S(this,Sm,c);return}S(this,Sm,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const g=document.elementsFromPoint(l,A);if(h.toggle("getElements",!1),!this.div.contains(g[0]))return;let p;const m=new RegExp(`^${Xq}[0-9]+$`);for(const v of g)if(m.test(v.id)){p=v.id;break}if(!p)return;const w=d(this,ys).get(p);(w==null?void 0:w.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick())},{signal:s,capture:!0})}const e=new Map,t=new Map;for(const s of d(this,ys).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(i=this.getEditableAnnotation(s.annotationElementId))==null||i.show(),s.remove()}if(d(this,ko)){const s=d(this,ko).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(d(this,Ne).isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(d(this,Ne).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}D(this,en,OC).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of d(Fa,au).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,_m,!1)}getEditableAnnotation(e){var t;return((t=d(this,ko))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,Ne).getActive()!==e&&d(this,Ne).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,hr))!=null&&e.div&&!d(this,Yl)){S(this,Yl,new AbortController);const t=d(this,Ne).combinedSignal(d(this,Yl));d(this,hr).div.addEventListener("pointerdown",D(this,en,ree).bind(this),{signal:t}),d(this,hr).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,hr))!=null&&e.div&&d(this,Yl)&&(d(this,Yl).abort(),S(this,Yl,null),d(this,hr).div.classList.remove("highlighting"))}enableClick(){if(d(this,ru))return;S(this,ru,new AbortController);const e=d(this,Ne).combinedSignal(d(this,ru));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,ru))==null||e.abort(),S(this,ru,null)}attach(e){d(this,ys).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,Ne).isDeletedAnnotationElement(t)&&d(this,Ne).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,ys).delete(e.id),(t=d(this,Zh))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,_m)&&e.annotationElementId&&d(this,Ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,Ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,Ne).addDeletedAnnotationElement(e.annotationElementId),Vt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,Ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,ef)),d(this,Ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,Wl)&&(e._focusEventsAllowed=!1,S(this,Wl,setTimeout(()=>{S(this,Wl,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,Ne)._signal}),t.focus())},0))),e._structTreeParentId=(r=d(this,Zh))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return d(this,Ne).getId()}combinedSignal(e){return d(this,Ne).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,en,lo))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,Ne).updateMode(e.mode);const{offsetX:r,offsetY:i}=D(this,en,fD).call(this),s=this.getNextId(),a=D(this,en,hD).call(this,{parent:this,id:s,x:r,y:i,uiManager:d(this,Ne),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=d(Fa,au).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,Ne)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=D(this,en,hD).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:d(this,Ne),isCentered:t,...r});return s&&this.add(s),s}addNewEditor(e={}){this.createAndAddNewEditor(D(this,en,fD).call(this),!0,e)}setSelected(e){d(this,Ne).setSelected(e)}toggleSelected(e){d(this,Ne).toggleSelected(e)}unselect(e){d(this,Ne).unselect(e)}pointerup(e){var i;const{isMac:t}=Vr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,iu)||(S(this,iu,!1),(i=d(this,en,lo))!=null&&i.isDrawer&&d(this,en,lo).supportMultipleDrawings))return;if(!d(this,Cm)){S(this,Cm,!0);return}const r=d(this,Ne).getMode();if(r===Ve.STAMP||r===Ve.SIGNATURE){d(this,Ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(d(this,Ne).getMode()===Ve.HIGHLIGHT&&this.enableTextSelection(),d(this,iu)){S(this,iu,!1);return}const{isMac:t}=Vr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,iu,!0),(i=d(this,en,lo))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=d(this,Ne).getActive();S(this,Cm,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,ja)){d(this,en,lo).startDrawing(this,d(this,Ne),!1,e);return}d(this,Ne).setCurrentDrawingSession(this),S(this,ja,new AbortController);const t=d(this,Ne).combinedSignal(d(this,ja));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(S(this,Xl,null),this.commitOrRemove())},{signal:t}),d(this,en,lo).startDrawing(this,d(this,Ne),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,Xl,t);return}d(this,Xl)&&setTimeout(()=>{var t;(t=d(this,Xl))==null||t.focus(),S(this,Xl,null)},0)}endDrawingSession(e=!1){return d(this,ja)?(d(this,Ne).setCurrentDrawingSession(null),d(this,ja).abort(),S(this,ja,null),S(this,Xl,null),d(this,en,lo).endDrawing(e)):null}findNewParent(e,t,r){const i=d(this,Ne).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return d(this,ja)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,ja)&&d(this,en,lo).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,Ne).getActive())==null?void 0:e.parent)===this&&(d(this,Ne).commitOrRemove(),d(this,Ne).setActiveEditor(null)),d(this,Wl)&&(clearTimeout(d(this,Wl)),S(this,Wl,null));for(const r of d(this,ys).values())(t=d(this,Zh))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,d(this,ys).clear(),d(this,Ne).removeLayer(this)}render({viewport:e}){this.viewport=e,kf(this.div,e);for(const t of d(this,Ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,Ne).commitOrRemove(),D(this,en,OC).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,kf(this.div,{rotation:r}),t!==r)for(const i of d(this,ys).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,Ne).viewParameters.realScale}};Zh=new WeakMap,Cm=new WeakMap,ko=new WeakMap,ru=new WeakMap,Wl=new WeakMap,ys=new WeakMap,iu=new WeakMap,_m=new WeakMap,ef=new WeakMap,ja=new WeakMap,Xl=new WeakMap,hr=new WeakMap,Yl=new WeakMap,su=new WeakMap,Sm=new WeakMap,Ne=new WeakMap,au=new WeakMap,en=new WeakSet,ree=function(e){d(this,Ne).unselectAll();const{target:t}=e;if(t===d(this,hr).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,hr).div.contains(t)){const{isMac:r}=Vr.platform;if(e.button!==0||e.ctrlKey&&r)return;d(this,Ne).showAllEditors("highlight",!0,!0),d(this,hr).div.classList.add("free"),this.toggleDrawing(),D_.startHighlighting(this,d(this,Ne).direction==="ltr",{target:d(this,hr).div,x:e.x,y:e.y}),d(this,hr).div.addEventListener("pointerup",()=>{d(this,hr).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,Ne)._signal}),e.preventDefault()}},lo=function(){return d(Fa,au).get(d(this,Ne).getMode())},hD=function(e){const t=d(this,en,lo);return t?new t.prototype.constructor(e):null},fD=function(){const{x:e,y:t,width:r,height:i}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),A=(s+o)/2-e,c=(a+l)/2-t,[u,h]=this.viewport.rotation%180===0?[A,c]:[c,A];return{offsetX:u,offsetY:h}},OC=function(){for(const e of d(this,ys).values())e.isEmpty()&&e.remove()},ce(Fa,"_initialized",!1),N(Fa,au,new Map([zN,rD,cD,D_,AD].map(e=>[e._editorType,e])));let dD=Fa;var Ha,pi,tf,nx,eS,iee,Xo,pD,see,mD;const Gn=class Gn{constructor({pageIndex:e}){N(this,Xo);N(this,Ha,null);N(this,pi,new Map);N(this,tf,new Map);this.pageIndex=e}setParent(e){if(!d(this,Ha)){S(this,Ha,e);return}if(d(this,Ha)!==e){if(d(this,pi).size>0)for(const t of d(this,pi).values())t.remove(),e.append(t);S(this,Ha,e)}}static get _svgFactory(){return et(this,"_svgFactory",new k_)}draw(e,t=!1,r=!1){const i=Vn(Gn,nx)._++,s=D(this,Xo,pD).call(this),a=Gn._svgFactory.createElement("defs");s.append(a);const o=Gn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,tf).set(i,o);const A=r?D(this,Xo,see).call(this,a,l):null,c=Gn._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),d(this,pi).set(i,s),{id:i,clipPathId:`url(#${A})`}}drawOutline(e,t){const r=Vn(Gn,nx)._++,i=D(this,Xo,pD).call(this),s=Gn._svgFactory.createElement("defs");i.append(s);const a=Gn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const u=Gn._svgFactory.createElement("mask");s.append(u),l=`mask_p${this.pageIndex}_${r}`,u.setAttribute("id",l),u.setAttribute("maskUnits","objectBoundingBox");const h=Gn._svgFactory.createElement("rect");u.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const g=Gn._svgFactory.createElement("use");u.append(g),g.setAttribute("href",`#${o}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const A=Gn._svgFactory.createElement("use");i.append(A),A.setAttribute("href",`#${o}`),l&&A.setAttribute("mask",`url(#${l})`);const c=A.cloneNode();return i.append(c),A.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),d(this,pi).set(r,i),r}finalizeDraw(e,t){d(this,tf).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:i,rootClass:s,path:a}=t,o=typeof e=="number"?d(this,pi).get(e):e;if(o){if(r&&D(this,Xo,mD).call(this,o,r),i&&D(l=Gn,eS,iee).call(l,o,i),s){const{classList:A}=o;for(const[c,u]of Object.entries(s))A.toggle(c,u)}if(a){const c=o.firstChild.firstChild;D(this,Xo,mD).call(this,c,a)}}}updateParent(e,t){if(t===this)return;const r=d(this,pi).get(e);r&&(d(t,Ha).append(r),d(this,pi).delete(e),d(t,pi).set(e,r))}remove(e){d(this,tf).delete(e),d(this,Ha)!==null&&(d(this,pi).get(e).remove(),d(this,pi).delete(e))}destroy(){S(this,Ha,null);for(const e of d(this,pi).values())e.remove();d(this,pi).clear(),d(this,tf).clear()}};Ha=new WeakMap,pi=new WeakMap,tf=new WeakMap,nx=new WeakMap,eS=new WeakSet,iee=function(e,[t,r,i,s]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},Xo=new WeakSet,pD=function(){const e=Gn._svgFactory.create(1,1,!0);return d(this,Ha).append(e),e.setAttribute("aria-hidden",!0),e},see=function(e,t){const r=Gn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Gn._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},mD=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},N(Gn,eS),N(Gn,nx,0);let gD=Gn;globalThis._pdfjsTestingUtils={HighlightOutliner:XN};globalThis.pdfjsLib={AbortException:Ju,AnnotationEditorLayer:dD,AnnotationEditorParamsType:st,AnnotationEditorType:Ve,AnnotationEditorUIManager:Nf,AnnotationLayer:KN,AnnotationMode:fc,AnnotationType:Dn,build:oNe,ColorPicker:P_,createValidAbsoluteUrl:Yq,DOMSVGFactory:k_,DrawLayer:gD,FeatureTest:Vr,fetchData:jx,getDocument:ZJ,getFilenameFromUrl:JFe,getPdfFilenameFromUrl:ZFe,getRGB:rT,getUuid:Zq,getXfaPageViewport:tke,GlobalWorkerOptions:Oo,ImageKind:aC,InvalidPDFException:eN,isDataScheme:nT,isPdfFile:NM,isValidExplicitDest:dke,MathClamp:vi,noContextMenu:Ea,normalizeUnicode:XFe,OPS:Bw,OutputScale:Wo,PasswordResponses:QFe,PDFDataRangeTransport:eZ,PDFDateString:__,PDFWorker:_w,PermissionFlag:LFe,PixelsPerInch:Zu,RenderingCancelledException:kM,ResponseException:C_,setLayerDimensions:kf,shadow:et,SignatureExtractor:rA,stopEvent:Un,SupportedImageMimeTypes:nN,TextLayer:Ew,TouchManager:I_,updateUrlHash:qq,Util:Te,VerbosityLevel:ZI,version:aNe,XfaLayer:iZ};Oo.workerSrc="/pdf.worker.min.js";function PNe(){const[n,e]=B.useState(null),[t,r]=B.useState(""),[i,s]=B.useState(!1),[a,o]=B.useState(null),l=B.useRef(null),A=async h=>{const g=h.target.files[0];if(g){e(g),s(!0),r(""),o(null);try{const p=await g.arrayBuffer(),m=await ZJ(p).promise;console.log(`PDF 載入成功，總頁數: ${m.numPages}`);let w="";for(let v=1;v<=m.numPages;v++){const E=(await(await m.getPage(v)).getTextContent()).items.map(I=>I.str).join(" ");w+=`
--- 第 ${v} 頁 ---
${E}
`}r(w),c(w)}catch(p){console.error("PDF 處理失敗:",p),alert(`PDF 處理失敗: ${p.message}`)}finally{s(!1)}}},c=h=>{const g=h.split(`
`).map(b=>b.trim()).filter(b=>b.length>0),p=[/[\u4e00-\u9fff]+.*\d+.*\$?\d+/g,/\d+.*[\u4e00-\u9fff]+.*\d+/g,/熱.*[\u4e00-\u9fff]+.*\d+/g,/冰.*[\u4e00-\u9fff]+.*\d+/g,/[\u4e00-\u9fff]+.*三明治.*\d+/g],m=[],w=[],v=[];g.forEach((b,x)=>{p.forEach(P=>{const _=b.match(P);_&&m.push({line:x+1,content:b,matches:_})});const E=b.match(/\d+/g);E&&w.push({line:x+1,content:b,numbers:E});const I=b.match(/\$?\d{1,3}(,\d{3})*(\.\d{2})?/g);I&&v.push({line:x+1,content:b,amounts:I})}),o({totalLines:g.length,foundProducts:m.slice(0,20),foundNumbers:w.slice(0,20),foundAmounts:v.slice(0,20),rawLines:g.slice(0,50)})},u=async()=>{if(!a)return;const h=`
PDF 分析報告
============

檔案名稱: ${(n==null?void 0:n.name)||"未知"}
分析時間: ${new Date().toLocaleString("zh-TW")}

總行數: ${a.totalLines}

發現的產品資料:
${a.foundProducts.map(g=>`第${g.line}行: ${g.content}`).join(`
`)}

發現的數字資料:
${a.foundNumbers.map(g=>`第${g.line}行: ${g.content} (數字: ${g.numbers.join(", ")})`).join(`
`)}

發現的金額資料:
${a.foundAmounts.map(g=>`第${g.line}行: ${g.content} (金額: ${g.amounts.join(", ")})`).join(`
`)}

原始文字內容 (前50行):
${a.rawLines.join(`
`)}
    `.trim();try{await navigator.clipboard.writeText(h),alert("分析結果已複製到剪貼簿！")}catch(g){console.error("複製失敗:",g),alert("複製失敗，請手動選取文字")}};return f.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:f.jsx("div",{className:"max-w-6xl mx-auto",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"PDF 銷售資料分析器"}),f.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6",children:[f.jsx("input",{ref:l,type:"file",accept:".pdf",onChange:A,className:"hidden"}),f.jsx("button",{onClick:()=>{var h;return(h=l.current)==null?void 0:h.click()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"選擇 PDF 檔案"}),f.jsx("p",{className:"text-gray-600 mt-2",children:"支援 PDF 格式，檔案將在瀏覽器中處理，不會上傳到伺服器"})]}),n&&f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[f.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"檔案資訊"}),f.jsxs("p",{className:"text-blue-800",children:["檔案名稱: ",n.name]}),f.jsxs("p",{className:"text-blue-800",children:["檔案大小: ",(n.size/1024/1024).toFixed(2)," MB"]})]}),i&&f.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600 mr-3"}),f.jsx("span",{className:"text-yellow-800",children:"正在處理 PDF 檔案..."})]})}),a&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"分析結果"}),f.jsx("button",{onClick:u,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"複製分析結果"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900",children:"總行數"}),f.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.totalLines})]}),f.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900",children:"發現產品"}),f.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.foundProducts.length})]}),f.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900",children:"發現金額"}),f.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.foundAmounts.length})]})]}),a.foundProducts.length>0&&f.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"發現的產品資料"}),f.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.foundProducts.map((h,g)=>f.jsxs("div",{className:"bg-gray-50 p-2 rounded text-sm",children:[f.jsxs("span",{className:"text-blue-600 font-mono",children:["第",h.line,"行:"]})," ",h.content]},g))})]}),a.foundAmounts.length>0&&f.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"發現的金額資料"}),f.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.foundAmounts.map((h,g)=>f.jsxs("div",{className:"bg-gray-50 p-2 rounded text-sm",children:[f.jsxs("span",{className:"text-green-600 font-mono",children:["第",h.line,"行:"]})," ",h.content,f.jsxs("span",{className:"text-purple-600 ml-2",children:["(",h.amounts.join(", "),")"]})]},g))})]}),f.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[f.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"原始文字內容 (前50行)"}),f.jsx("div",{className:"bg-gray-50 p-4 rounded max-h-80 overflow-y-auto",children:f.jsx("pre",{className:"text-sm whitespace-pre-wrap font-mono",children:a.rawLines.join(`
`)})})]})]})]})})})}const FNe=B.lazy(()=>Au(()=>import("./CashierManagement-DDBWl6yV.js"),[])),kNe=B.lazy(()=>Au(()=>import("./AdminPanel-CQwRAF2i.js"),[]));function NNe(){const[n,e]=B.useState({checked:!1,connected:!1,error:null});return B.useEffect(()=>{(async()=>{try{const r=await rue();e({checked:!0,connected:r,error:r?null:"無法連接到 Firebase"})}catch(r){console.error("檢查 Firebase 連接時出錯:",r),e({checked:!0,connected:!1,error:r.message||"無法連接到 Firebase"})}})()},[]),f.jsx(nde,{children:f.jsx(qre,{children:f.jsxs(Zue,{children:[n.checked&&!n.connected&&f.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-lg p-4 m-4",children:[f.jsx("h3",{className:"text-amber-500 font-bold mb-2",children:"Firebase 連接警告"}),f.jsxs("p",{className:"text-sm text-text-secondary",children:["應用程序無法連接到 Firebase 服務。部分功能可能無法正常工作。",n.error&&f.jsxs("span",{className:"block mt-1",children:["錯誤: ",n.error]})]}),f.jsx("p",{className:"text-xs text-text-secondary mt-2",children:"您仍然可以使用應用程序，但數據將不會同步到雲端。"})]}),f.jsx(B.Suspense,{fallback:f.jsx(ede,{}),children:f.jsxs(Vre,{children:[f.jsx(qi,{path:"/",element:f.jsx(jre,{to:"/sandwich",replace:!0})}),f.jsx(qi,{path:"/sandwich",element:f.jsx(lde,{})}),f.jsx(qi,{path:"/cashier",element:f.jsx(FNe,{})}),f.jsx(qi,{path:"/alcohol",element:f.jsx(ade,{})}),f.jsx(qi,{path:"/coffee-beans",element:f.jsx(Ade,{})}),f.jsx(qi,{path:"/daily-reports",element:f.jsx(dde,{})}),f.jsx(qi,{path:"/schedule",element:f.jsx(bFe,{})}),f.jsx(qi,{path:"/data-tester",element:f.jsx(MFe,{})}),f.jsx(qi,{path:"/pdf-analyzer",element:f.jsx(PNe,{})}),f.jsx(qi,{path:"/poursteady",element:f.jsx(ide,{})}),f.jsx(qi,{path:"/admin",element:f.jsx(kNe,{})}),f.jsx(qi,{path:"*",element:f.jsx(tde,{})})]})})]})})})}A2.createRoot(document.getElementById("root")).render(f.jsx(nS.StrictMode,{children:f.jsx(NNe,{})}));export{lw as F,nS as R,Au as _,Dj as a,Oz as b,dO as c,kz as d,Jle as e,Wm as f,Eue as g,No as h,gr as i,f as j,bv as k,vv as l,HNe as m,jNe as n,VNe as o,xue as p,Iz as q,B as r,Kd as s,iue as t,f6 as u,QNe as v,aw as w,Zle as x,tue as y};
