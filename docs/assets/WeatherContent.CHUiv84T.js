import{r as s,j as e,W as g,Z as u,$ as C,a0 as L,a1 as M,a2 as S}from"./index.CE3AVWnB.js";function E({title:n,titleId:l,...c},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":l},c),n?s.createElement("title",{id:l},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const W=s.forwardRef(E);function $({title:n,titleId:l,...c},d){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":l},c),n?s.createElement("title",{id:l},n):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const N=s.forwardRef($);function D(){const[n,l]=s.useState(!1),[c,d]=s.useState(null),[t,v]=s.useState(null),[i,w]=s.useState(null),[m,h]=s.useState(""),[y,b]=s.useState(!1),p=async(a,r,x=null)=>{l(!0),d(null);try{const o=await S(a,r);v(o),w(x||{latitude:a,longitude:r})}catch(o){d(o.message),console.error("ç²å–å¤©æ°£å¤±æ•—:",o)}finally{l(!1)}},j=async()=>{l(!0),d(null);try{const a=await L();await p(a.latitude,a.longitude,"ç•¶å‰ä½ç½®")}catch(a){d(a.message),console.error("ç²å–ç•¶å‰ä½ç½®å¤±æ•—:",a)}finally{l(!1)}},f=async()=>{if(m.trim()){b(!0),d(null);try{const a=await M(m);await p(a.latitude,a.longitude,{name:a.name,country:a.country,admin1:a.admin1}),h("")}catch(a){d(a.message),console.error("æœç´¢åŸå¸‚å¤±æ•—:",a)}finally{b(!1)}}},_=async()=>{if(!i)return;const a=typeof i=="string"?null:i.latitude,r=typeof i=="string"?null:i.longitude;a&&r&&await p(a,r,i)};return n&&!t?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-text-secondary",children:"è¼‰å…¥å¤©æ°£æ•¸æ“šä¸­..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary mb-2",children:"å¤©æ°£"}),e.jsx("p",{className:"text-text-secondary",children:"æŸ¥çœ‹ç•¶å‰å¤©æ°£å’Œæœªä¾† 7 å¤©é å ±"})]}),e.jsx("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-secondary"}),e.jsx("input",{type:"text",value:m,onChange:a=>h(a.target.value),onKeyPress:a=>a.key==="Enter"&&f(),placeholder:"è¼¸å…¥åŸå¸‚åç¨±ï¼ˆä¾‹å¦‚ï¼šå°åŒ—ã€Tokyoã€New Yorkï¼‰",className:"w-full pl-10 pr-4 py-2 bg-surface/60 border border-white/10 rounded-lg text-primary placeholder-text-secondary focus:outline-none focus:border-primary/50"})]}),e.jsx("button",{onClick:f,disabled:y||!m.trim(),className:"px-4 py-2 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-lg text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"æœç´¢ä¸­...":"æœç´¢"})]}),e.jsxs("button",{onClick:j,disabled:n,className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-500/30 rounded-lg text-blue-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{children:"ä½¿ç”¨ç•¶å‰ä½ç½®"})]}),t&&e.jsxs("button",{onClick:_,disabled:n,className:"px-4 py-2 bg-surface/60 hover:bg-surface/80 border border-white/10 rounded-lg text-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(g,{className:`w-5 h-5 ${n?"animate-spin":""}`}),e.jsx("span",{children:"åˆ·æ–°"})]})]})}),c&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-4 text-red-400",children:e.jsx("p",{children:c})}),t&&e.jsxs("div",{className:"space-y-6",children:[t.current&&e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-purple-500/20 backdrop-blur-md border border-white/10 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[i&&e.jsxs("div",{className:"flex items-center gap-2 text-text-secondary mb-2",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{children:typeof i=="string"?i:`${i.name||"æœªçŸ¥"}, ${i.country||""} ${i.admin1?`(${i.admin1})`:""}`})]}),e.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[e.jsxs("div",{className:"text-4xl font-bold text-primary",children:[Math.round(t.current.temperature_2m),"Â°C"]}),t.daily&&t.daily.temperature_2m_max&&t.daily.temperature_2m_min&&t.daily.time&&e.jsxs("div",{className:"flex items-center gap-2 text-lg text-text-secondary",children:[e.jsxs("span",{className:"text-primary font-semibold",children:[Math.round(t.daily.temperature_2m_max[0]),"Â°"]}),e.jsx("span",{className:"text-text-secondary",children:"/"}),e.jsxs("span",{className:"text-text-secondary",children:[Math.round(t.daily.temperature_2m_min[0]),"Â°"]})]})]}),t.daily&&t.daily.temperature_2m_max&&t.daily.temperature_2m_min&&e.jsxs("div",{className:"text-sm text-text-secondary",children:["æœ€é«˜ ",Math.round(t.daily.temperature_2m_max[0]),"Â°C / æœ€ä½ ",Math.round(t.daily.temperature_2m_min[0]),"Â°C"]})]}),e.jsx("div",{className:"text-6xl",children:u(t.current.weather_code).icon})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"å¤©æ°£"}),e.jsx("div",{className:"text-primary font-medium",children:u(t.current.weather_code).description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"ä¸‹é›¨æ©Ÿç‡"}),e.jsx("div",{className:"text-primary font-medium",children:t.daily&&t.daily.precipitation_probability_max&&t.daily.precipitation_probability_max[0]!==void 0?`${t.daily.precipitation_probability_max[0]}%`:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"æ¿•åº¦"}),e.jsxs("div",{className:"text-primary font-medium",children:[t.current.relative_humidity_2m,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"é¢¨é€Ÿ"}),e.jsxs("div",{className:"text-primary font-medium",children:[t.current.wind_speed_10m," km/h"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-secondary mb-1",children:"é¢¨å‘"}),e.jsxs("div",{className:"text-primary font-medium",children:[t.current.wind_direction_10m,"Â°"]})]})]})]}),t.daily&&e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-primary mb-4",children:"7 å¤©é å ±"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4",children:t.daily.time.map((a,r)=>{const x=new Date(a),o=x.toLocaleDateString("zh-TW",{weekday:"short"}),k=x.toLocaleDateString("zh-TW",{month:"short",day:"numeric"});return e.jsxs("div",{className:"bg-surface/60 border border-white/10 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-sm text-text-secondary mb-2",children:o}),e.jsx("div",{className:"text-xs text-text-secondary mb-3",children:k}),e.jsx("div",{className:"text-3xl mb-3",children:u(t.daily.weather_code[r]).icon}),e.jsx("div",{className:"text-sm text-text-secondary mb-2",children:u(t.daily.weather_code[r]).description}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-primary",children:[Math.round(t.daily.temperature_2m_max[r]),"Â°"]}),e.jsx("span",{className:"text-text-secondary",children:"/"}),e.jsxs("span",{className:"text-sm text-text-secondary",children:[Math.round(t.daily.temperature_2m_min[r]),"Â°"]})]}),e.jsxs("div",{className:"text-xs text-text-secondary",children:["æœ€é«˜ ",Math.round(t.daily.temperature_2m_max[r]),"Â°C / æœ€ä½ ",Math.round(t.daily.temperature_2m_min[r]),"Â°C"]}),t.daily.precipitation_probability_max&&t.daily.precipitation_probability_max[r]!==void 0&&e.jsxs("div",{className:"text-xs text-blue-400 mt-2",children:["ğŸŒ§ï¸ ä¸‹é›¨æ©Ÿç‡ ",t.daily.precipitation_probability_max[r],"%"]}),t.daily.precipitation_sum&&t.daily.precipitation_sum[r]>0&&e.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:["ğŸ’§ é™é›¨é‡ ",t.daily.precipitation_sum[r],"mm"]})]},a)})})]})]}),!t&&!n&&!c&&e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-12 text-center",children:[e.jsx(C,{className:"w-16 h-16 text-text-secondary mx-auto mb-4"}),e.jsx("p",{className:"text-text-secondary text-lg mb-4",children:"è«‹æœç´¢åŸå¸‚æˆ–ä½¿ç”¨ç•¶å‰ä½ç½®ä¾†æŸ¥çœ‹å¤©æ°£"}),e.jsx("button",{onClick:j,className:"px-6 py-3 bg-primary/20 hover:bg-primary/30 border border-primary/30 rounded-lg text-primary transition-colors",children:"ä½¿ç”¨ç•¶å‰ä½ç½®"})]})]})}export{D as default};
