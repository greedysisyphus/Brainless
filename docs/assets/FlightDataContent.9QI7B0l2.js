const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.CE3AVWnB.js","assets/index.DDtoVjVE.css"])))=>i.map(i=>d[i]);
import{r as c,j as e,F as ie,a as de,b as ce,R as S,B as M,C,X as _,Y as $,T as L,c as F,d as xe,e as he,f as me,g as pe,_ as ue}from"./index.CE3AVWnB.js";function be(){const[u,E]=c.useState(()=>new Date().toISOString().split("T")[0]),[n,I]=c.useState(null),[w,j]=c.useState({message:"",type:""}),[g,P]=c.useState(!1),[T,b]=c.useState(0),[z,O]=c.useState("simple"),[f,B]=c.useState("data"),[U,V]=c.useState(null),[R,X]=c.useState(!1),[v,K]=c.useState(null),[m,q]=c.useState([]),[H,W]=c.useState(!1),p=c.useRef(null),J=c.useRef(null),G=t=>new Date(t+"T00:00:00").toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),Q=t=>{if(!t)return"";const o=new Date-t,i=Math.floor(o/6e4),a=Math.floor(i/60),r=Math.floor(a/24);return i<1?"剛剛更新":i<60?`${i} 分鐘前更新`:a<24?`${a} 小時前更新`:r<7?`${r} 天前更新`:t.toLocaleString("zh-TW",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})},y=c.useCallback(async(t,s=null)=>{if(!t){j({message:"請選擇日期",type:"error"});return}p.current&&p.current.abort();const o=new AbortController;p.current=o;const i=s||o.signal;j({message:"正在載入資料...",type:"loading"}),P(!0),b(0);const r=`/Brainless/data/flight-data-${t}.json`;console.log("Loading data from:",r);try{b(30);const d=await fetch(r,{signal:i});if(b(60),!d.ok)throw d.status===404?new Error(`找不到 ${t} 的航班資料`):new Error(`HTTP 錯誤: ${d.status}`);const h=await d.json();b(80);const x=d.headers.get("last-modified");let l=null;x?l=new Date(x):h.updated_at?l=new Date(h.updated_at):l=new Date,V(l),b(100),I(h),j({message:`✅ 成功載入 ${G(t)} 的資料`,type:"success"})}catch(d){d.name==="AbortError"?j({message:"載入已取消",type:"error"}):j({message:`❌ 錯誤: ${d.message}`,type:"error"}),I(null)}finally{P(!1),b(0),p.current=null}},[]),Z=()=>{y(u)},ee=()=>{const t=new Date().toISOString().split("T")[0];E(t),y(t)},te=()=>{const t=new Date;t.setDate(t.getDate()-1);const s=t.toISOString().split("T")[0];E(s),y(s)},se=()=>{p.current&&p.current.abort()},A=c.useCallback(async(t=7)=>{W(!0);const s="/Brainless/data/",o=new Date,i=[];for(let a=0;a<t;a++){const r=new Date(o);r.setDate(r.getDate()-a);const d=r.toISOString().split("T")[0],h=`${s}flight-data-${d}.json`;i.push(fetch(h).then(x=>x.ok?x.json():null).catch(()=>null))}try{const r=(await Promise.all(i)).map((d,h)=>{var l;if(!d)return null;const x=new Date(o);return x.setDate(x.getDate()-h),{date:x.toISOString().split("T")[0],dateLabel:x.toLocaleDateString("zh-TW",{month:"short",day:"numeric"}),totalFlights:((l=d.summary)==null?void 0:l.total_flights)||0,flights:d.flights||[]}}).filter(Boolean).reverse();q(r)}catch(a){console.error("載入多天數據失敗:",a)}finally{W(!1)}},[]);c.useEffect(()=>{f==="statistics"&&m.length===0&&A(7)},[f,m.length,A]),c.useEffect(()=>(y(u),()=>{p.current&&p.current.abort(),v&&clearInterval(v)}),[]),c.useEffect(()=>{if(R){const t=setInterval(()=>{y(u)},3e5);return K(t),()=>clearInterval(t)}else v&&(clearInterval(v),K(null))},[R,u,y]);const N=c.useMemo(()=>{if(!n||!n.flights)return null;const t={};n.flights.forEach(a=>{const r=a.gate;t[r]=(t[r]||0)+1});const s={};n.flights.forEach(a=>{const r=parseInt(a.time.split(":")[0]);s[r]=(s[r]||0)+1});const o=Object.entries(t).map(([a,r])=>({name:a,value:r})).sort((a,r)=>a.name.localeCompare(r.name)),i=Array.from({length:24},(a,r)=>({hour:`${r.toString().padStart(2,"0")}:00`,count:s[r]||0}));return{gateDistribution:o,hourlyDistribution:i}},[n]),k=c.useMemo(()=>!m||m.length===0?null:{data:Array.from({length:24},(s,o)=>{const a={hour:`${o.toString().padStart(2,"0")}:00`};return m.forEach(r=>{const d=r.flights.filter(h=>parseInt(h.time.split(":")[0])===o).length;a[r.dateLabel]=d}),a}),dates:m.map(s=>s.dateLabel)},[m]),re=c.useMemo(()=>!n||!n.summary?null:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"總航班數"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.summary.total_flights??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-red-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"17:00 前"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.summary["before_17:00"]??n.summary.before_17_00??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-blue-500 rounded-xl p-6 text-center text-white",children:[e.jsx("h3",{className:"text-sm opacity-90 mb-2",children:"17:00 後"}),e.jsx("div",{className:"text-4xl font-bold mb-1",children:n.summary["after_17:00"]??n.summary.after_17_00??0}),e.jsx("div",{className:"text-xs opacity-80",children:"班"})]})]}),[n]),Y=c.useCallback(t=>{if(!t.datetime)return!1;const i=new Date(t.datetime)-new Date;return i>0&&i<=60*60*1e3&&!t.status.includes("DEPARTED")},[]),ae=()=>e.jsx("div",{className:"space-y-4 animate-pulse",children:e.jsx("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl overflow-hidden shadow-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-purple-500/25 via-pink-500/20 to-purple-500/25 border-b-2 border-purple-500/40",children:[e.jsx("th",{className:"px-5 py-4",children:e.jsx("div",{className:"h-4 bg-white/20 rounded w-16"})}),e.jsx("th",{className:"px-5 py-4",children:e.jsx("div",{className:"h-4 bg-white/20 rounded w-20"})}),e.jsx("th",{className:"px-5 py-4",children:e.jsx("div",{className:"h-4 bg-white/20 rounded w-24"})}),e.jsx("th",{className:"px-5 py-4",children:e.jsx("div",{className:"h-4 bg-white/20 rounded w-20"})})]})}),e.jsx("tbody",{children:Array.from({length:5}).map((t,s)=>e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsx("div",{className:"h-5 bg-white/10 rounded w-12"})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("div",{className:"h-6 bg-white/10 rounded w-16"})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("div",{className:"h-4 bg-white/10 rounded w-24"})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("div",{className:"h-6 bg-white/10 rounded w-20"})})]},s))})]})})})}),le=({flight:t})=>{const s=t.codeshare_flights?t.codeshare_flights.length:0,o=Y(t);return e.jsxs("div",{className:`bg-surface/40 backdrop-blur-md border rounded-lg p-4 transition-all ${o?"border-yellow-500/50 bg-yellow-500/10 shadow-lg shadow-yellow-500/20":"border-white/10 hover:border-purple-500/30"}`,children:[o&&e.jsx("div",{className:"mb-2 flex items-center gap-2",children:e.jsx("span",{className:"bg-yellow-500 text-white px-2 py-1 rounded text-xs font-bold",children:"即將出發（1小時內）"})}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-purple-400",children:t.time}),s>0&&e.jsxs("span",{className:"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 px-2 py-1 rounded-full text-xs font-semibold",children:["共同航班 ",s," 個"]})]}),e.jsx("span",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:t.gate})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"航班："}),e.jsx("span",{children:t.flight_code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"航空公司："}),e.jsx("span",{children:t.airline_name||t.airline_code})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"目的地："}),e.jsx("span",{children:t.destination})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"狀態："}),e.jsx("span",{children:t.status})]}),t.aircraft&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{className:"text-primary",children:"機型："}),e.jsx("span",{children:t.aircraft})]})]}),s>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[e.jsx("strong",{className:"text-purple-400 text-sm block mb-2",children:"共同航班："}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.codeshare_flights.map((i,a)=>e.jsxs("span",{className:"bg-white/10 px-2 py-1 rounded text-xs",children:[i.flight_code," (",i.airline_name,")"]},a))})]})]})},oe=()=>{if(!n||!n.flights)return"";const t=G(u),s=n.flights.map(o=>{const i=o.codeshare_flights||[],r=[o.flight_code,...i.map(l=>l.flight_code)].join(" / "),d=o.status||"",x=(l=>l.includes("DEPARTED")||l.includes("已出發")?"#34c759":l.includes("BOARDING")||l.includes("登機中")?"#007aff":l.includes("DELAYED")||l.includes("延誤")?"#ff9500":l.includes("CANCELLED")||l.includes("取消")?"#ff3b30":"#8e8e93")(d);return`
        <tr style="background: ${n.flights.indexOf(o)%2===0?"#fafafa":"white"};">
          <td style="padding: 16px 20px; text-align: left; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${o.time}</td>
          <td style="padding: 16px 20px; text-align: center; color: #515154; font-size: 15px; border-bottom: 1px solid #e5e5e7;">
            <span style="background: #007aff; color: white; padding: 4px 12px; border-radius: 8px; font-weight: 600; font-size: 13px; display: inline-flex; align-items: center; justify-content: center; height: 28px; line-height: 1;">${o.gate}</span>
          </td>
          <td style="padding: 16px 20px; text-align: left; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">${r}</td>
          <td style="padding: 16px 20px; text-align: left; color: ${x}; font-size: 14px; font-weight: 500; border-bottom: 1px solid #e5e5e7;">${d||"未知"}</td>
        </tr>
      `}).join("");return`
      <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 40px; background: #fafafa; color: #1d1d1f;">
        <div style="background: white; border-radius: 20px; padding: 50px; box-shadow: 0 8px 32px rgba(0,0,0,0.08);">
          <div style="text-align: center; margin-bottom: 50px;">
            <h1 style="color: #1d1d1f; margin: 0 0 12px 0; font-size: 36px; font-weight: 600; letter-spacing: -0.5px; line-height: 1.2;">桃園機場 D11-D18 航班資料</h1>
            <p style="color: #86868b; margin: 0; font-size: 17px; font-weight: 400;">${t}</p>
          </div>
          
          <div style="background: white; border-radius: 16px; overflow: hidden; border: 1px solid #e5e5e7;">
            <table style="width: 100%; border-collapse: collapse; background: white;">
              <thead>
                <tr style="background: #f5f5f7; height: 48px;">
                  <th style="padding: 0 20px; text-align: left; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">時間</th>
                  <th style="padding: 0 20px; text-align: center; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">登機門</th>
                  <th style="padding: 0 20px; text-align: left; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">航班</th>
                  <th style="padding: 0 20px; text-align: left; vertical-align: middle; font-weight: 600; color: #1d1d1f; font-size: 15px; border-bottom: 1px solid #e5e5e7;">狀態</th>
                </tr>
              </thead>
              <tbody>
                ${s}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    `},ne=async()=>{try{const t=(await ue(async()=>{const{default:r}=await import("./index.CE3AVWnB.js").then(d=>d.b$);return{default:r}},__vite__mapDeps([0,1]))).default,s=document.createElement("div");s.innerHTML=oe(),s.style.position="absolute",s.style.left="-9999px",s.style.top="0",s.style.width="800px",s.style.height="auto",s.style.overflow="visible",document.body.appendChild(s),await new Promise(r=>setTimeout(r,500));const o=await t(s.firstElementChild,{backgroundColor:"#fafafa",scale:2,useCORS:!0,allowTaint:!0,logging:!1});document.body.removeChild(s);const i=document.createElement("a"),a=u.replace(/-/g,"");i.download=`航班資料_${a}.png`,i.href=o.toDataURL("image/png",1),i.click()}catch(t){console.error("匯出圖片失敗:",t),alert(`匯出圖片失敗：${t.message}`)}},D=["#8b5cf6","#ec4899","#06b6d4","#3b82f6","#f97316","#10b981","#ef4444","#6366f1"];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 md:mb-10 relative",children:[e.jsx("div",{className:"absolute inset-0 flex justify-center -z-10",children:e.jsx("div",{className:"w-64 h-64 sm:w-80 sm:h-80 md:w-96 md:h-96 bg-primary/10 rounded-full blur-3xl animate-pulse-glow opacity-50"})}),e.jsxs("div",{className:"inline-flex items-center justify-center mb-4 sm:mb-5 md:mb-6 relative group title-icon-group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary via-purple-500 to-blue-500 rounded-2xl blur-xl opacity-50 group-hover:opacity-75 transition-opacity duration-500"}),e.jsxs("div",{className:"relative inline-flex items-center justify-center w-16 h-16 sm:w-18 sm:h-18 md:w-20 md:h-20 bg-gradient-to-br from-primary/30 via-purple-500/30 to-blue-500/30 rounded-xl sm:rounded-2xl border-2 border-primary/50 shadow-2xl shadow-primary/30 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/0 via-white/20 to-primary/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-gradient bg-[length:200%_100%]"}),e.jsx(ie,{className:"w-8 h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 text-primary relative z-10 transform group-hover:scale-110 transition-transform duration-300"})]})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-2 sm:mb-3 relative px-4",children:[e.jsx("span",{className:"bg-gradient-to-r from-primary via-purple-400 via-blue-400 to-primary bg-clip-text text-transparent bg-[length:200%_100%] animate-gradient",children:"桃園機場 D11-D18 航班資料"}),e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-primary via-purple-400 via-blue-400 to-primary bg-clip-text text-transparent blur-xl opacity-30 -z-10 animate-pulse-glow",children:"桃園機場 D11-D18 航班資料"})]}),U&&e.jsx("div",{className:"text-sm text-text-secondary mt-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-surface/40 backdrop-blur-sm border border-white/10 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4 text-primary/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{children:["最後更新：",Q(U)]})]})})]}),e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6 shadow-md",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[e.jsx("label",{className:"font-semibold text-primary",children:"選擇日期："}),e.jsx("input",{type:"date",value:u,onChange:t=>E(t.target.value),className:"px-4 py-2 border border-white/20 rounded-lg bg-surface/50 text-primary focus:outline-none focus:border-purple-500/50"}),e.jsx("button",{onClick:Z,disabled:g,className:"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"載入資料"}),e.jsx("button",{onClick:ee,disabled:g,className:"px-6 py-2 bg-purple-500/50 hover:bg-purple-500/70 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"今天"}),e.jsx("button",{onClick:te,disabled:g,className:"px-6 py-2 bg-purple-500/50 hover:bg-purple-500/70 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"昨天"}),g&&e.jsxs("button",{onClick:se,className:"px-4 py-2 bg-red-500/50 hover:bg-red-500/70 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"取消"]}),e.jsxs("label",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:t=>X(t.target.checked),className:"w-4 h-4 text-purple-500 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"自動刷新（每 5 分鐘）"})]})]}),g&&T>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"載入進度"}),e.jsxs("span",{className:"text-sm text-text-secondary",children:[T,"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${T}%`}})})]}),w.message&&e.jsx("div",{className:`p-3 rounded-lg text-sm ${w.type==="loading"?"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 border border-yellow-500/30":w.type==="error"?"bg-red-500/20 text-red-600 dark:text-red-400 border border-red-500/30":"bg-green-500/20 text-green-600 dark:text-green-400 border border-green-500/30"}`,children:w.message})]}),e.jsxs("div",{className:"flex gap-2 border-b border-white/10 mb-6",children:[e.jsx("button",{onClick:()=>B("data"),className:`px-4 py-2 font-medium transition-colors ${f==="data"?"text-primary border-b-2 border-primary":"text-text-secondary hover:text-primary"}`,children:"航班資料"}),e.jsx("button",{onClick:()=>B("statistics"),className:`px-4 py-2 font-medium transition-colors ${f==="statistics"?"text-primary border-b-2 border-primary":"text-text-secondary hover:text-primary"}`,children:"統計分析"})]}),f==="data"&&e.jsxs(e.Fragment,{children:[re,g&&!n?e.jsx(ae,{}):n&&n.flights?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b-2 border-purple-500/30 pb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary",children:"桃園機場 D11-D18 航班資料"}),e.jsx("p",{className:"text-sm text-text-secondary mt-1",children:"航班列表"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>O("simple"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${z==="simple"?"bg-purple-500 text-white":"bg-surface/40 text-text-secondary hover:bg-surface/60"}`,children:"簡潔模式"}),e.jsx("button",{onClick:()=>O("detailed"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${z==="detailed"?"bg-purple-500 text-white":"bg-surface/40 text-text-secondary hover:bg-surface/60"}`,children:"詳細模式"}),e.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold transition-colors flex items-center gap-2",title:"匯出為 PNG",children:[e.jsx(ce,{className:"w-4 h-4"}),"匯出"]})]})]}),n.flights.length===0?e.jsx("div",{className:"text-center py-12 text-text-secondary",children:e.jsx("p",{children:"當天沒有航班資料"})}):z==="simple"?e.jsx("div",{ref:J,className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl overflow-hidden shadow-lg",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-purple-500/25 via-pink-500/20 to-purple-500/25 border-b-2 border-purple-500/40",children:[e.jsx("th",{className:"px-5 py-4 text-left text-sm font-bold text-primary tracking-wide",children:"時間"}),e.jsx("th",{className:"px-5 py-4 text-left text-sm font-bold text-primary tracking-wide",children:"登機門"}),e.jsx("th",{className:"px-5 py-4 text-left text-sm font-bold text-primary tracking-wide",children:"航班"}),e.jsx("th",{className:"px-5 py-4 text-left text-sm font-bold text-primary tracking-wide",children:"狀態"})]})}),e.jsx("tbody",{children:n.flights.map((t,s)=>{const o=t.codeshare_flights||[],a=[t.flight_code,...o.map(l=>l.flight_code)].join(" / "),r=Y(t),d=t.status||"",x=(l=>l.includes("DEPARTED")||l.includes("已出發")?"bg-green-500/25 text-green-300 border-green-400/40":l.includes("BOARDING")||l.includes("登機中")?"bg-blue-500/25 text-blue-300 border-blue-400/40":l.includes("DELAYED")||l.includes("延誤")?"bg-yellow-500/25 text-yellow-300 border-yellow-400/40":l.includes("CANCELLED")||l.includes("取消")?"bg-red-500/25 text-red-300 border-red-400/40":"bg-gray-500/20 text-gray-300 border-gray-400/30")(d);return e.jsxs("tr",{className:`border-b border-white/10 transition-all duration-200 ${r?"bg-yellow-500/20 hover:bg-yellow-500/30":s%2===0?"bg-white/3 hover:bg-white/10":"bg-white/6 hover:bg-white/12"}`,children:[e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:`font-bold text-lg tracking-tight drop-shadow-sm ${r?"text-yellow-300":"text-purple-300 dark:text-purple-200"}`,children:t.time})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold shadow-md inline-flex items-center justify-center min-w-[3.5rem] h-7",children:t.gate})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"text-text-secondary font-medium",children:a})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-bold border-2 ${x} shadow-sm inline-block`,children:d||"未知"})})]},s)})})]})})}):e.jsx("div",{className:"space-y-3",children:n.flights.map((t,s)=>e.jsx(le,{flight:t},s))})]}):null]}),f==="statistics"&&e.jsxs("div",{className:"space-y-6",children:[N&&n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"各登機門航班數量分布（當天）"}),e.jsx(S,{width:"100%",height:300,children:e.jsxs(M,{data:N.gateDistribution,children:[e.jsx(C,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(_,{dataKey:"name",stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx($,{stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx(L,{contentStyle:{backgroundColor:"rgba(30, 30, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"}}),e.jsx(F,{dataKey:"value",fill:"#8b5cf6",radius:[8,8,0,0],children:N.gateDistribution.map((t,s)=>e.jsx(xe,{fill:D[s%D.length]},`cell-${s}`))})]})})]}),e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"時間分布（每小時航班數）（當天）"}),e.jsx(S,{width:"100%",height:300,children:e.jsxs(M,{data:N.hourlyDistribution,children:[e.jsx(C,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(_,{dataKey:"hour",stroke:"rgba(255,255,255,0.6)",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:80}),e.jsx($,{stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx(L,{contentStyle:{backgroundColor:"rgba(30, 30, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"}}),e.jsx(F,{dataKey:"count",fill:"#ec4899",radius:[8,8,0,0]})]})})]})]}),e.jsx("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm text-text-secondary",children:"載入天數："}),e.jsxs("select",{onChange:t=>A(parseInt(t.target.value)),className:"px-4 py-2 border border-white/20 rounded-lg bg-surface/50 text-primary focus:outline-none focus:border-purple-500/50",defaultValue:"7",children:[e.jsx("option",{value:"3",children:"最近 3 天"}),e.jsx("option",{value:"7",children:"最近 7 天"}),e.jsx("option",{value:"14",children:"最近 14 天"}),e.jsx("option",{value:"30",children:"最近 30 天"})]}),H&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-text-secondary",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"載入中..."})]})]})}),m.length>0&&e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"每天航班總數統計"}),e.jsx(S,{width:"100%",height:300,children:e.jsxs(M,{data:m,children:[e.jsx(C,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(_,{dataKey:"dateLabel",stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx($,{stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx(L,{contentStyle:{backgroundColor:"rgba(30, 30, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"},formatter:t=>[`${t} 班`,"總航班數"]}),e.jsx(F,{dataKey:"totalFlights",fill:"#8b5cf6",radius:[8,8,0,0]})]})})]}),k&&k.data&&e.jsxs("div",{className:"bg-surface/40 backdrop-blur-md border border-white/10 rounded-xl p-6 shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:"每小時航班數趨勢（多天比較）"}),e.jsx(S,{width:"100%",height:400,children:e.jsxs(he,{data:k.data,children:[e.jsx(C,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(_,{dataKey:"hour",stroke:"rgba(255,255,255,0.6)",style:{fontSize:"11px"},angle:-45,textAnchor:"end",height:80}),e.jsx($,{stroke:"rgba(255,255,255,0.6)",style:{fontSize:"12px"}}),e.jsx(L,{contentStyle:{backgroundColor:"rgba(30, 30, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px"}}),e.jsx(me,{}),k.dates.map((t,s)=>e.jsx(pe,{type:"monotone",dataKey:t,stroke:D[s%D.length],strokeWidth:2,dot:{r:3},activeDot:{r:5}},t))]})})]}),!H&&m.length===0&&e.jsx("div",{className:"text-center py-12 text-text-secondary",children:e.jsx("p",{children:"請選擇載入天數以查看統計數據"})})]}),!g&&!n&&e.jsxs("div",{className:"text-center py-12 text-text-secondary",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 opacity-50",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"請選擇日期載入航班資料"}),e.jsx("p",{children:"選擇上方日期並點擊「載入資料」按鈕"})]})]})}export{be as default};
